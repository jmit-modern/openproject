(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+yTb":function(e,n){var t;void 0===(t=jQuery).fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),l=-1,i=this.length;++l<i&&(n.context=n[0]=this[l])&&!1!==e.call(n[0],l,n););return this}}),function(e,n){"use strict";function t(n){var t=e(document.createTextNode(""));n.before(t),t.before(n),t.remove()}function l(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return N[e]||e})}function i(e,n){for(var t=0,l=n.length;l>t;t+=1)if(r(e,n[t]))return t;return-1}function r(e,t){return e===t||e!==n&&t!==n&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function o(e,n,t){var l,i,r;if(null===e||e.length<1)return[];for(i=0,r=(l=e.split(n)).length;r>i;i+=1)l[i]=t(l[i]);return l}function u(e){return e.outerWidth(!1)-e.width()}function a(t){var l="keyup-change-value";t.on("keydown",function(){e.data(t,l)===n&&e.data(t,l,t.val())}),t.on("keyup",function(){var i=e.data(t,l);i!==n&&t.val()!==i&&(e.removeData(t,l),t.trigger("keyup-change"))})}function s(t){t.on("mousemove",function(t){var l=E;(l===n||l.x!==t.pageX||l.y!==t.pageY)&&e(t.target).trigger("mousemove-filtered",t)})}function c(e,t,l){var i;return l=l||n,function(){var n=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(l,n)},e)}}function d(n){var t=0,l=0;if("selectionStart"in(n=e(n)[0]))t=n.selectionStart,l=n.selectionEnd-t;else if("selection"in document){n.focus();var i=document.selection.createRange();l=document.selection.createRange().text.length,i.moveStart("character",-n.value.length),t=i.text.length-l}return{offset:t,length:l}}function p(e){e.preventDefault(),e.stopPropagation()}function h(n){if(!x){var t=n[0].currentStyle||window.getComputedStyle(n[0],null);(x=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:t.fontSize,fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,textTransform:t.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(x)}return x.text(n.val()),x.width()}function f(n,t,l){var i,r,o=[];(i=e.trim(n.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)}),(i=e.trim(t.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&((r=l(this))&&o.push(r))}),n.attr("class",o.join(" "))}function g(e,n,t,i){var r=l(e.toUpperCase()).indexOf(l(n.toUpperCase())),o=n.length;return 0>r?void t.push(i(e)):(t.push(i(e.substring(0,r))),t.push("<span class='select2-match'>"),t.push(i(e.substring(r,r+o))),t.push("</span>"),void t.push(i(e.substring(r+o,e.length))))}function m(e){var n={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return n[e]})}function v(t){var l,i=null,r=t.quietMillis||100,o=t.url,u=this;return function(a){window.clearTimeout(l),l=window.setTimeout(function(){var l=t.data,r=o,s=t.transport||e.fn.select2.ajaxDefaults.transport,c={type:t.type||"GET",cache:t.cache||!1,jsonpCallback:t.jsonpCallback||n,dataType:t.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,c);l=l?l.call(u,a.term,a.page,a.context):null,r="function"==typeof r?r.call(u,a.term,a.page,a.context):r,i&&"function"==typeof i.abort&&i.abort(),t.params&&(e.isFunction(t.params)?e.extend(d,t.params.call(u)):e.extend(d,t.params)),e.extend(d,{url:r,dataType:t.dataType,data:l,success:function(e){var n=t.results(e,a.page,a);a.callback(n)},error:function(e,n,t){var l={hasError:!0,jqXHR:e,textStatus:n,errorThrown:t};a.callback(l)}}),i=s.call(u,d)},r)}}function b(n){var t,l,i=n,r=function(e){return""+e.text};e.isArray(i)&&(i={results:l=i}),!1===e.isFunction(i)&&(l=i,i=function(){return l});var o=i();return o.text&&(r=o.text,e.isFunction(r)||(t=o.text,r=function(e){return e[t]})),function(n){var t,l=n.term,o={results:[]};return""===l?void n.callback(i()):(t=function(i,o){var u,a;if((i=i[0]).children){for(a in u={},i)i.hasOwnProperty(a)&&(u[a]=i[a]);u.children=[],e(i.children).each2(function(e,n){t(n,u.children)}),(u.children.length||n.matcher(l,r(u),i))&&o.push(u)}else n.matcher(l,r(i),i)&&o.push(i)},e(i().results).each2(function(e,n){t(n,o.results)}),void n.callback(o))}}function y(t){var l=e.isFunction(t);return function(i){var r=i.term,o={results:[]},u=l?t(i):t;e.isArray(u)&&(e(u).each(function(){var e=this.text!==n,t=e?this.text:this;(""===r||i.matcher(r,t))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o))}}function w(n,t){if(e.isFunction(n))return!0;if(!n)return!1;if("string"==typeof n)return!0;throw new Error(t+" must be a string, function, or falsy value")}function C(n,t){if(e.isFunction(n)){var l=Array.prototype.slice.call(arguments,2);return n.apply(t,l)}return n}function k(n){var t=0;return e.each(n,function(e,n){n.children?t+=k(n.children):t++}),t}function I(){var n=this;e.each(arguments,function(e,t){n[t].remove(),n[t]=null})}function j(n,t){var l=function(){};return l.prototype=new n,l.prototype.constructor=l,l.prototype.parent=n.prototype,l.prototype=e.extend(l.prototype,t),l}if(window.Select2===n){var R,P,S,_,x,T,O,E={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&123>=e}},F="<div class='select2-measure-scrollbar'></div>",N={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};T=e(document),_=function(){var e=1;return function(){return e++}}(),R=j(Object,{bind:function(e){var n=this;return function(){e.apply(n,arguments)}},init:function(t){var l,r,o=".select2-results";this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==n&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+_()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",t.element.attr("title")),this.body=e(document.body),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(C(t.containerCss,this.opts.element)),this.container.addClass(C(t.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(t.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=l=this.container.find(o),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",p),s(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(e,n){var t=c(e,function(e){n.trigger("scroll-debounced",e)});n.on("scroll",function(e){i(e.target,n.get())>=0&&t(e)})}(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&l.mousewheel(function(e,n,t,i){var r=l.scrollTop();i>0&&0>=r-i?(l.scrollTop(0),p(e)):0>i&&l.get(0).scrollHeight-l.scrollTop()+i<=l.height()&&(l.scrollTop(l.get(0).scrollHeight-l.height()),p(e))}),a(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",function(){r.addClass("select2-focused")}),r.on("blur",function(){r.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(n){e(n.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(n),this.selectHighlighted(n))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=n,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength);var u=t.element.prop("disabled");u===n&&(u=!1),this.enable(!u);var d=t.element.prop("readonly");d===n&&(d=!1),this.readonly(d),O=O||function(){var n=e(F);n.appendTo(document.body);var t={width:n.width()-n[0].clientWidth,height:n.height()-n[0].clientHeight};return n.remove(),t}(),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",t.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),l=this;this.close(),e.length&&e[0].detachEvent&&l._sync&&e.each(function(){l._sync&&this.detachEvent("onpropertychange",l._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,t!==n&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(t){var l,i,u,a,s=this;if("select"===(l=t.element).get(0).tagName.toLowerCase()&&(this.select=i=t.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in t)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(t=e.extend({},{populateResults:function(l,i,r){var o,u=this.opts.id,a=this.liveRegion;(o=function(l,i,c){var d,p,h,f,g,m,v,b,y,w,C=[];for(d=0,p=(l=t.sortResults(l,i,r)).length;p>d;d+=1)f=!(g=!0===(h=l[d]).disabled)&&u(h)!==n,m=h.children&&h.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+c),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(s.opts.formatResultCssClass(h)),v.attr("role","presentation"),(b=e(document.createElement("div"))).addClass("select2-result-label"),b.attr("id","select2-result-label-"+_()),b.attr("role","option"),(w=t.formatResult(h,b,r,s.opts.escapeMarkup))!==n&&(b.html(w),v.append(b)),m&&((y=e("<ul></ul>")).addClass("select2-result-sub"),o(h.children,y,c+1),v.append(y)),v.data("select2-data",h),C.push(v[0]);i.append(C),a.text(t.formatMatches(l.length))})(i,l,0)}},e.fn.select2.defaults,t)).id&&(u=t.id,t.id=function(e){return e[u]}),e.isArray(t.element.data("select2Tags"))){if("tags"in t)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+t.element.attr("id");t.tags=t.element.data("select2Tags")}if(i?(t.query=this.bind(function(e){var t,i,r,o={results:[],more:!1},u=e.term;r=function(n,t){var l;n.is("option")?e.matcher(u,n.text(),n)&&t.push(s.optionToData(n)):n.is("optgroup")&&(l=s.optionToData(n),n.children().each2(function(e,n){r(n,l.children)}),l.children.length>0&&t.push(l))},t=l.children(),this.getPlaceholder()!==n&&t.length>0&&((i=this.getPlaceholderOption())&&(t=t.not(i))),t.each2(function(e,n){r(n,o.results)}),e.callback(o)}),t.id=function(e){return e.id}):"query"in t||("ajax"in t?((a=t.element.data("ajax-url"))&&a.length>0&&(t.ajax.url=a),t.query=v.call(t.element,t.ajax)):"data"in t?t.query=b(t.data):"tags"in t&&(t.query=y(t.tags),t.createSearchChoice===n&&(t.createSearchChoice=function(n){return{id:e.trim(n),text:e.trim(n)}}),t.initSelection===n&&(t.initSelection=function(n,l){var i=[];e(o(n.val(),t.separator,t.transformVal)).each(function(){var n={id:this,text:this},l=t.tags;e.isFunction(l)&&(l=l()),e(l).each(function(){return r(this.id,n.id)?(n=this,!1):void 0}),i.push(n)}),l(i)}))),"function"!=typeof t.query)throw"query function not defined for Select2 "+t.element.attr("id");if("top"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,n){e.unshift(n)};else if("bottom"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,n){e.push(n)};else if("function"!=typeof t.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return t},monitorSource:function(){var t,l=this.opts.element,i=this;l.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=l.prop("disabled");e===n&&(e=!1),this.enable(!e);var t=l.prop("readonly");t===n&&(t=!1),this.readonly(t),this.container&&(f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass,this.opts.element)))}),l.length&&l[0].attachEvent&&l.each(function(){this.attachEvent("onpropertychange",i._sync)}),(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==n&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t(function(n){e.each(n,i._sync)}),this.propertyObserver.observe(l.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(n){var t=e.Event("select2-selecting",{val:this.id(n),object:n,choice:n});return this.opts.element.trigger(t),!t.isDefaultPrevented()},triggerChange:function(n){n=n||{},n=e.extend({},n,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(n),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,n=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",n),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===n&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===n&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var n,t,l,i,r,o=this.dropdown,u=this.container,a=u.offset(),s=u.outerHeight(!1),c=u.outerWidth(!1),d=o.outerHeight(!1),p=e(window),h=p.width(),f=p.height(),g=p.scrollLeft()+h,m=p.scrollTop()+f,v=a.top+s,b=a.left,y=m>=v+d,w=a.top-d>=p.scrollTop(),k=o.outerWidth(!1);o.hasClass("select2-drop-above")?(t=!0,!w&&y&&(l=!0,t=!1)):(t=!1,!y&&w&&(l=!0,t=!0)),l&&(o.hide(),a=this.container.offset(),s=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=o.outerHeight(!1),g=p.scrollLeft()+h,m=p.scrollTop()+f,v=a.top+s,b=a.left,k=o.outerWidth(!1),o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(k=o.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:O.width))>c?c=k:k=c,d=o.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(v-=(n=this.body.offset()).top,b-=n.left),!(g>=b+k)&&a.left+g+u.outerWidth(!1)>k&&(b=a.left+this.container.outerWidth(!1)-k),i={left:b,width:c},t?(i.top=a.top-d,i.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(i.top=v,i.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),i=e.extend(i,C(this.opts.dropdownCss,this.opts.element)),o.css(i)},shouldOpen:function(){var n;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(n=e.Event("select2-opening"),this.opts.element.trigger(n),!n.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),T.on("mousemove.select2Event",function(e){E.x=e.pageX,E.y=e.pageY}),!0)},opening:function(){var n,l=this.containerEventName,i="scroll."+l,r="resize."+l,o="orientationchange."+l;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(n=e("#select2-drop-mask")).length&&((n=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body),n.on("mousedown touchstart click",function(l){t(n);var i,r=e("#select2-drop");r.length>0&&((i=r.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),l.preventDefault(),l.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var u=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+i+" "+o,function(){u.opened()&&u.positionDropdown()})})},close:function(){if(this.opened()){var n=this.containerEventName,t="scroll."+n,l="resize."+n,i="orientationchange."+n;this.container.parents().add(window).each(function(){e(this).off(t).off(l).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),T.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var n,t,l,i,r,o,u,a,s=this.results;if(!(0>(t=this.highlight()))){if(0==t)return void s.scrollTop(0);n=this.findHighlightableChoices().find(".select2-result-label"),i=(a=((l=e(n[t])).offset()||{}).top||0)+l.outerHeight(!0),t===n.length-1&&((u=s.find("li.select2-more-results")).length>0&&(i=u.offset().top+u.outerHeight(!0))),i>(r=s.offset().top+s.outerHeight(!1))&&s.scrollTop(s.scrollTop()+(i-r)),0>(o=a-s.offset().top)&&"none"!=l.css("display")&&s.scrollTop(s.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(n){for(var t=this.findHighlightableChoices(),l=this.highlight();l>-1&&l<t.length;){var i=e(t[l+=n]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(l);break}}},highlight:function(n){var t,l,r=this.findHighlightableChoices();return 0===arguments.length?i(r.filter(".select2-highlighted")[0],r.get()):(n>=r.length&&(n=r.length-1),0>n&&(n=0),this.removeHighlight(),(t=e(r[n])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",t.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(t.text()),void((l=t.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(l),choice:l})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(n){var t=e(n.target).closest(".select2-result-selectable");if(t.length>0&&!t.is(".select2-highlighted")){var l=this.findHighlightableChoices();this.highlight(l.index(t))}else 0==t.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,n=e.find("li.select2-more-results"),t=this.resultsPage+1,l=this,i=this.search.val(),r=this.context;0!==n.length&&(n.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:t,context:r,matcher:this.opts.matcher,callback:this.bind(function(o){l.opened()&&(l.opts.populateResults.call(this,e,o.results,{term:i,page:t,context:r}),l.postprocessResults(o,!1,!1),!0===o.more?(n.detach().appendTo(e).html(l.opts.escapeMarkup(C(l.opts.formatLoadMore,l.opts.element,t+1))),window.setTimeout(function(){l.loadMoreIfNeeded()},10)):n.remove(),l.positionDropdown(),l.resultsPage=t,l.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))})})))},tokenize:function(){},updateResults:function(t){function l(){s.removeClass("select2-active"),p.positionDropdown(),c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?p.liveRegion.text(c.text()):p.liveRegion.text(p.opts.formatMatches(c.find('.select2-result-selectable:not(".select2-selected")').length))}function i(e){c.html(e),l()}var o,u,a,s=this.search,c=this.results,d=this.opts,p=this,h=s.val(),f=e.data(this.container,"select2-last-term");if((!0===t||!f||!r(h,f))&&(e.data(this.container,"select2-last-term",h),!0===t||!1!==this.showSearchInput&&this.opened())){a=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(o=this.data(),e.isArray(o)&&o.length>=g&&w(d.formatSelectionTooBig,"formatSelectionTooBig")))return void i("<li class='select2-selection-limit'>"+C(d.formatSelectionTooBig,d.element,g)+"</li>");if(s.val().length<d.minimumInputLength)return w(d.formatInputTooShort,"formatInputTooShort")?i("<li class='select2-no-results'>"+C(d.formatInputTooShort,d.element,s.val(),d.minimumInputLength)+"</li>"):i(""),void(t&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&s.val().length>d.maximumInputLength)return void(w(d.formatInputTooLong,"formatInputTooLong")?i("<li class='select2-no-results'>"+C(d.formatInputTooLong,d.element,s.val(),d.maximumInputLength)+"</li>"):i(""));d.formatSearching&&0===this.findHighlightableChoices().length&&i("<li class='select2-searching'>"+C(d.formatSearching,d.element)+"</li>"),s.addClass("select2-active"),this.removeHighlight(),(u=this.tokenize())!=n&&null!=u&&s.val(u),this.resultsPage=1,d.query({element:d.element,term:s.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(o){var u;if(a==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==n&&w(d.formatAjaxError,"formatAjaxError"))return void i("<li class='select2-ajax-error'>"+C(d.formatAjaxError,d.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===n?null:o.context,this.opts.createSearchChoice&&""!==s.val()&&((u=this.opts.createSearchChoice.call(p,s.val(),o.results))!==n&&null!==u&&p.id(u)!==n&&null!==p.id(u)&&0===e(o.results).filter(function(){return r(p.id(this),p.id(u))}).length&&this.opts.createSearchChoicePosition(o.results,u)),0===o.results.length&&w(d.formatNoMatches,"formatNoMatches"))return void i("<li class='select2-no-results'>"+C(d.formatNoMatches,d.element,s.val())+"</li>");c.empty(),p.opts.populateResults.call(this,c,o.results,{term:s.val(),page:this.resultsPage,context:null}),!0===o.more&&w(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.escapeMarkup(C(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(o,t),l(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){!function(e){e[0]!==document.activeElement&&window.setTimeout(function(){var n,t=e[0],l=e.val().length;e.focus(),(t.offsetWidth>0||t.offsetHeight>0)&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(l,l):t.createTextRange&&((n=t.createTextRange()).collapse(!1),n.select()))},0)}(this.search)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var n=this.highlight(),t=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");t?(this.highlight(n),this.onSelect(t,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==n?e.text():n)},getPlaceholderOption:function(){if(this.select){var t=this.select.children("option").first();if(this.opts.placeholderOption!==n)return"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(t.text())&&""===t.val())return t}},initContainerWidth:function(){var t=(function(){var t,l,i,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((t=this.opts.element.attr("style"))!==n)for(r=0,o=(l=t.split(";")).length;o>r;r+=1)if(null!==(i=l[r].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width")).indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}).call(this);null!==t&&this.container.css("width",t)}}),P=j(R,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,l,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((l=t.createTextRange()).collapse(!1),l.select()):t.setSelectionRange&&(i=this.search.val().length,t.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var n,l,i=this.container,r=this.dropdown,o=_();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=n=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),n.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),l=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(l.text()).attr("for",this.focusser.attr("id"));var u=this.opts.element.attr("title");this.opts.element.attr("title",u||l.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return void p(e);switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),void p(e);case D.ENTER:return this.selectHighlighted(),void p(e);case D.TAB:return void this.selectHighlighted({noFocus:!0});case D.ESC:return this.cancel(e),void p(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(!1===this.opts.openOnEnter&&e.which===D.ENTER)return void p(e);if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void p(e)}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(e)):void 0}})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),n.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection&&this.selection.focus())})),n.on("mousedown touchstart",this.bind(function(l){t(n),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(l)})),r.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),n.on("focus",this.bind(function(e){p(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(n){var t=this.selection.data("select2-data");if(t){var l=e.Event("select2-clearing");if(this.opts.element.trigger(l),l.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==n&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==n&&null!==t&&(e.updateSelection(t),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(t,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==n&&((e=this.getPlaceholderOption())!==n&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===n||null===this.opts.element.val())},prepareOpts:function(){var n=this.parent.prepareOpts.apply(this,arguments),t=this;return"select"===n.element.get(0).tagName.toLowerCase()?n.initSelection=function(e,n){var l=e.find("option").filter(function(){return this.selected&&!this.disabled});n(t.optionToData(l))}:"data"in n&&(n.initSelection=n.initSelection||function(t,l){var i=t.val(),o=null;n.query({matcher:function(e,t,l){var u=r(i,n.id(l));return u&&(o=l),u},callback:e.isFunction(l)?function(){l(o)}:e.noop})}),n},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===n?n:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==n){if(this.select&&this.getPlaceholderOption()===n)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,t){var l=0,i=this;if(this.findHighlightableChoices().each2(function(e,n){return r(i.id(n.data("select2-data")),i.opts.element.val())?(l=e,!1):void 0}),!1!==t&&(!0===n&&l>=0?this.highlight(l):this.highlight(0)),!0===n){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(k(e.results)>=o)}},showSearch:function(n){this.showSearchInput!==n&&(this.showSearchInput=n,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!n),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!n),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",n))},onSelect:function(e,n){if(this.triggerSelect(e)){var t=this.opts.element.val(),l=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),n&&n.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(t,this.id(e))||this.triggerChange({added:e,removed:l})}},updateSelection:function(e){var t,l,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(t=this.opts.formatSelection(e,i,this.opts.escapeMarkup)),t!==n&&i.append(t),(l=this.opts.formatSelectionCssClass(e,i))!==n&&i.addClass(l),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==n&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,l=null,i=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,n){return l=i.optionToData(n),!1}),this.updateSelection(l),this.setPlaceholder(),t&&this.triggerChange({added:l,removed:r});else{if(!e&&0!==e)return void this.clear(t);if(this.opts.initSelection===n)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),t&&i.triggerChange({added:e,removed:r})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,l=!1;return 0===arguments.length?((t=this.selection.data("select2-data"))==n&&(t=null),t):(arguments.length>1&&(l=arguments[1]),void(e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),l&&this.triggerChange({added:e,removed:t})):this.clear(l)))}}),S=j(R,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var n=this.parent.prepareOpts.apply(this,arguments),t=this;return"select"===n.element.get(0).tagName.toLowerCase()?n.initSelection=function(e,n){var l=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,n){l.push(t.optionToData(n))}),n(l)}:"data"in n&&(n.initSelection=n.initSelection||function(t,l){var i=o(t.val(),n.separator,n.transformVal),u=[];n.query({matcher:function(t,l,o){var a=e.grep(i,function(e){return r(e,n.id(o))}).length;return a&&u.push(o),a},callback:e.isFunction(l)?function(){for(var e=[],t=0;t<i.length;t++)for(var o=i[t],a=0;a<u.length;a++){var s=u[a];if(r(o,n.id(s))){e.push(s),u.splice(a,1);break}}l(e)}:e.noop})}),n},selectChoice:function(e){var n=this.container.find(".select2-search-choice-focus");n.length&&e&&e[0]==n[0]||(n.length&&this.opts.element.trigger("choice-deselected",n),n.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var n,t=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(t);var l=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){l.search[0].focus(),l.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+_()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var t=n.find(".select2-search-choice-focus"),l=t.prev(".select2-search-choice:not(.select2-locked)"),i=t.next(".select2-search-choice:not(.select2-locked)"),r=d(this.search);if(t.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var o=t;return e.which==D.LEFT&&l.length?o=l:e.which==D.RIGHT?o=i.length?i:null:e.which===D.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),o=l.length?l:i):e.which==D.DELETE?this.unselect(t.first())&&(this.search.width(10),o=i.length?i:null):e.which==D.ENTER&&(o=null),this.selectChoice(o),p(e),void(o&&o.length||this.open())}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==r.offset&&!r.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),void p(e);if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),void p(e);case D.ENTER:return this.selectHighlighted(),void p(e);case D.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case D.ESC:return this.cancel(e),void p(e)}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&p(e),e.which===D.ENTER&&p(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(n){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),n.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(n){this.isInterfaceEnabled()&&(e(n.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),n.preventDefault()))})),this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==n&&null!==t&&(e.updateSelection(t),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==n&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(t>0?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(n){var t=[],l=[],r=this;e(n).each(function(){i(r.id(this),t)<0&&(t.push(r.id(this)),l.push(this))}),n=l,this.selection.find(".select2-search-choice").remove(),e(n).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=n&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=n&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var l,i,r=!t.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),u=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=r?o:u,s=this.id(t),c=this.getVal();(l=this.opts.formatSelection(t,a.find("div"),this.opts.escapeMarkup))!=n&&a.find("div").replaceWith(e("<div></div>").html(l)),(i=this.opts.formatSelectionCssClass(t,a.find("div")))!=n&&a.addClass(i),r&&a.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(n){this.isInterfaceEnabled()&&(this.unselect(e(n.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(n),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",t),a.insertBefore(this.searchContainer),c.push(s),this.setVal(c)},unselect:function(n){var t,l,r=this.getVal();if(0===(n=n.closest(".select2-search-choice")).length)throw"Invalid argument: "+n+". Must be .select2-search-choice";if(t=n.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(t),o.choice=t,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(l=i(this.id(t),r))>=0;)r.splice(l,1),this.setVal(r),this.select&&this.postprocessResults();return n.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}),!0}},postprocessResults:function(e,n,t){var l=this.getVal(),r=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),u=this;r.each2(function(e,n){i(u.id(n.data("select2-data")),l)>=0&&(n.addClass("select2-selected"),n.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,n){n.is(".select2-result-selectable")||0!==n.find(".select2-result-selectable:not(.select2-selected)").length||n.addClass("select2-selected")}),-1==this.highlight()&&!1!==t&&!0===this.opts.closeOnSelect&&u.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&w(u.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+C(u.opts.formatNoMatches,u.opts.element,u.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-u(this.search)},resizeSearch:function(){var e,n,t,l,i=u(this.search);e=h(this.search)+10,n=this.search.offset().left,e>(l=(t=this.selection.width())-(n-this.selection.offset().left)-i)&&(l=t-i),40>l&&(l=t-i),0>=l&&(l=e),this.search.width(Math.floor(l))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:o(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(n){var t;this.select?this.select.val(n):(t=[],e(n).each(function(){i(this,t)<0&&t.push(this)}),this.opts.element.val(0===t.length?"":t.join(this.opts.separator)))},buildChangeDetails:function(e,n){n=n.slice(0),e=e.slice(0);for(var t=0;t<n.length;t++)for(var l=0;l<e.length;l++)r(this.opts.id(n[t]),this.opts.id(e[l]))&&(n.splice(t,1),t>0&&t--,e.splice(l,1),l--);return{added:n,removed:e}},val:function(t,l){var i,r=this;if(0===arguments.length)return this.getVal();if((i=this.data()).length||(i=[]),!t&&0!==t)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(l&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),l&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===n)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(n){var t=e.map(n,r.id);r.setVal(t),r.updateSelection(n),r.clearSearch(),l&&r.triggerChange(r.buildChangeDetails(i,r.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var n=[],t=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){n.push(t.opts.id(e(this).data("select2-data")))}),this.setVal(n),this.triggerChange()},data:function(n,t){var l,i,r=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i=this.data(),n||(n=[]),l=e.map(n,function(e){return r.opts.id(e)}),this.setVal(l),this.updateSelection(n),this.clearSearch(),void(t&&this.triggerChange(this.buildChangeDetails(i,this.data()))))}}),e.fn.select2=function(){var t,l,r,o,u,a=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===a.length||"object"==typeof a[0])(t=0===a.length?{}:e.extend({},a[0])).element=e(this),"select"===t.element.get(0).tagName.toLowerCase()?u=t.element.prop("multiple"):(u=t.multiple||!1,"tags"in t&&(t.multiple=u=!0)),(l=u?new window.Select2.class.multi:new window.Select2.class.single).init(t);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(i(a[0],s)<0)throw"Unknown method: "+a[0];if(o=n,(l=e(this).data("select2"))===n)return;if("container"===(r=a[0])?o=l.container:"dropdown"===r?o=l.dropdown:(p[r]&&(r=p[r]),o=l[r].apply(l,a.slice(1))),i(a[0],c)>=0||i(a[0],d)>=0&&1==a.length)return!1}}),o===n?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,n,t,l){var i=[];return g(this.text(e),t.term,i,l),i.join("")},transformVal:function(n){return e.trim(n)},formatSelection:function(e,t,l){return e?l(this.text(e)):n},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return n},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==n?null:e.id},text:function(n){return n&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(n):n[this.data.text]:n.text},matcher:function(e,n){return l(""+n).toUpperCase().indexOf(l(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,t,l,i){var o,u,a,s,c,d=e,p=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return n;for(;;){for(u=-1,a=0,s=i.tokenSeparators.length;s>a&&(c=i.tokenSeparators[a],!((u=e.indexOf(c))>=0));a++);if(0>u)break;if(o=e.substring(0,u),e=e.substring(u+c.length),o.length>0&&((o=i.createSearchChoice.call(this,o,t))!==n&&null!==o&&i.id(o)!==n&&null!==i.id(o))){for(p=!1,a=0,s=t.length;s>a;a++)if(r(i.id(o),i.id(t[a]))){p=!0;break}p||l(o)}}return d!==e?e:void 0},escapeMarkup:m,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return n},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,n){var t=n-e.length;return"Please enter "+t+" or more character"+(1==t?"":"s")},formatInputTooLong:function(e,n){var t=e.length-n;return"Please delete "+t+" character"+(1==t?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:b,tags:y},util:{debounce:c,markMatch:g,escapeMarkup:m,stripDiacritics:l},class:{abstract:R,single:P,multi:S}}}}(jQuery)},0:function(e,n,t){e.exports=t("zUnb")},"5Lfy":function(e,n,t){"use strict";t.d(n,"a",function(){return r});var l=t("mrSG"),i=t("SqdZ"),r=(t("wZYP"),function(e){function n(n,t,l,i){var r=e.call(this,t,l,n)||this;return r.elementRef=n,r.locals=t,r.cdRef=l,r.I18n=i,r}return l.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.$element.find(".dynamic-content-modal--wrapper").addClass(this.locals.modalClassName).append(this.locals.modalBody),jQuery(document.body).on("click.opdynamicmodal",".dynamic-content-modal--close-button",function(e){n.closeMe(e)})},n.prototype.ngOnDestroy=function(){jQuery(document.body).off("click.opdynamicmodal"),e.prototype.ngOnDestroy.call(this)},n}(i.a))},"7ond":function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(){this.minimumOffsetForNewSwitchInMs=100,this.lastFocusSwitch=-this.minimumOffsetForNewSwitchInMs,this.lastPriority=-1}return e.prototype.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout=function(){var e=Date.now()-this.lastFocusSwitch>=this.minimumOffsetForNewSwitchInMs;return this.lastFocusSwitch=Date.now(),e},e.prototype.checkIfAllowedFocusChange=function(e){var n=this.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout();if(n)this.lastPriority=-1;else if(e>this.lastPriority)return this.lastPriority=e,!0;return n},e.prototype.getFocusableElement=function(n){var t=n.find("input.ui-select-focusser");if(t.length>0)return t[0];var l=n;return n.is(e.FOCUSABLE_SELECTORS)||(l=n.find(e.FOCUSABLE_SELECTORS)),l[0]},e.prototype.focus=function(e){var n=jQuery(this.getFocusableElement(e)),t=jQuery(n),l=t.is("[disabled]");l&&!t.attr("ng-disabled")&&t.prop("disabled",!1),n.focus(),l&&!t.attr("ng-disabled")&&t.prop("disabled",!0)},e.prototype.focusElement=function(e,n){var t=this;this.checkIfAllowedFocusChange(n)&&setTimeout(function(){t.focus(e)},10)},e.FOCUSABLE_SELECTORS="a, button, :input, [tabindex], select",e}()},AytR:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l={production:!0}},"E+lO":function(e,n,t){"use strict";t.r(n),t.d(n,"DynamicBootstrapper",function(){return l});var l=function(){function e(){}return e.register=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];(e=this.optionalBoostrapComponents).push.apply(e,n)},e.bootstrapOptionalDocument=function(e,n,t){void 0===t&&(t=this.optionalBoostrapComponents),this.performBootstrap(e,n,!1,t)},e.bootstrapOptionalEmbeddable=function(e,n,t){void 0===t&&(t=this.optionalBoostrapComponents),this.performBootstrap(e,n,!0,t)},e.getEmbeddable=function(){return this.optionalBoostrapComponents.filter(function(e){return e.embeddable})},e.performBootstrap=function(e,n,t,l){l.forEach(function(l){if(!t||l.embeddable)for(var i=n.querySelectorAll(l.selector),r=0;r<i.length;r++)e.bootstrap(l.cls,i[r])})},e.optionalBoostrapComponents=[],e}()},E5Dd:function(e,n,t){"use strict";var l;t.d(n,"a",function(){return l}),function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.UP_ARROW=38]="UP_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.LEFT_META=91]="LEFT_META",e[e.RIGHT_META=92]="RIGHT_META",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL=110]="DECIMAL",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(l||(l={}))},FUyZ:function(e,n,t){t("/ur0"),t("7k/7"),t("z2n6"),t("/Su4"),t("RMHK"),t("brli"),t("Iia5"),t("fPeS"),t("Jchv"),t("Vn+K"),t("2nA0"),t("9/yf"),t("NvoQ"),t("+NVk"),t("wEvd"),t("HmDX"),t("cZ/E"),t("2nA0"),t("O2Hw"),t("Oaa7"),t("tGlX"),t("TiIQ"),t("yFkT"),t("/+cc"),t("+yTb"),t("+WSP"),t("gkXs"),t("VG3H"),t("cK71")},"IaZ+":function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return u});var l=t("CcnG"),i=t("4c35"),r=(t("+rW8"),t("E5Dd")),o=(t("7ond"),new l.InjectionToken("OP_MODAL_LOCALS")),u=function(){function e(e,n,t,l,o){var u=this;this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=o,this.active=null,this.opening=!1;var a=this.portalHostElement=document.createElement("div");a.classList.add("op-modals--overlay"),document.body.appendChild(a),jQuery(window).on("keydown",function(e){return u.active&&u.active.closeOnEscape&&e.which===r.a.ESCAPE&&u.active.closeOnEscapeFunction(e),!0}),jQuery(window).on("click",function(e){u.active&&!u.opening&&u.active.closeOnOutsideClick&&!u.portalHostElement.contains(e.target)&&u.close()}),this.bodyPortalHost=new i.b(a,this.componentFactoryResolver,this.appRef,this.injector)}return e.prototype.show=function(e,n,t){var l=this;void 0===t&&(t={}),this.close(),this.opening=!0,"global"===n&&(n=this.injector);var r=new i.a(e,null,this.injectorFor(n,t)),o=this.bodyPortalHost.attach(r).instance;return this.active=o,this.portalHostElement.style.display="block",setTimeout(function(){l.active&&l.active.onOpen(l.activeModal),l.opening=!1},20),this.active},e.prototype.isActive=function(e){return this.active&&this.active===e},e.prototype.close=function(){this.active&&this.active.onClose()&&(this.active.closingEvent.emit(this.active),this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active=null)},Object.defineProperty(e.prototype,"activeModal",{get:function(){return jQuery(this.portalHostElement).find(".op-modal--portal")},enumerable:!0,configurable:!0}),e.prototype.injectorFor=function(e,n){var t=new WeakMap;return n.service=this,t.set(o,n),new i.c(e,t)},e}()},RnhZ:function(e,n,t){var l={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var n=r(e);return t(n)}function r(e){if(!t.o(l,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return l[e]}i.keys=function(){return Object.keys(l)},i.resolve=r,e.exports=i,i.id="RnhZ"},SU55:function(e,n){!function(e){"use strict";e(function(){e("[data-selected-page].tree-menu--container").each(function(n,t){var l=e(t).data("selected-page");l&&e("[slug="+l+"]",t).toggleClass("-selected",!0)}),e(".pages-hierarchy.-with-hierarchy .tree-menu--hierarchy-span").on("click keypress",function(n){return("keypress"!==n.type||13===n.which)&&(e(n.target).closest("ul.-with-hierarchy > li").toggleClass("-hierarchy-collapsed -hierarchy-expanded"),!1)})})}(jQuery)},SqdZ:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var l=t("CcnG"),i=function(){function e(e,n,t){this.locals=e,this.cdRef=n,this.elementRef=t,this.closeOnEscape=!0,this.closeOnEscapeFunction=this.closeMe,this.closeOnOutsideClick=!0,this.service=this.locals.service,this.closingEvent=new l.EventEmitter,this.openingEvent=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},e.prototype.ngOnDestroy=function(){this.closingEvent.complete(),this.openingEvent.complete()},e.prototype.onClose=function(){return this.afterFocusOn&&this.afterFocusOn.focus(),!0},e.prototype.closeMe=function(e){this.service.close(),e&&(e.stopPropagation(),e.preventDefault())},e.prototype.onOpen=function(e){this.openingEvent.emit(),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),e}()},buKu:function(e,n,t){"use strict";t.r(n);var l=t("qHU1"),i=t("FnNU");t("yLV6");t("tG68"),t("E+lO"),t("vPHx"),t("vqYl"),t("SU55"),window.appBasePath=jQuery("meta[name=app_base_path]").attr("content")||"";var r=jQuery("meta[name=openproject_initializer]");I18n.locale=r.data("defaultLocale"),I18n.locale=r.data("locale"),I18n.firstDayOfWeek=parseInt(r.data("firstDayOfWeek"),10),Object(l.c)(function(){window.enableReactiveStatesLogging=function(){return Object(i.e)(!0)},window.disableReactiveStatesLogging=function(){return Object(i.e)(!1)}})},cK71:function(e,n,t){e.exports=global.I18n=t("eFC/")},crnd:function(e,n){function t(e){return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n})}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id="crnd"},"eFC/":function(e,n,t){var l,i;i=this,void 0===(l=(function(){return function(e){"use strict";var n=e&&e.I18n||{},t=Array.prototype.slice,l=function(e){return("0"+e.toString()).substr(-2)},i=function(e){var n=typeof e;return"function"===n||"object"===n},r=function(e){return"function"==typeof e},o=function(e){return null!=e},u=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},a=function(e){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(e)},s=function(e){return!0===e||!1===e},c=function(e,n,t){return void 0===t||0==+t?Math[e](n):(n=+n,t=+t,isNaN(n)||"number"!=typeof t||t%1!=0?NaN:(n=n.toString().split("e"),+((n=(n=Math[e](+(n[0]+"e"+(n[1]?+n[1]-t:-t)))).toString().split("e"))[0]+"e"+(n[1]?+n[1]+t:t))))},d=function(e,n){return r(e)?e(n):e},p=function(e,n){var t,l,i;for(t in n)n.hasOwnProperty(t)&&(l=n[t],a(l)||"number"==typeof(i=l)||"[object Number]"===Object.prototype.toString.call(i)||s(l)||u(l)?e[t]=l:(null==e[t]&&(e[t]={}),p(e[t],l)));return e},h={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},f={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},g={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},m={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},v=[null,"kb","mb","gb","tb"],b={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return n.reset=function(){var e;for(e in b)this[e]=b[e]},n.initializeOptions=function(){var e;for(e in b)o(this[e])||(this[e]=b[e])},n.initializeOptions(),n.locales={},n.locales.get=function(e){var t=this[e]||this[n.locale]||this.default;return r(t)&&(t=t(e)),!1===u(t)&&(t=[t]),t},n.locales.default=function(e){var t=[],l=[];return e&&t.push(e),!e&&n.locale&&t.push(n.locale),n.fallbacks&&n.defaultLocale&&t.push(n.defaultLocale),t.forEach(function(e){var t=e.split("-"),i=null,r=null;3===t.length?(i=[t[0],t[1]].join("-"),r=t[0]):2===t.length&&(i=t[0]),-1===l.indexOf(e)&&l.push(e),n.fallbacks&&[i,r].forEach(function(n){null!=n&&n!==e&&-1===l.indexOf(n)&&l.push(n)})}),t.length||t.push("en"),l},n.pluralization={},n.pluralization.get=function(e){return this[e]||this[n.locale]||this.default},n.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},n.currentLocale=function(){return this.locale||this.defaultLocale},n.isSet=o,n.lookup=function(e,n){n=n||{};var t,l,i,r,u=this.locales.get(n.locale).slice();for(u[0],i=this.getFullScope(e,n);u.length;)if(t=u.shift(),l=i.split(this.defaultSeparator),r=this.translations[t]){for(;l.length&&null!=(r=r[l.shift()]););if(null!=r)return r}if(o(n.defaultValue))return d(n.defaultValue,e)},n.pluralizationLookupWithoutFallback=function(e,n,t){var l,r,u=this.pluralization.get(n)(e);if(i(t))for(;u.length;)if(l=u.shift(),o(t[l])){r=t[l];break}return r},n.pluralizationLookup=function(e,n,t){t=t||{};var l,r,u,a,s=this.locales.get(t.locale).slice();for(s[0],n=this.getFullScope(n,t);s.length;)if(l=s.shift(),r=n.split(this.defaultSeparator),u=this.translations[l]){for(;r.length&&(u=u[r.shift()],i(u));)0==r.length&&(a=this.pluralizationLookupWithoutFallback(e,l,u));if(null!=a&&null!=a)break}return null!=a&&null!=a||o(t.defaultValue)&&(a=i(t.defaultValue)?this.pluralizationLookupWithoutFallback(e,t.locale,t.defaultValue):t.defaultValue,u=t.defaultValue),{message:a,translations:u}},n.meridian=function(){var e=this.lookup("time"),n=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:n&&n.meridian?n.meridian:h.meridian},n.prepareOptions=function(){for(var e,n=t.call(arguments),l={};n.length;)if("object"==typeof(e=n.shift()))for(var i in e)e.hasOwnProperty(i)&&(o(l[i])||(l[i]=e[i]));return l},n.createTranslationOptions=function(e,n){var t=[{scope:e}];return o(n.defaults)&&(t=t.concat(n.defaults)),o(n.defaultValue)&&t.push({message:n.defaultValue}),t},n.translate=function(e,n){n=n||{};var t,l=this.createTranslationOptions(e,n),r=this.prepareOptions(n);return delete r.defaultValue,l.some(function(n){if(o(n.scope)?t=this.lookup(n.scope,r):o(n.message)&&(t=d(n.message,e)),null!=t)return!0},this)?("string"==typeof t?t=this.interpolate(t,n):i(t)&&o(n.count)&&(t=this.pluralize(n.count,e,n)),t):this.missingTranslation(e,n)},n.interpolate=function(e,n){n=n||{};var t,l,i,r,u=e.match(this.placeholder);if(!u)return e;for(;u.length;)l=(t=u.shift()).replace(this.placeholder,"$1"),r=o(n[l])?n[l].toString().replace(/\$/gm,"_#$#_"):l in n?this.nullPlaceholder(t,e,n):this.missingPlaceholder(t,e,n),i=new RegExp(t.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(i,r);return e.replace(/_#\$#_/g,"$")},n.pluralize=function(e,n,t){var l,i;return t=this.prepareOptions({count:String(e)},t),null==(i=this.pluralizationLookup(e,n,t)).translations||null==i.translations?this.missingTranslation(n,t):null!=i.message&&null!=i.message?this.interpolate(i.message,t):(l=this.pluralization.get(t.locale),this.missingTranslation(n+"."+l(e)[0],t))},n.missingTranslation=function(e,n){if("guess"==this.missingBehaviour){var t=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+t.replace("_"," ").replace(/([a-z])([A-Z])/g,function(e,n,t){return n+" "+t.toLowerCase()})}return'[missing "'+[null!=n&&null!=n.locale?n.locale:this.currentLocale(),this.getFullScope(e,n)].join(this.defaultSeparator)+'" translation]'},n.missingPlaceholder=function(e,n,t){return"[missing "+e+" value]"},n.nullPlaceholder=function(){return n.missingPlaceholder.apply(n,arguments)},n.toNumber=function(e,n){n=this.prepareOptions(n,this.lookup("number.format"),f);var t,l,i=e<0,r=function(e,n){return c("round",e,-n).toFixed(n)}(Math.abs(e),n.precision).toString().split("."),o=[],u=n.format||"%n",a=i?"-":"";for(e=r[0],t=r[1];e.length>0;)o.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return l=o.join(n.delimiter),n.strip_insignificant_zeros&&t&&(t=t.replace(/0+$/,"")),n.precision>0&&t&&(l+=n.separator+t),l=(u=n.sign_first?"%s"+u:u.replace("%n","%s%n")).replace("%u",n.unit).replace("%n",l).replace("%s",a)},n.toCurrency=function(e,n){return n=this.prepareOptions(n,this.lookup("number.currency.format"),this.lookup("number.format"),g),this.toNumber(e,n)},n.localize=function(e,n,t){switch(t||(t={}),e){case"currency":return this.toCurrency(n);case"number":return e=this.lookup("number.format"),this.toNumber(n,e);case"percentage":return this.toPercentage(n);default:var l;return l=e.match(/^(date|time)/)?this.toTime(e,n):n.toString(),this.interpolate(l,t)}},n.parseDate=function(e){var n,t,l;if("object"==typeof e)return e;if(n=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var i=1;i<=6;i++)n[i]=parseInt(n[i],10)||0;n[2]-=1,l=n[7]?1e3*("0"+n[7]):null,t=n[8]?new Date(Date.UTC(n[1],n[2],n[3],n[4],n[5],n[6],l)):new Date(n[1],n[2],n[3],n[4],n[5],n[6],l)}else"number"==typeof e?(t=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(t=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(t=new Date).setTime(Date.parse(e)));return t},n.strftime=function(e,t){var i=this.lookup("date"),r=n.meridian();if(i||(i={}),i=this.prepareOptions(i,h),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var o=e.getDay(),u=e.getDate(),a=e.getFullYear(),s=e.getMonth()+1,c=e.getHours(),d=c,p=c>11?1:0,f=e.getSeconds(),g=e.getMinutes(),m=e.getTimezoneOffset(),v=Math.floor(Math.abs(m/60)),b=Math.abs(m)-60*v,y=(m>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(b.toString().length<2?"0"+b:b);return d>12?d-=12:0===d&&(d=12),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%a",i.abbr_day_names[o])).replace("%A",i.day_names[o])).replace("%b",i.abbr_month_names[s])).replace("%B",i.month_names[s])).replace("%d",l(u))).replace("%e",u)).replace("%-d",u)).replace("%H",l(c))).replace("%-H",c)).replace("%I",l(d))).replace("%-I",d)).replace("%m",l(s))).replace("%-m",s)).replace("%M",l(g))).replace("%-M",g)).replace("%p",r[p])).replace("%S",l(f))).replace("%-S",f)).replace("%w",o)).replace("%y",l(a))).replace("%-y",l(a).replace(/^0+/,""))).replace("%Y",a)).replace("%z",y)},n.toTime=function(e,n){var t=this.parseDate(n),l=this.lookup(e);return t.toString().match(/invalid/i)?t.toString():l?this.strftime(t,l):t.toString()},n.toPercentage=function(e,n){return n=this.prepareOptions(n,this.lookup("number.percentage.format"),this.lookup("number.format"),m),this.toNumber(e,n)},n.toHumanSize=function(e,n){for(var t,l,i=e,r=0;i>=1024&&r<4;)i/=1024,r+=1;return 0===r?(t=this.t("number.human.storage_units.units.byte",{count:i}),l=0):(t=this.t("number.human.storage_units.units."+v[r]),l=i-Math.floor(i)==0?0:1),n=this.prepareOptions(n,{unit:t,precision:l,format:"%n%u",delimiter:""}),this.toNumber(i,n)},n.getFullScope=function(e,n){return n=n||{},u(e)&&(e=e.join(this.defaultSeparator)),n.scope&&(e=[n.scope,e].join(this.defaultSeparator)),e},n.extend=function(e,n){return void 0===e&&void 0===n?{}:p(e,n)},n.t=n.translate,n.l=n.localize,n.p=n.pluralize,n}(i)}).call(n,t,n,e))||(e.exports=l)},qHU1:function(e,n,t){"use strict";t.d(n,"c",function(){return i}),t.d(n,"a",function(){return r}),t.d(n,"b",function(){return o});var l=t("AytR");function i(e){l.a.production||e()}function r(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];i(function(){return console.log.apply(console,["[DEBUG] "+e].concat(n))})}function o(e,n){if(l.a.production)return n();var t=performance.now(),i=n(),r=performance.now();return console.log("%c"+e+" completed in "+(r-t)+" milliseconds.","color:#00A093;"),i}},tG68:function(e,n,t){"use strict";t.r(n),t.d(n,"ModalWrapperAugmentService",function(){return i});var l=t("5Lfy"),i=(t("IaZ+"),function(){function e(e,n,t){this.documentElement=e,this.injector=n,this.opModalService=t}return e.prototype.setupListener=function(){for(var e=this.documentElement.querySelectorAll("section[data-augmented-model-wrapper]"),n=0;n<e.length;++n)this.wrapElement(jQuery(e[n]))},e.prototype.wrapElement=function(e){var n=this,t=e.find(".modal-wrapper--activation-link"),l=e.data("activationSelector");l&&(t=jQuery(l)),e.data("modalInitializeNow")?this.show(e):t.click(function(t){n.show(e),t.preventDefault()})},e.prototype.show=function(e){var n=e.data("modalClassName"),t=e.data("modalIframeUrl"),i=e.find(".modal-wrapper--content").html();t&&(i=this.appendIframe(i,t)),this.opModalService.show(l.a,this.injector,{modalBody:i,modalClassName:n})},e.prototype.appendIframe=function(e,n){var t=jQuery(e),l=jQuery('<iframe frameborder="0" height="400" allowfullscreen>></iframe>');return l.attr("src",n),t.find(".iframe-target-wrapper").append(l),t.html()},e}())},v4wS:function(e,n,t){var l={"./apl/apl.js":["4kmW",0,23],"./asciiarmor/asciiarmor.js":["Jt+K",0,24],"./asn.1/asn.1.js":["0OHD",0,25],"./asterisk/asterisk.js":["yGjk",0,26],"./brainfuck/brainfuck.js":["oF4/",0,27],"./clike/clike.js":["S6bl",0,5],"./clojure/clojure.js":["LA1u",0,28],"./cmake/cmake.js":["qE+Q",0,29],"./cobol/cobol.js":["JNJg",0,30],"./coffeescript/coffeescript.js":["oL3q",0,1],"./commonlisp/commonlisp.js":["kmAK",0,31],"./crystal/crystal.js":["JRJP",0,32],"./css/css.js":["ewDg",0,3],"./cypher/cypher.js":["vW+e",0,33],"./d/d.js":["zRyg",0,34],"./dart/dart.js":["6q/U",0,5,35],"./diff/diff.js":["3fnu",0,36],"./django/django.js":["SzTn",0,2,3,1,14],"./dockerfile/dockerfile.js":["R6x9",0,1,37],"./dtd/dtd.js":["/YIB",0,38],"./dylan/dylan.js":["PLH4",0,39],"./ebnf/ebnf.js":["AvIz",0,40],"./ecl/ecl.js":["rSpl",0,41],"./eiffel/eiffel.js":["t86p",0,42],"./elm/elm.js":["Rba3",0,43],"./erlang/erlang.js":["9RTS",0,44],"./factor/factor.js":["yv4w",0,1,45],"./fcl/fcl.js":["xvvs",0,46],"./forth/forth.js":["CDkR",0,47],"./fortran/fortran.js":["UYub",0,48],"./gas/gas.js":["Upog",0,49],"./gfm/gfm.js":["RKCW",0,7,1,50],"./gherkin/gherkin.js":["tkAH",0,51],"./go/go.js":["T/QY",0,52],"./groovy/groovy.js":["X7TR",0,53],"./haml/haml.js":["c+b1",0,2,3,1,15],"./handlebars/handlebars.js":["4d6s",0,1],"./haskell-literate/haskell-literate.js":["INem",0,1,54],"./haskell/haskell.js":["0+DK",0,1],"./haxe/haxe.js":["We/1",0,55],"./htmlembedded/htmlembedded.js":["dLt8",0,2,3,1,16],"./htmlmixed/htmlmixed.js":["1p+/",0,2,3,21],"./http/http.js":["scEK",0,56],"./idl/idl.js":["HqpV",0,57],"./javascript/javascript.js":["+dQi",0,2],"./jinja2/jinja2.js":["ToA7",0,58],"./jsx/jsx.js":["onn/",0,2,22],"./julia/julia.js":["NGrM",0,59],"./livescript/livescript.js":["5RX+",0,60],"./lua/lua.js":["jrMQ",0,61],"./markdown/markdown.js":["lZu9",0,7],"./mathematica/mathematica.js":["ztbM",0,62],"./mbox/mbox.js":["6mA5",0,63],"./meta.js":["8EBN",0,64],"./mirc/mirc.js":["o5kb",0,65],"./mllike/mllike.js":["NU+Z",0,66],"./modelica/modelica.js":["lQiH",0,67],"./mscgen/mscgen.js":["6gTk",0,68],"./mumps/mumps.js":["Q7su",0,69],"./nginx/nginx.js":["srmC",0,70],"./nsis/nsis.js":["bYLO",0,1,71],"./ntriples/ntriples.js":["PWBO",0,72],"./octave/octave.js":["mybg",0,73],"./oz/oz.js":["yhmh",0,74],"./pascal/pascal.js":["lB9V",0,75],"./pegjs/pegjs.js":["ZGb1",0,2,76],"./perl/perl.js":["kG+r",0,77],"./php/php.js":["RNWO",0,2,3,5,17],"./pig/pig.js":["860+",0,78],"./powershell/powershell.js":["naPG",0,79],"./properties/properties.js":["3Fvf",0,80],"./protobuf/protobuf.js":["cHwl",0,81],"./pug/pug.js":["W+/v",0,2,3,6],"./puppet/puppet.js":["cwoo",0,82],"./python/python.js":["25Eh",0,1],"./q/q.js":["MiqB",0,83],"./r/r.js":["kD6b",0,84],"./rpm/rpm.js":["Qs4+",0,85],"./rst/rst.js":["jIQM",0,1,86],"./ruby/ruby.js":["hTYL",0,1],"./rust/rust.js":["sY4N",0,1,87],"./sas/sas.js":["Sh3j",0,88],"./sass/sass.js":["G2Pi",0,3,1],"./scheme/scheme.js":["8wdy",0,89],"./shell/shell.js":["AvDn",0,90],"./sieve/sieve.js":["1dRh",0,91],"./slim/slim.js":["VI2i",0,2,3,1,18],"./smalltalk/smalltalk.js":["n4Nj",0,92],"./smarty/smarty.js":["QWhe",0,93],"./solr/solr.js":["xhF3",0,94],"./soy/soy.js":["vH+N",0,2,3,19],"./sparql/sparql.js":["++e5",0,95],"./spreadsheet/spreadsheet.js":["bEWP",0,96],"./sql/sql.js":["/9rB",0,97],"./stex/stex.js":["+NIl",0,1],"./stylus/stylus.js":["dtKC",0,8],"./swift/swift.js":["wOIU",0,98],"./tcl/tcl.js":["BEBj",0,99],"./textile/textile.js":["TD3l",0,100],"./tiddlywiki/tiddlywiki.js":["9+NH",0,101],"./tiki/tiki.js":["Km7L",0,102],"./toml/toml.js":["0sou",0,103],"./tornado/tornado.js":["xbNY",0,2,3,1,20],"./troff/troff.js":["s1o1",0,104],"./ttcn-cfg/ttcn-cfg.js":["hmTv",0,105],"./ttcn/ttcn.js":["TYrp",0,106],"./turtle/turtle.js":["P3N9",0,107],"./twig/twig.js":["SII/",0,1,108],"./vb/vb.js":["Kr55",0,109],"./vbscript/vbscript.js":["axah",0,110],"./velocity/velocity.js":["/kYp",0,111],"./verilog/verilog.js":["m2bc",0,112],"./vhdl/vhdl.js":["PP56",0,113],"./vue/vue.js":["aT2M",0,2,3,8,6,1,114],"./webidl/webidl.js":["PVgs",0,115],"./xml/xml.js":["1eCo",0,116],"./xquery/xquery.js":["bJEP",0,117],"./yacas/yacas.js":["WThJ",0,118],"./yaml-frontmatter/yaml-frontmatter.js":["0gIM",0,1,119],"./yaml/yaml.js":["ztCB",0,1],"./z80/z80.js":["dRHf",0,120]};function i(e){if(!t.o(l,e))return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n});var n=l[e],i=n[0];return Promise.all(n.slice(1).map(t.e)).then(function(){return t.t(i,7)})}i.keys=function(){return Object.keys(l)},i.id="v4wS",e.exports=i},vPHx:function(e,n,t){"use strict";function l(e){window.OpenProject.getPluginContext().then(function(n){var t=n.services.opModalService,l=n.classes.modals.passwordConfirmation;e(document).on("submit","form[data-request-for-confirmation]",function(e){var n=jQuery(this);return!!n.find('input[name="_password_confirmation"]').length||function(e,n,t,l){return e.find("_password_confirmation").length>0||(n.preventDefault(),t.show(l,"global").closingEvent.subscribe(function(n){n.confirmed&&(jQuery("<input>").attr({type:"hidden",name:"_password_confirmation",value:n.password_confirmation}).appendTo(e),e.trigger("submit"))}),!1)}(n,e,t,l)})})}var i;t.r(n),(i=jQuery)(function(){i(document.documentElement).on("click",function(e){var n=jQuery(e.target);return function(e,n){n.hasClass("-augmented-datepicker")&&n.attr("autocomplete","off").datepicker().datepicker("show")}(0,n),function(e,n){document.contains(e.target)||e.preventDefault();var t=n.closest("a");if(0!==t.length){var l=t.attr("href")||"",i=l.indexOf("#");""!==l&&0!==i||(-1!==i&&"#"!==l&&(window.location.hash=l),e.preventDefault())}}(e,n),!0});var e=window.location.hash;if(e&&e.startsWith("#"))try{var n=document.querySelector(e);n&&n.scrollIntoView()}catch(t){console.log("Could not scroll to given location hash: "+e+" ( "+t.message+")")}i(document).on("submit","form",function(){window.OpenProject.pageIsSubmitted=!0}),i(window).on("beforeunload",function(e){var n=e.originalEvent;window.OpenProject.pageWasEdited&&!window.OpenProject.pageIsSubmitted&&(n.preventDefault(),n.returnValue="")}),i(document.documentElement).on("dragover drop",function(e){return e.preventDefault(),!1}),function(){for(var e=document.querySelectorAll(".augment--refresh-on-form-changes"),n=function(n){var t=e[n],l=jQuery(t),i=l.data("refreshUrl"),r=l.data("inputSelector");l.find(r).on("change",function(){window.location.href=i+"?"+l.serialize()})},t=0;t<e.length;t++)n(t)}(),l(i)})},vqYl:function(e,n,t){"use strict";t.r(n),t.d(n,"OpenProject",function(){return r});var l=t("FnNU"),i=t("t9fZ"),r=function(){function e(){this.pluginContext=Object(l.f)(),this.pageWasEdited=!1,this.pageIsSubmitted=!1}return e.prototype.getPluginContext=function(){return this.pluginContext.values$().pipe(Object(i.a)(1)).toPromise()},Object.defineProperty(e.prototype,"urlRoot",{get:function(){return jQuery("meta[name=app_base_path]").attr("content")||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"environment",{get:function(){return jQuery("meta[name=openproject_initializer]").data("environment")},enumerable:!0,configurable:!0}),e.prototype.guardedLocalStorage=function(e,n){try{if(void 0===n){var t=window.localStorage.getItem(e);return null===t?void 0:t}window.localStorage.setItem(e,n)}catch(l){console.error("Failed to access your browsers local storage. Is your local database corrupted?")}},e}();window.OpenProject=new r},wEvd:function(e,n){jQuery(function(e){var n=e.datepicker.regional,t=n[I18n.locale]||n[""];"number"==typeof I18n.firstDayOfWeek&&(t.firstDay=I18n.firstDayOfWeek),e.datepicker.setDefaults(t);var l=e.datepicker._gotoToday;e.datepicker._gotoToday=function(n){l.call(this,n);var t=e(n),i=this._getInst(t[0]),r=e.datepicker._formatDate(i);t.val(r),t.blur(),e.datepicker._hideDatepicker()};var i={showWeek:!0,changeMonth:!0,changeYear:!0,yearRange:"c-100:c+10",dateFormat:"yy-mm-dd",showButtonPanel:!0,calculateWeek:function(n){var t=new Date(+n);return 1!=n.getDay()&&t.setDate(n.getDate()-n.getDay()+1),e.datepicker.iso8601Week(t)}};e.datepicker.setDefaults(i),e.extend(e.datepicker,{_originalGotoToday:e.datepicker._gotoToday,_gotoToday:function(n){var t=e(n),l=this._getInst(t[0]),i=new Date,r=this._formatDate(l,i.getDate(),i.getMonth(),i.getFullYear());this._originalGotoToday(n),this._selectDate(n,r)},_inlineDatepicker2:e.datepicker._inlineDatepicker,_inlineDatepicker:function(n,t){this._inlineDatepicker2(n,t);var l=e.datepicker._get(t,"beforeShow");l&&l.apply(n,[n,t])},_checkOffsetOriginal:e.datepicker._checkOffset,_checkOffset:function(n,t,l){var i=e.datepicker._checkOffsetOriginal(n,t,l),r=this._get(n,"alterOffset");if(r){var o=n.input?n.input[0]:null;return r.apply(o,[i])}return i}})})},wZYP:function(e,n,t){"use strict";t.d(n,"a",function(){return l});var l=function(){function e(){this._i18n=window.I18n,this.toNumber=this._i18n.toNumber.bind(this._i18n),this.toPercentage=this._i18n.toPercentage.bind(this._i18n),this.toCurrency=this._i18n.toCurrency.bind(this._i18n),this.strftime=this._i18n.strftime.bind(this._i18n),this.toHumanSize=this._i18n.toHumanSize.bind(this._i18n)}return Object.defineProperty(e.prototype,"locale",{get:function(){return this._i18n.locale},enumerable:!0,configurable:!0}),e.prototype.t=function(e,n){return this._i18n.t(e,n)},e.prototype.lookup=function(e){return this._i18n.lookup(e)},e}()},zUnb:function(e,n,t){"use strict";t.r(n);var l=t("CcnG"),i=t("EVdn"),r=t("AytR"),o=t("1Wj6"),u=function(){function e(){var e=this;this.contextCallbacks=[],this.messageStack=[],this.sentryConfigured=!0;var n=document.querySelector("meta[name=openproject_sentry]");n?t.e(11).then(t.bind(null,"WSEr")).then(function(t){t.init({dsn:n.dataset.dsn,debug:!r.a.production,ignoreErrors:["The transition has been superseded by a different transition","Uncaught (in promise)"],beforeSend:function(n){return e.filterEvent(n)}}),e.sentryLoaded(t)}):(this.sentryConfigured=!1,this.messageStack=[])}return e.prototype.sentryLoaded=function(e){var n=this;this.client=e,e.configureScope(this.setupContext.bind(this)),this.messageStack.forEach(function(e){n[e.type].bind(n).apply(e.args)})},e.prototype.captureMessage=function(e,n){var t=this;if(void 0===n&&(n="info"),!this.client)return this.handleOfflineMessage("captureMessage",Array.from(arguments));this.client.withScope(function(l){t.setupContext(l),t.client.captureMessage(e,o.a.fromString(n))})},e.prototype.captureException=function(e){var n=this;return this.client&&e?"string"==typeof e?this.captureMessage(e,"error"):void this.client.withScope(function(t){n.setupContext(t),n.client.captureException(e)}):this.handleOfflineMessage("captureException",Array.from(arguments))},e.prototype.addContext=function(){for(var e,n=this,t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];(e=this.contextCallbacks).push.apply(e,t),this.client&&t.forEach(function(e){return n.client.configureScope(e)})},e.prototype.handleOfflineMessage=function(e,n){this.sentryConfigured?this.messageStack.push({type:e,args:n}):console.log("[ErrorReporter] Would queue sentry message %O %O, but is not configured.",e,n)},e.prototype.setupContext=function(e){e.setTag("locale",I18n.locale),e.setTag("domain",window.location.hostname),e.setTag("url_path",window.location.pathname),e.setExtra("url_query",window.location.search),this.contextCallbacks.forEach(function(n){return n(e)})},e.prototype.filterEvent=function(e){return document.body.classList.contains("-unsupported-browser")?(console.warn("Browser is not supported, skipping sentry reporting completely."),null):e},e}(),a=t("mrSG"),s=t("FnNU"),c=t("K9Ia"),d=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="MainStore",n.projects=Object(s.g)(),n.workPackages=Object(s.g)(),n.posts=Object(s.g)(),n.schemas=Object(s.g)(),n.types=Object(s.g)(),n.statuses=Object(s.g)(),n.versions=Object(s.g)(),n.users=Object(s.g)(),n.queries=new h,n.changes=new p,n.additional={},n}return a.d(n,e),n.prototype.forResource=function(e){var n=_.camelCase(e._type)+"s",t=this[n]||this.additional[n];return t||(t=this.additional[n]=Object(s.g)()),t&&t.get(e.id)},n.prototype.add=function(e,n){this.additional[e]=n},n}(s.a),p=function(){this.queries=new c.a},h=function(){this.columns=Object(s.f)(),this.sortBy=Object(s.f)(),this.groupBy=Object(s.f)(),this.filters=Object(s.f)(),this.displayRepresentation=Object(s.f)()},f=t("4c35"),g=t("+rW8"),m=t("7ond"),v=t("67Y/"),b=function(e){function n(){var n=e.call(this)||this;return n.name="IsolatedQuerySpace",n.query=Object(s.f)(),n.queryForm=Object(s.f)(),n.results=Object(s.f)(),n.groups=Object(s.f)(),n.columns=Object(s.f)(),n.collapsedGroups=Object(s.f)(),n.rendered=Object(s.f)(),n.renderedWorkPackages=Object(s.c)(n.rendered,function(e){return e.pipe(Object(v.a)(function(e){return e.filter(function(e){return!!e.workPackageId})}))}),n.renderedWorkPackageIds=Object(s.c)(n.renderedWorkPackages,function(e){return e.pipe(Object(v.a)(function(e){return e.map(function(e){return e.workPackageId.toString()})}))}),n.focusedWorkPackage=Object(s.f)(),n.stopAllSubscriptions=new c.a,n.additionalRequiredWorkPackages=Object(s.f)(),n.initialized=Object(s.f)(),n}return a.d(n,e),n}(s.a),y=t("t9fZ"),w=t("aGNc"),C=t("p0ib"),k=function(){function e(e){this.querySpace=e,this.updatesState=Object(s.f)(),this.pristineState=Object(s.f)()}return e.prototype.initialize=function(e,n,t){var l=this.valueFromQuery(e,n);this.pristineState.putValue(l)},e.prototype.update=function(e){this.updatesState.putValue(e)},e.prototype.clear=function(e){this.pristineState.clear(e),this.updatesState.clear(e)},e.prototype.live$=function(){return Object(C.a)(this.pristineState.values$(),this.updatesState.values$())},e.prototype.pristine$=function(){return this.pristineState.values$()},e.prototype.updates$=function(){return this.updatesState.values$()},e.prototype.onReady=function(){return this.pristineState.values$().pipe(Object(y.a)(1),Object(w.a)(null)).toPromise()},Object.defineProperty(e.prototype,"lastUpdatedState",{get:function(){var e=Object(s.b)(this.pristineState,this.updatesState);return Object(s.d)(e,function(e){return e.pipe(Object(v.a)(function(e){var n=e[0],t=e[1];return void 0===t?n:t}))})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.lastUpdatedState.value},set:function(e){e?this.updatesState.putValue(e):this.updatesState.clear()},enumerable:!0,configurable:!0}),e}(),I=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(k),j=t("wd/R"),R="timeline-element",P=function(){this.zoomLevel="days"},S=["days","weeks","months","quarters","years"];function x(e){switch(e){case"days":return 30;case"weeks":return 15;case"months":return 6;case"quarters":return 2;case"years":return.5}throw new Error("invalid zoom level: "+e)}var T=function(){function e(){this.now=j({hour:0,minute:0,seconds:0}),this.dateDisplayStart=j({hour:0,minute:0,seconds:0}),this.dateDisplayEnd=this.dateDisplayStart.clone().add(1,"day"),this.settings=new P,this.activeSelectionMode=null,this.selectionModeStart=null}return Object.defineProperty(e.prototype,"pixelPerDay",{get:function(){return x(this.settings.zoomLevel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidthInPx",{get:function(){return this.maxSteps*this.pixelPerDay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSteps",{get:function(){return this.dateDisplayEnd.diff(this.dateDisplayStart,"days")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayCountForMarginLeft",{get:function(){return Math.ceil(120/this.pixelPerDay)},enumerable:!0,configurable:!0}),e}();function O(e,n){return n*e.pixelPerDay}function E(e,n){return O(e,n)+"px"}function D(e,n,t,l){for(var i=[],r=[],o=t.clone().startOf(n),u=l.clone().endOf(n);o.isBefore(u);){var a=j.max(o,t).clone(),s=j.min(o.clone().endOf(n),l).clone();o.add(1,n);var c=e.visibleViewportAtCalculationTime;a.isSameOrAfter(c[0])&&a.isSameOrBefore(c[1])||s.isSameOrAfter(c[0])&&s.isSameOrBefore(c[1])?i.push([a,s]):r.push([a,s])}var d=r.splice(0,1)[0],p=r.pop();return{inViewportAndBoundaries:_.concat([d].filter(function(e){return!_.isNil(e)}),i,[p].filter(function(e){return!_.isNil(e)})),rest:r}}var F,N=function(e){function n(n){var t=e.call(this,n)||this;return t.querySpace=n,t.appliedZoomLevel$=Object(s.f)("auto"),t}return a.d(n,e),n.prototype.valueFromQuery=function(e){return a.a({},this.defaultState,{visible:e.timelineVisible,zoomLevel:e.timelineZoomLevel,labels:e.timelineLabels})},Object.defineProperty(n.prototype,"appliedZoomLevel",{get:function(){return this.appliedZoomLevel$.value},set:function(e){this.appliedZoomLevel$.putValue(e)},enumerable:!0,configurable:!0}),n.prototype.hasChanged=function(e){var n=this.isVisible!==e.timelineVisible,t=this.zoomLevel!==e.timelineZoomLevel,l=!_.isEqual(this.current.labels,e.timelineLabels);return n||t||l},n.prototype.applyToQuery=function(e){return e.timelineVisible=this.isVisible,e.timelineZoomLevel=this.zoomLevel,e.timelineLabels=this.current.labels,!1},n.prototype.toggle=function(){var e=this.current;this.setVisible(!e.visible)},n.prototype.setVisible=function(e){this.updatesState.putValue(a.a({},this.current,{visible:e}))},Object.defineProperty(n.prototype,"isVisible",{get:function(){return this.current.visible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zoomLevel",{get:function(){return this.current.zoomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labels",{get:function(){return _.isEmpty(this.current.labels)?this.defaultLabels:this.current.labels},enumerable:!0,configurable:!0}),n.prototype.updateLabels=function(e){this.modify({labels:e})},n.prototype.getNormalizedLabels=function(e){var n=this.defaultLabels;return _.each(this.current.labels,function(e,t){var l=t;n[l]=""===e?null:e}),n},n.prototype.setZoomLevel=function(e){this.modify({zoomLevel:e})},n.prototype.updateZoomWithDelta=function(e){var n=this.current.zoomLevel;if("auto"!==n)return this.applyZoomLevel(n,e);var t=this.appliedZoomLevel;if(t&&"auto"!==t)this.applyZoomLevel(t,e);else{var l=e<0?"days":"years";this.setZoomLevel(l)}},n.prototype.isAutoZoom=function(){return"auto"===this.current.zoomLevel},n.prototype.enableAutozoom=function(){this.modify({zoomLevel:"auto"})},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr(this.defaultState)},enumerable:!0,configurable:!0}),n.prototype.modify=function(e){this.update(a.a({},this.current,e))},n.prototype.applyZoomLevel=function(e,n){var t=S.indexOf(e);(t+=n)>=0&&t<S.length&&this.setZoomLevel(S[t])},Object.defineProperty(n.prototype,"defaultLabels",{get:function(){return{left:"",right:"",farRight:"subject"}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultState",{get:function(){return{zoomLevel:"auto",visible:!1,labels:this.defaultLabels}},enumerable:!0,configurable:!0}),n}(I),A=t("wZYP"),V=t("t/Na"),M=t("vLqr"),q=t("9Z1F"),L=function(){function e(e,n,t,l,i){this.injector=e,this.$source=n,this.$loaded=t,this.halInitializer=l,this.states=this.injector.get(d),this.I18n=this.injector.get(A.a),this.$links={},this.$embedded={},this.$halType=i,this.$initialize(n)}return e.getEmptyResource=function(e){return void 0===e&&(e={href:null}),{_links:{self:e}}},e.idFromLink=function(e){return e.split("/").pop()},Object.defineProperty(e.prototype,"idFromLink",{get:function(){return this.$href?e.idFromLink(this.$href):""},enumerable:!0,configurable:!0}),e.prototype.$initialize=function(e){this.$source=e.$source||e,this.halInitializer(this)},e.prototype.toString=function(){return this.$href?"[HalResource href="+this.$href+"]":"[HalResource id="+this.id+"]"},Object.defineProperty(e.prototype,"id",{get:function(){if(this.$source.id)return this.$source.id.toString();var e=this.idFromLink;return e.match(/^\d+$/)?e:null},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNew",{get:function(){return"new"===this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persisted",{get:function(){return!(!this.id||"new"===this.id)},enumerable:!0,configurable:!0}),e.prototype.isAttributeEditable=function(e){var n=this.schema[e];return this.$links.update&&n&&n.writable},e.prototype.retainFrom=function(e){this.__initialized_at=e.__initialized_at},e.prototype.$copy=function(e){return void 0===e&&(e={}),new(0,this.constructor)(this.injector,_.merge(this.$plain(),e),this.$loaded,this.halInitializer,this.$halType)},e.prototype.$plain=function(){return _.cloneDeep(this.$source)},Object.defineProperty(e.prototype,"$isHal",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$link",{get:function(){return this.$links.self.$link},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name||this.$link.title||""},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$href",{get:function(){return this.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.state&&this.state.putValue(e)},e.prototype.previewPath=function(){if(this.isNew&&this.project)return this.project.href},e.prototype.getEditorTypeFor=function(e){return"constrained"},e.prototype.$load=function(e){var n=this;if(void 0===e&&(e=!1),!this.state)return this.$loadResource(e);var t=this.state;return e&&t.clear(),t.putFromPromiseIfPristine(function(){return n.$loadResource(e)}),t.valuesPromise().then(function(e){return n.$initialize(e),n.$loaded=!0,n})},e.prototype.$loadResource=function(e){var n=this;if(void 0===e&&(e=!1),!e){if(this.$loaded)return Promise.resolve(this);if(!this.$loaded&&this.$self)return this.$self}return this.$loaded=!1,this.$self=this.$links.self({}).then(function(e){return n.$loaded=!0,n.$initialize(e.$source),n}),this.$self},e.prototype.$update=function(){return this.$load(!0)},e.prototype.$embeddableKeys=function(){var e=Object.keys(this.$source);return _.without(e,"_links","_embedded","id")},e.prototype.$linkableKeys=function(){var e=Object.keys(this.$links);return _.without(e,"self")},e}(),$=function(){function e(e,n,t,l,i,r,o,u){void 0===n&&(n=null),void 0===t&&(t=""),void 0===l&&(l="get"),void 0===i&&(i=!1),void 0===o&&(o="application/json"),this.requestMethod=e,this.href=n,this.title=t,this.method=l,this.templated=i,this.payload=r,this.type=o,this.identifier=u}return e.fromObject=function(n,t){return new e(function(e,t,l,i){return n.request(e,t,l,i).toPromise()},t.href,t.title,t.method,t.templated,t.payload,t.type,t.identifier)},e.prototype.$fetch=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],l=e[1];return this.requestMethod(this.method,this.href,t,l)},e.prototype.$prepare=function(n){if(!this.templated)throw"The link "+this.href+" is not templated.";var t=_.clone(this.href)||"";return _.each(n,function(e,n){var l=new RegExp("{"+n+"}");t=t.replace(l,e)}),new e(this.requestMethod,t,this.title,this.method,!1,this.payload,this.type,this.identifier).$callable()},e.prototype.$callable=function(){var e=this,n=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.$fetch.apply(e,n)};return _.extend(n,{$link:this,href:this.href,title:this.title,method:this.method,templated:this.templated,payload:this.payload,type:this.type,identifier:this.identifier}),n},e}();!function(e){e.lazy=function(e,n,t,l){if(_.isObject(e)){var i,r=!1,o={get:function(){return r||(i=t(),r=!0),i},set:function(){},configurable:!0,enumerable:!0};l&&(o.set=function(e){i=l(e),r=!0}),Object.defineProperty(e,n,o)}}}(F||(F={}));var H=t("NAZG");function B(e){return _.isNil(e)?[]:e.map(function(e){return e.$copy()})}function z(e,n){function t(n,t){return void 0===t&&(t=!0),_.isNil(n)?n:n._links||n._embedded||n._type?e.createHalResource(n,t):n}function l(e,t){var l="$"+e,i="_"+e,r=n.$source[i];_.isObject(r)&&Object.keys(r).forEach(function(e){F.lazy(n[l],e,function(){return t(r[e])})})}function i(e,t){var l=Array.isArray(e);if(e)if(l)n.$source._links[t]=e.map(function(e){return{href:e.href}});else if(e.hasOwnProperty("$link")){var i=e.$link;i.href&&(n.$source._links[t]=i)}else"href"in e&&(n.$source._links[t]={href:e.href});else n.$source._links[t]={href:null};return n.$embedded&&n.$embedded[t]&&(n.$embedded[t]=e,n.$source._embedded[t]=l?e.map(function(e){return e.$source}):_.get(e,"$source",e)),e}!function(){n.$source._links||(n.$source._links={});n.$source._links.self||(n.$source._links.self={href:null})}(),l("links",function(n){return Array.isArray(n)?n.map(function(n){return $.fromObject(e,n).$callable()}):$.fromObject(e,n).$callable()}),l("embedded",function(e){return Array.isArray(e)?e.map(function(e){return t(e,!0)}):(_.isObject(e)&&_.each(e,function(n,l){n&&(n._embedded||n._links)&&F.lazy(e,l,function(){return t(n,!0)})}),t(e,!0))}),n.$embeddableKeys().forEach(function(e){Object.defineProperty(n,e,{get:function(){return t(n.$source[e],!0)},set:function(t){n.$source[e]=t},enumerable:!0,configurable:!0})}),n.$linkableKeys().forEach(function(t){F.lazy(n,t,function(){var l=n.$links[t].$link||n.$links[t];if(Array.isArray(l)){var i=l.map(function(l){return e.createLinkedResource(n,t,l.$link)}),r=(new(H.bind.apply(H,[void 0].concat(i)))).on("change",function(){r.forEach(function(e){e.$link||r.splice(r.indexOf(e),1)}),n.$source._links[t]=r.map(function(e){return e.$link})});return r}return l.href?"get"!==l.method?$.fromObject(e,l).$callable():e.createLinkedResource(n,t,l):null},function(e){return i(e,t)})}),function(){if(!n.$source._embedded)return;Object.keys(n.$source._embedded).forEach(function(e){F.lazy(n,e,function(){return n.$embedded[e]},function(n){return i(n,e)})})}()}var W=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),Q=function(){function e(e,n){this.injector=e,this.http=n,this.config={}}return e.prototype.request=function(e,n,t,l){if(void 0===l&&(l={}),"get"===e)return this.get(n,t,l);var i={body:t||{},headers:l,withCredentials:!0,responseType:"json"};return this._request(e,n,i)},e.prototype._request=function(e,n,t){var l=this;return this.http.request(e,n,t).pipe(Object(v.a)(function(e){return l.createHalResource(e)}),Object(q.a)(function(t){console.error("Failed to "+e+" "+n+": "+t.name);var i=l.createHalResource(t.error);return i.httpError=t,Object(M.throwError)(i)}))},e.prototype.get=function(e,n,t){var l={headers:t,params:new V.i({encoder:new W,fromObject:n}),withCredentials:!0,responseType:"json"};return this._request("get",e,l)},e.prototype.getAllPaginated=function(e,n,t,l){return void 0===t&&(t={}),void 0===l&&(l={}),a.b(this,void 0,void 0,function(){var i,r,o,u;return a.e(this,function(a){switch(a.label){case 0:i=0,r=1,o=[],t.pageSize=n,a.label=1;case 1:return i<n?(t.offset=r,[4,this.request("get",e,t,l).toPromise()]):[3,3];case 2:if(0===(u=a.sent()).count)throw"No more results for this query, but expected more.";return o.push(u),i+=u.count,r+=1,[3,1];case 3:return[2,o]}})})},e.prototype.put=function(e,n,t){return this.request("put",e,n,t)},e.prototype.post=function(e,n,t){return this.request("post",e,n,t)},e.prototype.patch=function(e,n,t){return this.request("patch",e,n,t)},e.prototype.delete=function(e,n,t){return this.request("delete",e,n,t)},e.prototype.registerResource=function(e,n){this.config[e]=n},Object.defineProperty(e.prototype,"defaultClass",{get:function(){return L},enumerable:!0,configurable:!0}),e.prototype.createHalResource=function(e,n){void 0===n&&(n=!0),_.isNil(e)&&(e=L.getEmptyResource());var t=e._type||"HalResource";return this.createHalResourceOfType(t,e,n)},e.prototype.createHalResourceOfType=function(e,n,t){var l=this;void 0===t&&(t=!1);return new(this.getResourceClassOfType(e))(this.injector,n,t,function(e){return z(l,e)},e)},e.prototype.createHalResourceOfClass=function(e,n,t){var l=this;void 0===t&&(t=!1);var i=n._type||"HalResource";return new e(this.injector,n,t,function(e){return z(l,e)},i)},e.prototype.fromLink=function(e){var n=L.getEmptyResource($.fromObject(this,e));return this.createHalResource(n,!1)},e.prototype.fromSelfLink=function(e){var n={_links:{self:{href:e}}};return this.createHalResource(n)},e.prototype.createLinkedResource=function(e,n,t){var l=L.getEmptyResource(),i=e.$halType,r=this.getResourceClassOfAttribute(i,n)||"HalResource";return l._links.self=t,this.createHalResourceOfType(r,l,!1)},e.prototype.getResourceClassOfType=function(e){var n=this.config[e];return n&&n.cls?n.cls:this.defaultClass},e.prototype.getResourceClassOfAttribute=function(e,n){var t=this.config[e];return(t&&t.attrTypes||{})[n]},e}(),U=function(){function e(e,n){this.basePath=e,this.path=this.basePath+"/"+n}return e.prototype.id=function(e){return new G(this.path,e)},e.prototype.optionalId=function(e){return _.isNil(e)?this:this.id(e)},e.prototype.toString=function(){return this.path},e.prototype.toPath=function(){return this.path},e.prototype.filtered=function(e){return this.toString()+"/?"+e.toParams()},e}(),G=function(){function e(e,n){this.basePath=e,this.path=this.basePath+"/"+n}return e.prototype.toString=function(){return this.path},e.prototype.toPath=function(){return this.path},e}(),K=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.workPackageId=t,l.relations=l.path+"/relations",l.revisions=l.path+"/revisions",l.activities=l.path+"/activities",l.available_watchers=l.path+"/available_watchers",l.available_projects=l.path+"/available_projects",l}return a.d(n,e),n}(G),Y=function(e){function n(n){var t=e.call(this,n,"work_packages")||this;return t.form=new G(t.path,"form"),t}return a.d(n,e),n.prototype.id=function(e){return new K(this.path,e)},n}(U),Z=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.userId=t,l.avatar=l.path+"/avatar",l}return a.d(n,e),n}(G),J=function(e){function n(n){var t=e.call(this,n,"users")||this;return t.me=t.path+"/me",t}return a.d(n,e),n.prototype.id=function(e){return new Z(this.path,e)},n}(U),X=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.form=new G(l.path,"form"),l.order=new G(l.path,"order"),l}return a.d(n,e),n}(G),ee=function(e){function n(n){var t=e.call(this,n,"queries")||this;return t.form=new G(t.path,"form"),t.default=new G(t.path,"default"),t}return a.d(n,e),n.prototype.id=function(e){return new X(this.path,e)},n}(U),ne=function(e){function n(n){return e.call(this,n,"types")||this}return a.d(n,e),n}(U),te=function(e){function n(n){var t=e.call(this,n,"versions")||this;return t.form=new G(t.path,"form"),t.availableProjects=new G(t.path,"available_projects"),t}return a.d(n,e),n}(U),le=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.projectId=t,l.queries=new ee(l.path),l.types=new ne(l.path),l.work_packages=new Y(l.path),l.versions=new te(l.path),l}return a.d(n,e),n}(G),ie=function(e){function n(n){var t=e.call(this,n,"projects")||this;return t.schema=t.path+"/schema",t}return a.d(n,e),n.prototype.id=function(e){return new le(this.path,e)},n}(U),re=function(){function e(){this.filters=[]}return e.prototype.add=function(e,n,t){var l={};return l[e]={operator:n,values:t},this.filters.push(l),this},e.prototype.toJson=function(){return JSON.stringify(this.filters)},e.prototype.toParams=function(){var e=this,n=[];return n=this.filters.map(function(n){return e.serializeFilter(n)}),"filters="+encodeURI("["+n.join(",")+"]")},e.prototype.serializeFilter=function(e){var n=this,t=Object.keys(e)[0],l=e[t];return'{"'+t+'":{"operator":"'+l.operator+'","values":['+l.values.map(function(e){return n.serializeFilterValue(e)}).join(",")+"]}}"},e.prototype.serializeFilterValue=function(e){return'"'+e+'"'},e}();function oe(e,n,t){return(new re).add(e,n,t)}var ue=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.form=new G(l.path,"form"),l}return a.d(n,e),n}(G),ae=function(e){function n(n){return e.call(this,n,"grids")||this}return a.d(n,e),n.prototype.id=function(e){return new ue(this.path,e)},n.prototype.form=function(){return new G(this.path,"form")},n}(U),se=function(e){function n(n,t){return e.call(this,n,t)||this}return a.d(n,e),n}(G),ce=function(e){function n(n){return e.call(this,n,"news")||this}return a.d(n,e),n.prototype.id=function(e){return new se(this.path,e)},n}(U),de=function(e){function n(n){return e.call(this,n,"time_entries")||this}return a.d(n,e),n.prototype.id=function(e){return new se(this.path,e)},n}(U),pe=function(e){function n(n){var t=e.call(this,n,"memberships")||this;return t.available_projects=t.path+"/available_projects",t}return a.d(n,e),n}(U),he=function(e){function n(n){return e.call(this,n,"groups")||this}return a.d(n,e),n.prototype.toString=function(){throw"Backend does not yet offer this end point"},n}(U),fe=function(){function e(e){this.appBasePath=e,this.apiV3Base=this.appBasePath+"/api/v3",this.attachments=new G(this.apiV3Base,"attachments"),this.configuration=new G(this.apiV3Base,"configuration"),this.root=new G(this.apiV3Base,""),this.statuses=new U(this.apiV3Base,"statuses"),this.relations=new U(this.apiV3Base,"relations"),this.priorities=new U(this.apiV3Base,"priorities"),this.time_entries=new de(this.apiV3Base),this.memberships=new pe(this.apiV3Base),this.news=new ce(this.apiV3Base),this.types=new ne(this.apiV3Base),this.versions=new te(this.apiV3Base),this.work_packages=new Y(this.apiV3Base),this.queries=new ee(this.apiV3Base),this.projects=new ie(this.apiV3Base),this.users=new J(this.apiV3Base),this.help_texts=new U(this.apiV3Base,"help_texts"),this.grids=new ae(this.apiV3Base),this.groups=new he(this.apiV3Base)}return e.prototype.withOptionalProject=function(e){return _.isNil(e)?this:this.projects.id(e)},e.prototype.resource=function(e){return e.startsWith("/")||(e="/"+e),this.apiV3Base+e},e.prototype.previewMarkup=function(e){var n=this.apiV3Base+"/render/markdown";return e?n+"?context="+e:n},e.prototype.principals=function(e,n){var t=new re;return t.add("status","!",["3"]),t.add("member","=",[e.toString()]),t.add("type","=",["User","Group"]),t.add("id","!",["me"]),n&&n.length>0&&t.add("name","~",[n]),this.apiV3Base+"/principals?"+t.toParams()+encodeURI('&sortBy=[["name","asc"]]&offset=1&pageSize=10')},e.prototype.wpBySubjectOrId=function(e,n){void 0===n&&(n=!1);var t=new re;return n?t.add("id","=",[e]):t.add("subjectOrId","**",[e]),this.apiV3Base+"/work_packages?"+t.toParams()+encodeURI('&sortBy=[["updatedAt","desc"]]&offset=1&pageSize=10')},e}(),ge=function(){function e(){this.appBasePath=window.appBasePath?window.appBasePath:"",this.api={v3:new fe(this.appBasePath)}}return Object.defineProperty(e.prototype,"staticBase",{get:function(){return this.appBasePath},enumerable:!0,configurable:!0}),e.prototype.attachmentDownloadPath=function(e,n){var t=this.staticBase+"/attachments/"+e;return n?t+"/"+n:t},e.prototype.highlightingCssPath=function(){return this.staticBase+"/highlighting/styles"},e.prototype.forumPath=function(e,n){return this.projectForumPath(e)+"/"+n},e.prototype.keyboardShortcutsHelpPath=function(){return this.staticBase+"/help/keyboard_shortcuts"},e.prototype.messagePath=function(e){return this.staticBase+"/topics/"+e},e.prototype.myPagePath=function(){return this.staticBase+"/my/page"},e.prototype.newsPath=function(e){return this.staticBase+"/news/"+e},e.prototype.loginPath=function(){return this.staticBase+"/login"},e.prototype.projectsPath=function(){return this.staticBase+"/projects"},e.prototype.projectPath=function(e){return this.projectsPath()+"/"+e},e.prototype.projectActivityPath=function(e){return this.projectPath(e)+"/activity"},e.prototype.projectForumPath=function(e){return this.projectPath(e)+"/forums"},e.prototype.projectCalendarPath=function(e){return this.projectPath(e)+"/work_packages/calendar"},e.prototype.projectMembershipsPath=function(e){return this.projectPath(e)+"/members"},e.prototype.projectNewsPath=function(e){return this.projectPath(e)+"/news"},e.prototype.projectTimelinesPath=function(e){return this.projectPath(e)+"/timelines"},e.prototype.projectTimeEntriesPath=function(e){return this.projectPath(e)+"/time_entries"},e.prototype.projectWikiPath=function(e){return this.projectPath(e)+"/wiki"},e.prototype.projectWorkPackagePath=function(e,n){return this.projectWorkPackagesPath(e)+"/"+n},e.prototype.projectWorkPackagesPath=function(e){return this.projectPath(e)+"/work_packages"},e.prototype.projectWorkPackageNewPath=function(e){return this.projectWorkPackagesPath(e)+"/new"},e.prototype.projectBoardsPath=function(e){return e?this.projectPath(e)+"/boards":this.staticBase+"/boards"},e.prototype.projectDashboardsPath=function(e){return this.projectPath(e)+"/dashboards"},e.prototype.timeEntriesPath=function(e){return e?this.workPackagePath(e)+"/time_entries":this.staticBase+"/time_entries"},e.prototype.timeEntryPath=function(e){return this.staticBase+"/time_entries/"+e},e.prototype.timeEntryEditPath=function(e){return this.timeEntryPath(e)+"/edit"},e.prototype.usersPath=function(){return this.staticBase+"/users"},e.prototype.userPath=function(e){return this.usersPath()+"/"+e},e.prototype.versionsPath=function(){return this.staticBase+"/versions"},e.prototype.versionEditPath=function(e){return this.staticBase+"/versions/"+e+"/edit"},e.prototype.versionShowPath=function(e){return this.staticBase+"/versions/"+e},e.prototype.workPackagesPath=function(){return this.staticBase+"/work_packages"},e.prototype.workPackagePath=function(e){return this.staticBase+"/work_packages/"+e},e.prototype.workPackageCopyPath=function(e){return this.workPackagePath(e)+"/copy"},e.prototype.workPackageDetailsCopyPath=function(e,n){return this.projectWorkPackagesPath(e)+"/details/"+n+"/copy"},e.prototype.workPackagesBulkDeletePath=function(){return this.workPackagesPath()+"/bulk"},e.prototype.projectLevelListPath=function(){return this.projectsPath()+"/level_list.json"},e.prototype.textFormattingHelp=function(){return this.staticBase+"/help/text_formatting"},e}(),me=t("klSw"),ve=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(){return this.$configuration?this.$configuration:this.$configuration=this.halResourceService.get(this.pathHelper.api.v3.configuration.toString()).pipe(Object(me.a)())},e}(),be=function(){function e(e,n){this.I18n=e,this.configurationDm=n,this.initialized=this.loadConfiguration().then(function(){return!0}).catch(function(){return!1})}return e.prototype.commentsSortedInDescendingOrder=function(){return this.userPreference("commentSortDescending")},e.prototype.warnOnLeavingUnsaved=function(){return this.userPreference("warnOnLeavingUnsaved")},e.prototype.autoHidePopups=function(){return this.userPreference("autoHidePopups")},e.prototype.isTimezoneSet=function(){return!!this.timezone()},e.prototype.timezone=function(){return this.userPreference("timeZone")},Object.defineProperty(e.prototype,"maximumAttachmentFileSize",{get:function(){return this.systemPreference("maximumAttachmentFileSize")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perPageOptions",{get:function(){return this.systemPreference("perPageOptions")},enumerable:!0,configurable:!0}),e.prototype.dateFormatPresent=function(){return!!this.systemPreference("dateFormat")},e.prototype.dateFormat=function(){return this.systemPreference("dateFormat")},e.prototype.timeFormatPresent=function(){return!!this.systemPreference("timeFormat")},e.prototype.timeFormat=function(){return this.systemPreference("timeFormat")},e.prototype.startOfWeekPresent=function(){return!!this.systemPreference("startOfWeek")},e.prototype.startOfWeek=function(){return this.startOfWeekPresent()?this.systemPreference("startOfWeek"):"en"===I18n.locale?1:"de"===I18n.locale?0:null},e.prototype.loadConfiguration=function(){var e=this;return this.configurationDm.load().toPromise().then(function(n){e.configuration=n})},e.prototype.userPreference=function(e){return _.get(this.configuration,["userPreferences",e])},e.prototype.systemPreference=function(e){return _.get(this.configuration,e)},e}(),ye=6,we=1,Ce=function(){function e(e){this.configuration=e,this.loadPaginationOptions()}return e.prototype.getCachedPerPage=function(e){var n=this.localStoragePerPage;return null!==n&&n>0&&(0===e.length||-1!==e.indexOf(n))?n:e.length>0?e[0]:20},Object.defineProperty(e.prototype,"localStoragePerPage",{get:function(){var e=window.OpenProject.guardedLocalStorage("pagination.perPage");return void 0!==e?parseInt(e,10):null},enumerable:!0,configurable:!0}),e.prototype.getPaginationOptions=function(){return this.paginationOptions},Object.defineProperty(e.prototype,"isPerPageKnown",{get:function(){return!(!this.localStoragePerPage&&!this.paginationOptions)},enumerable:!0,configurable:!0}),e.prototype.getPerPage=function(){return this.localStoragePerPage||this.paginationOptions.perPage},e.prototype.getMaxVisiblePageOptions=function(){return _.get(this.paginationOptions,"maxVisiblePageOptions",ye)},e.prototype.getOptionsTruncationSize=function(){return _.get(this.paginationOptions,"optionsTruncationSize",we)},e.prototype.setPerPage=function(e){window.OpenProject.guardedLocalStorage("pagination.perPage",e.toString()),this.paginationOptions.perPage=e},e.prototype.getPerPageOptions=function(){return this.paginationOptions.perPageOptions},e.prototype.setPerPageOptions=function(e){this.paginationOptions.perPageOptions=e},e.prototype.loadPaginationOptions=function(){var e=this;return this.configuration.initialized.then(function(){return e.paginationOptions={perPage:e.getCachedPerPage(e.configuration.perPageOptions),perPageOptions:e.configuration.perPageOptions,maxVisiblePageOptions:ye,optionsTruncationSize:we},e.paginationOptions})},e}(),ke=function(){function e(e,n,t){this.page=e,this.total=n,this.perPage=t}return e.prototype.getLowerPageBound=function(){return this.perPage*(this.page-1)+1},e.prototype.getUpperPageBound=function(e){return Math.min(this.perPage*this.page,e)},e.prototype.nextPage=function(){this.page+=1},e.prototype.previousPage=function(){this.page-=1},e}(),Ie=function(){function e(e){this.current=new ke(e.offset,e.total,e.pageSize)}return Object.defineProperty(e.prototype,"page",{get:function(){return this.current.page},set:function(e){this.current.page=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perPage",{get:function(){return this.current.perPage},set:function(e){this.current.perPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.current.total},set:function(e){this.current.total=e},enumerable:!0,configurable:!0}),e}(),je=function(e){function n(n,t){var l=e.call(this,n)||this;return l.paginationService=t,l}return a.d(n,e),Object.defineProperty(n.prototype,"paginationObject",{get:function(){return this.current?{pageSize:this.current.perPage,offset:this.current.page}:{pageSize:this.paginationService.getCachedPerPage([]),offset:1}},enumerable:!0,configurable:!0}),n.prototype.valueFromQuery=function(e,n){return new Ie(n)},n.prototype.updateFromObject=function(e){var n=this.current;e.page&&(n.page=e.page),e.perPage&&(n.perPage=e.perPage),e.total&&(n.total=e.total),this.updatesState.putValue(n)},n.prototype.updateFromResults=function(e){var n={page:e.offset,perPage:e.pageSize,total:e.total,count:e.count};this.updateFromObject(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.value},enumerable:!0,configurable:!0}),n}(k),Re=function(e,n){this.injector=e,this.workPackage=n,this.I18n=this.injector.get(A.a)};function Pe(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var l=document.createElement("i");return l.setAttribute("aria-hidden","true"),(e=l.classList).add.apply(e,n),l}var Se=t("S5bw"),_e=function(){function e(e,n){var t=this;this.$state=e,this.$transitions=n,this.currentTab="overview",this.subject=new Se.a(1),this.updateTabs(),n.onSuccess({},function(e){t.updateTabs(e.to().name)})}return Object.defineProperty(e.prototype,"observable",{get:function(){return this.subject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastActiveTab",{get:function(){return this.isCurrentState("show")?this.currentShowTab:this.currentDetailsTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentShowState",{get:function(){return"work-packages.show."+this.currentShowTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentDetailsState",{get:function(){return"work-packages.list.details."+this.currentDetailsTab},enumerable:!0,configurable:!0}),e.prototype.isDetailsState=function(e){return"work-packages.list.details"===e},Object.defineProperty(e.prototype,"currentShowTab",{get:function(){return"overview"===this.currentTab?"activity":this.currentTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentDetailsTab",{get:function(){return this.currentTab},enumerable:!0,configurable:!0}),e.prototype.notify=function(){this.subject.next({active:this.lastActiveTab,show:this.currentShowState,details:this.currentDetailsState})},e.prototype.updateTab=function(e){if(this.isCurrentState(e)){var n=this.$state.current.name;this.currentTab=n.split(".").pop(),this.notify()}},e.prototype.isCurrentState=function(e){return"show"===e?this.$state.includes("work-packages.show.*"):"details"===e&&this.$state.includes("work-packages.list.details.*")},e.prototype.updateTabs=function(e){if("work-packages.show.activity"===e)return this.currentTab="overview",this.notify();this.updateTab("show"),this.updateTab("details")},e}(),xe="__ui-state-link",Te=function(){function e(e,n){this.$state=e,this.keepTab=n}return e.prototype.linkToDetails=function(e,n,t){return this.build(e,"currentDetailsState",n,t)},e.prototype.linkToShow=function(e,n,t){return this.build(e,"currentShowState",n,t)},e.prototype.build=function(e,n,t,l){var i=document.createElement("a");return i.href=this.$state.href(this.keepTab[n],{workPackageId:e}),i.classList.add(xe),i.dataset.workPackageId=e,i.dataset.wpState=n,i.setAttribute("title",t),i.textContent=l,i},e}(),Oe=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.identifier="open-details-action",n.uiStatebuilder=new Te(n.injector.get(g.G),n.injector.get(_e)),n.text={button:n.I18n.t("js.button_open_details")},n}return a.d(n,e),n.prototype.buildElement=function(){var e=this.uiStatebuilder.linkToDetails(this.workPackage.id,this.text.button,"");return e.classList.add("wp-table--details-link","wp-table-context-menu-icon","hidden-for-mobile"),e.appendChild(Pe("icon","icon-info2")),e},n}(Re),Ee=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.identifier="open-context-menu-action",n.text={linkTitle:n.I18n.t("js.label_open_context_menu")},n}return a.d(n,e),n.prototype.buildElement=function(){var e=document.createElement("a");return e.href="#",e.classList.add("wp-table-context-menu-link","wp-table-context-menu-icon"),e.title=this.text.linkTitle,e.appendChild(Pe("icon","icon-show-more-horizontal")),e},n}(Re),De=function(){function e(e){this.injector=e,this.actions=[function(e,n){return new Oe(e,n)},function(e,n){return new Ee(e,n)}]}return e.prototype.setActions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.actions=e},e.prototype.render=function(e){var n=this,t=this.actions.map(function(t){return t(n.injector,e).buildElement()});return _.compact(t)},e}(),Fe=function(){function e(){}return e.prototype.extract=function(e,n){var t=this,l={_links:{}},i=[];for(var r in n)n.hasOwnProperty(r)&&n[r].writable&&(e.$links[r]?Array.isArray(e[r])?l._links[r]=_.map(e[r],function(e){return{href:e.$href}}):l._links[r]={href:e[r]&&e[r].$href}:i.push(r));return _.each(i,function(n){(e.hasOwnProperty(n)||e[n])&&(Array.isArray(e[n])?l[n]=_.map(e[n],function(e){return e instanceof L?t.extract(e,e.currentSchema||e.schema):e}):l[n]=e[n])}),l},e}(),Ne=function(){function e(e){this.paginationService=e}return e.prototype.buildQueryString=function(e){if(e){var n=[];return _.each(e,function(e,t){e&&(Array.isArray(e)||(e=[e]),_.each(e,function(e){null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}))}),n.join("&")}},e.prototype.encodeQueryJsonParams=function(e,n){void 0===n&&(n={});var t={};return t=this.encodeColumns(t,e),t=this.encodeSums(t,e),t=this.encodeTimelineVisible(t,e),t=this.encodeHighlightingMode(t,e),(t=this.encodeHighlightedAttributes(t,e)).hi=!!e.showHierarchies,t.g=_.get(e.groupBy,"id",""),t=this.encodeSortBy(t,e),(t=this.encodeFilters(t,e.filters)).pa=n.page,t.pp=n.perPage,t.dr=e.displayRepresentation,JSON.stringify(t)},e.prototype.encodeColumns=function(e,n){return e.c=n.columns.map(function(e){return e.id}),e},e.prototype.encodeSums=function(e,n){return n.sums&&(e.s=n.sums),e},e.prototype.encodeHighlightingMode=function(e,n){return n.highlightingMode&&(n.persisted||"inline"!==n.highlightingMode)&&(e.hl=n.highlightingMode),e},e.prototype.encodeHighlightedAttributes=function(e,n){return"inline"===n.highlightingMode&&Array.isArray(n.highlightedAttributes)&&n.highlightedAttributes.length>0&&(e.hla=n.highlightedAttributes.map(function(e){return e.id})),e},e.prototype.encodeSortBy=function(e,n){return n.sortBy&&(e.t=n.sortBy.map(function(e){return e.id.replace("-",":")}).join()),e},e.prototype.encodeFilters=function(e,n){var t=this;return n&&n.length>0?e.f=n.map(function(e){return{n:e.id,o:e.operator.id,v:_.map(e.values,function(e){return t.queryFilterValueToParam(e)})}}):e.f=[],e},e.prototype.encodeTimelineVisible=function(e,n){return n.timelineVisible?(e.tv=n.timelineVisible,_.isEmpty(n.timelineLabels)||(e.tll=JSON.stringify(n.timelineLabels)),e.tzl=n.timelineZoomLevel):e.tv=!1,e},e.prototype.buildV3GetQueryFromJsonParams=function(e){var n={pageSize:this.paginationService.getPerPage()};if(!e)return n;var t=JSON.parse(e);if(t.c&&(n["columns[]"]=t.c.map(function(e){return e})),t.s&&(n.showSums=t.s),n.timelineVisible=t.tv,t.tv&&(t.tll&&(n.timelineLabels=t.tll),t.tzl&&(n.timelineZoomLevel=t.tzl)),t.dr&&(n.displayRepresentation=t.dr),t.hl&&(n.highlightingMode=t.hl),t.hla&&(n["highlightedAttributes[]"]=t.hla.map(function(e){return e})),!1!==t.hi&&!0!==t.hi||(n.showHierarchies=t.hi),n.groupBy=_.get(t,"g",""),t.f){var l=t.f.map(function(e){var n={operator:decodeURIComponent(e.o)};if(e.v){var t=Array.isArray(e.v)?e.v:[e.v];_.extend(n,{values:t})}var l={};return l[e.n]=n,l});n.filters=JSON.stringify(l)}return t.t&&(n.sortBy=JSON.stringify(t.t.split(",").map(function(e){return e.split(":")}))),t.pa&&(n.offset=t.pa),t.pp&&(n.pageSize=t.pp),n},e.prototype.buildV3GetQueryFromQueryResource=function(e,n,t){void 0===n&&(n={}),void 0===t&&(t={});var l={};return l["columns[]"]=this.buildV3GetColumnsFromQueryResource(e),l.showSums=e.sums,l.timelineVisible=!!e.timelineVisible,e.timelineVisible&&(l.timelineZoomLevel=e.timelineZoomLevel,l.timelineLabels=JSON.stringify(e.timelineLabels)),e.highlightingMode&&(l.highlightingMode=e.highlightingMode),e.highlightedAttributes&&"inline"===e.highlightingMode&&(l.highlightedAttributes=e.highlightedAttributes.map(function(e){return e.href})),e.displayRepresentation&&(l.displayRepresentation=e.displayRepresentation),l.showHierarchies=!!e.showHierarchies,l.groupBy=_.get(e.groupBy,"id",""),l.filters=this.buildV3GetFiltersAsJson(e.filters,t),l.sortBy=this.buildV3GetSortByFromQuery(e),_.extend(n,l)},e.prototype.queryFilterValueToParam=function(e){return"boolean"==typeof e?e?"t":"f":e?e.id?e.id.toString():e.$href&&e.$href.match(/^\/api\/v3\/string_objects/i)?e.$href.match(/value=([^&]+)/)[1].toString():e.$href?e.$href.split("/").pop().toString():e.toString():""},e.prototype.buildV3GetColumnsFromQueryResource=function(e){var n=this;return e.columns?e.columns.map(function(e){return e.id||e.idFromLink}):e._links.columns?e._links.columns.map(function(e){var t=e.href;return n.idFromHref(t)}):void 0},e.prototype.buildV3GetFilters=function(e,n){var t=this;return void 0===n&&(n={}),e.map(function(e){var l=t.buildV3GetFilterIdFromFilter(e),i=t.buildV3GetOperatorIdFromFilter(e),r=t.buildV3GetValuesFromFilter(e).map(function(e){return _.each(n,function(n,t){e=e.replace("{"+t+"}",n)}),e}),o={};return o[l]={operator:i,values:r},o})},e.prototype.buildV3GetFiltersAsJson=function(e,n){return void 0===n&&(n={}),JSON.stringify(this.buildV3GetFilters(e,n))},e.prototype.buildV3GetFilterIdFromFilter=function(e){var n=e.filter?e.filter.$href:e._links.filter.href;return this.idFromHref(n)},e.prototype.buildV3GetOperatorIdFromFilter=function(e){if(e.operator)return e.operator.id||e.operator.idFromLink;var n=e._links.operator.href;return this.idFromHref(n)},e.prototype.buildV3GetValuesFromFilter=function(e){var n=this;return e.values?_.map(e.values,function(e){return n.queryFilterValueToParam(e)}):_.map(e._links.values,function(e){return n.idFromHref(e.href)})},e.prototype.buildV3GetSortByFromQuery=function(e){var n=this,t=(e.sortBy?e.sortBy:e._links.sortBy).map(function(e){if(e.id)return e.id;var t=e.href;return n.idFromHref(t)});return JSON.stringify(t.map(function(e){return e.split("-")}))},e.prototype.idFromHref=function(e){var n=e.substring(e.lastIndexOf("/")+1,e.length);return decodeURIComponent(n)},e}(),Ae=function(){function e(){}return e.prototype.getFilterSchema=function(e,n){var t=n.$embedded.schema.filtersSchemas.elements;return _.find(t,function(n){return n.allowedFilterValue.href===e.filter.href})},e.prototype.mapSchemasIntoFilters=function(e,n){var t=this;e.filters.forEach(function(e){e.schema=t.getFilterSchema(e,n)})},e}(),Ve=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.list=function(e){return this.listRequest(this.listUrl(),e)},e.prototype.one=function(e){return this.halResourceService.get(this.oneUrl(e).toString()).toPromise()},e.prototype.listRequest=function(e,n){return this.halResourceService.get(e+this.listParamsString(n)).toPromise()},e.prototype.listParamsString=function(e){var n=[];if(e&&e.sortBy&&n.push("sortBy="+JSON.stringify(e.sortBy)),e&&void 0!==e.pageSize&&n.push("pageSize="+e.pageSize),e&&e.filters){var t=new re;e.filters.forEach(function(e){t.add.apply(t,e)}),n.push(t.toParams())}var l="";return n.length&&(l="?"+n.join("&")),l},e}(),Me=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,l)||this;return u.halResourceService=n,u.http=t,u.pathHelper=l,u.UrlParamsHelper=i,u.QueryFilters=r,u.PayloadDm=o,u}return a.d(n,e),n.prototype.stream=function(e,n,t){var l;return l=n?this.pathHelper.api.v3.queries.id(n).toString():this.pathHelper.api.v3.withOptionalProject(t).queries.default.toString(),this.halResourceService.get(l,e)},n.prototype.find=function(e,n,t){return this.stream(e,n,t).toPromise()},n.prototype.findDefault=function(e,n){return this.find(e,void 0,n)},n.prototype.reload=function(e,n){var t=this.pathHelper.api.v3.queries.id(e.id).toString();return this.halResourceService.get(t,n).toPromise()},n.prototype.loadResults=function(e,n){if(!e.results)throw"No results embedded when expected";var t=this.UrlParamsHelper.buildV3GetQueryFromQueryResource(e,n),l=URI(e.href).path();return this.halResourceService.get(l,t).toPromise()},n.prototype.loadIdsUpdatedSince=function(e,n){var t=[{id:{operator:"=",values:e.filter(function(e){return e})}},{updatedAt:{operator:"<>d",values:[n,""]}}];return this.halResourceService.get(this.pathHelper.api.v3.work_packages.toString(),{filters:JSON.stringify(t)}).toPromise()},n.prototype.update=function(e,n){var t=this.extractPayload(e,n);return this.patch(e.id,t)},n.prototype.patch=function(e,n){var t=this.pathHelper.api.v3.queries.id(e).toString();return this.halResourceService.patch(t,n)},n.prototype.create=function(e,n){var t=this.extractPayload(e,n),l=this.pathHelper.api.v3.queries.toString();return this.halResourceService.post(l,t).toPromise()},n.prototype.delete=function(e){return e.delete()},n.prototype.toggleStarred=function(e){return e.starred?e.unstar():e.star()},n.prototype.listNonHidden=function(e){var n={filters:[["hidden","=",["f"]]]};return e?n.filters.push(["project_identifier","=",[e]]):n.filters.push(["project","!*",[]]),this.list(n)},n.prototype.extractPayload=function(e,n){return this.QueryFilters.mapSchemasIntoFilters(e,n),this.PayloadDm.extract(e,n.schema)},n.prototype.listUrl=function(){return this.pathHelper.api.v3.queries.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.queries.id(e).toString()},n}(Ve),qe={PROPERTY:"QueryColumn::Property",RELATION_OF_TYPE:"QueryColumn::RelationOfType",RELATION_TO_TYPE:"QueryColumn::RelationToType"};function Le(e){return[qe.RELATION_TO_TYPE,qe.RELATION_OF_TYPE].indexOf(e._type)>=0}var $e=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l}return a.d(n,e),n.prototype.valueFromQuery=function(e){return e.columns.slice()},n.prototype.hasChanged=function(e){return!this.isCurrentlyEqualTo(e.columns)},n.prototype.isCurrentlyEqualTo=function(e){var n=function(e){return e.map(function(e){return e.href})};return _.isEqual(n(e),n(this.getColumns()))},n.prototype.applyToQuery=function(e){var n=this.getColumns(),t=e.columns.map(function(e){return e.id}),l=n.map(function(e){return e.id});return e.columns=B(n),!(0===_.difference(l,t).length)&&this.hasRelationColumns()},n.prototype.hasRelationColumns=function(){var e=[qe.RELATION_OF_TYPE,qe.RELATION_TO_TYPE];return!!_.find(this.getColumns(),function(n){return e.indexOf(n._type)>=0})},n.prototype.getColumns=function(){return this.current.slice()},n.prototype.index=function(e){return _.findIndex(this.getColumns(),function(n){return n.id===e})},n.prototype.findById=function(e){return _.find(this.getColumns(),function(n){return n.id===e})},n.prototype.previous=function(e){var n=this.index(e.id);return n<=0?null:this.getColumns()[n-1]},n.prototype.next=function(e){var n=this.index(e.id);return-1===n||this.isLast(name)?null:this.getColumns()[n+1]},n.prototype.isFirst=function(e){return 0===this.index(e.id)},n.prototype.isLast=function(e){return this.index(e.id)===this.columnCount-1},n.prototype.setColumns=function(e){this.isCurrentlyEqualTo(e)||this.update(e)},n.prototype.setColumnsById=function(e){var n=this,t=e.map(function(e){return _.find(n.all,function(n){return n.id===e})});this.setColumns(_.compact(t))},n.prototype.moveColumn=function(e,n){var t=this.getColumns();n>=t.length&&(n=t.length-1),n<0&&(n=0);var l=t[e];t.splice(e,1),t.splice(n,0,l),this.setColumns(t)},n.prototype.shift=function(e,n){var t=this.index(e.id);-1!==t&&this.moveColumn(t,t+n)},n.prototype.addColumn=function(e,n){var t=this.getColumns();if(void 0===n&&(n=t.length),-1===this.index(e)){var l=_.find(this.all,function(n){return n.id===e});if(!l)throw"Column with provided name is not found";t.splice(n,0,l),this.setColumns(t)}},n.prototype.removeColumn=function(e){var n=this.index(e.id);if(-1!==n){var t=this.getColumns();t.splice(n,1),this.setColumns(t)}},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.columns},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this.getColumns().length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"all",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allPropertyColumns",{get:function(){return this.all.filter(function(e){return e._type===qe.PROPERTY})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unused",{get:function(){return _.differenceBy(this.all,this.getColumns(),"$href")},enumerable:!0,configurable:!0}),n}(I),He=t("SqdZ"),Be=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l}return a.d(n,e),n.prototype.valueFromQuery=function(e){return e.groupBy||null},n.prototype.hasChanged=function(e){var n=function(e){return e?e.href:null};return!_.isEqual(n(e.groupBy),n(this.current))},n.prototype.applyToQuery=function(e){var n=this.current;return e.groupBy=null===n?void 0:n,!0},n.prototype.isGroupable=function(e){return!!_.find(this.available,function(n){return n.id===e.id})},n.prototype.disable=function(){this.update(null)},n.prototype.setBy=function(e){var n=_.find(this.available,function(n){return n.id===e.id});n&&this.update(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr(null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.groupBy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEnabled",{get:function(){return!!this.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n.prototype.isCurrentlyGroupedBy=function(e){var n=this.current;return!(!n||n.id!==e.id)},n}(I),ze=function(e){this.isVisible=!1,this.last=null,this.collapsed={},this.isVisible=e},We=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.valueFromQuery=function(e){var n=new ze(e.showHierarchies),t=this.current;return t&&(n.collapsed=t.collapsed),n},n.prototype.hasChanged=function(e){return e.showHierarchies!==this.isEnabled},n.prototype.applyToQuery=function(e){return e.showHierarchies=this.isEnabled,this.isEnabled},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return!(!this.current||!this.current.isVisible)},enumerable:!0,configurable:!0}),n.prototype.setEnabled=function(e){void 0===e&&(e=!0);var n=a.a({collapsed:{}},this.current,{isVisible:e,last:null});this.update(n)},n.prototype.toggleState=function(){return this.setEnabled(!this.isEnabled),this.isEnabled},n.prototype.collapsed=function(e){return this.current.collapsed[e]},n.prototype.collapse=function(e){this.setState(e,!0)},n.prototype.expand=function(e){this.setState(e,!1)},n.prototype.toggle=function(e){this.setState(e,!this.collapsed(e))},n.prototype.setState=function(e,n){var t=a.a({},this.current,{last:e});t.collapsed[e]=n,this.update(t)},Object.defineProperty(n.prototype,"current",{get:function(){var e=this.lastUpdatedState.value;return void 0===e?this.initialState:(e.collapsed||(e.collapsed={}),e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialState",{get:function(){return new ze(!1)},enumerable:!0,configurable:!0}),n}(I),Qe=function(e){function n(n){return e.call(this,n)||this}return a.d(n,e),n.prototype.valueFromQuery=function(e){return!!e.sums},n.prototype.initialize=function(e){this.pristineState.putValue(!!e.sums)},n.prototype.hasChanged=function(e){return e.sums!==this.isEnabled},n.prototype.applyToQuery=function(e){return e.sums=this.isEnabled,!0},n.prototype.toggle=function(){this.updatesState.putValue(!this.current)},n.prototype.setEnabled=function(e){this.updatesState.putValue(e)},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.current},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr(!1)},enumerable:!0,configurable:!0}),n}(I),Ue=function(){function e(e,n,t,l,i){this.injector=e,this.I18n=n,this.wpTableGroupBy=t,this.wpTableHierarchies=l,this.wpTableSums=i,this.displayMode="default",this.availableGroups=[],this.displaySums=!1,this.text={choose_mode:this.I18n.t("js.work_packages.table_configuration.choose_display_mode"),label_group_by:this.I18n.t("js.label_group_by"),title:this.I18n.t("js.label_group_by"),placeholder:this.I18n.t("js.placeholders.default"),please_select:this.I18n.t("js.placeholders.selection"),default:"— "+this.I18n.t("js.work_packages.table_configuration.default"),display_sums:this.I18n.t("js.work_packages.query.display_sums"),display_sums_hint:"— "+this.I18n.t("js.work_packages.table_configuration.display_sums_hint"),display_mode:{default:this.I18n.t("js.work_packages.table_configuration.default_mode"),grouped:this.I18n.t("js.work_packages.table_configuration.grouped_mode"),hierarchy:this.I18n.t("js.work_packages.table_configuration.hierarchy_mode"),hierarchy_hint:"— "+this.I18n.t("js.work_packages.table_configuration.hierarchy_hint")}}}return e.prototype.onSave=function(){this.wpTableHierarchies.setEnabled("hierarchy"===this.displayMode);var e="grouped"===this.displayMode?this.currentGroup:null;this.wpTableGroupBy.update(e),this.wpTableSums.setEnabled(this.displaySums)},e.prototype.updateGroup=function(e){this.displayMode="grouped",this.currentGroup=_.find(this.availableGroups,function(n){return n.href===e})||null},e.prototype.ngOnInit=function(){var e=this;this.wpTableHierarchies.isEnabled?this.displayMode="hierarchy":this.wpTableGroupBy.current&&(this.displayMode="grouped"),this.displaySums=this.wpTableSums.current,this.wpTableGroupBy.onReady().then(function(){e.availableGroups=_.sortBy(e.wpTableGroupBy.available,"name"),e.currentGroup=e.wpTableGroupBy.current})},e}(),Ge=function(){function e(e){this.documentElement=e,this._banners=!0,this._banners=e.body.classList.contains("ee-banners-visible")}return Object.defineProperty(e.prototype,"eeShowBanners",{get:function(){return this._banners},enumerable:!0,configurable:!0}),e.prototype.conditional=function(e,n){this._banners?this.callMaybe(e):this.callMaybe(n)},e.prototype.callMaybe=function(e){e&&e()},e}(),Ke=function(){function e(e,n,t,l,i){var r=this;this.injector=e,this.I18n=n,this.wpTableColumns=t,this.ConfigurationService=l,this.bannerService=i,this.availableColumns=this.wpTableColumns.all,this.availableColumnsMap=_.keyBy(this.availableColumns,function(e){return e.id}),this.selectedColumns=this.wpTableColumns.getColumns().map(function(e){return r.column2Like(e)}),this.selectedColumnMap={},this.eeShowBanners=!1,this.text={columnsHelp:this.I18n.t("js.work_packages.table_configuration.columns_help_text"),columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.work_packages.table_configuration.upsale.relation_columns"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}return e.prototype.onSave=function(){this.wpTableColumns.setColumnsById(this.selectedColumns.map(function(e){return e.id}))},e.prototype.setSelectedColumn=function(e){this.selectedColumnMap[e.id]?this.selectedColumns.push(e):_.remove(this.selectedColumns,function(n){return n.id===e.id})},e.prototype.updateSelect2Columns=function(e){var n=this,t=e.val;this.selectedColumnMap={},this.selectedColumns=t.map(function(e){return n.selectedColumnMap[e]=!0,n.column2Like(n.availableColumnsMap[e])})},e.prototype.ngOnInit=function(){var e=this;this.eeShowBanners=this.bannerService.eeShowBanners,this.selectedColumns.forEach(function(n){e.selectedColumnMap[n.id]=!0})},e.prototype.ngAfterViewInit=function(){this.setupSelect2()},e.prototype.ngOnDestroy=function(){jQuery(this.select2Columns.nativeElement).select2("close")},e.prototype.setupSelect2=function(){var e=this,n=jQuery(this.select2Columns.nativeElement);n.on("change",this.updateSelect2Columns.bind(this)).select2({multiple:!0,tags:!1,initSelection:function(n,t){return t(e.selectedColumns)},query:function(n){var t=[];e.availableColumns.forEach(function(e){(0===n.term.length||e.name.toUpperCase().indexOf(n.term.toUpperCase())>=0)&&t.push({id:e.id,text:e.name})}),n.callback({results:t,more:!1})}}).select2("val",[]),n.select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){n.select2("onSortStart")},update:function(){n.select2("onSortEnd")}}),n.select2("focus")},e.prototype.column2Like=function(e){return{id:e.id,text:e.name}},e}(),Ye=t("ny24"),Ze=function(){function e(){this.state=Object(s.f)(!1)}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.state.getValueOr(!1)},set:function(e){this.state.putValue(e)},enumerable:!0,configurable:!0}),e.prototype.observeUntil=function(e){return this.state.values$().pipe(Object(Ye.a)(e))},e.prototype.toggleVisibility=function(){this.state.doModify(function(e){return!e})},e}(),Je=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.memoizedCurrentSchemas={},n}return a.d(n,e),n.prototype.$copy=function(){var n=e.prototype.$copy.call(this);return n.schema=this.schema,n},Object.defineProperty(n.prototype,"id",{get:function(){return this.filter.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.filter.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentSchema",{get:function(){if(!this.schema||!this.operator)return null;var e=this.operator.href.toString();return void 0===this.memoizedCurrentSchemas[e]&&(this.memoizedCurrentSchemas[e]=this.schema.resultingSchema(this.operator)),this.memoizedCurrentSchemas[e]},enumerable:!0,configurable:!0}),n.prototype.isCompletelyDefined=function(){return this.values.length||this.currentSchema&&!this.currentSchema.isValueRequired()},n.prototype.findOperator=function(e){return _.find(this.schema.availableOperators,function(n){return n.id===e})},n}(L),Xe=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),n}(L),en=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l.hidden=["id","parent","datesInterval","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required","search","subjectOrId"],l}return a.d(n,e),n.prototype.initializeFilters=function(e,n){var t=this,l=B(e.filters);this.loadCurrentFiltersSchemas(l).then(function(){t.availableState.putValue(n.filtersSchemas.elements),t.pristineState.putValue(l)})},Object.defineProperty(n.prototype,"isEmpty",{get:function(){var e=this.lastUpdatedState.value;return!e||0===e.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.filters},enumerable:!0,configurable:!0}),n.prototype.add=function(e){this.updatesState.putValue(this.rawFilters.concat([e]))},n.prototype.replace=function(e,n){var t=this.instantiate(e),l=this.rawFilters.slice();n(t);var i=this.findIndex(e);-1===i?l.push(t):l.splice(i,1,t),this.update(l)},n.prototype.modify=function(e,n){var t=this.findIndex(e);if(-1===t)return!1;var l=this.rawFilters.slice();return n(l[t]),this.update(l),!0},n.prototype.instantiate=function(e){var n=e instanceof Xe?e.id:e;return _.find(this.availableSchemas,function(e){return e.filter.allowedValues[0].id===n}).getFilter()},n.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=function(e){return e instanceof Je?e.id:e},l=new Set(e.map(t));this.update(this.rawFilters.filter(function(e){return!l.has(t(e))}))},n.prototype.remainingVisibleFilters=function(e){var n=this;return void 0===e&&(e=this.current),this.remainingFilters(e).filter(function(e){return-1===n.hidden.indexOf(e.id)})},Object.defineProperty(n.prototype,"availableFilters",{get:function(){return this.availableSchemas.map(function(e){return e.allowedFilterValue})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableSchemas",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n.prototype.isComplete=function(e){return _.every(e,function(e){return e.isCompletelyDefined()})},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.$source})};return!_.isEqual(n(e.filters),n(this.rawFilters))},n.prototype.valueFromQuery=function(e){},n.prototype.find=function(e){var n=this.findIndex(e);if(-1!==n)return this.rawFilters[n]},n.prototype.findIndex=function(e){return _.findIndex(this.current,function(n){return n.id===e})},n.prototype.applyToQuery=function(e){return e.filters=this.cloneFilters(),!0},Object.defineProperty(n.prototype,"current",{get:function(){return this.rawFilters.slice()},enumerable:!0,configurable:!0}),n.prototype.cloneFilters=function(){return B(this.rawFilters)},Object.defineProperty(n.prototype,"rawFilters",{get:function(){return this.lastUpdatedState.value||[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentlyVisibleFilters",{get:function(){var e=new Set(this.hidden);return e.delete("search"),_.reject(this.currentFilterResources,function(n){return e.has(n.id)})},enumerable:!0,configurable:!0}),n.prototype.replaceIfComplete=function(e){return!!this.isComplete(e)&&(this.update(e),!0)},n.prototype.onReady=function(){return Object(s.b)(this.pristineState,this.availableState).values$().pipe(Object(y.a)(1),Object(w.a)(null)).toPromise()},n.prototype.remainingFilters=function(e){return void 0===e&&(e=this.rawFilters),_.differenceBy(this.availableFilters,e,function(e){return e.id})},Object.defineProperty(n.prototype,"currentFilterResources",{get:function(){return this.rawFilters.map(function(e){return e.filter})},enumerable:!0,configurable:!0}),n.prototype.loadCurrentFiltersSchemas=function(e){var n=this;return Promise.all(e.map(function(e){var t="/api/v3/queries/filter_instance_schemas/"+e.id;return e.schema?e.schema.$load():n.states.schemas.get(t).valuesPromise().then(function(n){return e.schema=n})}))},n}(I),nn=function(){function e(e,n,t,l,i){this.injector=e,this.I18n=n,this.wpTableFilters=t,this.wpFiltersService=l,this.bannerService=i,this.filters=[],this.eeShowBanners=!1,this.text={columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:this.I18n.t("js.modals.upsale_relation_columns_link")}}return e.prototype.ngOnInit=function(){var e=this;this.eeShowBanners=this.bannerService.eeShowBanners,this.wpTableFilters.onReady().then(function(){return e.filters=e.wpTableFilters.current})},e.prototype.onSave=function(){this.filters&&this.wpTableFilters.replaceIfComplete(this.filters)},e}(),tn="urn:openproject-org:api:v3:queries:directions:asc",ln="urn:openproject-org:api:v3:queries:directions:desc",rn=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}a.d(n,e)}(L),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}a.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$href.split("/").pop()},enumerable:!0,configurable:!0})}(L),function(e){function n(n,t,l){var i=e.call(this,t)||this;return i.states=n,i.querySpace=t,i.pathHelper=l,i}return a.d(n,e),n.prototype.valueFromQuery=function(e){return e.sortBy.slice()},n.prototype.onReadyWithAvailable=function(){return Object(s.b)(this.pristineState,this.states.queries.sortBy).values$().pipe(Object(w.a)(null))},n.prototype.hasChanged=function(e){var n=function(e){return e.map(function(e){return e.href})};return!_.isEqual(n(e.sortBy),n(this.current))},n.prototype.applyToQuery=function(e){var n=this.isManuallySorted(e.sortBy);return e.sortBy=this.current.slice(),!(n&&this.isManualSortingMode)},n.prototype.isSortable=function(e){return!!_.find(this.available,function(n){return n.column.$href===e.$href})},n.prototype.addSortCriteria=function(e,n){var t=this.findAvailableDirection(e,n);t&&this.add(t)},n.prototype.setAsSingleSortCriteria=function(e,n){var t=this.findAvailableDirection(e,n);t&&this.update([t])},n.prototype.findAvailableDirection=function(e,n){return _.find(this.available,function(t){return t.column.$href===e.$href&&t.direction.$href===n})},n.prototype.add=function(e){var n=_.uniqBy([e].concat(this.current),function(e){return e.column.$href}).slice(0,3);this.update(n)},Object.defineProperty(n.prototype,"isManualSortingMode",{get:function(){return this.isManuallySorted(this.current)},enumerable:!0,configurable:!0}),n.prototype.switchToManualSorting=function(e){var n=this.manualSortObject;if(n&&!this.isManualSortingMode){if(e&&e.persisted)return e.sortBy=[n],!0;this.update([n])}return!1},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr([])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableState",{get:function(){return this.states.queries.sortBy},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.availableState.getValueOr([])},enumerable:!0,configurable:!0}),n.prototype.isManuallySorted=function(e){return!!(e&&e.length>0)&&e[0].column.href.endsWith("/manualSorting")},Object.defineProperty(n.prototype,"manualSortObject",{get:function(){return _.find(this.available,function(e){return e.column.$href.endsWith("/manualSorting")})},enumerable:!0,configurable:!0}),n}(I)),on=function(e,n){this.column=e,this.direction=n},un=function(){function e(e,n,t){this.injector=e,this.I18n=n,this.wpTableSortBy=t,this.text={title:this.I18n.t("js.label_sort_by"),placeholder:this.I18n.t("js.placeholders.default"),sort_criteria_1:this.I18n.t("js.filter.sorting.criteria.one"),sort_criteria_2:this.I18n.t("js.filter.sorting.criteria.two"),sort_criteria_3:this.I18n.t("js.filter.sorting.criteria.three"),sorting_mode:{description:this.I18n.t("js.work_packages.table_configuration.sorting_mode.description"),automatic:this.I18n.t("js.work_packages.table_configuration.sorting_mode.automatic"),manually:this.I18n.t("js.work_packages.table_configuration.sorting_mode.manually"),warning:this.I18n.t("js.work_packages.table_configuration.sorting_mode.warning")}},this.availableDirections=[{$href:tn,name:this.I18n.t("js.label_ascending")},{$href:ln,name:this.I18n.t("js.label_descending")}],this.availableColumns=[],this.allColumns=[],this.sortationObjects=[],this.emptyColumn={name:this.text.placeholder,href:null},this.sortingMode="automatic"}return e.prototype.onSave=function(){var e,n=this;e=(e="automatic"===this.sortingMode?this.sortationObjects.filter(function(e){return null!==e.column}):[new on(this.manualSortColumn,tn)]).map(function(e){return n.getMatchingSort(e.column.href,e.direction)}),this.wpTableSortBy.update(_.compact(e))},e.prototype.ngOnInit=function(){var e=this;this.wpTableSortBy.onReadyWithAvailable().subscribe(function(){var n=e.wpTableSortBy.available.filter(function(e){return!e.column.$href.endsWith("/parent")}).map(function(e){return{name:e.column.name,href:e.column.$href}});e.allColumns=_.uniqBy(n,"href"),e.getManualSortingOption(),_.each(e.wpTableSortBy.current,function(n){n.column.$href.endsWith("/parent")||(e.sortationObjects.push(new on({name:n.column.name,href:n.column.$href},n.direction.$href)),n.column.href===e.manualSortColumn.href&&e.updateSortingMode("manual"))}),e.updateUsedColumns(),e.fillUpSortElements()})},e.prototype.updateSelection=function(e,n){e.column=_.find(this.allColumns,function(e){return e.href===n})||this.emptyColumn,this.updateUsedColumns()},e.prototype.updateUsedColumns=function(){var e=this.sortationObjects.filter(function(e){return null!==e.column}).map(function(e){return e.column});this.availableColumns=_.sortBy(_.differenceBy(this.allColumns,e,"href"),"name")},e.prototype.updateSortingMode=function(e){this.sortingMode=e},e.prototype.getMatchingSort=function(e,n){return _.find(this.wpTableSortBy.available,function(t){return t.column.$href===e&&t.direction.$href===n})},e.prototype.fillUpSortElements=function(){for(;this.sortationObjects.length<3;)this.sortationObjects.push(new on(this.emptyColumn,tn))},e.prototype.getManualSortingOption=function(){this.manualSortColumn=this.allColumns.find(function(e){return e.href.endsWith("/manualSorting")}),this.allColumns.splice(this.allColumns.indexOf(this.manualSortColumn),1)},e}(),an=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableTimeline=t,this.wpTableColumns=l,this.timelineVisible=!1,this.availableZoomLevels=["auto"].concat(S),this.text={title:this.I18n.t("js.timelines.gantt_chart"),display_timelines:this.I18n.t("js.timelines.button_activate"),display_timelines_hint:this.I18n.t("js.work_packages.table_configuration.show_timeline_hint"),zoom:{level:this.I18n.t("js.tl_toolbar.zooms"),description:this.I18n.t("js.timelines.zoom.description"),days:this.I18n.t("js.timelines.zoom.days"),weeks:this.I18n.t("js.timelines.zoom.weeks"),months:this.I18n.t("js.timelines.zoom.months"),quarters:this.I18n.t("js.timelines.zoom.quarters"),years:this.I18n.t("js.timelines.zoom.years"),auto:this.I18n.t("js.timelines.zoom.auto")},labels:{title:this.I18n.t("js.timelines.labels.title"),description:this.I18n.t("js.timelines.labels.description"),bar:this.I18n.t("js.timelines.labels.bar"),none:this.I18n.t("js.timelines.filter.noneSelection"),left:this.I18n.t("js.timelines.labels.left"),right:this.I18n.t("js.timelines.labels.right"),farRight:this.I18n.t("js.timelines.labels.farRight")}}}return e.prototype.onSave=function(){this.wpTableTimeline.update(a.a({},this.wpTableTimeline.current,{visible:this.timelineVisible,labels:this.labels,zoomLevel:this.zoomLevel}))},e.prototype.updateLabels=function(e,n){""===n&&(n=null),this.labels[e]=n},e.prototype.ngOnInit=function(){this.timelineVisible=this.wpTableTimeline.isVisible,this.zoomLevel=this.wpTableTimeline.zoomLevel;var e=this.wpTableTimeline.labels;this.labels=_.clone(e),this.availableLabels=Object.keys(this.labels);var n=this.wpTableColumns.allPropertyColumns.sort(function(e,n){return e.name.localeCompare(n.name)});this.availableAttributes=[{id:"",name:this.text.labels.none}].concat(n)},e}(),sn=function(e){function n(n,t,l){var i=e.call(this,l)||this;return i.states=n,i.Banners=t,i.querySpace=l,i}return a.d(n,e),n.prototype.initialize=function(n,t,l){e.prototype.initialize.call(this,n,t,l)},n.prototype.shouldHighlightInline=function(e){return!(!this.isInline||this.Banners.eeShowBanners)&&(void 0===this.current.selectedAttributes||this.current.selectedAttributes===[]||!!_.find(this.current.selectedAttributes,function(n){return n.id===e}))},Object.defineProperty(n.prototype,"current",{get:function(){var e=this.lastUpdatedState.getValueOr({mode:"inline"});return this.filteredValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isInline",{get:function(){return"inline"===this.current.mode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return"none"===this.current.mode},enumerable:!0,configurable:!0}),n.prototype.update=function(n){e.prototype.update.call(this,this.filteredValue(n))},n.prototype.valueFromQuery=function(e){var n={mode:e.highlightingMode||"inline",selectedAttributes:e.highlightedAttributes};return this.filteredValue(n)},n.prototype.hasChanged=function(e){return e.highlightingMode!==this.current.mode||!_.isEqual(e.highlightedAttributes,this.current.selectedAttributes)},n.prototype.applyToQuery=function(e){var n=this.current;return e.highlightingMode=n.mode,e.highlightedAttributes=n.selectedAttributes,!1},n.prototype.filteredValue=function(e){return _.isEmpty(e.selectedAttributes)&&(e.selectedAttributes=void 0),this.Banners.conditional(function(){e.mode="none",e.selectedAttributes=void 0}),e},n}(I),cn=function(){function e(e,n,t,l,i,r){this.injector=e,this.I18n=n,this.states=t,this.querySpace=l,this.Banners=i,this.wpTableHighlight=r,this.highlightingMode="inline",this.entireRowMode=!1,this.lastEntireRowAttribute="status",this.eeShowBanners=!1,this.availableInlineHighlightedAttributes=[],this.selectedAttributes=[],this.availableRowHighlightedAttributes=[],this.text={title:this.I18n.t("js.work_packages.table_configuration.highlighting"),highlighting_mode:{description:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.description"),none:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.none"),inline:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline"),inline_all_attributes:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline_all"),status:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.status"),type:this.I18n.t("js.work_packages.properties.type"),priority:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.priority"),entire_row_by:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.entire_row_by")},upsaleAttributeHighlighting:this.I18n.t("js.work_packages.table_configuration.upsale.attribute_highlighting"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}return e.prototype.ngOnInit=function(){this.availableInlineHighlightedAttributes=this.availableHighlightedAttributes,this.availableRowHighlightedAttributes=[{name:this.text.highlighting_mode.status,value:"status"},{name:this.text.highlighting_mode.priority,value:"priority"}],this.setSelectedValues(),this.eeShowBanners=this.Banners.eeShowBanners,this.updateMode(this.wpTableHighlight.current.mode),this.eeShowBanners&&this.updateMode("none")},e.prototype.onSave=function(){var e=this.highlightingMode;this.wpTableHighlight.update({mode:e,selectedAttributes:this.selectedAttributes})},e.prototype.updateMode=function(e){this.highlightingMode="entire-row"===e?this.lastEntireRowAttribute:e,-1!==["status","priority"].indexOf(this.highlightingMode)?(this.lastEntireRowAttribute=this.highlightingMode,this.entireRowMode=!0):this.entireRowMode=!1},e.prototype.updateHighlightingAttributes=function(e){this.selectedAttributes=e},e.prototype.disabledValue=function(e){return e?"disabled":null},Object.defineProperty(e.prototype,"availableHighlightedAttributes",{get:function(){return this.querySpace.queryForm.value.schema.highlightedAttributes.allowedValues},enumerable:!0,configurable:!0}),e.prototype.onOpen=function(e){setTimeout(function(){e.dropdownPanel._updatePosition()},25)},e.prototype.setSelectedValues=function(){var e=this.wpTableHighlight.current.selectedAttributes;this.selectedAttributes=void 0===e?this.availableInlineHighlightedAttributes:e},e}(),dn=function(){function e(e){this.I18n=e,this._tabs=[{name:"columns",title:this.I18n.t("js.label_columns"),componentClass:Ke},{name:"filters",title:this.I18n.t("js.work_packages.query.filters"),componentClass:nn},{name:"sort-by",title:this.I18n.t("js.label_sort_by"),componentClass:un},{name:"display-settings",title:this.I18n.t("js.work_packages.table_configuration.display_settings"),componentClass:Ue},{name:"highlighting",title:this.I18n.t("js.work_packages.table_configuration.highlighting"),componentClass:cn},{name:"timelines",title:this.I18n.t("js.timelines.gantt_chart"),componentClass:an}]}return Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),e}(),pn=function(){function e(e,n,t,l,i){this.availableTabs=e,this.outletElement=n,this.componentFactoryResolver=t,this.appRef=l,this.injector=i,this.activeTabs={},this.currentTab=null}return Object.defineProperty(e.prototype,"activeComponents",{get:function(){return _.values(this.activeTabs).map(function(e){return e.componentRef.instance})},enumerable:!0,configurable:!0}),e.prototype.switchTo=function(e){var n=_.find(this.availableTabs,function(n){return n.name===e});if(!n)throw"Trying to switch to unknown tab "+e+".";if(null!=n.disableBecause)return!1;this.detach();var t=this.activateInstance(n);return this.outletElement.innerHTML="",this.outletElement.appendChild(this._getComponentRootNode(t.componentRef)),this.outletElement.dataset.tabName=n.title,this.currentTab=t,!1},e.prototype.detach=function(){var e=this.currentTab;null!==e&&(e.portal.setAttachedHost(null),this.currentTab=null)},e.prototype.dispose=function(){_.each(this.activeTabs,function(e){return e.dispose()}),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype.activateInstance=function(e){return this.activeTabs[e.name]||(this.activeTabs[e.name]=this.createComponent(e)),this.activeTabs[e.name]||null},e.prototype.createComponent=function(e){var n=this,t=this.componentFactoryResolver.resolveComponentFactory(e.componentClass).create(this.injector),l=new f.a(e.componentClass,null,this.injector);return this.appRef.attachView(t.hostView),{name:e.name,portal:l,componentRef:t,dispose:function(){n.appRef.detachView(t.hostView),t.destroy()}}},e.prototype._getComponentRootNode=function(e){return e.hostView.rootNodes[0]},e}(),hn=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){var n={name:e.name||"!!!__O__o__O__!!!"};return e.project&&(n._links={project:{href:e.project.$href}}),e.$links.update(n)},e.prototype.loadWithParams=function(e,n,t,l){void 0===l&&(l={}),n||l.name||(l.name="!!!__O__o__O__!!!"),t&&(l._links=l._links||{},l._links.project={href:this.pathHelper.api.v3.projects.id(t).toString()});var i=this.pathHelper.api.v3.queries.optionalId(n).form.toString();return i=URI(i).search(e).toString(),this.halResourceService.post(i,l).toPromise()},e.prototype.buildQueryResource=function(e){return this.halResourceService.createHalResourceOfType("Query",e.payload)},e}(),fn=t("p0Sj"),gn=t("Rney"),mn=function(){function e(e){void 0===e&&(e=3600),this.holdValuesForSeconds=e,this.cacheDurationInMs=1e3*e}return e.prototype.state=function(e){return this.multiState.get(e)},e.prototype.touch=function(e){var n=this.multiState.get(e);n.putValue(n.value,"Touching the state")},e.prototype.updateValue=function(e,n){this.multiState.get(e).putValue(n)},e.prototype.observe=function(e){return this.state(e).values$()},e.prototype.changes$=function(e){return this.state(e).changes$()},e.prototype.observeAll=function(){var e=this;return this.multiState.observeChange().pipe(Object(fn.a)([]),Object(gn.a)(250),Object(v.a)(function(){var n=[];return _.each(e.multiState.getValueOr({}),function(e){e.value&&n.push(e.value)}),n}))},e.prototype.clearSome=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.forEach(function(n){return e.multiState.get(n).clear()})},e.prototype.require=function(e,n){void 0===n&&(n=!1);var t=this.multiState.get(e);if(this.stale(t)||n){var l=this.load(e);return t.clearAndPutFromPromise(l),l}return t.valuesPromise()},e.prototype.requireAndStream=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.multiState.get(e);return(this.stale(l)||n)&&(l.clear(),l.putFromPromiseIfPristine(function(){return t.load(e)})),l.values$()},e.prototype.requireAll=function(e,n){var t,l=this;return void 0===n&&(n=!1),0===(t=n?e:e.filter(function(e){return l.stale(l.multiState.get(e))})).length?Promise.resolve(void 0):this.loadAll(t)},e.prototype.stale=function(e){return!e.hasActivePromiseRequest()&&(e.isPristine()||e.isValueOlderThan(this.cacheDurationInMs))},e}(),vn=function(){function e(e,n){this.states=e,this.halResourceService=n}return e.prototype.ensureLoaded=function(e){var n=this.state(e);return n.hasValue()?Promise.resolve(n.value):this.load(e).valuesPromise()},e.prototype.state=function(e){var n=e.$links.schema;if(!n)throw"Resource "+e+" has no schema!";return this.states.schemas.get(n.href)},e.prototype.load=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.state(e);return n&&l.clear(),l.putFromPromiseIfPristine(function(){return t.halResourceService.createLinkedResource(e,"schema",e.$links.schema.$link).$load()}),l},e}(),bn=t("qHU1"),yn=function(){function e(e,n,t){this.halResourceService=e,this.pathHelper=n,this.states=t}return e.prototype.loadWorkPackageById=function(e,n){void 0===n&&(n=!1);var t=this.pathHelper.api.v3.work_packages.id(e).toString();return this.halResourceService.get(t).toPromise()},e.prototype.loadWorkPackagesCollectionsFor=function(e){return this.halResourceService.getAllPaginated(this.pathHelper.api.v3.work_packages.toString(),e.length,{filters:oe("id","=",e).toJson()})},e.prototype.emptyCreateForm=function(e,n){return this.halResourceService.post(this.workPackagesFormPath(n),e).toPromise()},e.prototype.typedCreateForm=function(e,n){var t={_links:{type:{href:this.pathHelper.api.v3.types.id(e).toString()}}};return this.halResourceService.post(this.workPackagesFormPath(n),t).toPromise()},e.prototype.createWorkPackage=function(e){return this.halResourceService.post(this.pathHelper.api.v3.work_packages.path,e).toPromise()},e.prototype.workPackagesFormPath=function(e){return e?this.pathHelper.api.v3.projects.id(e).work_packages.form.toString():this.pathHelper.api.v3.work_packages.form.toString()},e}();function wn(e){return(e||"new").toString()}var Cn=function(e){function n(n,t,l){var i=e.call(this)||this;return i.states=n,i.schemaCacheService=t,i.workPackageDmService=l,i}return a.d(n,e),n.prototype.updateValue=function(e,n){this.updateWorkPackageList([n],!1)},n.prototype.updateWorkPackage=function(e,n){var t=this;void 0===n&&(n=!1);var l=wn(e.id);return n||e.isNew?(this.multiState.get(l).putValue(e),Promise.resolve()):this.schemaCacheService.ensureLoaded(e).then(function(){t.multiState.get(l).putValue(e)})},n.prototype.updateWorkPackageList=function(e,n){var t=this;void 0===n&&(n=!0);for(var l=function(){var e=u,l=wn(e.id),r=i.multiState.get(l);if(e.isNew)return r.putValue(e),"continue";i.schemaCacheService.ensureLoaded(e).then(function(){n&&r.hasValue()&&_.isEqual(r.value.$source,e.$source)?Object(bn.a)("Skipping identical work package from updating"):t.multiState.get(l).putValue(e)})},i=this,r=0,o=e;r<o.length;r++){var u=o[r];l()}},n.prototype.loadWorkPackage=function(e,n){void 0===n&&(n=!1);var t=this.state(e);return"new"===e?t:(this.require(e,n),t)},n.prototype.loadAll=function(e){var n=this;return new Promise(function(t,l){n.workPackageDmService.loadWorkPackagesCollectionsFor(_.uniq(e)).then(function(e){_.each(e,function(e){e.schemas&&_.each(e.schemas.elements,function(e){n.states.schemas.get(e.href).putValue(e)}),e.elements&&n.updateWorkPackageList(e.elements),t(void 0)})},l)})},n.prototype.load=function(e){var n=this;return new Promise(function(t,l){var i=function(e){l(e)};n.workPackageDmService.loadWorkPackageById(e,!0).then(function(l){n.schemaCacheService.ensureLoaded(l).then(function(){n.multiState.get(e).putValue(l),t(l)},i)},i)})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.workPackages},enumerable:!0,configurable:!0}),n}(mn),kn=function(){function e(e,n){this.UrlParamsHelper=e,this.$state=n}return e.prototype.updateIfDifferent=function(e,n){var t=this.getNewChecksum(e,n),l=Promise.resolve();return this.isUninitialized()||(this.isIdDifferent(e.id)?(l=this.maintainUrlQueryState(e.id,null),this.clear()):this.isChecksumDifferent(t)&&(l=this.maintainUrlQueryState(e.id,t))),this.set(e.id,t),l},e.prototype.update=function(e,n){var t=this.getNewChecksum(e,n);this.set(e.id,t),this.maintainUrlQueryState(e.id,t)},e.prototype.setToQuery=function(e,n){var t=this.getNewChecksum(e,n);return this.set(e.id,t),this.maintainUrlQueryState(e.id,null)},e.prototype.isQueryOutdated=function(e,n){var t=this.getNewChecksum(e,n);return this.isOutdated(e.id,t)},e.prototype.executeIfOutdated=function(e,n,t){(this.isUninitialized()||this.isOutdated(e,n))&&(this.set(e,n),t())},e.prototype.set=function(e,n){this.id=e,this.checksum=n},e.prototype.clear=function(){this.id=null,this.checksum=null,this.visibleChecksum=null},e.prototype.isUninitialized=function(){return!this.id&&!this.checksum},e.prototype.isIdDifferent=function(e){return this.id!==e},e.prototype.isChecksumDifferent=function(e){return this.checksum&&e!==this.checksum},e.prototype.isOutdated=function(e,n){var t=!!this.id,l=!!this.checksum,i=this.id!==e,r=n!==this.checksum,o=this.checksum&&!n&&this.visibleChecksum;return(t||l)&&(i||!i&&r&&(n||this.visibleChecksum)||!t&&o)},e.prototype.getNewChecksum=function(e,n){return this.UrlParamsHelper.encodeQueryJsonParams(e,_.pick(n,["page","perPage"]))},e.prototype.maintainUrlQueryState=function(e,n){return this.visibleChecksum=n,this.$state.go(".",{query_props:n,query_id:e},{custom:{notify:!1}})},e}(),In=function(){function e(){this.links=Object(s.f)({})}return e.prototype.initModelAuth=function(e,n){this.links.doModify(function(t){var l=a.a({},t);return l[e]=n,l})},e.prototype.observeUntil=function(e){return this.links.values$().pipe(Object(Ye.a)(e))},e.prototype.can=function(e,n){var t=this.links.getValueOr({});return t[e]&&n in t[e]},e.prototype.cannot=function(e,n){return!this.can(e,n)},e}(),jn=function(){function e(e,n,t,l,i){this.order=e,this.positions=n,this.wpId=t,this.index=l,this.fromIndex=i,this.delta={}}return e.prototype.buildDelta=function(){var e=this;return Object(bn.b)("Building delta for "+this.wpId+"@"+this.index,function(){e.isAscendingOrder()?e.buildInsertPosition():e.rebuildPositions()}),Object(bn.a)("Order DELTA was built as %O",this.delta),this.delta},e.prototype.isAscendingOrder=function(){for(var e,n=0,t=this.order.length;n<t;n++){var l=this.order[n],i=this.positions[l];if(n!==this.index)if(void 0!==e&&void 0!==i){if(i<e)return!1}else e=i}return!0},e.prototype.rebuildPositions=function(){var e=this.minMaxPositions,n=e[0],t=e[1];this.redistribute(n,t)},e.prototype.buildInsertPosition=function(){if(this.order.length<=1&&void 0===this.positions[this.wpId])this.delta[this.wpId]=0;else if(null===this.fromIndex||1!==Math.abs(this.fromIndex-this.index)||!this.positionSwap()){if(0===this.index)return this.insertAsFirst();var e=this.buildUpPredecessorPosition();if(e>=2147483647)return Object(bn.a)("Predecessor position is at max order, need to reorder"),this.reorderedInsert();var n=this.positionFor(this.index+1);if(void 0!==n){if(n>=2147483647)return Object(bn.a)("Successor position is at max order, need to reorder"),this.reorderedInsert();var t=Math.floor((n-e)/2);if(t<1)return Object(bn.a)("Cannot insert at optimal position, no space left. Need to reorder"),this.reorderedInsert();this.delta[this.wpId]=e+t}else this.delta[this.wpId]=e+8192}},e.prototype.insertAsFirst=function(){var e=this.positionFor(this.index+1);this.delta[this.wpId]=void 0===e?0:e-8192},e.prototype.positionSwap=function(){var e=this.positionFor(this.index),n=this.order[this.fromIndex],t=this.positionFor(this.fromIndex);return void 0!==e&&void 0!==t&&(this.delta[this.wpId]=t,this.delta[n]=e,!0)},e.prototype.buildUpPredecessorPosition=function(){for(var e=-16384,n=0;n<this.index;n++){var t=this.order[n],l=this.positions[t];e=void 0===l?this.delta[t]=e+16384:l}return e},e.prototype.positionFor=function(e){var n=this.order[e];return this.livePosition(n)},e.prototype.livePosition=function(e){return this.delta[e]||this.positions[e]},e.prototype.reorderedInsert=function(){var e=this.firstPosition,n=this.lastPosition;this.redistribute(e,n)},e.prototype.redistribute=function(e,n){var t=this.order.length,l=Math.floor((n-e)/(t-1));if(l<1){if(n+t<=2147483647)n+=t;else{if(!(e-t>=-2147483647))throw"Elements cannot be moved further and no space is left. Too many elements";e-=t}l=Math.floor((n-e)/(t-1))}for(var i=0;i<t;i++){var r=this.order[i];this.delta[r]=e+i*l}},Object.defineProperty(e.prototype,"minMaxPositions",{get:function(){for(var e=2147483647,n=-2147483647,t=!1,l=this.order.length-1;l>=0;l--){var i=this.order[l],r=this.livePosition(i);void 0!==r&&(e=Math.min(r,e),n=Math.max(r,n),t=!0)}return t&&e!==n?[e,n]:[0,16384*this.order.length]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstPosition",{get:function(){var e=this.order[0];return this.livePosition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastPosition",{get:function(){for(var e=this.order.length-1;e>=0;e--){var n=this.order[e],t=this.livePosition(n);if(void 0!==t)return t}},enumerable:!0,configurable:!0}),e}(),Rn=function(){function e(e,n){this.http=e,this.pathHelper=n}return e.prototype.get=function(e){return this.http.get(this.orderPath(e)).toPromise().then(function(e){return e||{}})},e.prototype.update=function(e,n){return this.http.patch(this.orderPath(e),{delta:n},{withCredentials:!0}).toPromise().then(function(e){return e.t})},e.prototype.delete=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var l={};return n.forEach(function(e){return l[e]=-1}),this.update(e,l)},e.prototype.orderPath=function(e){return this.pathHelper.api.v3.queries.id(e).order.toString()},e}(),Pn=function(){function e(){this.causedUpdates=[]}return e.prototype.includes=function(e){return this.causedUpdates.includes(this.cacheValue(e))},e.prototype.add=function(e){this.causedUpdates.length>100&&this.causedUpdates.splice(0,90),this.causedUpdates.push(this.cacheValue(e))},e.prototype.cacheValue=function(e){return e.updatedAt+e.$href},e}(),Sn=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n)||this;return u.querySpace=n,u.queryOrderDm=t,u.states=l,u.causedUpdates=i,u.wpTableSortBy=r,u.pathHelper=o,u}return a.d(n,e),n.prototype.initialize=function(e,n,t){return!e.persisted&&this.positions.hasValue()&&this.applyToQuery(e),this.wpTableSortBy.isManualSortingMode?this.withLoadedPositions():Promise.resolve()},n.prototype.move=function(e,n,t){return a.b(this,void 0,void 0,function(){var l;return a.e(this,function(i){switch(i.label){case 0:return l=e.findIndex(function(e){return e===n}),e.splice(l,1),e.splice(t,0,n),[4,this.assignPosition(e,n,t,l)];case 1:return i.sent(),[2,e]}})})},n.prototype.remove=function(e,n){var t;return _.remove(e,function(e){return e===n}),this.update(((t={})[n]=-1,t)),e},n.prototype.add=function(e,n,t){return void 0===t&&(t=-1),a.b(this,void 0,void 0,function(){return a.e(this,function(l){switch(l.label){case 0:return-1===t?(e.push(n),t=e.length-1):e.splice(t,0,n),[4,this.assignPosition(e,n,t)];case 1:return l.sent(),[2,e]}})})},Object.defineProperty(n.prototype,"applicable",{get:function(){return this.currentQuery.persisted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentQuery",{get:function(){return this.querySpace.query.value},enumerable:!0,configurable:!0}),n.prototype.assignPosition=function(e,n,t,l){return void 0===l&&(l=null),a.b(this,void 0,void 0,function(){var i,r;return a.e(this,function(o){switch(o.label){case 0:return[4,this.withLoadedPositions()];case 1:return i=o.sent(),r=new jn(e,i,n,t,l).buildDelta(),[4,this.update(r)];case 2:return o.sent(),[2]}})})},Object.defineProperty(n.prototype,"positions",{get:function(){return this.updatesState},enumerable:!0,configurable:!0}),n.prototype.update=function(e){return a.b(this,void 0,void 0,function(){var n,t;return a.e(this,function(l){switch(l.label){case 0:return n=this.positions.getValueOr({}),this.positions.putValue(a.a({},n,e)),this.currentQuery.persisted?[4,this.queryOrderDm.update(this.currentQuery.id,e)]:[3,2];case 1:t=l.sent(),this.currentQuery.updatedAt=t,this.causedUpdates.add(this.currentQuery),l.label=2;case 2:return this.applyToQuery(this.currentQuery),this.querySpace.query.putValue(this.currentQuery),[2]}})})},n.prototype.withLoadedPositions=function(){var e=this;this.currentQuery.persisted?((this.positions.value==={}||this.positions.isValueOlderThan(6e4))&&this.positions.clear("Clearing old positions value"),this.positions.putFromPromiseIfPristine(function(){return e.queryOrderDm.get(e.currentQuery.id)})):this.positions.isPristine()&&this.positions.putValue({});return this.positions.values$().pipe(Object(y.a)(1)).toPromise()},n.prototype.valueFromQuery=function(e){},n.prototype.orderedWorkPackages=function(){var e=this.querySpace.results.value.elements;if(this.currentQuery.persisted||this.positions.isPristine())return e;var n=this.positions.value;return _.sortBy(e,function(e){var t=n[e.id];return void 0!==t?t:2147483647})},n.prototype.applyToQuery=function(e){return e.orderedWorkPackages=this.positions.getValueOr({}),!1},n.prototype.hasChanged=function(e){return!1},n}(I),_n=function(e){function n(n,t){var l=e.call(this,t)||this;return l.states=n,l.querySpace=t,l}return a.d(n,e),n.prototype.hasChanged=function(e){return this.current!==e.displayRepresentation},n.prototype.valueFromQuery=function(e){return e.displayRepresentation||null},n.prototype.applyToQuery=function(e){var n=this.current;return e.displayRepresentation=null===n?void 0:n,!1},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr(null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isList",{get:function(){var e=this.current;return!e||"list"===e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isCards",{get:function(){return"card"===this.current},enumerable:!0,configurable:!0}),n.prototype.setDisplayRepresentation=function(e){this.update(e)},n}(I),xn=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.work_packages.id(e).relations,{}).toPromise().then(function(e){return e.elements})},e.prototype.loadInvolved=function(e){var n=_.filter(e,function(e){return/\d+/.test(e)});return 0===n.length?Promise.resolve([]):this.halResourceService.get(this.pathHelper.api.v3.relations.toPath(),{filters:oe("involved","=",n).toJson()}).toPromise().then(function(e){return e.elements})},e}(),Tn=function(e){function n(){var n=e.call(this)||this;return n.name="WP-Relations",n.relations=Object(s.g)(),n.initializeMembers(),n}return a.d(n,e),n}(s.a),On=function(e){function n(n,t,l){var i=e.call(this)||this;return i.relationsDm=n,i.PathHelper=t,i.halResource=l,i.relationStates=new Tn,i}return a.d(n,e),Object.defineProperty(n.prototype,"multiState",{get:function(){return this.relationStates.relations},enumerable:!0,configurable:!0}),n.prototype.load=function(e){var n=this;return new Promise(function(t,l){n.relationsDm.load(e).then(function(l){n.updateRelationsStateTo(e,l),t(n.state(e).value)}).catch(l)})},n.prototype.loadAll=function(e){var n=this;return new Promise(function(t,l){n.relationsDm.loadInvolved(e).then(function(l){n.clearSome.apply(n,e),n.accumulateRelationsFromInvolved(e,l),t()}).catch(l)})},n.prototype.find=function(e,n,t){var l=this.state(e.id).value;if(l)return _.find(l,function(l){var i=l.denormalized(e);return i.target.id===n.id&&i.relationType===t})},n.prototype.removeRelation=function(e){var n=this;return e.delete().then(function(){n.removeFromStates(e)})},n.prototype.updateRelationType=function(e,n,t,l){var i={_links:{from:{href:e.href},to:{href:n.href}},type:l};return this.updateRelation(t,i)},n.prototype.updateRelation=function(e,n){var t=this;return e.updateImmediately(n).then(function(e){return t.insertIntoStates(e),e})},n.prototype.addCommonRelation=function(e,n,t){var l=this,i={_links:{from:{href:this.PathHelper.api.v3.work_packages.id(e).toString()},to:{href:this.PathHelper.api.v3.work_packages.id(t).toString()}},type:n},r=this.PathHelper.api.v3.work_packages.id(e).relations.toString();return this.halResource.post(r,i).toPromise().then(function(e){return l.insertIntoStates(e),e})},n.prototype.insertIntoStates=function(e){var n=this;_.values(e.ids).forEach(function(t){n.multiState.get(t).doModify(function(n){return n[e.id]=e,n},function(){var n={};return n[e.id]=e,n})})},n.prototype.removeFromStates=function(e){var n=this;_.values(e.ids).forEach(function(t){n.multiState.get(t).doModify(function(n){return delete n[e.id],n},function(){return{}})})},n.prototype.updateRelationsStateTo=function(e,n){var t=this.multiState.get(e),l=_.keyBy(n,function(e){return e.id});t.putValue(l,"Overriding relations state.")},n.prototype.accumulateRelationsFromInvolved=function(e,n){var t=this;e.forEach(function(e){var l=n.filter(function(n){return n.isInvolved(e)});t.updateRelationsStateTo(e,l)})},n}(mn),En=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isValidationError=!1,n}return a.d(n,e),n.prototype.toString=function(){return"[ErrorResource "+this.message+"]"},Object.defineProperty(n.prototype,"errorMessages",{get:function(){return this.isMultiErrorMessage()?this.errors.map(function(e){return e.message}):[this.message]},enumerable:!0,configurable:!0}),n.prototype.isMultiErrorMessage=function(){return"urn:openproject-org:api:v3:errors:MultipleErrors"===this.errorIdentifier},n.prototype.getInvolvedAttributes=function(){var e=this,n=[];return this.details?n=[{details:this.details}]:this.errors&&(n=this.errors),_.flatten(n.map(function(n){return"urn:openproject-org:api:v3:errors:MultipleErrors"===n.errorIdentifier?e.extractMultiError(n)[0]:n.details.attribute}))},n.prototype.getMessagesPerAttribute=function(){var e=this,n={};return this.details?n[this.details.attribute]=[this.message]:_.forEach(this.errors,function(t){if("urn:openproject-org:api:v3:errors:MultipleErrors"===t.errorIdentifier){var l=e.extractMultiError(t),i=l[0],r=l[1],o=n[i]||[];n[i]=o.concat(r)}else n[t.details.attribute]?n[t.details.attribute].push(t.message):n[t.details.attribute]=[t.message]}),n},n.prototype.extractMultiError=function(e){return[e.errors[0].details.attribute,e.errors.map(function(e){return e.message})]},n}(L),Dn=t("xMyE");var Fn=function(){function e(e){this.indicator=e,this.indicatorTemplate='<div class="loading-indicator--background">\n      <div class="loading-indicator">\n        <div class="block-1"></div>\n        <div class="block-2"></div>\n        <div class="block-3"></div>\n        <div class="block-4"></div>\n        <div class="block-5"></div>\n      </div>\n    </div>\n   '}return Object.defineProperty(e.prototype,"promise",{set:function(e){var n=this;this.start();var t=function(){return n.delayedStop()};e.then(t).catch(t)},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.stop(),this.indicator.prepend(this.indicatorTemplate)},e.prototype.delayedStop=function(e){var n=this;void 0===e&&(e=25),setTimeout(function(){return n.stop()},e)},e.prototype.stop=function(){this.indicator.find(".loading-indicator--background").remove()},e}(),Nn=function(){function e(){}return Object.defineProperty(e.prototype,"table",{get:function(){return this.indicator("table")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wpDetails",{get:function(){return this.indicator("wpDetails")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this.indicator("modal")},enumerable:!0,configurable:!0}),e.prototype.indicator=function(e){return"string"==typeof e&&(e=this.getIndicatorAt(e)),new Fn(e)},e.prototype.getIndicatorAt=function(e){return jQuery(".loading-indicator--location").filter('[data-indicator-name="'+e+'"]')},e}();var An="op:notifications:add",Vn=function(){function e(e){var n=this;this.configurationService=e,this.stack=Object(s.f)([]),jQuery(window).on(An,function(e,t){n.add(t)})}return Object.defineProperty(e.prototype,"current",{get:function(){return this.stack},enumerable:!0,configurable:!0}),e.prototype.add=function(e,n){var t=this;return void 0===n&&(n=5e3),jQuery(".flash.notice").remove(),this.stack.doModify(function(n){var t=[e].concat(n);return _.remove(t,function(e,n){return n>0&&("success"===e.type||"error"===e.type)}),t}),"success"===e.type&&this.configurationService.autoHidePopups()&&setTimeout(function(){return t.remove(e)},n),e},e.prototype.addError=function(e,n){void 0===n&&(n=[]),Array.isArray(n)||(n=[n]);var t=this.createNotification(e,"error");return t.data=n,this.add(t)},e.prototype.addWarning=function(e){return this.add(this.createNotification(e,"warning"))},e.prototype.addSuccess=function(e){return this.add(this.createNotification(e,"success"))},e.prototype.addNotice=function(e){return this.add(this.createNotification(e,"info"))},e.prototype.addAttachmentUpload=function(e,n){return this.add(this.createAttachmentUploadNotification(e,n))},e.prototype.remove=function(e){this.stack.doModify(function(n){return _.remove(n,function(n){return n===e}),n})},e.prototype.clear=function(){this.stack.putValue([])},e.prototype.createNotification=function(e,n){return"string"==typeof e?{message:e,type:n}:(e.type=n,e)},e.prototype.createAttachmentUploadNotification=function(e,n){if(!n.length)throw new Error("Cannot create an upload notification without uploads!");var t=this.createNotification(e,"upload");return t.data=n,t},e}(),Mn=function(){function e(e){this.injector=e,this.I18n=this.injector.get(A.a),this.$state=this.injector.get(g.G),this.halResourceService=this.injector.get(Q),this.NotificationsService=this.injector.get(Vn),this.loadingIndicator=this.injector.get(Nn)}return e.prototype.showSave=function(e,n){void 0===n&&(n=!1);var t={message:this.I18n.t("js.notice_successful_"+(n?"create":"update"))};this.NotificationsService.addSuccess(t)},e.prototype.handleRawError=function(e,n){if(console.error("Handling error message %O for work package %O",e,n),e instanceof En)return this.handleErrorResponse(e,n);var t=this.retrieveError(e);if(t instanceof L)return this.handleErrorResponse(t,n);"string"!=typeof e?this.showGeneralError(t||e):this.NotificationsService.addError(e)},e.prototype.retrieveErrorMessage=function(e){var n=this.retrieveError(e);return n instanceof En?n.message:"string"==typeof n?n:this.I18n.t("js.error.internal")},e.prototype.retrieveError=function(e){var n=e;return e instanceof V.f&&(n=e.message||e.error),"Error"===_.get(e,"data._type")&&(n=e.data),n&&"Error"===n._type?this.halResourceService.createHalResourceOfClass(En,n):n},e.prototype.handleErrorResponse=function(e,n){return e instanceof En?n?this.showError(e,n):void this.showApiErrorMessages(e):this.showGeneralError(e)},e.prototype.showError=function(e,n){this.showCustomError(e,n)||this.showApiErrorMessages(e)},e.prototype.showGeneralError=function(e){var n=this.I18n.t("js.error.internal");("string"==typeof e||_.has(e,"toString"))&&(n+=" "+e.toString()),this.NotificationsService.addError(n)},e.prototype.showEditingBlockedError=function(e){this.NotificationsService.addError(this.I18n.t("js.hal.error.edit_prohibited",{attribute:e}))},e.prototype.showCustomError=function(e,n){if("urn:openproject-org:api:v3:errors:PropertyFormatError"===e.errorIdentifier){var t=n.schema[e.details.attribute].name,l="js.hal.error.format."+n.schema[e.details.attribute].type.toLowerCase();return void 0!==this.I18n.lookup(l)&&(this.NotificationsService.addError(this.I18n.t(l,{attribute:t})),!0)}return!1},e.prototype.showApiErrorMessages=function(e){var n=e.errorMessages;return n.length>1?this.NotificationsService.addError("",n):this.NotificationsService.addError(n[0]),!0},e}(),qn=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.injector=n,i.$state=t,i.wpCacheService=l,i}return a.d(n,e),n.prototype.showSave=function(e,n){void 0===n&&(n=!1);var t={message:this.I18n.t("js.notice_successful_"+(n?"create":"update"))};this.addWorkPackageFullscreenLink(t,e),this.NotificationsService.addSuccess(t)},n.prototype.showCustomError=function(n,t){var l=this;return"urn:openproject-org:api:v3:errors:UpdateConflict"===n.errorIdentifier?(this.NotificationsService.addError({message:n.message,type:"error",link:{text:this.I18n.t("js.hal.error.update_conflict_refresh"),target:function(){return l.wpCacheService.require(t.id,!0)}}}),!0):e.prototype.showCustomError.call(this,n,t)},n.prototype.addWorkPackageFullscreenLink=function(e,n){var t=this;this.$state.includes("work-packages.show")||(e.link={target:function(){return t.$state.go("work-packages.show.activity",{workPackageId:n.id})},text:this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")})},n}(Mn),Ln=function(){function e(e,n,t,l,i,r,o){this.querySpace=e,this.wpTableHierarchies=n,this.wpTableColumns=t,this.notificationService=l,this.halResourceService=i,this.wpCacheService=r,this.wpRelations=o}return e.prototype.initialize=function(e){var n=this;Promise.all([this.requireInvolvedRelations(e.map(function(e){return e.id})),this.requireHierarchyElements(e)]).then(function(e){n.loadAdditional(_.flatten(e))})},e.prototype.loadAdditional=function(e){var n=this;this.wpCacheService.requireAll(e).then(function(){n.querySpace.additionalRequiredWorkPackages.putValue(null,"All required work packages are loaded")}).catch(function(e){n.querySpace.additionalRequiredWorkPackages.putValue(null,"Failure loading required work packages"),n.notificationService.handleRawError(e)})},e.prototype.requireInvolvedRelations=function(e){var n=this;return this.wpTableColumns.hasRelationColumns()?this.wpRelations.requireAll(e,!0).then(function(){var t=n.getInvolvedWorkPackages(e.map(function(e){return n.wpRelations.state(e).value}));return _.flatten(t)}):Promise.resolve([])},e.prototype.requireHierarchyElements=function(e){if(!this.wpTableHierarchies.isEnabled)return Promise.resolve([]);var n=_.flatten(e.map(function(e){return e.ancestorIds}));return Promise.resolve(n)},e.prototype.getInvolvedWorkPackages=function(e){var n=[];return _.each(e,function(e){_.each(e,function(e){n.push(e.ids.from,e.ids.to)})}),n},e}(),$n=function(e){function n(n,t,l,i,r){var o=e.call(this,n)||this;return o.querySpace=n,o.wpTableColumns=t,o.halResourceService=l,o.wpCacheService=i,o.wpRelations=r,o}return a.d(n,e),n.prototype.valueFromQuery=function(e){return this.current},n.prototype.relationsToExtendFor=function(e,n,t){if(this.wpTableColumns.hasRelationColumns()&&this.lastUpdatedState.hasValue()&&!_.isNil(n)){var l=this.getExpandFor(e.id);if(void 0!==l){var i=this.wpTableColumns.findById(l),r=this.relationColumnType(i);null!==r&&_.each(this.relationsForColumn(e,n,i),function(e){return t(e,i,r)})}}},n.prototype.relationsForColumn=function(e,n,t){var l=this;if(_.isNil(n))return[];var i=this.relationColumnType(t);if("toType"===i){var r=t.type.href;return _.filter(n,function(n){var t=n.denormalized(e),i=l.wpCacheService.state(t.targetId).value;return _.get(i,"type.href")===r})}if("ofType"===i){var o=t.relationType;return _.filter(n,function(n){return n.denormalized(e).relationType===o})}return[]},n.prototype.relationColumnType=function(e){switch(e._type){case qe.RELATION_TO_TYPE:return"toType";case qe.RELATION_OF_TYPE:return"ofType";default:return null}},n.prototype.getExpandFor=function(e){return this.current[e]},n.prototype.setExpandFor=function(e,n){var t=a.a({},this.current);t[e]=n,this.update(t)},n.prototype.collapse=function(e){var n=a.a({},this.current);delete n[e],this.update(n)},Object.defineProperty(n.prototype,"current",{get:function(){return this.lastUpdatedState.getValueOr({})},enumerable:!0,configurable:!0}),n}(k),Hn=function(){function e(e,n,t,l,i,r,o,u,a,s,c,d,p,h,f,g,m,v){this.states=e,this.querySpace=n,this.wpTableColumns=t,this.wpTableGroupBy=l,this.wpTableSortBy=i,this.wpTableFilters=r,this.wpTableSum=o,this.wpTableTimeline=u,this.wpTableHierarchies=a,this.wpTableHighlighting=s,this.wpTableRelationColumns=c,this.wpTablePagination=d,this.wpTableOrder=p,this.wpTableAdditionalElements=h,this.wpCacheService=f,this.wpListChecksumService=g,this.authorisationService=m,this.wpDisplayRepresentation=v}return e.prototype.initialize=function(e,n){this.clearStates(),this.querySpace.query.putValue(e),this.initializeFromQuery(e,n),this.updateQuerySpace(e,n),this.updateChecksum(e,n)},e.prototype.updateStatesFromForm=function(e,n){var t=this,l=n.schema;_.each(l.filtersSchemas.elements,function(e){t.states.schemas.get(e.$href).putValue(e)}),this.wpTableFilters.initializeFilters(e,l),this.querySpace.queryForm.putValue(n),this.states.queries.columns.putValue(l.columns.allowedValues),this.states.queries.sortBy.putValue(l.sortBy.allowedValues),this.states.queries.groupBy.putValue(l.groupBy.allowedValues),this.states.queries.displayRepresentation.putValue(l.displayRepresentation.allowedValues)},e.prototype.updateQuerySpace=function(e,n){var t=this;this.querySpace.additionalRequiredWorkPackages.clear("Clearing additional WPs before updating rows"),this.querySpace.rendered.clear("Clearing rendered data before upgrading query space"),n.schemas&&_.each(n.schemas.elements,function(e){t.states.schemas.get(e.href).putValue(e)}),this.querySpace.query.putValue(e),this.authorisationService.initModelAuth("work_packages",n.$links),n.elements.forEach(function(e){return t.wpCacheService.updateWorkPackage(e,!0)}),this.querySpace.results.putValue(n),this.querySpace.groups.putValue(n.groups),this.wpTablePagination.initialize(e,n),this.wpTableRelationColumns.initialize(e,n),this.wpTableAdditionalElements.initialize(n.elements),this.wpTableOrder.initialize(e,n),this.wpDisplayRepresentation.initialize(e,n),this.querySpace.additionalRequiredWorkPackages.values$().pipe(Object(y.a)(1)).subscribe(function(){return t.querySpace.initialized.putValue(null)})},e.prototype.updateChecksum=function(e,n){this.wpListChecksumService.updateIfDifferent(this.querySpace.query.value,this.wpTablePagination.current),this.authorisationService.initModelAuth("work_packages",n.$links)},e.prototype.initializeFromQuery=function(e,n){this.querySpace.query.putValue(e),this.wpTableSum.initialize(e),this.wpTableColumns.initialize(e,n),this.wpTableSortBy.initialize(e,n),this.wpTableGroupBy.initialize(e,n),this.wpTableTimeline.initialize(e,n),this.wpTableHierarchies.initialize(e,n),this.wpTableHighlighting.initialize(e,n),this.wpDisplayRepresentation.initialize(e,n),this.authorisationService.initModelAuth("query",e.$links),this.authorisationService.initModelAuth("work_packages",n.$links)},e.prototype.applyToQuery=function(e){this.wpTableFilters.applyToQuery(e),this.wpTableSum.applyToQuery(e),this.wpTableColumns.applyToQuery(e),this.wpTableSortBy.applyToQuery(e),this.wpTableGroupBy.applyToQuery(e),this.wpTableTimeline.applyToQuery(e),this.wpTableHighlighting.applyToQuery(e),this.wpTableHierarchies.applyToQuery(e),this.wpTableOrder.applyToQuery(e),this.wpDisplayRepresentation.applyToQuery(e)},e.prototype.clearStates=function(){var e="Clearing states before re-initialization.";this.querySpace.initialized.clear(e),this.querySpace.query.clear(e),this.querySpace.results.clear(e),this.querySpace.groups.clear(e),this.querySpace.additionalRequiredWorkPackages.clear(e),this.wpTableFilters.clear(e),this.wpTableColumns.clear(e),this.wpTableSortBy.clear(e),this.wpTableGroupBy.clear(e),this.wpDisplayRepresentation.clear(e),this.wpTableSum.clear(e),this.querySpace.rendered.clear(e)},e}(),Bn=new l.InjectionToken("WpTableConfigurationModalPrependComponent"),zn=function(e){function n(n,t,i,r,o,u,a,s,c,d,p,h,f,g,m){var v=e.call(this,n,f,m)||this;return v.locals=n,v.prependModalComponent=t,v.I18n=i,v.injector=r,v.appRef=o,v.componentFactoryResolver=u,v.loadingIndicator=a,v.querySpace=s,v.queryFormDm=c,v.wpStatesInitialization=d,v.notificationService=p,v.wpTableColumns=h,v.cdRef=f,v.ConfigurationService=g,v.elementRef=m,v.closeOnEscape=!1,v.closeOnOutsideClick=!1,v.text={title:v.I18n.t("js.work_packages.table_configuration.modal_title"),closePopup:v.I18n.t("js.close_popup_title"),columnsLabel:v.I18n.t("js.label_columns"),selectedColumns:v.I18n.t("js.description_selected_columns"),multiSelectLabel:v.I18n.t("js.work_packages.label_column_multiselect"),applyButton:v.I18n.t("js.modals.button_apply"),cancelButton:v.I18n.t("js.modals.button_cancel"),upsaleRelationColumns:v.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:v.I18n.t("js.modals.upsale_relation_columns_link")},v.onDataUpdated=new l.EventEmitter,v.selectedColumnMap={},v.wpTableConfigurationService=v.injector.get(dn,new dn(v.I18n)),v}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.tabPortalHost=new pn(this.wpTableConfigurationService.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),this.loadingIndicator.indicator("modal").promise=this.loadForm().then(function(){var n=e.locals.initialTab||e.availableTabs[0].name;e.switchTo(n)})},n.prototype.ngOnDestroy=function(){this.onDataUpdated.complete(),this.tabPortalHost.dispose()},Object.defineProperty(n.prototype,"availableTabs",{get:function(){return this.tabPortalHost.availableTabs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTab",{get:function(){return this.tabPortalHost.currentTab},enumerable:!0,configurable:!0}),n.prototype.switchTo=function(e){this.tabPortalHost.switchTo(e)},n.prototype.saveChanges=function(){this.tabPortalHost.activeComponents.forEach(function(e){e.onSave()}),this.onDataUpdated.emit(),this.service.close()},n.prototype.onClose=function(){return this.afterFocusOn.focus(),!0},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),n.prototype.loadForm=function(){var e=this,n=this.querySpace.query.value;return this.queryFormDm.load(n).then(function(t){return e.wpStatesInitialization.updateStatesFromForm(n,t),t}).catch(function(n){return e.notificationService.handleRawError(n)})},n}(He.a),Wn=t("IaZ+"),Qn=function(){function e(e){this.PathHelper=e,this.detect()}return Object.defineProperty(e.prototype,"inProjectContext",{get:function(){return void 0!==this.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.current?this.PathHelper.projectPath(this.current.identifier):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apiv3Path",{get:function(){return this.current?this.PathHelper.api.v3.projects.id(this.current.id).toString():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.getCurrent("id")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getCurrent("name")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.getCurrent("identifier")},enumerable:!0,configurable:!0}),e.prototype.getCurrent=function(e){return this.current&&this.current[e]?this.current[e].toString():null},e.prototype.detect=function(){var e=document.querySelector("meta[name=current_project]");e&&(this.current={id:e.dataset.projectId,name:e.dataset.projectName,identifier:e.dataset.projectIdentifier})},e}(),Un=function(e){var n=this;this.tableVisible=!0,this.compactTableStyle=!1,this.actionsColumnEnabled=!0,this.contextMenuEnabled=!0,this.columnMenuEnabled=!0,this.projectContext=!0,this.projectIdentifier=null,this.inlineCreateEnabled=!0,this.hierarchyToggleEnabled=!0,this.dragAndDropEnabled=!1,this.isEmbedded=!1,this.isCardView=!1,this.withFilters=!1,this.filtersExpanded=!1,this.showFilterButton=!1,this.filterButtonText=I18n.t("js.button_filter"),_.each(e,function(e,t){n[t]=e})},Gn=t("q4SE"),Kn=t("/PH2"),Yn=t("VnD/"),Zn=function(){function e(){}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this.userMeta.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this.userMeta.data("id")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.userMeta.data("name")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mail",{get:function(){return this.userMeta.data("mail")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userMeta",{get:function(){return jQuery("meta[name=current_user]")},enumerable:!0,configurable:!0}),e}(),Jn=function(){function e(e){this.documentElement=e}return Object.defineProperty(e.prototype,"isBcfActivated",{get:function(){return this.hasBodyClass("bcf-activated")},enumerable:!0,configurable:!0}),e.prototype.hasBodyClass=function(e){return this.documentElement.body.classList.contains(e)},e}(),Xn=function(){function e(e,n,t,l,i,r){this.I18n=e,this.$state=n,this.CurrentProject=t,this.PathHelper=l,this.CurrentUserService=i,this.BcfDetectorService=r,this.text={assignee:this.I18n.t("js.work_packages.properties.assignee"),author:this.I18n.t("js.work_packages.properties.author"),created_at:this.I18n.t("js.work_packages.properties.createdAt"),updated_at:this.I18n.t("js.work_packages.properties.updatedAt"),status:this.I18n.t("js.work_packages.properties.status"),work_packages:this.I18n.t("js.label_work_package_plural"),gantt:this.I18n.t("js.timelines.gantt_chart"),latest_activity:this.I18n.t("js.work_packages.default_queries.latest_activity"),created_by_me:this.I18n.t("js.work_packages.default_queries.created_by_me"),assigned_to_me:this.I18n.t("js.work_packages.default_queries.assigned_to_me"),recently_created:this.I18n.t("js.work_packages.default_queries.recently_created"),all_open:this.I18n.t("js.work_packages.default_queries.all_open"),summary:this.I18n.t("js.work_packages.default_queries.summary")}}return Object.defineProperty(e.prototype,"all",{get:function(){var e=[{identifier:"latest_activity",label:this.text.latest_activity,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"gantt",label:this.text.gantt,query_props:'{"c":["id","subject","startDate","dueDate"],"tv":true,"tzl":"years","hi":true,"g":"","t":"id:asc","t":"startDate:asc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"recently_created",label:this.text.recently_created,query_props:'{"c":["id","subject","type","status","assignee","createdAt"],"hi":false,"g":"","t":"createdAt:desc","f":[{"n":"status","o":"o","v":[]}]}'}];this.BcfDetectorService.isBcfActivated?e.push({identifier:"all_open",label:this.text.all_open,query_props:'{"hi":true,"hl":"priority","f":[{"n":"status","o":"o","v":[]}],"dr":"card"}'}):e.push({identifier:"all_open",label:this.text.all_open,query_props:null});var n=this.CurrentProject.identifier;return n&&e.push({identifier:"summary",label:this.text.summary,static_link:this.PathHelper.projectWorkPackagesPath(n)+"/report"}),this.CurrentUserService.isLoggedIn&&(e=e.concat([{identifier:"created_by_me",label:this.text.created_by_me,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc,id:asc","f":[{"n":"status","o":"o","v":[]},{"n":"author","o":"=","v":["me"]}]}'},{identifier:"assigned_to_me",label:this.text.assigned_to_me,query_props:'{"c":["id","subject","type","status","author","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc,id:asc","f":[{"n":"status","o":"o","v":[]},{"n":"assigneeOrGroup","o":"=","v":["me"]}]}'}])),e},enumerable:!0,configurable:!0}),e.prototype.getStaticName=function(e){if(this.$state.params.query_props){var n=JSON.parse(this.$state.params.query_props);delete n.pp,delete n.pa;var t=_.find(this.all,function(e){return e.query_props&&e.query_props===JSON.stringify(n)});if(t)return t.label}return 1===e.filters.length&&"status"===e.filters[0].id&&"o"===e.filters[0].operator.id?this.text.all_open:this.text.work_packages},e}(),et=function(){function e(e,n){this.halResourceService=e,this.queryFormDm=n}return e.prototype.restoreQuery=function(e,n){var t=this.queryFormDm.buildQueryResource(n);this.restoreFilters(e,t,n.schema),this.restoreColumns(e,t,n.schema),this.restoreSortBy(e,t,n.schema),this.restoreGroupBy(e,t,n.schema),this.restoreOtherProperties(e,t)},e.prototype.restoreFilters=function(e,n,t){var l=_.map(n.filters,function(e){var n=_.find(t.filtersSchemas.elements,function(n){return n.filter.allowedValues[0].$href===e.filter.$href});if(!n)return null;var l=n.getFilter(),i=_.find(n.operator.allowedValues,function(n){return n.$href===e.operator.$href});return i&&(l.operator=i),l.values.length=0,_.each(e.values,function(e){return l.values.push(e)}),l});l=_.compact(l),e.filters.length=0,_.each(l,function(n){return e.filters.push(n)})},e.prototype.restoreColumns=function(e,n,t){var l=_.map(n.columns,function(e){return _.find(t.columns.allowedValues,function(n){return n.$href===e.$href})});l=_.compact(l),e.columns.length=0,_.each(l,function(n){return e.columns.push(n)})},e.prototype.restoreSortBy=function(e,n,t){var l=_.map(n.sortBy,function(e){return _.find(t.sortBy.allowedValues,function(n){return n.$href===e.$href})});l=_.compact(l),e.sortBy.length=0,_.each(l,function(n){return e.sortBy.push(n)})},e.prototype.restoreGroupBy=function(e,n,t){var l=_.find(t.groupBy.allowedValues,function(e){return n.groupBy&&n.groupBy.$href===e.$href});e.groupBy=l},e.prototype.restoreOtherProperties=function(e,n){_.without(Object.keys(n.$source),"_links","filters").forEach(function(t){e[t]=n[t]}),_.without(Object.keys(n.$source._links),"columns","groupBy","sortBy").forEach(function(t){e[t]=n[t]})},e}(),nt=t("0/uQ"),tt=t("F/XL"),lt=t("15JJ"),it=t("psW0"),rt=t("S1nX"),ot=function(){function e(e,n,t,l,i,r,o,u,a,c,d,p,h,f){var g=this;this.NotificationsService=e,this.I18n=n,this.UrlParamsHelper=t,this.authorisationService=l,this.$state=i,this.QueryDm=r,this.QueryFormDm=o,this.states=u,this.querySpace=a,this.pagination=c,this.configuration=d,this.wpTablePagination=p,this.wpStatesInitialization=h,this.wpListInvalidQueryService=f,this.queryRequests=Object(s.f)(),this.queryLoading=this.queryRequests.values$().pipe(Object(lt.a)(function(e){return Object(nt.a)(g.ensurePerPageKnown().then(function(){return e}))}),Object(lt.a)(function(e){return g.streamQueryRequest(e.queryParams,e.projectIdentifier)}),Object(it.a)(function(e){return g.conditionallyLoadForm(e),g.wpStatesInitialization.initialize(e,e.results),Object(tt.a)(e)}),Object(rt.a)())}return e.prototype.streamQueryRequest=function(e,n){var t=this,l=this.getCurrentQueryProps(e),i=this.UrlParamsHelper.buildV3GetQueryFromJsonParams(l);return this.QueryDm.stream(i,e.query_id,n).pipe(Object(q.a)(function(i){var r=t.UrlParamsHelper.buildV3GetQueryFromJsonParams(l);return Object(nt.a)(t.handleQueryLoadingError(i,r,e.query_id,n))}))},e.prototype.fromQueryParams=function(e,n){return this.queryRequests.clear(),this.queryRequests.putValue({queryParams:e,projectIdentifier:n}),this.queryLoading.pipe(Object(y.a)(1))},e.prototype.getCurrentQueryProps=function(e){return e.query_props?decodeURIComponent(e.query_props):null},e.prototype.loadDefaultQuery=function(e){return this.fromQueryParams({},e).toPromise()},e.prototype.reloadQuery=function(e){var n=this,t=this.getPaginationInfo();t.offset=1;var l=this.QueryDm.reload(e,t);return this.updateStatesFromQueryOnPromise(l).then(function(e){return n.conditionallyLoadForm(e),e}).catch(function(t){var l=e.project&&e.project.id;return n.handleQueryLoadingError(t,{},e.id,l)})},e.prototype.loadResultsList=function(e,n){var t=this;return this.QueryDm.loadResults(e,n).then(function(n){return t.wpStatesInitialization.updateQuerySpace(n,n.results),t.wpStatesInitialization.updateChecksum(n,n.results),e.results})},e.prototype.reloadCurrentResultsList=function(){var e=this.getPaginationInfo(),n=this.currentQuery;return this.loadResultsList(n,e)},e.prototype.loadCurrentQueryFromParams=function(e){return this.fromQueryParams(this.$state.params,e).toPromise()},e.prototype.loadForm=function(e){var n=this;return this.QueryFormDm.load(e).then(function(t){return n.wpStatesInitialization.updateStatesFromForm(e,t),t})},e.prototype.create=function(e,n){var t=this,l=this.querySpace.queryForm.value;e.name=n;var i=this.QueryDm.create(e,l);return i.then(function(e){return t.NotificationsService.addSuccess(t.I18n.t("js.notice_successful_create")),t.reloadQuery(e).then(function(){t.states.changes.queries.next(e.id)}),e}),i},e.prototype.delete=function(){var e=this,n=this.currentQuery,t=this.QueryDm.delete(n);return t.then(function(){var t;e.NotificationsService.addSuccess(e.I18n.t("js.notice_successful_delete")),n.project&&(t=n.project.$href.split("/").pop()),e.loadDefaultQuery(t),e.states.changes.queries.next(n.id)}),t},e.prototype.save=function(e){var n=this;e=e||this.currentQuery;var t=this.querySpace.queryForm.value,l=this.QueryDm.update(e,t).toPromise();return l.then(function(){n.NotificationsService.addSuccess(n.I18n.t("js.notice_successful_update")),n.$state.go(".",{query_id:e.id,query_props:null},{reload:!0}),n.states.changes.queries.next(e.id)}).catch(function(e){n.NotificationsService.addError(e.message)}),l},e.prototype.toggleStarred=function(e){var n=this,t=this.QueryDm.toggleStarred(e);return t.then(function(e){n.querySpace.query.putValue(e),n.NotificationsService.addSuccess(n.I18n.t("js.notice_successful_update")),n.states.changes.queries.next(e.id)}),t},e.prototype.getPaginationInfo=function(){return this.wpTablePagination.paginationObject},e.prototype.conditionallyLoadForm=function(e){var n=this,t=this.querySpace.queryForm.value;t&&e.$links.update.$href===t.$href||setTimeout(function(){return n.loadForm(e)},0)},e.prototype.updateStatesFromQueryOnPromise=function(e){var n=this;return e.then(function(e){return n.wpStatesInitialization.initialize(e,e.results),e}),e},Object.defineProperty(e.prototype,"currentQuery",{get:function(){return this.querySpace.query.value},enumerable:!0,configurable:!0}),e.prototype.handleQueryLoadingError=function(e,n,t,l){var i=this;return this.NotificationsService.addError(this.I18n.t("js.work_packages.faulty_query.description"),e.message),new Promise(function(e,r){i.QueryFormDm.loadWithParams(n,t,l).then(function(o){i.QueryDm.findDefault({pageSize:0},l).then(function(l){i.wpListInvalidQueryService.restoreQuery(l,o),l.results.pageSize=n.pageSize,l.results.total=0,t&&(l.id=t),i.wpStatesInitialization.initialize(l,l.results),i.wpStatesInitialization.updateStatesFromForm(l,o),e(l)}).catch(r)}).catch(r)})},e.prototype.ensurePerPageKnown=function(){return a.b(this,void 0,void 0,function(){return a.e(this,function(e){return this.pagination.isPerPageKnown?[2,!0]:[2,this.configuration.initialized]})})},e}(),ut=t("DaYz"),at=t("Gi3i"),st=t("dC0D"),ct=function(){function e(){this._events=new c.a,this.events$=this._events.asObservable()}return e.prototype.aggregated$=function(e,n){return void 0===n&&(n=500),this.events$.pipe(Object(Yn.a)(function(n){return n.resourceType===e}),Object(ut.a)(this.events$.pipe(Object(at.a)(n))),Object(st.a)(function(e,n){return e.concat(n)}))},e.prototype.push=function(e,n){n.id=e.id,n.resourceType=e._type,this._events.next(n)},e}(),dt=function(){function e(){this.mobileWidthTreshold=680}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return window.innerWidth<this.mobileWidthTreshold},enumerable:!0,configurable:!0}),e}(),pt=function(){function e(e){this.injector=e,this.$state=this.injector.get(g.G),this.states=this.injector.get(d),this.querySpace=this.injector.get(b),this.authorisationService=this.injector.get(In),this.wpTableColumns=this.injector.get($e),this.wpTableHighlighting=this.injector.get(sn),this.wpTableSortBy=this.injector.get(rn),this.wpTableGroupBy=this.injector.get(Be),this.wpTableFilters=this.injector.get(en),this.wpTableSum=this.injector.get(Qe),this.wpTableTimeline=this.injector.get(N),this.wpTableHierarchies=this.injector.get(We),this.wpTablePagination=this.injector.get(je),this.wpTableOrder=this.injector.get(Sn),this.wpListService=this.injector.get(ot),this.wpListChecksumService=this.injector.get(kn),this.loadingIndicatorService=this.injector.get(Nn),this.$transitions=this.injector.get(g.O),this.I18n=this.injector.get(A.a),this.wpStaticQueries=this.injector.get(Xn),this.QueryDm=this.injector.get(Me),this.wpStatesInitialization=this.injector.get(Hn),this.cdRef=this.injector.get(l.ChangeDetectorRef),this.wpDisplayRepresentation=this.injector.get(_n),this.halEvents=this.injector.get(ct),this.deviceService=this.injector.get(dt)}return e.prototype.ngOnInit=function(){this.setupQueryObservers(),this.setupRefreshObserver()},e.prototype.ngOnDestroy=function(){},e.prototype.setupQueryObservers=function(){var e=this;this.wpTablePagination.updates$().pipe(Object(Gn.b)(this),Object(Kn.a)(this.querySpace.query.values$())).subscribe(function(n){var t=n[0],l=n[1];e.wpListChecksumService.isQueryOutdated(l,t)&&(e.wpListChecksumService.update(l,t),e.refresh(!0,!1))}),this.setupChangeObserver(this.wpTableFilters,!0),this.setupChangeObserver(this.wpTableGroupBy),this.setupChangeObserver(this.wpTableSortBy),this.setupChangeObserver(this.wpTableSum),this.setupChangeObserver(this.wpTableTimeline),this.setupChangeObserver(this.wpTableHierarchies),this.setupChangeObserver(this.wpTableColumns),this.setupChangeObserver(this.wpTableHighlighting),this.setupChangeObserver(this.wpTableOrder),this.setupChangeObserver(this.wpDisplayRepresentation)},e.prototype.setupChangeObserver=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.querySpace.query;e.updates$().pipe(Object(Gn.b)(this),Object(Yn.a)(function(){return l.hasValue()&&e.hasChanged(l.value)})).subscribe(function(){var i=l.value,r=e.applyToQuery(i);t.querySpace.query.putValue(i),t.wpListChecksumService.updateIfDifferent(i,t.wpTablePagination.current).then(function(){r&&t.refresh(!0,n)})})},e.prototype.setupRefreshObserver=function(){var e=this;this.halEvents.aggregated$("WorkPackage").pipe(Object(Gn.b)(this),Object(Yn.a)(function(n){return e.filterRefreshEvents(n)})).subscribe(function(n){e.refresh(!1,!1)})},e.prototype.filterRefreshEvents=function(e){for(var n=new Set(this.querySpace.renderedWorkPackageIds.getValueOr([])),t=0;t<e.length;t++){var l=e[t];if(n.has(l.id)||"created"===l.eventType)return!0}return!1},e}(),ht=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.uniqueEmbeddedTableName="embedded-table-"+Date.now(),n.initialLoadingIndicator=!0,n.renderTable=!1,n.showTablePagination=!1,n.error=null,n.initialized=!1,n.QueryDm=n.injector.get(Me),n.querySpace=n.injector.get(b),n.I18n=n.injector.get(A.a),n.urlParamsHelper=n.injector.get(Ne),n.loadingIndicatorService=n.injector.get(Nn),n.wpStatesInitialization=n.injector.get(Hn),n.currentProject=n.injector.get(Qn),n.cdRef=n.injector.get(l.ChangeDetectorRef),n}return a.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.configuration=new Un(this.providedConfiguration),this.configuration.isEmbedded=!0,this.initialized=!0},n.prototype.ngAfterViewInit=function(){this.loadQuery(!0,!1)},n.prototype.ngOnDestroy=function(){e.prototype.ngOnInit.call(this)},n.prototype.ngOnChanges=function(e){this.initialized&&(e.queryId||e.queryProps)&&this.loadQuery(this.initialLoadingIndicator,!1)},Object.defineProperty(n.prototype,"projectIdentifier",{get:function(){return(this.configuration.projectContext?this.currentProject.identifier:this.configuration.projectIdentifier)||void 0},enumerable:!0,configurable:!0}),n.prototype.buildQueryProps=function(){var e=this.querySpace.query.value;return this.wpStatesInitialization.applyToQuery(e),this.urlParamsHelper.buildV3GetQueryFromQueryResource(e)},n.prototype.setLoaded=function(){this.renderTable=this.configuration.tableVisible,this.cdRef.detectChanges()},n.prototype.refresh=function(e,n){var t=this;void 0===e&&(e=!0),void 0===n&&(n=!1);var l=this.querySpace.query.value,i=this.wpTablePagination.paginationObject;n&&(i.offset=1);var r=this.QueryDm.loadResults(l,i).then(function(e){return t.wpStatesInitialization.updateQuerySpace(e,e.results)});return e&&(this.loadingIndicator=r),r},Object.defineProperty(n.prototype,"isInitialized",{get:function(){return!!this.configuration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"loadingIndicator",{set:function(e){this.configuration.tableVisible&&(this.loadingIndicatorService.indicator(this.uniqueEmbeddedTableName).promise=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"queryProjectScope",{get:function(){return this.configuration.projectContext?this.projectIdentifier:void 0},enumerable:!0,configurable:!0}),n.prototype.initializeStates=function(e){this.wpStatesInitialization.clearStates(),this.wpStatesInitialization.initializeFromQuery(e,e.results),this.wpStatesInitialization.updateQuerySpace(e,e.results)},n}(pt),ft=t("ad02"),gt=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.queryProps={},n.tableActions=[],n.externalHeight=!1,n.onError=new l.EventEmitter,n.onQueryLoaded=new l.EventEmitter,n.QueryDm=n.injector.get(Me),n.opModalService=n.injector.get(Wn.b),n.tableActionsService=n.injector.get(De),n.wpTableTimeline=n.injector.get(N),n.wpTablePagination=n.injector.get(je),n.QueryFormDm=n.injector.get(hn),n}return a.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.loadedQuery=this.querySpace.query.value},n.prototype.ngAfterViewInit=function(){var n,t=this;e.prototype.ngAfterViewInit.call(this),this.tableActions&&(n=this.tableActionsService).setActions.apply(n,this.tableActions),this.wpTablePagination.updates$().pipe(Object(v.a)(function(e){return[e.page,e.perPage]}),Object(ft.a)(),Object(Gn.b)(this),Object(Kn.a)(this.querySpace.query.values$())).subscribe(function(e){e[0];var n=e[1];t.loadingIndicator=t.QueryDm.loadResults(n,t.wpTablePagination.paginationObject).then(function(e){return t.initializeStates(e)})})},n.prototype.openConfigurationModal=function(e){var n=this;this.querySpace.query.valuesPromise().then(function(){n.opModalService.show(zn,n.injector).onDataUpdated.subscribe(e)})},n.prototype.initializeStates=function(n){var t=this;this.configuration.withFilters&&this.loadForm(n),e.prototype.initializeStates.call(this,n),this.querySpace.initialized.values$().pipe(Object(y.a)(1)).subscribe(function(){t.showTablePagination=n.results.total>n.results.count,t.setLoaded(),t.wpTableTimeline.isVisible&&(t.configuration=a.a({},t.configuration,{compactTableStyle:!1}))})},n.prototype.loadForm=function(e){var n=this;return this.formPromise?this.formPromise:this.formPromise=this.QueryFormDm.load(e).then(function(t){return n.wpStatesInitialization.updateStatesFromForm(e,t),t}).catch(function(){return n.formPromise=void 0})},n.prototype.loadQuery=function(e,n){var t=this;if(void 0===e&&(e=!0),void 0===n&&(n=!1),this.formPromise=void 0,this.loadedQuery){var l=this.loadedQuery;return this.loadedQuery=void 0,this.initializeStates(l),Promise.resolve(this.loadedQuery)}this.configuration.tableVisible||(this.queryProps.pageSize=1),n&&(this.queryProps.page=1),this.error=null;var i=this.QueryDm.find(this.queryProps,this.queryId,this.queryProjectScope).then(function(e){return t.initializeStates(e),t.onQueryLoaded.emit(e),e}).catch(function(e){t.error=t.I18n.t("js.error.embedded_table_loading",{message:_.get(e,"message",e)}),t.onError.emit(e)});return e&&(this.loadingIndicator=i),i},n}(ht),mt=function(){function e(e,n){this.locals=e,this.cdRef=n}return e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.embeddedTable.openConfigurationModal(function(){e.service.detach(),e.locals.callback(e.embeddedTable.buildQueryProps())}),e.cdRef.detectChanges()})},Object.defineProperty(e.prototype,"service",{get:function(){return this.locals.service},enumerable:!0,configurable:!0}),e}(),vt=new l.InjectionToken("OpQueryConfigurationLocalsToken"),bt=function(){function e(e,n,t,l,i){this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=i}return e.prototype.setupListener=function(){var e=this;jQuery(window).on("op:queryconfiguration:trigger",function(n,t,l){return e.show(t,l),!1})},Object.defineProperty(e.prototype,"bodyPortalHost",{get:function(){if(!this._portalHostElement){var e=this._portalHostElement=document.createElement("div");e.classList.add("op-external-query-configuration--container"),document.body.appendChild(e),this._bodyPortalHost=new f.b(e,this.componentFactoryResolver,this.appRef,this.injector)}return this._bodyPortalHost},enumerable:!0,configurable:!0}),e.prototype.show=function(e,n,t){void 0===t&&(t={}),this.detach();var l=new f.a(this.externalQueryConfigurationComponent(),null,this.injectorFor({callback:n,currentQuery:e,disabledTabs:t}));this.bodyPortalHost.attach(l),this._portalHostElement.style.display="block"},e.prototype.detach=function(){this.bodyPortalHost.hasAttached()&&(this.bodyPortalHost.detach(),this._portalHostElement.style.display="none")},e.prototype.injectorFor=function(e){var n=new WeakMap;return e.service=this,n.set(vt,e),new f.c(this.injector,n)},e.prototype.externalQueryConfigurationComponent=function(){return mt},e}(),yt=function(){function e(e,n,t,l){this.injector=e,this.I18n=n,this.wpTableFilters=t,this.ConfigurationService=l,this.relationFilterIds=["parent","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required"],this.availableRelationFilters=[],this.selectedRelationFilter=void 0,this.text={please_select:this.I18n.t("js.placeholders.selection"),first_part:this.I18n.t("js.work_packages.table_configuration.relation_filters.first_part"),second_part:this.I18n.t("js.work_packages.table_configuration.relation_filters.second_part"),parent:this.I18n.t("js.types.attribute_groups.filter_types.parent"),precedes:this.I18n.t("js.types.attribute_groups.filter_types.precedes"),follows:this.I18n.t("js.types.attribute_groups.filter_types.follows"),relates:this.I18n.t("js.types.attribute_groups.filter_types.relates"),duplicates:this.I18n.t("js.types.attribute_groups.filter_types.duplicates"),duplicated:this.I18n.t("js.types.attribute_groups.filter_types.duplicated"),blocks:this.I18n.t("js.types.attribute_groups.filter_types.blocks"),blocked:this.I18n.t("js.types.attribute_groups.filter_types.blocked"),requires:this.I18n.t("js.types.attribute_groups.filter_types.requires"),required:this.I18n.t("js.types.attribute_groups.filter_types.required"),partof:this.I18n.t("js.types.attribute_groups.filter_types.partof"),includes:this.I18n.t("js.types.attribute_groups.filter_types.includes")}}return e.prototype.ngOnInit=function(){var e=this;this.wpTableFilters.onReady().then(function(){e.availableRelationFilters=e.relationFiltersOf(e.wpTableFilters.availableFilters),e.setSelectedRelationFilter()})},e.prototype.setSelectedRelationFilter=function(){var e=this.relationFiltersOf(this.wpTableFilters.current);e.length>0?this.selectedRelationFilter=_.find(this.availableRelationFilters,{id:e[0].id}):this.selectedRelationFilter=this.availableRelationFilters[0],this.onRelationFilterSelected()},e.prototype.onRelationFilterSelected=function(){this.selectedRelationFilter&&(this.removeRelationFiltersFromCurrentState(),this.addFilterToCurrentState(this.selectedRelationFilter))},e.prototype.removeRelationFiltersFromCurrentState=function(){var e,n=this.relationFiltersOf(this.wpTableFilters.current);(e=this.wpTableFilters).remove.apply(e,n)},e.prototype.relationFiltersOf=function(e){var n=this;return _.filter(e,function(e){return _.includes(n.relationFilterIds,e.id)})},e.prototype.addFilterToCurrentState=function(e){var n=this.wpTableFilters.instantiate(e),t=this.getOperatorForId(n,"=");n.operator=t,n.values=[{href:"/api/v3/work_packages/{id}"}],this.wpTableFilters.add(n)},e.prototype.getOperatorForId=function(e,n){return _.find(e.schema.availableOperators,{id:n})},e.prototype.compareRelationFilters=function(e,n){return e&&n?e.id===n.id:e===n},e}(),wt=yt,Ct=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(mt),kt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.externalQueryConfigurationComponent=function(){return Ct},n}(bt),It=function(){function e(){this.hooks={}}return e.prototype.register=function(e,n){n&&(this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(n))},e.prototype.call=function(e){for(var n,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var i=[];if(this.hooks[e])for(var r=0;r<this.hooks[e].length;r++){var o=(n=this.hooks[e])[r].apply(n,t);o&&i.push(o)}return i},e}(),jt=t("tG68"),Rt=function(e){function n(n,t,l,i,r,o){var u=e.call(this,t,r,n)||this;return u.elementRef=n,u.locals=t,u.currentProject=l,u.workPackageDmService=i,u.cdRef=r,u.I18n=o,u.changed=!1,u.showClose=!0,u.closeOnEscape=!0,u.closeOnOutsideClick=!0,u.type="",u.classes="",u.text={title:u.I18n.t("js.editor.macro.work_package_button.button"),none:u.I18n.t("js.label_none"),selected_type:u.I18n.t("js.editor.macro.work_package_button.type"),button_style:u.I18n.t("js.editor.macro.work_package_button.button_style"),button_style_hint:u.I18n.t("js.editor.macro.work_package_button.button_style_hint"),button_save:u.I18n.t("js.button_save"),button_cancel:u.I18n.t("js.button_cancel"),close_popup:u.I18n.t("js.close_popup_title")},u.selectedType=u.type=u.locals.type,u.classes=u.locals.classes,u.buttonStyle="button"===u.classes,u.workPackageDmService.emptyCreateForm({},u.currentProject.identifier).then(function(e){u.availableTypes=e.schema.type.allowedValues}),u}return a.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.classes=this.buttonStyle?"button":"",this.type=this.selectedType,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.typeSelect.nativeElement.focus()},n}(He.a),Pt=function(e){function n(n,t,l,i){var r=e.call(this,t,l,n)||this;return r.elementRef=n,r.locals=t,r.cdRef=l,r.I18n=i,r.changed=!1,r.showClose=!0,r.closeOnEscape=!0,r.closeOnOutsideClick=!0,r.page="",r.text={title:r.I18n.t("js.editor.macro.wiki_page_include.button"),hint:r.I18n.t("js.editor.macro.wiki_page_include.hint"),page:r.I18n.t("js.editor.macro.wiki_page_include.page"),button_save:r.I18n.t("js.button_save"),button_cancel:r.I18n.t("js.button_cancel"),close_popup:r.I18n.t("js.close_popup_title")},r.selectedPage=r.page=r.locals.page,r}return a.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.page=this.selectedPage,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.selectedPageInput.nativeElement.focus()},n}(He.a),St=function(e){function n(n,t,l,i){var r=e.call(this,t,l,n)||this;r.elementRef=n,r.locals=t,r.cdRef=l,r.I18n=i,r.changed=!1,r.showClose=!0,r.closeOnEscape=!0,r.closeOnOutsideClick=!0,r._language="",r.debouncedLanguageLoader=_.debounce(function(){return r.loadLanguageAsMode(r.language)},300),r.text={title:r.I18n.t("js.editor.macro.code_block.title"),language:r.I18n.t("js.editor.macro.code_block.language"),language_hint:r.I18n.t("js.editor.macro.code_block.language_hint"),button_save:r.I18n.t("js.button_save"),button_cancel:r.I18n.t("js.button_cancel"),close_popup:r.I18n.t("js.close_popup_title")},r.languageClass=t.languageClass||"language-text",r.content=t.content;var o=r.languageClass.match(/language-(\w+)/);return r.language=o?o[1]:"text",r}return a.d(n,e),n.prototype.applyAndClose=function(e){this.content=this.codeMirrorInstance.getValue();var n=this.language||"text";this.languageClass="language-"+n,this.changed=!0,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){var e=this;t.e(0).then(t.t.bind(null,"VrN/",7)).then(function(n){var t=n.default;e.codeMirrorInstance=t.fromTextArea(e.codeMirrorPane.nativeElement,{lineNumbers:!0,smartIndent:!0,autofocus:!0,value:e.content,mode:""})})},Object.defineProperty(n.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.debouncedLanguageLoader()},enumerable:!0,configurable:!0}),n.prototype.loadLanguageAsMode=function(e){var n=this;if(!e||"text"===e)return this.updateCodeMirrorMode("");t("v4wS")("./"+e+"/"+e+".js").then(function(){n.updateCodeMirrorMode(e)}).catch(function(t){console.error("Failed to load language "+e+": "+t),n.updateCodeMirrorMode("")})},n.prototype.updateCodeMirrorMode=function(e){var n=this.codeMirrorInstance;n&&n.setOption("mode",e)},n.prototype.updateLanguage=function(e){e?e.match(/^\w+$/)?this.language=e:console.error("Not updating non-matching language: "+e):this.language=""},n}(He.a),_t=function(e){function n(n,t,l,i){var r=e.call(this,t,l,n)||this;return r.elementRef=n,r.locals=t,r.cdRef=l,r.I18n=i,r.changed=!1,r.showClose=!0,r.closeOnEscape=!0,r.closeOnOutsideClick=!0,r.page="",r.includeParent=!1,r.text={title:r.I18n.t("js.editor.macro.child_pages.button"),hint:r.I18n.t("js.editor.macro.child_pages.hint"),page:r.I18n.t("js.editor.macro.child_pages.page"),include_parent:r.I18n.t("js.editor.macro.child_pages.include_parent"),button_save:r.I18n.t("js.button_save"),button_cancel:r.I18n.t("js.button_cancel"),close_popup:r.I18n.t("js.close_popup_title")},r.selectedPage=r.page=r.locals.page,r.selectedIncludeParent=r.includeParent=r.locals.includeParent,r}return a.d(n,e),n.prototype.applyAndClose=function(e){this.changed=!0,this.page=this.selectedPage,this.includeParent=this.selectedIncludeParent,this.closeMe(e)},n.prototype.ngAfterViewInit=function(){this.selectedPageInput.nativeElement.focus()},n.prototype.updateIncludeParent=function(e){this.selectedIncludeParent=e},n}(He.a),xt=function(){function e(e,n){this.opModalService=e,this.injector=n}return e.prototype.configureWorkPackageButton=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(Rt,t.injector,{type:e,classes:n}).closingEvent.subscribe(function(e){e.changed&&l({type:e.type,classes:e.classes})})})},e.prototype.configureWikiPageInclude=function(e){var n=this;return new Promise(function(t,l){var i=e||"";n.opModalService.show(Pt,n.injector,{page:i}).closingEvent.subscribe(function(e){e.changed&&t(e.page)})})},e.prototype.editCodeBlock=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(St,t.injector,{content:e,languageClass:n}).closingEvent.subscribe(function(e){e.changed&&l({languageClass:e.languageClass,content:e.content})})})},e.prototype.configureChildPages=function(e,n){var t=this;return new Promise(function(l,i){t.opModalService.show(_t,t.injector,{page:e,includeParent:n}).closingEvent.subscribe(function(e){e.changed&&l({page:e.page,includeParent:e.includeParent})})})},e}(),Tt=t("E+lO"),Ot=t("26FU"),Et=function(){function e(){this.navigationEvents$=new Ot.a("")}return e.prototype.onActivate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.navigationEvents$.pipe(Object(Yn.a)(function(n){return-1!==e.indexOf(n)}),Object(y.a)(1))},e.prototype.recreateToggler=function(){var e=this;jQuery("#main-menu .toggler").remove();var n=jQuery('<a class="toggler" href="#"><i class="icon6 icon-toggler icon-arrow-right3" aria-hidden="true"></i><span class="hidden-for-sighted"></span></a>').on("click",function(){var n=jQuery(this);if(n.hasClass("toggler")){jQuery("#sidebar").toggleClass("-hidden",!0),jQuery(".menu_root li").removeClass("open"),jQuery(".menu_root").removeClass("open").addClass("closed");var t=n.closest("li");t.addClass("open").find("li > a:first, .tree-menu--title:first").first().focus(),console.log("Activating "+t.data("name")),e.navigationEvents$.next(t.data("name"))}return!1});return n.attr("title",I18n.t("js.project_menu_details")),n},e.prototype.wrapMainItem=function(){var e=jQuery("#main-menu li > a").not("ul ul a");e.wrap(function(n){var t=e[n].id,l=jQuery('<div class="main-item-wrapper"/>');return t&&l.attr("id",t+"-wrapper"),l})},e.prototype.register=function(){this.wrapMainItem();var e=jQuery(".main-item-wrapper a.selected");e.length>0&&e[0].scrollIntoView();var n=this.recreateToggler(),t=jQuery("#main-menu .menu_root > li.open").data("name"),l=jQuery("#main-menu .menu_root.open > li").data("name");function i(e){e.preventDefault();var n=jQuery(this);jQuery(n).parents("li").first().removeClass("open"),jQuery(".menu_root").removeClass("closed").addClass("open"),n.parents("li").first().find(".toggler").first().focus(),jQuery("#sidebar").toggleClass("-hidden",!1)}(t||l)&&this.navigationEvents$.next(t||l),jQuery("#main-menu li:has(ul) .main-item-wrapper > a").not("ul ul a").unbind("click").wrapInner('<span class="ellipsis"/>').after(n),jQuery("#main-menu ul.main-menu--children").each(function(e,n){var t=jQuery(n).parents("li").find(".main-item-wrapper .menu-item--title").contents()[0].textContent,l=jQuery(n).parents("li").find(".main-item-wrapper > a").attr("href"),r=jQuery('<div class="main-menu--children-menu-header"></div>'),o=jQuery('<a class="main-menu--arrow-left-to-project" href="#"><i class="icon-arrow-left1" aria-hidden="true"></i></a>'),u=jQuery('<a href="'+l+'" class="main-menu--parent-node ellipsis">'+t+"</a>");o.attr("title",I18n.t("js.label_up")),o.on("click",i),r.append(o),r.append(u),jQuery(n).before(r)}),jQuery(".menu_root").hasClass("closed")&&jQuery("#sidebar").toggleClass("-hidden",!0)},e}(),Dt=function(e){function n(n,t,l,i,r,o){var u=e.call(this,t,l,n)||this;return u.elementRef=n,u.locals=t,u.cdRef=l,u.i18n=i,u.wpCacheService=r,u.opModalService=o,u.text={created_by:u.i18n.t("js.label_created_by")},u}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this);var t=this.locals.workPackageLink,l=L.idFromLink(t);this.wpCacheService.require(l).then(function(e){n.workPackage=e,n.cdRef.detectChanges()})},n}(He.a),Ft=function(){function e(e,n){this.opModalService=e,this.injector=n}return e.prototype.setupListener=function(){var e=this;jQuery(document.body).on("mouseenter",".preview-trigger",function(n){n.preventDefault(),n.stopPropagation();var t=jQuery(n.target),l=t.attr("href");l&&(e.previewModal=e.opModalService.show(Dt,e.injector,{workPackageLink:l}),e.modalElement=e.previewModal.elementRef.nativeElement,jQuery(e.modalElement).position({my:"left top",at:"left bottom",of:t,collision:"flipfit"}),jQuery(e.modalElement).addClass("-no-width -no-height"))}),jQuery(document.body).on("mouseleave",".preview-trigger",function(n){n.preventDefault(),n.stopPropagation(),e.isMouseOverPreview(n)?jQuery(e.modalElement).on("mouseleave",function(){e.opModalService.close()}):e.opModalService.close()})},e.prototype.isMouseOverPreview=function(e){var n=jQuery(this.modalElement.children[0]);if(n&&n.offset()){var t=e.pageX>=Math.floor(n.offset().left)&&e.pageX<n.offset().left+n.width(),l=e.pageY>=Math.floor(n.offset().top)&&e.pageY<n.offset().top+n.height();return t&&l}return!1},e}(),Nt=new d,At=function(){function e(){}return e.prototype.ngDoBootstrap=function(e){Tt.DynamicBootstrapper.bootstrapOptionalDocument(e,document),e._injector.get(It).call("openProjectAngularBootstrap").forEach(function(n){Tt.DynamicBootstrapper.bootstrapOptionalDocument(e,document,n)})},e}();function Vt(e){return function(){var n=e.get(bt),t=e.get(kt),l=e.get(jt.ModalWrapperAugmentService),i=e.get(Ft);e.get(xt);e.get(Et).register(),l.setupListener(),i.setupListener(),n.setupListener(),t.setupListener()}}var Mt=t("VDQ+"),qt=t("MJJn"),Lt=t("mPam"),$t=t("Ip0R"),Ht=t("gIcY"),Bt=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.createVersion=function(e){return this.halResourceService.post(this.pathHelper.api.v3.versions.path,e).toPromise()},e.prototype.emptyCreateForm=function(e){return this.halResourceService.post(this.pathHelper.api.v3.versions.form.toString(),e).toPromise()},e.prototype.one=function(e){return this.halResourceService.get(this.pathHelper.api.v3.versions.id(e).toString()).toPromise()},e.prototype.list=function(){return this.halResourceService.get(this.pathHelper.api.v3.versions.toString()).toPromise()},e.prototype.listForProject=function(e){return this.halResourceService.get(this.pathHelper.api.v3.projects.id(e).versions.toString()).toPromise()},e.prototype.canCreateVersionInProject=function(e){return this.halResourceService.get(this.pathHelper.api.v3.versions.availableProjects.toString(),{filters:oe("id","=",[e]).toJson()}).toPromise().then(function(e){return 1===e.elements.length})},e.prototype.listProjectsAvailableForVersions=function(){return this.halResourceService.get(this.pathHelper.api.v3.versions.availableProjects.toString()).toPromise()},e.prototype.patch=function(e,n){return this.halResourceService.patch(this.pathHelper.api.v3.versions.id(e.id).toString(),n).toPromise()},e}(),zt=function(){function e(e,n,t,i){this.I18n=e,this.cdRef=n,this.currentProject=t,this.pathHelper=i,this.required=!1,this.disabled=!1,this.finishedLoading=!1,this.id="",this.classes="",this.onChange=new l.EventEmitter,this.onKeydown=new l.EventEmitter,this.onOpen=new l.EventEmitter,this.onClose=new l.EventEmitter,this.onAfterViewInit=new l.EventEmitter,this.text={add_new_action:this.I18n.t("js.label_create")},this.createAllowed=!1,this._openDirectly=!1}return e.prototype.ngAfterViewInit=function(){this.onAfterViewInit.emit(this)},e.prototype.openSelect=function(){this.ngSelectComponent&&(this.ngSelectComponent.open(),this.openDirectly=!1)},e.prototype.closeSelect=function(){this.ngSelectComponent&&this.ngSelectComponent.close()},e.prototype.changeModel=function(e){this.onChange.emit(e)},e.prototype.opened=function(){var e=this;setTimeout(function(){e.ngSelectComponent.dropdownPanel._updatePosition()},25),this.onOpen.emit()},e.prototype.closed=function(){this.openDirectly=!1,this.onClose.emit()},e.prototype.keyPressed=function(e){this.onKeydown.emit(e)},Object.defineProperty(e.prototype,"openDirectly",{get:function(){return this._openDirectly},set:function(e){this._openDirectly=e,e&&this.openSelect()},enumerable:!0,configurable:!0}),e.prototype.focusInputField=function(){this.ngSelectComponent&&this.ngSelectComponent.focus()},e}();Tt.DynamicBootstrapper.register({selector:"add-attribute-autocompleter",cls:zt});var Wt=function(e){function n(n,t,i,r,o,u){var a=e.call(this,n,i,t,r)||this;return a.I18n=n,a.currentProject=t,a.cdRef=i,a.pathHelper=r,a.versionDm=o,a.halNotification=u,a.openDirectly=!1,a.onCreate=new l.EventEmitter,a}return a.d(n,e),n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.canCreateNewActionElements().then(function(e){e&&(n.createAllowed=function(e){return n.createNewVersion(e)},n.cdRef.detectChanges())})},n.prototype.canCreateNewActionElements=function(){return this.versionDm.canCreateVersionInProject(this.currentProject.id).catch(function(){return!1})},n.prototype.createNewVersion=function(e){var n=this;this.versionDm.createVersion(this.getVersionPayload(e)).then(function(e){n.onCreate.emit(e)}).catch(function(e){n.closeSelect(),n.halNotification.handleRawError(e)})},n.prototype.getVersionPayload=function(e){var n={};return n.name=e,n._links={definingProject:{href:this.pathHelper.api.v3.projects.id(this.currentProject.id).path}},n},n}(zt);Tt.DynamicBootstrapper.register({selector:"version-autocompleter",cls:Wt});var Qt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ut(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"b",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](1,null,[": "," "]))],null,function(e,n){e(n,0,0,n.component.text.add_new_action),e(n,1,0,n.context.searchTerm)})}function Gt(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,24,"ng-select",[["bindLabel","name"],["class","ng-select"],["role","listbox"]],[[8,"id",0],[1,"required",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"open"],[null,"close"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,7).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.model=t)&&i);"change"===n&&(i=!1!==r.changeModel(t)&&i);"open"===n&&(i=!1!==r.opened()&&i);"close"===n&&(i=!1!==r.closed()&&i);"keydown"===n&&(i=!1!==r.keyPressed(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](5,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵdid"](7,4964352,[[1,4],["ngSelectComponent",4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],appendTo:[1,"appendTo"],virtualScroll:[2,"virtualScroll"],clearOnBackspace:[3,"clearOnBackspace"],addTag:[4,"addTag"],clearable:[5,"clearable"],items:[6,"items"]},{changeEvent:"change",openEvent:"open",closeEvent:"close"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](21,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](23,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](0,[[11,2]],null,1,null,Ut)),l["ɵdid"](25,16384,null,0,Lt.j,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,4,0,t.classes),e(n,5,0,t.required);e(n,7,0,"name",t.appendTo,!0,!1,t.createAllowed,!t.required,t.availableValues),e(n,21,0,t.disabled,t.model)},function(e,n){e(n,1,1,[n.component.id,l["ɵnov"](n,5).required?"":null,!l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).typeahead,l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).addTag,l["ɵnov"](n,7).searchable,l["ɵnov"](n,7).clearable,l["ɵnov"](n,7).isOpen,l["ɵnov"](n,7).disabled,l["ɵnov"](n,7).filtered,l["ɵnov"](n,23).ngClassUntouched,l["ɵnov"](n,23).ngClassTouched,l["ɵnov"](n,23).ngClassPristine,l["ɵnov"](n,23).ngClassDirty,l["ɵnov"](n,23).ngClassValid,l["ɵnov"](n,23).ngClassInvalid,l["ɵnov"](n,23).ngClassPending])})}var Kt=l["ɵccf"]("version-autocompleter",Wt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"version-autocompleter",[],null,null,null,Gt,Qt)),l["ɵdid"](1,4243456,null,0,Wt,[A.a,Qn,l.ChangeDetectorRef,ge,Bt,Mn],null,null)],null,null)},{availableValues:"availableValues",appendTo:"appendTo",model:"model",required:"required",disabled:"disabled",finishedLoading:"finishedLoading",id:"id",classes:"classes",openDirectly:"openDirectly"},{onChange:"onChange",onKeydown:"onKeydown",onOpen:"onOpen",onClose:"onClose",onAfterViewInit:"onAfterViewInit",onCreate:"onCreate"},[]),Yt=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Zt(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"b",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](1,null,[": "," "]))],null,function(e,n){e(n,0,0,n.component.text.add_new_action),e(n,1,0,n.context.searchTerm)})}function Jt(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,24,"ng-select",[["bindLabel","name"],["class","ng-select"],["role","listbox"]],[[8,"id",0],[1,"required",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"open"],[null,"close"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,7).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.model=t)&&i);"change"===n&&(i=!1!==r.changeModel(t)&&i);"open"===n&&(i=!1!==r.opened()&&i);"close"===n&&(i=!1!==r.closed()&&i);"keydown"===n&&(i=!1!==r.keyPressed(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](5,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵdid"](7,4964352,[[1,4],["ngSelectComponent",4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],appendTo:[1,"appendTo"],virtualScroll:[2,"virtualScroll"],clearOnBackspace:[3,"clearOnBackspace"],addTag:[4,"addTag"],clearable:[5,"clearable"],items:[6,"items"]},{changeEvent:"change",openEvent:"open",closeEvent:"close"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](21,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](23,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](0,[[11,2]],null,1,null,Zt)),l["ɵdid"](25,16384,null,0,Lt.j,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,4,0,t.classes),e(n,5,0,t.required);e(n,7,0,"name",t.appendTo,!0,!1,t.createAllowed,!t.required,t.availableValues),e(n,21,0,t.disabled,t.model)},function(e,n){e(n,1,1,[n.component.id,l["ɵnov"](n,5).required?"":null,!l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).typeahead,l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).addTag,l["ɵnov"](n,7).searchable,l["ɵnov"](n,7).clearable,l["ɵnov"](n,7).isOpen,l["ɵnov"](n,7).disabled,l["ɵnov"](n,7).filtered,l["ɵnov"](n,23).ngClassUntouched,l["ɵnov"](n,23).ngClassTouched,l["ɵnov"](n,23).ngClassPristine,l["ɵnov"](n,23).ngClassDirty,l["ɵnov"](n,23).ngClassValid,l["ɵnov"](n,23).ngClassInvalid,l["ɵnov"](n,23).ngClassPending])})}var Xt=l["ɵccf"]("create-autocompleter",zt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"create-autocompleter",[],null,null,null,Jt,Yt)),l["ɵdid"](1,4243456,null,0,zt,[A.a,l.ChangeDetectorRef,Qn,ge],null,null)],null,null)},{availableValues:"availableValues",appendTo:"appendTo",model:"model",required:"required",disabled:"disabled",finishedLoading:"finishedLoading",id:"id",classes:"classes"},{onChange:"onChange",onKeydown:"onKeydown",onOpen:"onOpen",onClose:"onClose",onAfterViewInit:"onAfterViewInit"},[]),el=t("f0Wu"),nl=function(){function e(e,n){this.ConfigurationService=e,this.I18n=n,this.setupLocale()}return e.prototype.setupLocale=function(){el.locale(I18n.locale)},e.prototype.parseDatetime=function(e,n){var t=el.utc(e,n);return this.ConfigurationService.isTimezoneSet()&&(t.local(),t.tz(this.ConfigurationService.timezone())),t},e.prototype.parseDate=function(e,n){return el(e,n)},e.prototype.parseLocalDateTime=function(e,n){var t;return n=n||this.getTimeFormat(),(t=this.ConfigurationService.isTimezoneSet()?el.tz(e,n,this.ConfigurationService.timezone()):el(e,n)).utc(),t},e.prototype.parseISODatetime=function(e){return this.parseDatetime(e,"YYYY-MM-DDTHH:mm:ssZ")},e.prototype.parseISODate=function(e){return this.parseDate(e,"YYYY-MM-DD")},e.prototype.formattedDate=function(e){return this.parseDate(e).format(this.getDateFormat())},e.prototype.inThePast=function(e){return this.daysFromToday(e)<=-1},e.prototype.daysFromToday=function(e){var n=this.parseDate(e),t=el().startOf("day");return n.diff(t,"days")},e.prototype.formattedTime=function(e){return this.parseDatetime(e).format(this.getTimeFormat())},e.prototype.formattedDatetime=function(e){var n=this.formattedDatetimeComponents(e);return n[0]+" "+n[1]},e.prototype.formattedDatetimeComponents=function(e){var n=this.parseDatetime(e);return[n.format(this.getDateFormat()),n.format(this.getTimeFormat())]},e.prototype.toHours=function(e){return Number(el.duration(e).asHours().toFixed(2))},e.prototype.formattedDuration=function(e){return this.I18n.t("js.units.hour",{count:this.toHours(e)})},e.prototype.formattedISODate=function(e){return this.parseDate(e).format("YYYY-MM-DD")},e.prototype.formattedISODateTime=function(e){return e.format()},e.prototype.isValidISODate=function(e){return this.isValid(e,"YYYY-MM-DD")},e.prototype.isValidISODateTime=function(e){return this.isValid(e,"YYYY-MM-DDTHH:mm:ssZ")},e.prototype.isValid=function(e,n){var t=n||this.getDateFormat();return el(e,[t],!0).isValid()},e.prototype.getDateFormat=function(){return this.ConfigurationService.dateFormatPresent()?this.ConfigurationService.dateFormat():"L"},e.prototype.getTimeFormat=function(){return this.ConfigurationService.timeFormatPresent()?this.ConfigurationService.timeFormat():"LT"},e}(),tl=function(){function e(e){this.timezoneService=e}return e.prototype.ngOnInit=function(){var e=this.timezoneService.formattedDatetimeComponents(this.dateTimeValue);this.date=e[0],this.time=e[1]},e}(),ll=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function il(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[],[[8,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](2,"",t.date," ",t.time,"")),e(n,1,0,t.date),e(n,4,0,t.time)})}var rl=l["ɵccf"]("op-date-time",tl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-date-time",[],null,null,null,il,ll)),l["ɵdid"](1,114688,null,0,tl,[nl],null,null)],function(e,n){e(n,1,0)},null)},{dateTimeValue:"dateTimeValue"},{},[]),ol=function(){function e(e,n,t,l){this.NotificationsService=e,this.elementRef=n,this.I18n=t,this.ConfigurationService=l}return e.prototype.ngOnInit=function(){var e=this,n=this.elementRef.nativeElement;this.clickTarget=n.getAttribute("click-target"),this.clipboardTarget=n.getAttribute("clipboard-target"),jQuery(this.clickTarget).on("click",function(n){return e.onClick(n)}),n.classList.add("copy-to-clipboard"),this.target=jQuery(this.clipboardTarget?this.clipboardTarget:n)},e.prototype.addNotification=function(e,n){var t=this,l=this.NotificationsService[e](n);setTimeout(function(){return t.NotificationsService.remove(l)},5e3)},e.prototype.onClick=function(e){var n=document.queryCommandSupported&&document.queryCommandSupported("copy");if(e.preventDefault(),this.target.select().focus(),n)try{if(document.execCommand("copy"))return void this.addNotification("addSuccess",this.I18n.t("js.clipboard.copied_successful"))}catch(t){console.log("Your browser seems to support the clipboard API, but copying failed: "+t)}this.addNotification("addError",this.I18n.t("js.clipboard.browser_error"))},e}();Tt.DynamicBootstrapper.register({selector:"copy-to-clipboard",cls:ol});var ul=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function al(e){return l["ɵvid"](0,[],null,null)}var sl=l["ɵccf"]("copy-to-clipboard",ol,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"copy-to-clipboard",[],null,null,null,al,ul)),l["ɵdid"](1,114688,null,0,ol,[Vn,l.ElementRef,A.a,be],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cl=function(){this.iconTitle=""},dl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function pl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.iconTitle)})}function hl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"i",[["aria-hidden","true"]],[[8,"title",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,pl)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.iconClasses),e(n,4,0,t.iconTitle)},function(e,n){e(n,0,0,n.component.iconTitle)})}l["ɵccf"]("op-icon",cl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],null,null)],null,null)},{iconClasses:"icon-classes",iconTitle:"icon-title"},{},[]);var fl=function(){function e(e){this.I18n=e,this.onError=new l.EventEmitter,this.onSuccess=new l.EventEmitter,this.value=0,this.error=!1,this.completed=!1}return e.prototype.ngOnInit=function(){var e=this;this.file=this.upload[0],this.upload[1].pipe(Object(Gn.b)(this)).subscribe(function(n){switch(n.type){case V.g.Sent:return e.value=5,Object(bn.a)('Uploading file "'+e.file.name+'" of size '+e.file.size+".");case V.g.UploadProgress:return e.updateProgress(n);case V.g.Response:return Object(bn.a)("File "+e.fileName+" was fully uploaded."),e.value=100,e.completed=!0,e.onSuccess.emit();default:return}},function(n){return e.handleError(n)})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"fileName",{get:function(){return this.file&&this.file.name},enumerable:!0,configurable:!0}),e.prototype.updateProgress=function(e){e.total?this.value=Math.round(e.loaded/e.total*100):this.value=10},e.prototype.handleError=function(e){this.error=!0,this.onError.emit(e)},e}(),gl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ml(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-close")},null)}function vl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-checkmark")},null)}function bl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"span",[["class","upload-completed"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ml)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vl)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.error),e(n,4,0,t.completed)},null)}function yl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[["class","filename"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"progress",[["max","100"]],[[8,"hidden",0],[8,"value",0]],null,null,null,null)),(e()(),l["ɵted"](3,null,["","%"])),(e()(),l["ɵand"](16777216,null,null,1,null,bl)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.completed||t.error)},function(e,n){var t=n.component;e(n,1,0,t.fileName),e(n,2,0,t.completed,t.value),e(n,3,0,t.value)})}l["ɵccf"]("notifications-upload-progress",fl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"notifications-upload-progress",[],null,null,null,yl,gl)),l["ɵdid"](1,245760,null,0,fl,[A.a],null,null)],function(e,n){e(n,1,0)},null)},{upload:"upload"},{onError:"onError",onSuccess:"onSuccess"},[]);var wl=t("E5Dd"),Cl=function(){function e(){this.stopEventPropagation=!0,this.onClick=new l.EventEmitter}return e.prototype.handleClick=function(e){"click"!==e.type&&e.which!==wl.a.ENTER&&e.which!==wl.a.SPACE||(this.stopEventPropagation&&(e.preventDefault(),e.stopPropagation()),this.onClick.emit(e))},e}(),kl=function(){function e(){this.execute=new l.EventEmitter}return e.prototype.handleClick=function(e){return this.isDisabled||this.execute.emit(e),!1},e}(),Il=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function jl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"a",[["href",""],["role","link"]],[[1,"disabled",0],[1,"title",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.handleClick(t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](3,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](4,0,null,null,3,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](6,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵncd"](null,0)],function(e,n){var t=n.component;e(n,2,0,t.linkClass),e(n,6,0,t.spanClass)},function(e,n){var t=n.component;e(n,0,0,t.isDisabled||void 0,t.linkTitle,t.linkAriaLabel)})}l["ɵccf"]("accessible-by-keyboard",kl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"accessible-by-keyboard",[],null,null,null,jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],null,null)],null,null)},{isDisabled:"isDisabled",linkClass:"linkClass",linkTitle:"linkTitle",spanClass:"spanClass",linkAriaLabel:"linkAriaLabel"},{execute:"execute"},["*"]);var Rl=function(){function e(e,n){this.I18n=e,this.notificationsService=n,this.text={close_popup:this.I18n.t("js.close_popup_title")},this.uploadCount=0,this.show=!1}return e.prototype.ngOnInit=function(){this.type=this.notification.type},Object.defineProperty(e.prototype,"data",{get:function(){return this.notification.data},enumerable:!0,configurable:!0}),e.prototype.canBeHidden=function(){return this.data&&this.data.length>5},e.prototype.removable=function(){return"upload"!==this.notification.type},e.prototype.remove=function(){this.notificationsService.remove(this.notification)},e.prototype.executeTarget=function(){this.notification.link&&(this.notification.link.target(),this.remove())},e.prototype.onUploadError=function(e){this.remove()},e.prototype.onUploadSuccess=function(){this.uploadCount+=1},Object.defineProperty(e.prototype,"uploadText",{get:function(){return this.I18n.t("js.label_upload_counter",{done:this.uploadCount,count:this.data.length})},enumerable:!0,configurable:!0}),e}(),Pl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Sl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"a",[["class","notification-box--target-link"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.executeTarget(t)&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.notification.link.text)})}function _l(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"a",[],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!=(i.show=!0)&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-arrow-right2"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](4,0,null,null,2,"a",[],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!=(i.show=!1)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-arrow-down1"]],null,null,null,hl,dl)),l["ɵdid"](6,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](7,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-arrow-right2");e(n,6,0,"icon-arrow-down1")},function(e,n){var t=n.component;e(n,1,0,t.show),e(n,4,0,!t.show),e(n,7,0,t.uploadText)})}function xl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"notifications-upload-progress",[],null,[[null,"onSuccess"],[null,"onError"]],function(e,n,t){var l=!0,i=e.component;"onSuccess"===n&&(l=!1!==i.onUploadSuccess()&&l);"onError"===n&&(l=!1!==i.onUploadError(t)&&l);return l},yl,gl)),l["ɵdid"](1,245760,null,0,fl,[A.a],{upload:[0,"upload"]},{onError:"onError",onSuccess:"onSuccess"})],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Tl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ul",[["class","notification-box--uploads"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,xl)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.data)},null)}function Ol(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Tl)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.data&&t.data.length>0)},null)}function El(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,_l)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ol)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.canBeHidden()),e(n,4,0,t.show||!t.canBeHidden())},null)}function Dl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function Fl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"li",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.context.$implicit)})}function Nl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"ul",[["class","notification-box--errors"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Fl)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.data)},null)}function Al(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"accessible-by-keyboard",[["linkClass","notification-box--close icon-context icon-close"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.remove()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"})],function(e,n){e(n,1,0,"notification-box--close icon-context icon-close",n.component.text.close_popup)},null)}function Vl(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,16,"div",[["tabindex","0"]],[[8,"className",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,13,"div",[["aria-atomic","true"],["class","notification-box--content"],["role","alert"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Sl)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](7,0,null,null,7,"div",[],null,null,null,null,null)),l["ɵdid"](8,16384,null,0,$t.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,El)),l["ɵdid"](10,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Dl)),l["ɵdid"](12,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Nl)),l["ɵdid"](14,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Al)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.notification.link),e(n,8,0,t.type);e(n,10,0,"upload");e(n,12,0,"success");e(n,14,0,"error"),e(n,16,0,t.removable())},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"notification-box -",t.type,"")),e(n,3,0,t.notification.message);e(n,4,0," ")})}l["ɵccf"]("notification",Rl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"notification",[],null,null,null,Vl,Pl)),l["ɵdid"](1,114688,null,0,Rl,[A.a,Vn],null,null)],function(e,n){e(n,1,0)},null)},{notification:"notification"},{},[]);var Ml=function(){function e(e,n){this.notificationsService=e,this.cdRef=n,this.stack=[]}return e.prototype.ngOnInit=function(){var e=this;this.notificationsService.current.values$("Subscribing to changes in the notification stack").pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.stack=n,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e}();Tt.DynamicBootstrapper.register({selector:"notifications-container",cls:Ml});var ql=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ll(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"notification",[],null,null,null,Vl,Pl)),l["ɵdid"](1,114688,null,0,Rl,[A.a,Vn],{notification:[0,"notification"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function $l(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","notification-box--wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","notification-box--casing"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ll)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,3,0,n.component.stack)},null)}var Hl=l["ɵccf"]("notifications-container",Ml,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"notifications-container",[],null,null,null,$l,ql)),l["ɵdid"](1,245760,null,0,Ml,[Vn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Bl=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.thead=this.$element.parent("colgroup").siblings("thead"),this.thead.on("mouseenter","th",function(n){e.$element.index()===jQuery(n.currentTarget).index()&&e.$element.addClass("hover")}),this.thead.on("mouseleave","th",function(n){e.$element.index()===jQuery(n.currentTarget).index()&&e.$element.removeClass("hover")})},e.prototype.ngOnDestroy=function(){this.thead.off("mouseenter mouseleave")},e}(),zl={selector:"col[highlight-col]",cls:Bl},Wl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ql(e){return l["ɵvid"](0,[],null,null)}var Ul,Gl=l["ɵccf"]("col[highlight-col]",Bl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](1,245760,null,0,Bl,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);!function(e){e.backgroundClass=function(e,n){return"__hl_background_"+e+"_"+n},e.inlineClass=function(e,n){return"__hl_inline_"+e+"_"+n},e.colorClass=function(e,n){return e?"__hl_inline_color_"+n+"_text":"__hl_inline_color_"+n+"_dot"},e.overdueDate=function(e){return 0===e?"__hl_date_due_today":e<=-1?"__hl_date_overdue":"__hl_date_not_overdue"},e.isBright=function(e,n,t){var l="--hl-"+n+"-"+t+"-dark";return""!==e.getPropertyValue(l)}}(Ul||(Ul={}));var Kl=function(){function e(e,n){this.elementRef=e,this.I18n=n,this.highlightTextInline=!1}return e.prototype.ngOnInit=function(){this.setColorOptions(),this.updateInputField=document.getElementsByName(this.elementRef.nativeElement.dataset.updateInput)[0],this.highlightTextInline=JSON.parse(this.elementRef.nativeElement.dataset.highlightTextInline)},e.prototype.onModelChange=function(e){e&&this.updateInputField&&(this.updateInputField.value=e.value)},e.prototype.setColorOptions=function(){this.options=JSON.parse(this.elementRef.nativeElement.dataset.colors),this.options.unshift({name:this.I18n.t("js.label_no_color"),value:""}),this.selectedOption=this.options.find(function(e){return!0===e.selected}),this.selectedOption?this.selectedOption=this.selectedOption.value:(this.selectedColorId=this.elementRef.nativeElement.dataset.selectedColor,this.selectedOption=this.selectedColorId?this.selectedColorId:"")},e.prototype.highlightColor=function(e){if(""!==e.value)return(this.highlightTextInline?"__hl_inline_type_ ":"__hl_inline_ ")+Ul.colorClass(this.highlightTextInline,e.value)},e}();Tt.DynamicBootstrapper.register({selector:"colors-autocompleter",cls:Kl});var Yl=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Zl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵted"](3,null,["",""]))],function(e,n){e(n,2,0,n.component.highlightColor(n.context.item))},function(e,n){e(n,3,0,n.context.item.name)})}function Jl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵted"](3,null,["",""]))],function(e,n){e(n,2,0,n.component.highlightColor(n.context.item))},function(e,n){e(n,3,0,n.context.item.name)})}function Xl(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,22,"ng-select",[["appendTo","body"],["bindLabel","name"],["bindValue","value"],["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.selectedOption=t)&&i);"change"===n&&(i=!1!==r.onModelChange(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](2,4964352,null,12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],appendTo:[2,"appendTo"],virtualScroll:[3,"virtualScroll"],clearable:[4,"clearable"],items:[5,"items"]},{changeEvent:"change"}),l["ɵqud"](335544320,1,{optionTemplate:0}),l["ɵqud"](335544320,2,{optgroupTemplate:0}),l["ɵqud"](335544320,3,{labelTemplate:0}),l["ɵqud"](335544320,4,{multiLabelTemplate:0}),l["ɵqud"](603979776,5,{headerTemplate:0}),l["ɵqud"](603979776,6,{footerTemplate:0}),l["ɵqud"](335544320,7,{notFoundTemplate:0}),l["ɵqud"](335544320,8,{typeToSearchTemplate:0}),l["ɵqud"](335544320,9,{loadingTextTemplate:0}),l["ɵqud"](335544320,10,{tagTemplate:0}),l["ɵqud"](335544320,11,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,12,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](16,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](18,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](0,[[3,2]],null,1,null,Zl)),l["ɵdid"](20,16384,null,0,Lt.i,[l.TemplateRef],null,null),(e()(),l["ɵand"](0,[[1,2]],null,1,null,Jl)),l["ɵdid"](22,16384,null,0,Lt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,2,0,"name","value","body",!0,!1,t.options),e(n,16,0,t.selectedOption)},function(e,n){e(n,0,1,[!l["ɵnov"](n,2).multiple,l["ɵnov"](n,2).typeahead,l["ɵnov"](n,2).multiple,l["ɵnov"](n,2).addTag,l["ɵnov"](n,2).searchable,l["ɵnov"](n,2).clearable,l["ɵnov"](n,2).isOpen,l["ɵnov"](n,2).disabled,l["ɵnov"](n,2).filtered,l["ɵnov"](n,18).ngClassUntouched,l["ɵnov"](n,18).ngClassTouched,l["ɵnov"](n,18).ngClassPristine,l["ɵnov"](n,18).ngClassDirty,l["ɵnov"](n,18).ngClassValid,l["ɵnov"](n,18).ngClassInvalid,l["ɵnov"](n,18).ngClassPending])})}var ei=l["ɵccf"]("colors-autocompleter",Kl,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"colors-autocompleter",[],null,null,null,Xl,Yl)),l["ɵdid"](1,114688,null,0,Kl,[l.ElementRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ni=function(){function e(e,n,t){this.paginationService=e,this.cdRef=n,this.I18n=t,this.hideForSinglePageResults=!1,this.showPerPage=!0,this.showPageSelections=!0,this.updateResults=new l.EventEmitter,this.text={label_previous:this.I18n.t("js.pagination.pages.previous"),label_next:this.I18n.t("js.pagination.pages.next"),per_page:this.I18n.t("js.label_per_page"),no_other_page:this.I18n.t("js.pagination.no_other_page")},this.currentRange="",this.pageNumbers=[],this.postPageNumbers=[],this.prePageNumbers=[],this.perPageOptions=[]}return e.prototype.ngOnInit=function(){var e=this;this.paginationService.loadPaginationOptions().then(function(n){e.perPageOptions=n.perPageOptions,e.pagination=new ke(1,parseInt(e.totalEntries),n.perPage),e.cdRef.detectChanges()})},e.prototype.update=function(){this.updateCurrentRangeLabel(),this.updatePageNumbers(),this.cdRef.detectChanges()},e.prototype.selectPerPage=function(e){this.pagination.perPage=e,this.paginationService.setPerPage(e),this.showPage(1)},e.prototype.showPage=function(e){this.pagination.page=e,this.updateCurrentRangeLabel(),this.updatePageNumbers(),this.onUpdatedPage(),this.cdRef.detectChanges()},e.prototype.onUpdatedPage=function(){this.updateResults.emit(this.pagination)},Object.defineProperty(e.prototype,"isVisible",{get:function(){return!this.hideForSinglePageResults||this.pagination.total>this.pagination.perPage},enumerable:!0,configurable:!0}),e.prototype.updateCurrentRangeLabel=function(){if(this.pagination.total){var e=this.pagination.total,n=this.pagination.getLowerPageBound(),t=this.pagination.getUpperPageBound(this.pagination.total);this.currentRange="("+n+" - "+t+"/"+e+")"}else this.currentRange="(0 - 0/0)"},e.prototype.updatePageNumbers=function(){if(!this.showPageSelections)return this.pageNumbers=[],void(this.postPageNumbers=[]);var e=this.paginationService.getMaxVisiblePageOptions(),n=this.paginationService.getOptionsTruncationSize(),t=[],l=this.pagination.perPage,i=this.pagination.page;if(l){for(var r=1;r<=Math.ceil(this.pagination.total/l);r++)t.push(r);var o=i-2*n;0<=o&&o<=1?this.postPageNumbers=this.truncatePageNums(t,t.length>=e+2*n,e+n,t.length,0):(this.prePageNumbers=this.truncatePageNums(t,i>=e,0,Math.min(i-Math.ceil(e/2),t.length-e),n),this.postPageNumbers=this.truncatePageNums(t,t.length>=e+2*n,e,t.length,0))}this.pageNumbers=t},e.prototype.showPerPageOptions=function(){return this.showPerPage&&this.perPageOptions.length>0&&this.pagination.total>this.perPageOptions[0]},e.prototype.truncatePageNums=function(e,n,t,l,i){if(n){var r=this.paginationService.getOptionsTruncationSize(),o=e.splice(t,l);return o.length>=2*r&&o.splice(i,o.length-r),o}return[]},e}(),ti=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function li(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","pagination--item"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(e.context.$implicit)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function ii(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,li)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["…"]))],function(e,n){e(n,2,0,n.component.prePageNumbers)},null)}function ri(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function oi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(e.parent.context.$implicit)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,0,0,n.parent.context.$implicit)})}function ui(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-current":0}),(e()(),l["ɵand"](16777216,null,null,1,null,ri)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,oi)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.context.$implicit==t.pagination.page);e(n,2,0,"pagination--item pagination-number",l),e(n,5,0,n.context.$implicit==t.pagination.page),e(n,7,0,n.context.$implicit!=t.pagination.page)},null)}function ai(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["…"]))],null,null)}function si(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ui)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ai)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.pageNumbers),e(n,4,0,t.postPageNumbers.length)},null)}function ci(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(e.context.$implicit)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function di(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ci)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,n.component.postPageNumbers)},null)}function pi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"],["id","pagination-empty-text"],["tabindex","0"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.no_other_page)})}function hi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"li",[["class","pagination--info"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,"icon-info1 icon-context")},function(e,n){e(n,3,0,n.component.infoText)})}function fi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"a",[["href",""],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.selectPerPage(e.parent.context.$implicit)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function gi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function mi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["class","pagination--item"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-current":0}),(e()(),l["ɵand"](16777216,null,null,1,null,fi)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,gi)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.context.$implicit==t.pagination.perPage);e(n,2,0,"pagination--item",l),e(n,5,0,n.context.$implicit!=t.pagination.perPage),e(n,7,0,n.context.$implicit==t.pagination.perPage)},null)}function vi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","pagination--options"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"li",[["class","pagination--label"]],[[8,"textContent",0],[8,"title",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,mi)),l["ɵdid"](4,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.perPageOptions)},function(e,n){var t=n.component;e(n,2,0,t.text.per_page,l["ɵinlineInterpolate"](1,"",t.text.per_page,""))})}function bi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,24,"div",[["class","pagination"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,21,"nav",[["class","pagination--pages"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,20,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,2,"a",[["href",""],["id","pagination--prev-link"],["rel","prev start"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(r.pagination.page-1)&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵted"](-1,null,["<"])),(e()(),l["ɵand"](16777216,null,null,1,null,ii)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,si)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,di)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](13,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,2,"a",[["class","pagination--next-link"],["href",""],["id","pagination--next-link"],["rel","next"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,15).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,15).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(r.pagination.page+1)&&i);return i},null,null)),l["ɵdid"](15,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵted"](-1,null,[">"])),(e()(),l["ɵeld"](17,0,null,null,3,"li",[["class","pagination--range"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,pi)),l["ɵdid"](20,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,hi)),l["ɵdid"](22,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vi)),l["ɵdid"](24,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.prePageNumbers.length>0),e(n,10,0,t.pageNumbers.length>1),e(n,12,0,t.postPageNumbers.length),e(n,20,0,1===t.pageNumbers.length),e(n,22,0,t.infoText),e(n,24,0,t.showPerPageOptions())},function(e,n){var t=n.component;e(n,3,0,1==t.pagination.page||!t.showPageSelections),e(n,4,0,t.text.label_previous),e(n,13,0,!(t.pagination.total&&t.pagination.page<t.pageNumbers[t.pageNumbers.length-1])),e(n,14,0,t.text.label_next),e(n,18,0,t.currentRange)})}function yi(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,bi)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pagination&&t.isVisible&&t.pagination.total)},null)}var wi=l["ɵccf"]("[tablePagination]",ni,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["tablePagination",""]],null,null,null,yi,ti)),l["ɵdid"](1,114688,null,0,ni,[Ce,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults",showPerPage:"showPerPage",showPageSelections:"showPageSelections",infoText:"infoText"},{updateResults:"updateResults"},[]),Ci=new l.InjectionToken("CONTEXT_MENU_LOCALS"),ki=function(){function e(e){this.locals=e,this.items=this.locals.items,this.service=this.locals.service}return e.prototype.handleClick=function(e,n){return!e.disabled&&!e.divider&&(!e.onClick(n)||(this.locals.service.close(),n.preventDefault(),n.stopPropagation(),!1))},e}(),Ii=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ji(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"li",[["class","dropdown-divider"]],null,null,null,null,null))],null,null)}function Ri(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,l["ɵinlineInterpolate"](1,"icon-action-menu ",n.parent.parent.context.$implicit.icon,""))},null)}function Pi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,l["ɵinlineInterpolate"](1,"icon-action-menu-post ",n.parent.parent.context.$implicit.postIcon,""),n.parent.parent.context.$implicit.postIconTitle||"")},null)}function Si(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"a",[["tabindex","0"]],[[1,"href",4],[1,"aria-disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.handleClick(e.parent.context.$implicit,t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{inactive:0}),l["ɵdid"](5,16384,null,0,Cl,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"}),(e()(),l["ɵand"](16777216,null,null,1,null,Ri)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Pi)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=l["ɵinlineInterpolate"](1,"menu-item ",n.parent.context.$implicit.class,""),i=e(n,4,0,n.parent.context.$implicit.disabled);e(n,3,0,t,i);e(n,5,0,!1),e(n,7,0,n.parent.context.$implicit.icon),e(n,10,0,n.parent.context.$implicit.postIcon)},function(e,n){e(n,1,0,n.parent.context.$implicit.href||"",n.parent.context.$implicit.disabled,n.parent.context.$implicit.ariaLabel||n.parent.context.$implicit.linkText),e(n,8,0,n.parent.context.$implicit.linkText)})}function _i(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ji)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Si)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,n.context.$implicit.divider&&!n.context.$implicit.hidden),e(n,4,0,!n.context.$implicit.divider&&!n.context.$implicit.hidden)},null)}function xi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","dropdown-relative dropdown -overflow-in-view"],["ng-class","{'dropdown-anchor-right': locals.showAnchorRight}"]],[[1,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"ul",[["class","dropdown-menu "],["role","menu"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"-empty":0}),(e()(),l["ɵand"](16777216,null,null,1,null,_i)),l["ɵdid"](6,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=e(n,4,0,0===t.items.length);e(n,3,0,"dropdown-menu ",l),e(n,6,0,t.items)},function(e,n){e(n,0,0,n.component.locals.contextMenuId)})}var Ti=l["ɵccf"]("ng-component",ki,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,xi,Ii)),l["ɵdid"](1,49152,null,0,ki,[Ci],null,null)],null,null)},{},{},[]),Oi=function(){function e(e){this.I18n=e,this.isActive=!1,this.text={activate:this.I18n.t("js.label_activate"),deactivate:this.I18n.t("js.label_deactivate"),label:this.labelKey?this.I18n.t(this.labelKey):"",buttonText:this.textKey?this.I18n.t(this.textKey):""}}return Object.defineProperty(e.prototype,"label",{get:function(){return this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonText",{get:function(){return this.text.buttonText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelKey",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textKey",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activationPrefix",{get:function(){return this.isActive?"":this.text.activate+" "},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deactivationPrefix",{get:function(){return this.isActive?this.text.deactivate+" ":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this.activationPrefix||this.deactivationPrefix},enumerable:!0,configurable:!0}),e.prototype.isToggle=function(){return!1},e}(),Ei=t("k7+O"),Di=function(e){function n(n,t){var l=e.call(this,n)||this;l.I18n=n,l.cdRef=t,l.buttonId="work-packages-zen-mode-toggle-button",l.buttonClass="toolbar-icon",l.iconClass="icon-zen-mode",l.activateLabel=n.t("js.zen_mode.button_activate"),l.deactivateLabel=n.t("js.zen_mode.button_deactivate");var i=l;return Ei.enabled&&Ei.onchange(function(){Ei.isFullscreen||i.deactivateZenMode()}),l}return a.d(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.deactivateZenMode=function(){this.isActive=n.inZenMode=!1,jQuery("body").removeClass("zen-mode"),this.disabled=!1,Ei.enabled&&Ei.isFullscreen&&Ei.exit(),this.cdRef.detectChanges()},n.prototype.activateZenMode=function(){this.isActive=n.inZenMode=!0,jQuery("body").addClass("zen-mode"),Ei.enabled&&Ei.request(),this.cdRef.detectChanges()},n.prototype.performAction=function(e){return n.inZenMode?this.deactivateZenMode():this.activateZenMode(),e.preventDefault(),!1},n.inZenMode=!1,n}(Oi);Tt.DynamicBootstrapper.register({selector:"zen-mode-toggle-button",cls:Di});var Fi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ni(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,6,"button",[["type","button"]],[[8,"disabled",0],[1,"id",0],[1,"title",0],[1,"accesskey",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.performAction(t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-active":0}),l["ɵdid"](4,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](6,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component,i=l["ɵinlineInterpolate"](1,"button ",t.buttonClass,""),r=e(n,3,0,t.isActive);e(n,2,0,i,r),e(n,6,0,l["ɵinlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,0,0,t.disabled||!t.isToggle()&&t.isActive,t.buttonId,t.label,t.accessKey)})}var Ai=l["ɵccf"]("zen-mode-toggle-button",Di,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](1,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null)],null,null)},{},{},[]),Vi=function(){function e(e){this.elementRef=e,this.expanded=!1}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.sectionTitle=e.getAttribute("section-title"),"true"===e.getAttribute("initially-expanded")&&(this.expanded=!0);var n=e.nextElementSibling;this.sectionBody.nativeElement.appendChild(n),n.removeAttribute("hidden")},e.prototype.toggle=function(){this.expanded=!this.expanded},e}();Tt.DynamicBootstrapper.register({selector:"collapsible-section-augment",cls:Vi});var Mi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function qi(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{sectionBody:0}),(e()(),l["ɵeld"](1,0,null,null,7,"section",[["class","collapsible-section"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"-expanded":0}),(e()(),l["ɵeld"](5,0,null,null,2,"accessible-by-keyboard",[["linkClass","collapsible-section--toggle-link"],["spanClass","collapsible-section--legend"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggle()&&l);return l},jl,Il)),l["ɵdid"](6,49152,null,0,kl,[],{linkClass:[0,"linkClass"],spanClass:[1,"spanClass"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](7,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](8,0,[[1,0],["sectionBody",1]],null,0,"div",[["class","collapsible-section--body toggle-slide-animation"]],[[8,"hidden",0]],null,null,null,null))],function(e,n){var t=n.component,l=e(n,4,0,t.expanded);e(n,3,0,"collapsible-section",l);e(n,6,0,"collapsible-section--toggle-link","collapsible-section--legend",t.sectionTitle)},function(e,n){var t=n.component;e(n,7,0,t.sectionTitle),e(n,8,0,!t.expanded)})}var Li=l["ɵccf"]("collapsible-section-augment",Vi,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"collapsible-section-augment",[],null,null,null,qi,Mi)),l["ɵdid"](1,114688,null,0,Vi,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),$i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n,"active_user_statuses",{get:function(){return["active","registered"]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.users.get(this.href)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showUserPath",{get:function(){return this.showUser.$link.href},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isActive",{get:function(){return n.active_user_statuses.indexOf(this.status)>=0},enumerable:!0,configurable:!0}),n}(L),Hi=function(){function e(e,n,t){this.elementRef=e,this.ref=n,this.pathHelper=t}return e.prototype.ngAfterViewInit=function(){this.initialize()},e.prototype.replaceWithDefault=function(){this.useFallback=!0,this.ref.detectChanges()},e.prototype.initialize=function(){var e=this.elementRef.nativeElement;this.user?(this.userId=this.user.id,this.userName=this.user.name):(this.userId=e.dataset.userId,this.userName=e.dataset.userName),this.classes=e.dataset.classList,this.useFallback=e.dataset.useFallback,this.userAvatarUrl=this.pathHelper.api.v3.users.id(this.userId).avatar.toString(),this.userInitials=this.getInitials(this.userName),this.colorCode=this.computeColor(this.userName),this.ref.detectChanges()},e.prototype.getInitials=function(e){var n=e.split(" "),t=n[0].substring(0,1).toUpperCase();return n.length>1&&(t+=n[n.length-1].substring(0,1).toUpperCase()),t},e.prototype.computeColor=function(e){for(var n=0,t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);return"hsl("+n%360+", 50%, 50%)"},e}();Tt.DynamicBootstrapper.register({selector:"user-avatar",cls:Hi});var Bi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function zi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[],[[8,"className",0],[1,"src",4],[1,"title",0],[8,"alt",0]],[[null,"error"]],function(e,n,t){var l=!0,i=e.component;"error"===n&&(l=!1!==i.replaceWithDefault()&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,"avatar--fallback "+t.classes,t.userAvatarUrl,t.userName,t.userName)})}function Wi(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[],[[8,"className",0],[8,"textContent",0],[4,"background",null]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,"avatar-default "+t.classes,t.userInitials,t.colorCode)})}function Qi(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,zi)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Wi)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.userAvatarUrl&&!t.useFallback),e(n,3,0,(!t.userAvatarUrl||t.useFallback)&&t.userInitials)},null)}var Ui=l["ɵccf"]("user-avatar",Hi,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[],null,null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],null,null)],null,null)},{user:"user"},{},[]),Gi=function(){function e(e,n){this.FocusHelper=e,this.elementRef=n,this.priority=0}return e.prototype.ngAfterViewInit=function(){this.updateFocus()},e.prototype.updateFocus=function(){if(this.condition){var e=jQuery(this.elementRef.nativeElement);this.FocusHelper.focusElement(e,this.priority)}},e}(),Ki=t("dEwP");function Yi(e){return function(n){return e.handleRawError(n)}}var Zi=function(){function e(e,n,t){var l=this;void 0===t&&(t=250),this.requestHandler=e,this.errorHandler=n,this.debounceMs=t,this.input$=new c.a,this.loading$=new c.a,this.lastResult=[],this.output$=Object(Ki.a)(Object(tt.a)([]),this.input$.pipe(Object(ft.a)(),Object(at.a)(t),Object(Dn.a)(function(e){l.lastRequestedValue=e,l.lastResult=[],l.loading$.next(!0)}),Object(lt.a)(function(e){return l.requestHandler(e).pipe(Object(q.a)(function(e){return l.errorHandler(e),Object(tt.a)([])}),Object(Dn.a)(function(e){l.loading$.next(!1),l.lastResult=e}))})))}return e.prototype.request=function(e){this.input$.next(e)},Object.defineProperty(e.prototype,"hasResults",{get:function(){return this.lastResult.length>0},enumerable:!0,configurable:!0}),e.prototype.observe=function(e){return this.output$.pipe(Object(Ye.a)(e))},e}(),Ji=function(){function e(e,n,t,i,r){var o=this;this.elementRef=e,this.halResourceService=n,this.I18n=t,this.halNotification=i,this.pathHelper=r,this.userTracker=function(e){return e.href},this.onChange=new l.EventEmitter,this.clearAfterSelection=!1,this.url=this.pathHelper.api.v3.users.path,this.allowEmpty=!1,this.initialSelection=null,this.requests=new Zi(function(e){return o.getAvailableUsers(o.url,e)},Yi(this.halNotification)),this.inputFilters=new re}return e.prototype.ngOnInit=function(){var e=this,n=this.elementRef.nativeElement.dataset.updateInput,t=this.elementRef.nativeElement.dataset.allowEmpty;n&&(this.updateInputField=document.getElementsByName(n)[0],this.setInitialSelection());var l=this.elementRef.nativeElement.dataset.additionalFilter;l&&JSON.parse(l).forEach(function(n){e.inputFilters.add(n.selector,n.operator,n.values)}),"true"===t&&(this.allowEmpty=!0)},e.prototype.onFocus=function(){this.requests.input$.next("")},e.prototype.onModelChange=function(e){e&&(this.onChange.emit(e),this.requests.input$.next(""),this.clearAfterSelection&&this.ngSelectComponent.clearItem(e),this.updateInputField&&(this.updateInputField.value=e.id))},e.prototype.getAvailableUsers=function(e,n){var t=this,l=this.inputFilters;return n&&l.add("name","~",[n]),this.halResourceService.get(e,{filters:l.toJson()}).pipe(Object(v.a)(function(e){var n=e.elements.map(function(e){return{name:e.name,id:e.id,href:e.href,avatar:e.avatar}});return t.allowEmpty&&n.unshift({name:t.I18n.t("js.timelines.filter.noneSelection"),href:null,id:null}),n}))},e.prototype.setInitialSelection=function(){if(this.updateInputField){var e=parseInt(this.updateInputField.value);this.initialSelection=isNaN(e)?null:e}},e}();Tt.DynamicBootstrapper.register({selector:"user-autocompleter",cls:Ji});var Xi=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function er(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar-mini"]],null,null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],{user:[0,"user"]},null)],function(e,n){e(n,1,0,n.parent.context.item)},null)}function nr(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,er)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](2,null,[" "," "]))],function(e,n){e(n,1,0,n.context.item)},function(e,n){e(n,2,0,n.context.item.name)})}function tr(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,23,"ng-select",[["bindLabel","name"],["bindValue","id"],["class","ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,3).handleKeyDown(t)&&i);"focus"===n&&(i=!1!==r.onFocus()&&i);"change"===n&&(i=!1!==r.onModelChange(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](3,4964352,[[1,4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],loading:[2,"loading"],virtualScroll:[3,"virtualScroll"],trackByFn:[4,"trackByFn"],typeahead:[5,"typeahead"],items:[6,"items"]},{focusEvent:"focus",changeEvent:"change"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](19,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},null),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](21,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](22,4210688,null,0,Gi,[m.a,l.ElementRef],null,null),(e()(),l["ɵand"](0,[[2,2]],null,1,null,nr)),l["ɵdid"](24,16384,null,0,Lt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,3,0,"name","id",l["ɵunv"](n,3,2,l["ɵnov"](n,16).transform(t.requests.loading$)),!0,t.userTracker,t.requests.input$,l["ɵunv"](n,3,6,l["ɵnov"](n,17).transform(t.requests.output$))),e(n,19,0,t.initialSelection)},function(e,n){e(n,1,1,[!l["ɵnov"](n,3).multiple,l["ɵnov"](n,3).typeahead,l["ɵnov"](n,3).multiple,l["ɵnov"](n,3).addTag,l["ɵnov"](n,3).searchable,l["ɵnov"](n,3).clearable,l["ɵnov"](n,3).isOpen,l["ɵnov"](n,3).disabled,l["ɵnov"](n,3).filtered,l["ɵnov"](n,21).ngClassUntouched,l["ɵnov"](n,21).ngClassTouched,l["ɵnov"](n,21).ngClassPristine,l["ɵnov"](n,21).ngClassDirty,l["ɵnov"](n,21).ngClassValid,l["ɵnov"](n,21).ngClassInvalid,l["ɵnov"](n,21).ngClassPending])})}var lr=l["ɵccf"]("user-autocompleter",Ji,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-autocompleter",[],null,null,null,tr,Xi)),l["ɵdid"](1,114688,null,0,Ji,[l.ElementRef,Q,A.a,Mn,ge],null,null)],function(e,n){e(n,1,0)},null)},{clearAfterSelection:"clearAfterSelection",url:"url",allowEmpty:"allowEmpty",initialSelection:"initialSelection"},{onChange:"onChange"},[]),ir=function(){function e(e,n){this.i18n=e,this.domSanitizer=n,this.text={newFeatures:this.i18n.t("js.label_new_features"),descriptionNewFeatures:this.i18n.t("js.homescreen.blocks.new_features.text_new_features"),currentNewFeatureHtml:this.i18n.t("js.homescreen.blocks.new_features.current_new_feature_html"),learnAbout:this.i18n.t("js.homescreen.blocks.new_features.learn_about")}}return e.prototype.teaserWebsiteUrl=function(){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://www.openproject.org/collaboration-software-features/dashboards/")},e}();Tt.DynamicBootstrapper.register({selector:"homescreen-new-features-block",cls:ir});var rr=t("ZYjt"),or=[[".widget-box--description[_ngcontent-%COMP%]{display:flex}.widget-box--description[_ngcontent-%COMP%]   .widget-box--teaser-image[_ngcontent-%COMP%]{background-image:var(--new-feature-teaser-image);min-width:170px;background-size:contain;background-repeat:no-repeat;background-position-x:right}"]],ur=l["ɵcrt"]({encapsulation:0,styles:or,data:{}});function ar(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"p",[["class","widget-box--additional-info"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "])),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","widget-box--description"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"a",[["class","widget-box--teaser-image"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"a",[["target","_blank"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](6,null,["",""]))],null,function(e,n){var t=n.component;e(n,1,0,t.text.descriptionNewFeatures),e(n,3,0,t.text.currentNewFeatureHtml),e(n,5,0,t.teaserWebsiteUrl()),e(n,6,0,t.text.learnAbout)})}var sr=l["ɵccf"]("homescreen-new-features-block",ir,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"homescreen-new-features-block",[],null,null,null,ar,ur)),l["ɵdid"](1,49152,null,0,ir,[A.a,rr.DomSanitizer],null,null)],null,null)},{},{},[]),cr=function(e){function n(n,t,l,i,r){var o=e.call(this,t,l,n)||this;return o.elementRef=n,o.locals=t,o.cdRef=l,o.I18n=i,o.domSanitizer=r,o.closeOnEscape=!1,o.closeOnOutsideClick=!1,o.text={title:o.I18n.t("js.label_board_plural")},o}return a.d(n,e),n.prototype.teaserVideoUrl=function(){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://player.vimeo.com/video/337280106")},n}(He.a),dr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function pr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","op-modal--portal"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","op-modal--modal-container"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"iframe",[["allow","autoplay; fullscreen"],["allowfullscreen",""],["class","boards--teaser-video"],["frameborder","0"],["height","500"],["width","800"]],[[8,"src",5]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,4,0,t.text.closePopup),e(n,5,0,t.text.title),e(n,6,0,t.teaserVideoUrl())})}var hr=l["ɵccf"]("ng-component",cr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,pr,dr)),l["ɵdid"](1,245760,null,0,cr,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a,rr.DomSanitizer],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),fr=function(){function e(e){this.elementRef=e,this.isHidden=!1}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.$targetNotification=this.getTargetNotification(),this.identifier=this.$element.data("identifier"),this.isHidden="true"===window.OpenProject.guardedLocalStorage(this.identifier),this.$targetNotification.prop("hidden",!!this.isHidden),this.$element.parent().find(".persistent-toggle--click-handler").on("click",function(){return e.toggle(!e.isHidden)}),this.$targetNotification.find(".notification-box--close").on("click",function(){return e.toggle(!0)})},e.prototype.getTargetNotification=function(){return this.$element.parent().find(".persistent-toggle--notification")},e.prototype.toggle=function(e){var n=this;this.isHidden=e,window.OpenProject.guardedLocalStorage(this.identifier,(!!e).toString()),e?this.$targetNotification.slideUp(400,function(){n.$targetNotification.prop("hidden",!0)}):(this.$targetNotification.slideDown(400),this.$targetNotification.prop("hidden",!1))},e}();Tt.DynamicBootstrapper.register({cls:fr,selector:"persistent-toggle"});var gr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mr(e){return l["ɵvid"](0,[],null,null)}var vr=l["ɵccf"]("persistent-toggle",fr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"persistent-toggle",[],null,null,null,mr,gr)),l["ɵdid"](1,114688,null,0,fr,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),br=function(){function e(e){this.elementRef=e,this.multiselect=!1}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.multiselect="true"===e.dataset.multiselect,this.labelForId=e.dataset.inputId,this.syncInputFieldName=e.dataset.inputName,this.multiselect&&(this.syncInputFieldName+="[]");var n=JSON.parse(e.dataset.options);this.setInitialSelection(n),this.multiselect||(this.selected=this.selected[0]),this.options=n,e.parentElement.hidden=!1},e.prototype.setInitialSelection=function(e){this.updateSelection(e.filter(function(e){return e.selected}))},e.prototype.updateSelection=function(e){var n=this;this.selected=e,e=_.castArray(e),this.removeCurrentSyncedFields(),e.forEach(function(e){n.createSyncedField(e.value)})},e.prototype.createSyncedField=function(e){jQuery(this.elementRef.nativeElement).parent().append('<input type="hidden" name="'+(this.syncInputFieldName||"")+'" value="'+e+'" />')},e.prototype.removeCurrentSyncedFields=function(){jQuery(this.elementRef.nativeElement).parent().find('input[name="'+this.syncInputFieldName+'"]').remove()},e}();Tt.DynamicBootstrapper.register({selector:"autocomplete-select-decoration",cls:br});var yr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wr(e){return l["ɵvid"](0,[(e()(),l["ɵted"](0,null,[" "," "]))],null,function(e,n){e(n,0,0,n.context.item.label)})}function Cr(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,20,"ng-select",[["appendTo","body"],["bindLabel","label"],["class","ng-select"],["placeholder","Please select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,3).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==r.updateSelection(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](3,4964352,[[1,4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],appendTo:[2,"appendTo"],virtualScroll:[3,"virtualScroll"],labelForId:[4,"labelForId"],multiple:[5,"multiple"],items:[6,"items"]},null),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](17,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](19,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](0,[[2,2]],null,1,null,wr)),l["ɵdid"](21,16384,null,0,Lt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,3,0,"label","Please select","body",!0,t.labelForId,t.multiselect,t.options),e(n,17,0,t.selected)},function(e,n){e(n,1,1,[!l["ɵnov"](n,3).multiple,l["ɵnov"](n,3).typeahead,l["ɵnov"](n,3).multiple,l["ɵnov"](n,3).addTag,l["ɵnov"](n,3).searchable,l["ɵnov"](n,3).clearable,l["ɵnov"](n,3).isOpen,l["ɵnov"](n,3).disabled,l["ɵnov"](n,3).filtered,l["ɵnov"](n,19).ngClassUntouched,l["ɵnov"](n,19).ngClassTouched,l["ɵnov"](n,19).ngClassPristine,l["ɵnov"](n,19).ngClassDirty,l["ɵnov"](n,19).ngClassValid,l["ɵnov"](n,19).ngClassInvalid,l["ɵnov"](n,19).ngClassPending])})}var kr=l["ɵccf"]("autocomplete-select-decoration",br,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"autocomplete-select-decoration",[],null,null,null,Cr,yr)),l["ɵdid"](1,114688,null,0,br,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ir=function(){function e(){}return e.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return _.get(window.gon,e,null)},Object.defineProperty(e.prototype,"gon",{get:function(){return window.gon},enumerable:!0,configurable:!0}),e}(),jr=function(){function e(e){var n=this;this.displayed=Object(s.f)(),this.all=[];var t=e.get("hideSections");this.all=t.all,this.displayed.putValue(t.active.map(function(e){return n.toggleVisibility(e.key,!0),e.key})),this.removeHiddenOnSubmit()}return e.prototype.section=function(e){return document.querySelector('section.hide-section[data-section-name="'+e+'"]')},e.prototype.hide=function(e){this.displayed.doModify(function(n){return n.filter(function(n){return n!==e})}),this.toggleVisibility(e,!1)},e.prototype.show=function(e){this.displayed.doModify(function(n){return n.concat([e])}),this.toggleVisibility(e,!0)},e.prototype.toggleVisibility=function(e,n){var t=this.section(e);t&&(t.hidden=!n)},e.prototype.removeHiddenOnSubmit=function(){jQuery(document.body).on("submit","form",function(e){var n=jQuery(this),t=n.find("section.hide-section:hidden");return!(!n.data("hideSectionRemoved")&&0!==t.length)||(n.data("hideSectionRemoved",!0),t.remove(),n.trigger("submit"),e.preventDefault(),!1)})},e}(),Rr=function(){function e(e,n){this.elementRef=e,this.hideSectionService=n,this.displayed=!0}return e.prototype.ngOnInit=function(){this.sectionName=this.elementRef.nativeElement.dataset.sectionName},e.prototype.hideSection=function(){return this.hideSectionService.hide(this.sectionName),!1},e}();Tt.DynamicBootstrapper.register({cls:Rr,selector:"hide-section-link"});var Pr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Sr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"accessible-by-keyboard",[["linkAriaLabel","Remove"],["linkTitle","Remove"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.hideSection()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkTitle:[0,"linkTitle"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close icon-small"],["icon-title","Remove"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){e(n,1,0,"Remove","Remove");e(n,3,0,"icon-close icon-small","Remove")},null)}var _r,xr=l["ɵccf"]("hide-section-link",Rr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"hide-section-link",[],null,null,null,Sr,Pr)),l["ɵdid"](1,114688,null,0,Rr,[l.ElementRef,jr],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);!function(e){function n(e){return function(n,t){return!n&&!t||!!n&&!!t&&n[e]===t[e]}}function t(e,n){return!e&&!n||!!e&&!!n&&e.$href===n.$href}e.halHref=function(e,n){return n.$href},e.compareByName=function(e,t){return n("name")(e,t)},e.compareByAttribute=n,e.trackByName=function(e,n){return _.get(n,"name")},e.trackByHref=function(e,n){return _.get(n,"href")},e.trackByProperty=function(e){return function(n,t){return _.get(t,e)}},e.trackByHrefAndProperty=function(e){return function(n,t){var l=_.get(t,"href"),i=_.get(t,e,"none");return l+"#"+e+"="+i}},e.trackByTrackingIdentifier=function(e,n){return _.get(n,"trackingIdentifier",n&&n.href)},e.compareByHref=t,e.compareByHrefOrString=function(e,n){return e instanceof L&&n instanceof L?t(e,n):!e&&!n||e===n}}(_r||(_r={}));var Tr=function(){function e(e,n,t){this.hideSectionService=e,this.elementRef=n,this.I18n=t,this.trackByKey=_r.trackByProperty("key"),this.selectable=[],this.active=[],this.placeholder=this.I18n.t("js.placeholders.selection")}return e.prototype.ngOnInit=function(){var e=this;this.htmlId=this.elementRef.nativeElement.dataset.htmlId,this.hideSectionService.displayed.values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.selectable=e.hideSectionService.all.filter(function(e){return-1===n.indexOf(e.key)}).sort(function(e,n){return e.label.localeCompare(n.label)}),e.option.nativeElement.selected=!0})},e.prototype.ngOnDestroy=function(){},e.prototype.show=function(e){this.hideSectionService.show(e)},e}();Tt.DynamicBootstrapper.register({cls:Tr,selector:"add-section-dropdown"});var Or=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Er(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.key),e(n,2,0,n.context.$implicit.key)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function Dr(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{option:0}),(e()(),l["ɵeld"](1,0,null,null,5,"select",[["class","form--select"]],[[8,"id",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.show(t.target.value)&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,[[1,0],["fallbackOption",1]],null,2,"option",[["disabled",""],["selected",""],["value",""]],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](3,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](4,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Er)),l["ɵdid"](6,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,3,0,"");e(n,4,0,""),e(n,6,0,t.selectable)},function(e,n){var t=n.component;e(n,1,0,t.htmlId),e(n,2,0,t.placeholder)})}var Fr=l["ɵccf"]("add-section-dropdown",Tr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"add-section-dropdown",[],null,null,null,Dr,Or)),l["ɵdid"](1,245760,null,0,Tr,[jr,l.ElementRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Nr=function(){function e(e,n){this.elementRef=e,this.http=n}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement),t=n.parent();this.inputs=t.find(".remote-field--input"),this.target=t.find(".remote-field--target"),this.url=n.data("url"),this.htmlMode="html"===n.data("mode"),this.inputs.on("keyup change",_.debounce(function(n){var t=[wl.a.TAB,wl.a.ENTER,wl.a.SHIFT];("change"===n.type||n.which&&-1===t.indexOf(n.which))&&e.updater()},500))},e.prototype.request=function(e){var n={};return this.htmlMode?n.Accept="text/html":n.Accept="application/json",this.http.get(this.url,{params:e,headers:n,responseType:this.htmlMode?"text":"json",withCredentials:!0})},e.prototype.updater=function(){var e=this,n={};this.inputs.each(function(e,t){n[t.dataset.remoteFieldKey]=t.value}),this.request(n).subscribe(function(n){e.htmlMode?e.target.html(n):_.each(n,function(e,n){jQuery("#"+n).html(e)})})},e}();Tt.DynamicBootstrapper.register({cls:Nr,selector:"remote-field-updater"});var Ar=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Vr(e){return l["ɵvid"](0,[],null,null)}var Mr=l["ɵccf"]("remote-field-updater",Nr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"remote-field-updater",[],null,null,null,Vr,Ar)),l["ɵdid"](1,114688,null,0,Nr,[l.ElementRef,V.c],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),qr=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.loadAll=function(){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.toString()).toPromise()},e.prototype.load=function(e){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.id(e).toString()).toPromise()},e}(),Lr=function(){function e(e){this.helpTextDm=e,this.helpTexts=Object(s.f)()}return e.prototype.require=function(e,n){var t=this;return this.helpTexts.putFromPromiseIfPristine(function(){return t.helpTextDm.loadAll().then(function(e){return e.elements})}),new Promise(function(l,i){t.helpTexts.valuesPromise().then(function(){return l(t.find(e,n))})})},e.prototype.find=function(e,n){var t=this.helpTexts.getValueOr([]);return _.find(t,function(t){return t.scope===n&&t.attribute===e})},e}(),$r=function(e){function n(n,t,l,i){var r=e.call(this,n,l,i)||this;return r.locals=n,r.I18n=t,r.cdRef=l,r.elementRef=i,r.closeOnEscape=!0,r.closeOnOutsideClick=!1,r.text={edit:r.I18n.t("js.button_edit"),close:r.I18n.t("js.button_close")},r.helpText=r.locals.helpText,r}return a.d(n,e),Object.defineProperty(n.prototype,"helpTextLink",{get:function(){return this.helpText.editText?this.helpText.editText.$link.href:""},enumerable:!0,configurable:!0}),n}(He.a),Hr=function(){function e(e,n,t,l,i,r,o){this.elementRef=e,this.helpTextDm=n,this.attributeHelpTexts=t,this.opModalService=l,this.cdRef=i,this.injector=r,this.I18n=o,this.exists=!1,this.text={open_dialog:this.I18n.t("js.help_texts.show_modal"),edit:this.I18n.t("js.button_edit"),close:this.I18n.t("js.button_close")}}return e.prototype.ngOnInit=function(){var e=this,n=this.elementRef.nativeElement;n.dataset.helpTextId&&(this.helpTextId=n.dataset.helpTextId,this.attribute=n.dataset.attribute,this.attributeScope=n.dataset.attributeScope,this.additionalLabel=n.dataset.additionalLabel),this.helpTextId?this.exists=!0:this.load().then(function(n){return e.exists=!!n,e.cdRef.detectChanges(),n})},e.prototype.handleClick=function(){var e=this;this.load().then(function(n){e.opModalService.show($r,e.injector,{helpText:n})})},e.prototype.load=function(){return this.helpTextId?this.helpTextDm.load(this.helpTextId):this.attributeHelpTexts.require(this.attribute,this.attributeScope)},e}();Tt.DynamicBootstrapper.register({cls:Hr,selector:"attribute-help-text"});var Br=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function zr(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.handleClick()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-help1"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](4,0,[" ","\n"]))],function(e,n){var t=n.component;e(n,1,0,l["ɵinlineInterpolate"](1,"icon help-text--entry help-text--for-",t.attribute,""),t.text.open_dialog);e(n,3,0,"icon icon-help1")},function(e,n){e(n,4,0,n.component.additionalLabel)})}function Wr(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,zr)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.exists)},null)}var Qr=l["ɵccf"]("attribute-help-text",Hr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attribute-help-text",[],null,null,null,Wr,Br)),l["ɵdid"](1,114688,null,0,Hr,[l.ElementRef,qr,Lr,Wn.b,l.ChangeDetectorRef,l.Injector,A.a],null,null)],function(e,n){e(n,1,0)},null)},{attribute:"attribute",additionalLabel:"additionalLabel",attributeScope:"attributeScope",helpTextId:"helpTextId"},{},[]),Ur=function(){function e(e,n){this.HideSectionService=e,this.elementRef=n}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.optValue=n.data("optValue"),this.hideSecWithName=n.data("hideSecWithName"),jQuery(this.elementRef.nativeElement).prev().on("change",function(n){jQuery("option:selected",n.target).val()!==e.optValue?e.HideSectionService.hide(e.hideSecWithName):e.HideSectionService.show(e.hideSecWithName)})},e}();Tt.DynamicBootstrapper.register({cls:Ur,selector:"show-section-dropdown "});var Gr=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Kr(e){return l["ɵvid"](0,[],null,null)}var Yr=l["ɵccf"]("show-section-dropdown",Ur,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"show-section-dropdown",[],null,null,null,Kr,Gr)),l["ɵdid"](1,114688,null,0,Ur,[jr,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Zr="https://www.openproject.org/enterprise-edition/?op_edtion=community-edition",Jr=function(){function e(e){this.I18n=e,this.leftMargin=!1,this.text={enterpriseFeature:this.I18n.t("js.upsale.ee_only")}}return e.prototype.eeLink=function(){return this.opReferrer?Zr+"&op_referrer="+this.opReferrer:Zr},e}(),Xr=[[".notification-box.-left-margin[_ngcontent-%COMP%]{margin-left:1.25rem}.notification-box[_ngcontent-%COMP%]   .notification-box--content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}"]],eo=l["ɵcrt"]({encapsulation:0,styles:Xr,data:{}});function no(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","notification-box -ee-upsale"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-left-margin":0}),(e()(),l["ɵeld"](4,0,null,null,3,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"p",[["class","-bold"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"a",[["target","blank"]],[[8,"href",4],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=e(n,3,0,n.component.leftMargin);e(n,2,0,"notification-box -ee-upsale",t)},function(e,n){var t=n.component;e(n,5,0,t.text.enterpriseFeature),e(n,6,0,t.textMessage),e(n,7,0,t.eeLink(),t.linkMessage)})}l["ɵccf"]("enterprise-banner",Jr,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],null,null)],null,null)},{leftMargin:"leftMargin",textMessage:"textMessage",linkMessage:"linkMessage",opReferrer:"opReferrer"},{},[]);var to=function(){function e(e,n){this.elementRef=e,this.i18n=n}return e.prototype.ngOnInit=function(){var e=jQuery(this.elementRef.nativeElement);this.textMessage=e.attr("text-message"),this.linkMessage=e.attr("link-message")||this.i18n.t("js.work_packages.table_configuration.upsale.check_out_link"),this.referrer=e.attr("referrer")},e}();Tt.DynamicBootstrapper.register({selector:"enterprise-banner-bootstrap",cls:to});var lo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function io(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.textMessage,t.linkMessage,t.referrer)},null)}var ro=l["ɵccf"]("ng-component",to,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,io,lo)),l["ɵdid"](1,114688,null,0,to,[l.ElementRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),oo=t("zHkY"),uo="openproject-base",ao=function(){};Tt.DynamicBootstrapper.register({selector:uo,cls:ao});var so=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function co(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","openproject-base--ui-view"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,16777216,null,null,1,"ui-view",[],null,null,null,Mt.c,Mt.a)),l["ɵdid"](2,245760,null,0,oo.a,[g.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,2,0)},null)}var po=l["ɵccf"]("openproject-base",ao,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"openproject-base",[],null,null,null,co,so)),l["ɵdid"](1,49152,null,0,ao,[],null,null)],null,null)},{},{},[]),ho=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement),t=new Ot.a(!1);t.pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(gn.a)(50)).subscribe(function(e){n.toggleClass("-focus",e)});n[0].addEventListener("focus",function(){t.next(!0)},!0);n[0].addEventListener("blur",function(){t.next(!1)},!0),setTimeout(function(){n.addClass("focus-within--trigger"),n.find(e.selector).addClass("focus-within--depending")},0)},e.prototype.ngOnDestroy=function(){},e}(),fo=function(){function e(e,n,t){this.PathHelper=e,this.I18n=n,this.timezoneService=t}return e.prototype.ngOnInit=function(){this.createdOnTime=this.timezoneService.parseDatetime(this.createdOn),this.timeago=this.createdOnTime.fromNow(),this.time=this.createdOnTime.format("LLL"),this.userLink=this.PathHelper.userPath(this.author.idFromLink)},e.prototype.activityFromPath=function(e){var n=this.PathHelper.projectActivityPath(this.project);return e&&(n+="?from="+e),n},e}(),go=[['.timestamp[_ngcontent-%COMP%]:before{content:" ";white-space:pre}']],mo=l["ɵcrt"]({encapsulation:0,styles:go,data:{}});function vo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.author.name)})}function bo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"a",[],[[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.userLink,t.author.name)})}function yo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","timestamp"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"a",[],[[1,"title",0],[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.time,t.activityFromPath(t.createdOnTime.format("YYYY-MM-DD")),t.timeago)})}function wo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","timestamp"]],[[8,"textContent",0],[1,"title",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.timeago,t.time)})}function Co(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","authoring-entry"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,vo)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,bo)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,yo)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,wo)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.showAuthorAsLink),e(n,4,0,!t.showAuthorAsLink),e(n,6,0,t.activity),e(n,8,0,!t.activity)},null)}l["ɵccf"]("authoring",fo,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"authoring",[],null,null,null,Co,mo)),l["ɵdid"](1,114688,null,0,fo,[ge,A.a,nl],null,null)],function(e,n){e(n,1,0)},null)},{createdOn:"createdOn",author:"author",showAuthorAsLink:"showAuthorAsLink",project:"project",activity:"activity"},{},[]);var ko=function(){function e(e,n,t,i){var r=this;this.halNotification=e,this.I18n=n,this.states=t,this.pathHelper=i,this.destroyImmediately=!0,this.removeAttachment=new l.EventEmitter,this.text={dragHint:this.I18n.t("js.attachments.draggable_hint"),destroyConfirmation:this.I18n.t("js.text_attachment_destroy_confirmation"),removeFile:function(e){return r.I18n.t("js.label_remove_file",e)}}}return e.prototype.setDragData=function(e){var n=this.downloadPath,t=this.draggableHTML(n);e.dataTransfer.setData("text/plain",n),e.dataTransfer.setData("text/html",t.outerHTML),e.dataTransfer.setData("text/uri-list",n),e.dataTransfer.setDragImage(t,0,0)},e.prototype.draggableHTML=function(e){var n;return this.isImage?((n=document.createElement("img")).src=e,n.textContent=this.fileName):((n=document.createElement("a")).href=e,n.textContent=this.fileName),n},Object.defineProperty(e.prototype,"downloadPath",{get:function(){return this.pathHelper.attachmentDownloadPath(this.attachment.id,this.fileName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isImage",{get:function(){var n=this.fileName.split(".").pop()||"";return e.imageFileExtensions.indexOf(n.toLowerCase())>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileName",{get:function(){var e=this.attachment;return e.fileName||e.customName||e.name},enumerable:!0,configurable:!0}),e.prototype.confirmRemoveAttachment=function(e){return window.confirm(this.text.destroyConfirmation)?(this.removeAttachment.emit(),this.destroyImmediately&&this.resource.removeAttachment(this.attachment),!1):(e.stopImmediatePropagation(),e.preventDefault(),!1)},e.imageFileExtensions=["jpeg","jpg","gif","bmp","png"],e}(),Io=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function jo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"a",[["class","form--selected-value--remover work-package--atachments--delete-button"],["href",""]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmRemoveAttachment(t)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-delete"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),l["ɵpod"](3,{fileName:0})],function(e,n){var t=n.component,l=t.text.removeFile(e(n,3,0,t.attachment.fileName));e(n,2,0,"icon-delete",l)},null)}function Ro(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"attachments[",t.index,"][id]"),l["ɵinlineInterpolate"](1,"",t.attachment.id,""))})}function Po(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"li",[["class","form--selected-value--container work-package--attachments--draggable-item"],["draggable","true"],["focus-within",""],["focusWithinSelector",".inplace-editing--trigger-icon"]],[[8,"title",0]],[[null,"dragstart"]],function(e,n,t){var l=!0,i=e.component;"dragstart"===n&&(l=!1!==i.setDragData(t)&&l);return l},null,null)),l["ɵdid"](1,212992,null,0,ho,[l.ElementRef],null,null),(e()(),l["ɵeld"](2,0,null,null,6,"span",[["class","form--selected-value"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-attachment"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](5,0,null,null,3,"a",[["class","work-package--attachments--filename"],["rel","noopener"],["target","_blank"]],[[1,"href",4]],null,null,null,null)),(e()(),l["ɵted"](6,null,[" "," "])),(e()(),l["ɵeld"](7,0,null,null,1,"authoring",[["class","work-package--attachments--info"]],null,null,null,Co,mo)),l["ɵdid"](8,114688,null,0,fo,[ge,A.a,nl],{createdOn:[0,"createdOn"],author:[1,"author"],showAuthorAsLink:[2,"showAuthorAsLink"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,jo)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ro)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0);e(n,4,0,"icon-context icon-attachment");e(n,8,0,t.attachment.createdAt,t.attachment.author,!1),e(n,10,0,!!t.attachment.$links.delete),e(n,12,0,!t.attachment.container)},function(e,n){var t=n.component;e(n,0,0,t.text.dragHint),e(n,5,0,t.downloadPath||"#"),e(n,6,0,t.attachment.fileName||t.attachment.customName||t.attachment.name)})}l["ɵccf"]("attachment-list-item",ko,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachment-list-item",[],null,null,null,Po,Io)),l["ɵdid"](1,49152,null,0,ko,[Mn,A.a,d,ge],null,null)],null,null)},{resource:"resource",attachment:"attachment",index:"index",destroyImmediately:"destroyImmediately"},{removeAttachment:"removeAttachment"},[]);var So=function(){function e(e,n,t,l){this.elementRef=e,this.states=n,this.cdRef=t,this.halResourceService=l,this.destroyImmediately=!0,this.trackByHref=_r.trackByHref,this.attachments=[],this.deletedAttachments=[]}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.updateAttachments(),this.setupResourceUpdateListener(),this.destroyImmediately||this.setupAttachmentDeletionCallback()},e.prototype.setupResourceUpdateListener=function(){var e=this;this.states.forResource(this.resource).values$().pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(Yn.a)(function(e){return!!e})).subscribe(function(n){e.resource=n||e.resource,e.updateAttachments(),e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){this.destroyImmediately||this.$formElement.off("submit.attachment-component")},e.prototype.removeAttachment=function(e){var n;this.deletedAttachments.push(e);var t=this.attachments.filter(function(n){return n!==e});this.attachments.length=0,(n=this.attachments).push.apply(n,t),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"attachmentsUpdatable",{get:function(){return this.resource.attachments&&this.resource.attachmentsBackend},enumerable:!0,configurable:!0}),e.prototype.setupAttachmentDeletionCallback=function(){var e=this;this.$formElement=this.$element.closest("form"),this.$formElement.on("submit.attachment-component",function(){e.destroyRemovedAttachments()})},e.prototype.destroyRemovedAttachments=function(){var e=this;this.deletedAttachments.forEach(function(n){e.resource.removeAttachment(n)})},e.prototype.updateAttachments=function(){var e=this;this.attachmentsUpdatable?this.resource.attachments.updateElements().then(function(){e.attachments=e.resource.attachments.elements,e.cdRef.detectChanges()}):this.attachments=this.resource.attachments.elements},e}();Tt.DynamicBootstrapper.register({selector:"attachment-list",cls:So});var _o=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function xo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ul",[["class","form--selected-value--list"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"attachment-list-item",[],null,[[null,"removeAttachment"]],function(e,n,t){var l=!0,i=e.component;"removeAttachment"===n&&(l=!1!==i.removeAttachment(e.context.$implicit)&&l);return l},Po,Io)),l["ɵdid"](2,49152,null,0,ko,[Mn,A.a,d,ge],{resource:[0,"resource"],attachment:[1,"attachment"],index:[2,"index"],destroyImmediately:[3,"destroyImmediately"]},{removeAttachment:"removeAttachment"})],function(e,n){var t=n.component;e(n,2,0,t.resource,n.context.$implicit,n.context.index,t.destroyImmediately)},null)}function To(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","work-package--attachments--files"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,xo)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.attachments,t.trackByHref)},null)}function Oo(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,To)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}var Eo=l["ɵccf"]("attachment-list",So,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachment-list",[],null,null,null,Oo,_o)),l["ɵdid"](1,245760,null,0,So,[l.ElementRef,d,l.ChangeDetectorRef,Q],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource",destroyImmediately:"destroyImmediately"},{},[]),Do=function(){function e(e,n,t,l,i){this.I18n=e,this.ConfigurationService=n,this.notificationsService=t,this.elementRef=l,this.halResourceService=i,this.draggingOver=!1,this.text={uploadLabel:e.t("js.label_add_attachments"),dropFiles:e.t("js.label_drop_files"),dropFilesHint:e.t("js.label_drop_files_hint"),foldersWarning:e.t("js.label_drop_folders_hint")}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.ConfigurationService.initialized.then(function(){return e.maxFileSize=e.ConfigurationService.maximumAttachmentFileSize})},e.prototype.triggerFileInput=function(e){return this.filePicker.nativeElement.click(),e.preventDefault(),e.stopPropagation(),!1},e.prototype.onDropFiles=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation();for(var n=e.dataTransfer.files,t=n?n.length:0,l=[],i=0;i<t;i++)l.push(n[i]);this.uploadFiles(l),this.draggingOver=!1},e.prototype.onDragOver=function(e){this.containsFiles(e.dataTransfer)&&(e.dataTransfer.dropEffect="copy",this.draggingOver=!0),e.preventDefault(),e.stopPropagation()},e.prototype.onDragLeave=function(e){this.draggingOver=!1,e.preventDefault(),e.stopPropagation()},e.prototype.onFilePickerChanged=function(){var e=Array.from(this.filePicker.nativeElement.files);this.uploadFiles(e)},e.prototype.containsFiles=function(e){return e.types.contains?e.types.contains("Files"):e.types.indexOf("Files")>=0},e.prototype.uploadFiles=function(e){var n=(e=e||[]).length;0!==(e=this.filterFolders(e)).length?this.resource.uploadAttachments(e):n>0&&this.notificationsService.addNotice(this.text.foldersWarning)},e.prototype.filterFolders=function(e){return e.filter(function(e){return""!==e.type||(0!==e.size&&4096!==e.size||(console.warn("Skipping file because of file size ("+e.size+") %O",e),!1))})},e}(),Fo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function No(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[["class","wp-attachment-upload hide-when-print"]],[[1,"aria-label",0]],[[null,"drop"],[null,"dragover"],[null,"dragleave"]],function(e,n,t){var l=!0,i=e.component;"drop"===n&&(l=!1!==i.onDropFiles(t)&&l);"dragover"===n&&(l=!1!==i.onDragOver(t)&&l);"dragleave"===n&&(l=!1!==i.onDragLeave(t)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,[[1,0],["hiddenFileInput",1]],null,0,"input",[["hidden",""],["id","attachment_files"],["multiple",""],["name","attachment_files"],["type","file"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.onFilePickerChanged()&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","work-package--attachments--drop-box"],["tabindex","0"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,6).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,6).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.triggerFileInput(t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](5,{"-dragging":0}),l["ɵdid"](6,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](7,0,null,null,6,"div",[["class","work-package--attachments--label"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-attachment"]],null,null,null,hl,dl)),l["ɵdid"](9,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](10,0,null,null,3,"label",[["for","attachment_files"]],null,null,null,null,null)),(e()(),l["ɵted"](11,null,[" "," "])),(e()(),l["ɵeld"](12,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵted"](13,null,[" "," "]))],function(e,n){var t=e(n,5,0,n.component.draggingOver);e(n,4,0,"work-package--attachments--drop-box",t);e(n,9,0,"icon-attachment")},function(e,n){var t=n.component;e(n,0,0,t.text.uploadLabel),e(n,11,0,t.text.dropFiles),e(n,13,0,t.text.dropFilesHint)})}function Ao(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{filePicker:0}),(e()(),l["ɵand"](16777216,null,null,1,null,No)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.resource.canAddAttachments)},null)}var Vo=l["ɵccf"]("attachments-upload",Do,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachments-upload",[],null,null,null,Ao,Fo)),l["ɵdid"](1,114688,null,0,Do,[A.a,be,Vn,l.ElementRef,Q],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource"},{},[]),Mo=function(){function e(e,n,t,l){this.elementRef=e,this.I18n=n,this.states=t,this.halResourceService=l,this.text={attachments:this.I18n.t("js.label_attachments")}}return e.prototype.ngOnInit=function(){if(this.$element=jQuery(this.elementRef.nativeElement),!this.resource){var e=this.$element.data("resource");this.resource=this.halResourceService.createHalResource(e,!0)}this.allowUploading=this.$element.data("allow-uploading"),void 0!==this.$element.data("destroy-immediately")?this.destroyImmediately=this.$element.data("destroy-immediately"):this.destroyImmediately=!0,this.setupResourceUpdateListener()},e.prototype.ngOnDestroy=function(){},e.prototype.setupResourceUpdateListener=function(){var e=this;this.states.forResource(this.resource).changes$().pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(Yn.a)(function(e){return!!e})).subscribe(function(n){e.resource=n||e.resource})},e.prototype.showAttachments=function(){return this.allowUploading||_.get(this.resource,"attachments.count",0)>0},e}();Tt.DynamicBootstrapper.register({selector:"attachments",cls:Mo,embeddable:!0});var qo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Lo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachment-list",[],null,null,null,Oo,_o)),l["ɵdid"](1,245760,null,0,So,[l.ElementRef,d,l.ChangeDetectorRef,Q],{resource:[0,"resource"],destroyImmediately:[1,"destroyImmediately"]},null)],function(e,n){var t=n.component;e(n,1,0,t.resource,t.destroyImmediately)},null)}function $o(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachments-upload",[["class","hide-when-print"]],null,null,null,Ao,Fo)),l["ɵdid"](1,114688,null,0,Do,[A.a,be,Vn,l.ElementRef,Q],{resource:[0,"resource"]},null)],function(e,n){e(n,1,0,n.component.resource)},null)}function Ho(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"legend",[["class","form--fieldset-legend"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,4,"div",[["id","attachments_fields"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Lo)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,$o)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.resource.attachments),e(n,7,0,t.allowUploading)},function(e,n){e(n,2,0,n.component.text.attachments)})}function Bo(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Ho)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.showAttachments())},null)}var zo=l["ɵccf"]("attachments",Mo,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachments",[],null,null,null,Bo,qo)),l["ɵdid"](1,245760,null,0,Mo,[l.ElementRef,A.a,d,Q],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource"},{},[]),Wo=function(){function e(e){this.PathHelper=e}return e.prototype.create=function(e,n,t,l){void 0===l&&(l=null);var i="constrained"===e?window.OPConstrainedEditor:window.OPClassicEditor;n.classList.add("ckeditor-type-"+e);var r=n.querySelector(".document-editor__toolbar"),o=n.querySelector(".document-editor__editable"),u=t.options&&t.options.rtl?"ar":"en";return i.createCustomized(o,{openProject:this.createConfig(t),initialData:l,language:{content:u}}).then(function(e){return r.appendChild(e.ui.view.toolbar.element),jQuery(n).on("op:ckeditor:setData",function(n,t){return e.setData(t)}).on("op:ckeditor:clear",function(n){return e.setData(" ")}).on("op:ckeditor:getData",function(n,t){return t(e.getData({trim:!1}))}),e})},e.prototype.createConfig=function(e){return"none"===e.macros?e.macros=!1:"wp"===e.macros?e.macros=["OPMacroToc","OPMacroEmbeddedTable","OPMacroWpButton"]:e.macros=e.macros,{context:e,helpURL:this.PathHelper.textFormattingHelp(),pluginContext:window.OpenProject.pluginContext.value}},e}(),Qo=function(){function e(e,n,t,i,r){var o=this;this.elementRef=e,this.Notifications=n,this.I18n=t,this.configurationService=i,this.ckEditorSetup=r,this.ckEditorType="full",this.onInitialized=new l.EventEmitter,this.onContentChange=new l.EventEmitter,this.onInitializationFailed=new l.EventEmitter,this.error=null,this.allowManualMode=!1,this.manualMode=!1,this.text={errorTitle:this.I18n.t("js.editor.error_initialization_failed")},this.debouncedEmitter=_.debounce(function(){o.getTransformedContent(!1).then(function(e){o.onContentChange.emit(e)})},1e3,{leading:!0})}return e.prototype.getRawData=function(){return this.manualMode?this._content=this.codeMirrorInstance.getValue():this._content=this.ckEditorInstance.getData({trim:!1})},e.prototype.getTransformedContent=function(e){var n=this;if(void 0===e&&(e=!0),!this.initialized)throw"Tried to access CKEditor instance before initialization.";return new Promise(function(t,l){try{t(n.getRawData())}catch(r){console.error("Failed to save CKEditor content: "+r+".");var i=n.I18n.t("js.editor.error_saving_failed",{error:r||n.I18n.t("js.error.internal")});e&&n.Notifications.addError(i),l(i)}})},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){if(!this.initialized)throw"Tried to access CKEditor instance before initialization.";this._content=e,this.ckEditorInstance.setData(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return void 0!==this.ckEditorInstance},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){try{this.initializeEditor()}catch(e){console.error("Failed to setup CKEditor instance: "+e),this.error=e,this.onInitializationFailed.emit(e)}},e.prototype.initializeEditor=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement);var n=this.ckEditorSetup.create(this.ckEditorType,this.opCkeditorReplacementContainer.nativeElement,this.context,this.content).catch(function(e){throw e}).then(function(n){return e.ckEditorInstance=n,n.model.document.on("change",e.debouncedEmitter),n.on("op:source-code-enabled",function(){return e.enableManualMode()}),n.on("op:source-code-disabled",function(){return e.disableManualMode()}),e.onInitialized.emit(n),n});this.$element.data("editor",n)},e.prototype.disableManualMode=function(){var e=this.getRawData();this.ckEditorInstance.setData(e),this.codeMirrorInstance=null,this.manualMode=!1},e.prototype.enableManualMode=function(){var e=this,n=this.getRawData();Promise.all([t.e(0).then(t.t.bind(null,"VrN/",7)),t("v4wS")("./gfm/gfm.js")]).then(function(t){var l=t[0].default;e.codeMirrorInstance=l(e.$element.find(".ck-editor__source")[0],{lineNumbers:!0,smartIndent:!0,value:n,mode:""}),e.codeMirrorInstance.on("change",e.debouncedEmitter),setTimeout(function(){return e.codeMirrorInstance.refresh()},100),e.manualMode=!0})},e}(),Uo=[[".op-ckeditor--mode-switch[_ngcontent-%COMP%]{text-align:right}.op-ckeditor--mode-switch[_ngcontent-%COMP%]   button.button[_ngcontent-%COMP%]{margin:0 0 5px}"]],Go=l["ɵcrt"]({encapsulation:0,styles:Uo,data:{}});function Ko(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.errorTitle),e(n,5,0,t.error)})}function Yo(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{opCkeditorReplacementContainer:0}),l["ɵqud"](671088640,2,{codeMirrorPane:0}),(e()(),l["ɵeld"](2,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ko)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](5,0,[[1,0],["opCkeditorReplacementContainer",1]],null,3,"div",[["class","op-ckeditor-source-element document-editor"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"div",[["class","document-editor__toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,1,"div",[["class","document-editor__editable-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,0,"div",[["class","document-editor__editable"]],null,null,null,null,null))],function(e,n){e(n,4,0,n.component.error)},null)}l["ɵccf"]("op-ckeditor",Qo,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-ckeditor",[],null,null,null,Yo,Go)),l["ɵdid"](1,245760,null,0,Qo,[l.ElementRef,Vn,A.a,be,Wo],null,null)],function(e,n){e(n,1,0)},null)},{ckEditorType:"ckEditorType",context:"context",_content:"content"},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"},[]);var Zo=function(){function e(e,n,t,l,i,r,o){this.elementRef=e,this.pathHelper=n,this.halResourceService=t,this.Notifications=l,this.I18n=i,this.states=r,this.ConfigurationService=o,this.changed=!1,this.inFlight=!1,this.isEditing=!1}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.textareaSelector=this.$element.attr("textarea-selector"),this.previewContext=this.$element.attr("preview-context"),this.macros="false"!==this.$element.attr("macros"),this.editorType=this.$element.attr("editor-type")||"full";var e=this.$element.data("resource");this.resource=e?this.halResourceService.createHalResource(e,!0):void 0,this.formElement=this.$element.closest("form"),this.wrappedTextArea=this.formElement.find(this.textareaSelector),this.wrappedTextArea.removeAttr("required").hide(),this.initialContent=this.wrappedTextArea.val(),this.$attachmentsElement=this.formElement.find("#attachments_fields"),this.context={resource:this.resource,previewContext:this.previewContext},this.macros||(this.context.macros="none")},e.prototype.ngOnDestroy=function(){this.formElement.off("submit.ckeditor")},e.prototype.markEdited=function(){window.OpenProject.pageWasEdited=!0},e.prototype.setup=function(e){var n=this;return this.resource&&this.resource.attachments&&(this.setupAttachmentAddedCallback(e),this.setupAttachmentRemovalSignal(e)),this.formElement.on("submit.ckeditor change.ckeditor",function(){try{n.wrappedTextArea.val(n.ckEditorInstance.getRawData())}catch(e){return console.error("Failed to save CKEditor body to textarea: "+e+"."),n.Notifications.addError(e||n.I18n.t("js.error.internal")),!1}return n.addUploadedAttachmentsToForm(),!0}),this.setLabel(),e},e.prototype.setupAttachmentAddedCallback=function(e){var n=this;e.model.on("op:attachment-added",function(){n.states.forResource(n.resource).putValue(n.resource)})},e.prototype.setupAttachmentRemovalSignal=function(e){var n=this;this.attachments=_.clone(this.resource.attachments.elements),this.states.forResource(this.resource).changes$().pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(Yn.a)(function(e){return!!e})).subscribe(function(t){var l=_.differenceBy(n.attachments,t.attachments.elements,function(e){return e.id}).map(function(e){return e.downloadLocation.$href});l.length&&e.model.fire("op:attachment-removed",l),n.attachments=_.clone(t.attachments.elements)})},e.prototype.setLabel=function(){var e=this.textareaSelector.substring(1),n=jQuery("label[for="+e+"]"),t=this.$element.find(".ck-content");t.attr("aria-label",null),t.attr("aria-labelledby",e),n.click(function(){t.focus()})},e.prototype.addUploadedAttachmentsToForm=function(){var e=this;if(this.resource&&this.resource.attachments&&!this.resource.id){var n=this.$attachmentsElement.find("input[type='file']").map(function(e,n){var t=(n.getAttribute("name")||"").match(/attachments\[(\d+)\]\[(?:file|id)\]/);return t?parseInt(t[1]):0}).toArray().sort().pop()||0,t=this.resource.attachments.elements||[];jQuery.each(t,function(t,l){e.$attachmentsElement.append('<input type="hidden" name="attachments['+(n+t+1)+'][id]" value="'+l.id+'">')})}},e}();Tt.DynamicBootstrapper.register({selector:"ckeditor-augmented-textarea",cls:Zo,embeddable:!0});var Jo=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Xo(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"attachments",[["data-allow-uploading","true"],["data-destroy-immediately","false"]],null,null,null,Bo,qo)),l["ɵdid"](2,245760,null,0,Mo,[l.ElementRef,A.a,d,Q],{resource:[0,"resource"]},null)],function(e,n){e(n,2,0,n.component.resource)},null)}function eu(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{ckEditorInstance:0}),(e()(),l["ɵeld"](1,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onInitialized"],[null,"onContentChange"]],function(e,n,t){var l=!0,i=e.component;"onInitialized"===n&&(l=!1!==i.setup(t)&&l);"onContentChange"===n&&(l=!1!==i.markEdited()&&l);return l},Yo,Go)),l["ɵdid"](4,245760,[[1,4]],0,Qo,[l.ElementRef,Vn,A.a,be,Wo],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange"}),(e()(),l["ɵand"](16777216,null,null,1,null,Xo)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.context,t.initialContent),e(n,6,0,t.resource&&t.resource.attachments)},null)}var nu=l["ɵccf"]("ckeditor-augmented-textarea",Zo,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ckeditor-augmented-textarea",[],null,null,null,eu,Jo)),l["ɵdid"](1,245760,null,0,Zo,[l.ElementRef,ge,Q,Vn,A.a,d,be],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),tu=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function lu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function iu(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{selectedPageInput:0}),(e()(),l["ɵeld"](1,0,null,null,25,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,24,"div",[["class","op-modal--modal-container"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,lu)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,16,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,15,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,r=e.component;"submit"===n&&(i=!1!==l["ɵnov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==r.applyAndClose(t)&&i);return i},null,null)),l["ɵdid"](9,16384,null,0,Ht.u,[],null,null),l["ɵdid"](10,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](12,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](13,0,null,null,10,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,8,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-page"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,[[1,0],["selectedPageInput",1]],null,0,"input",[["class","form--select"],["id","selected-page"],["name","selected-page"],["tabindex","2"],["type","text"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedPage=t.target.value)&&l);return l},null,null)),(e()(),l["ɵeld"](20,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,1,"kbd",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["project-identifier:my-wiki-page"])),(e()(),l["ɵeld"](24,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](26,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){e(n,5,0,n.component.showClose)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["ɵnov"](n,12).ngClassUntouched,l["ɵnov"](n,12).ngClassTouched,l["ɵnov"](n,12).ngClassPristine,l["ɵnov"](n,12).ngClassDirty,l["ɵnov"](n,12).ngClassValid,l["ɵnov"](n,12).ngClassInvalid,l["ɵnov"](n,12).ngClassPending),e(n,14,0,t.text.page),e(n,16,0,t.text.page),e(n,19,0,t.selectedPage),e(n,20,0,t.text.hint),e(n,25,0,t.text.button_cancel,t.text.button_cancel),e(n,26,0,t.text.button_save,t.text.button_save)})}var ru=l["ɵccf"]("ng-component",Pt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,iu,tu)),l["ɵdid"](1,4440064,null,0,Pt,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ou=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function uu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function au(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{codeMirrorPane:0}),(e()(),l["ɵeld"](1,0,null,null,32,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,31,"div",[["class","op-modal--modal-container -wide"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,uu)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,23,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,22,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,10).onReset()&&i);return i},null,null)),l["ɵdid"](9,16384,null,0,Ht.u,[],null,null),l["ɵdid"](10,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](12,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](13,0,[[1,0],["codeMirrorPane",1]],null,5,"textarea",[["id","codemirror-element"],["name","codemirror-element"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["ɵnov"](e,14)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,14).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,14)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,14)._compositionEnd(t.target.value)&&i);return i},null,null)),l["ɵdid"](14,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](16,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},null),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](18,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](19,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-language"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,[["selectedLanguage",1]],null,5,"input",[["class","form--select"],["id","selected-language"],["name","selected-language"],["tabindex","2"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,25)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,25).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,25)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,25)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==r.updateLanguage(t)&&i);return i},null,null)),l["ɵdid"](25,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](27,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](29,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](30,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](33,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,16,0,"codemirror-element",t.content);e(n,27,0,"selected-language",t.language)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["ɵnov"](n,12).ngClassUntouched,l["ɵnov"](n,12).ngClassTouched,l["ɵnov"](n,12).ngClassPristine,l["ɵnov"](n,12).ngClassDirty,l["ɵnov"](n,12).ngClassValid,l["ɵnov"](n,12).ngClassInvalid,l["ɵnov"](n,12).ngClassPending),e(n,13,0,l["ɵnov"](n,18).ngClassUntouched,l["ɵnov"](n,18).ngClassTouched,l["ɵnov"](n,18).ngClassPristine,l["ɵnov"](n,18).ngClassDirty,l["ɵnov"](n,18).ngClassValid,l["ɵnov"](n,18).ngClassInvalid,l["ɵnov"](n,18).ngClassPending),e(n,21,0,t.text.language),e(n,24,0,l["ɵnov"](n,29).ngClassUntouched,l["ɵnov"](n,29).ngClassTouched,l["ɵnov"](n,29).ngClassPristine,l["ɵnov"](n,29).ngClassDirty,l["ɵnov"](n,29).ngClassValid,l["ɵnov"](n,29).ngClassInvalid,l["ɵnov"](n,29).ngClassPending),e(n,30,0,t.text.language_hint),e(n,32,0,t.text.button_cancel,t.text.button_cancel),e(n,33,0,t.text.button_save,t.text.button_save)})}var su=l["ɵccf"]("ng-component",St,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,au,ou)),l["ɵdid"](1,4440064,null,0,St,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cu=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function du(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function pu(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{selectedPageInput:0}),(e()(),l["ɵeld"](1,0,null,null,33,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,32,"div",[["class","op-modal--modal-container"],["tabindex","1"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,du)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,24,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,23,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,r=e.component;"submit"===n&&(i=!1!==l["ɵnov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==r.applyAndClose(t)&&i);return i},null,null)),l["ɵdid"](9,16384,null,0,Ht.u,[],null,null),l["ɵdid"](10,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](12,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](13,0,null,null,18,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,4,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-page"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,[[1,0],["selectedPageInput",1]],null,0,"input",[["class","form--select"],["id","selected-page"],["name","selected-page"],["placeholder","my-project:my-page"],["tabindex","2"],["type","text"]],[[8,"value",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedPage=t.target.value)&&l);return l},null,null)),(e()(),l["ɵeld"](20,0,null,null,10,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,[["parentIncludedInput",1]],null,5,"input",[["class","form--check-box"],["id","include-parent"],["name","include-parent"],["tabindex","3"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,25).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,25).onTouched()&&i);"ngModelChange"===n&&(i=!1!==r.updateIncludeParent(t)&&i);return i},null,null)),l["ɵdid"](25,16384,null,0,Ht.b,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.b]),l["ɵdid"](27,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](29,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](30,null,[" "," "])),(e()(),l["ɵeld"](31,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](34,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,27,0,"include-parent",t.selectedIncludeParent)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["ɵnov"](n,12).ngClassUntouched,l["ɵnov"](n,12).ngClassTouched,l["ɵnov"](n,12).ngClassPristine,l["ɵnov"](n,12).ngClassDirty,l["ɵnov"](n,12).ngClassValid,l["ɵnov"](n,12).ngClassInvalid,l["ɵnov"](n,12).ngClassPending),e(n,14,0,t.text.page),e(n,16,0,t.text.page),e(n,19,0,t.selectedPage),e(n,24,0,l["ɵnov"](n,29).ngClassUntouched,l["ɵnov"](n,29).ngClassTouched,l["ɵnov"](n,29).ngClassPristine,l["ɵnov"](n,29).ngClassDirty,l["ɵnov"](n,29).ngClassValid,l["ɵnov"](n,29).ngClassInvalid,l["ɵnov"](n,29).ngClassPending),e(n,30,0,t.text.include_parent),e(n,31,0,t.text.hint),e(n,33,0,t.text.button_cancel,t.text.button_cancel),e(n,34,0,t.text.button_save,t.text.button_save)})}var hu=l["ɵccf"]("ng-component",_t,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,pu,cu)),l["ɵdid"](1,4440064,null,0,_t,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),fu=t("G4s3"),gu=function(){function e(){this.onDestroy=new c.a,this._onSubmitHandlers=[]}return e.prototype.onSubmit=function(){return Promise.all(this._onSubmitHandlers.map(function(e){return e()}))},e.prototype.registerOnSubmit=function(e){this._onSubmitHandlers.push(e)},e.prototype.previewContext=function(e){},e}(),mu=function(){function e(){}return Object.defineProperty(e.prototype,"displayName",{get:function(){return this.schema.name||this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.constructor.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return!!this.schema.required},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){return this.schema.writable&&this.resource.isAttributeEditable(this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDefault",{get:function(){return this.schema.hasDefault},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.schema.options},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return!this.value},Object.defineProperty(e.prototype,"unknownAttribute",{get:function(){return this.isEmpty&&!this.schema},enumerable:!0,configurable:!0}),e}(),vu=function(){function e(){this.changes={}}return e.prototype.contains=function(e){return this.changes.hasOwnProperty(e)},Object.defineProperty(e.prototype,"changed",{get:function(){return _.keys(this.changes)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"all",{get:function(){return this.changes},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.forEach(function(n){return delete e.changes[n]})},e.prototype.clear=function(){this.changes={}},e.prototype.set=function(e,n){this.changes[e]=n},e.prototype.get=function(e){return this.changes[e]},e}(),bu=function(){function e(e,n,t){var l=this;void 0===t&&(t=null),this.pristineResource=e,this.state=n,this.form=t,this.changeset=new vu,this.inFlight=!1,this.projectedResource=new Proxy(this.pristineResource,{get:function(e,n){return l.proxyGet(n)},set:function(e,n,t){return l.setValue(n,t),!0}})}return e.prototype.push=function(){this.state&&this.state.putValue(this)},e.prototype.buildRequestPayload=function(){var e=this;return this.updateForm().then(function(n){return[n,e.buildPayloadFromChanges()]})},e.prototype.getForm=function(){return this.form?Promise.resolve(this.form):this.updateForm()},e.prototype.getSchemaName=function(e){return this.projectedResource.getSchemaName?this.projectedResource.getSchemaName(e):e},e.prototype.updateForm=function(){var e=this,n=this.buildPayloadFromChanges();return this.formPromise||(this.formPromise=this.pristineResource.$links.update(n).then(function(n){return e.formPromise=null,e.form=n,e.setNewDefaults(n),e.push(),n}).catch(function(n){throw e.formPromise=null,e.form=null,n})),this.formPromise},e.prototype.isEmpty=function(){return 0===this.changeset.changed.length},Object.defineProperty(e.prototype,"id",{get:function(){return this.pristineResource.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.pristineResource.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changes",{get:function(){return a.a({},this.changeset.all)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changedAttributes",{get:function(){return this.changeset.changed},enumerable:!0,configurable:!0}),e.prototype.isWritable=function(e){var n=this.schema[e];return n&&n.writable},e.prototype.humanName=function(e){return _.get(this.schema,e+".name",e)},e.prototype.contains=function(e){return this.changeset.contains(e)},e.prototype.proxyGet=function(e){return"schema"===e?this.schema:this.value(e)},e.prototype.value=function(e){return this.changeset.contains(e)?this.changeset.get(e):this.pristineResource[e]},e.prototype.valueExists=function(e){return this.changeset.contains(e)||this.pristineResource.hasOwnProperty(e)},e.prototype.setValue=function(e,n){this.changeset.set(e,n)},e.prototype.clear=function(){this.state&&this.state.clear(),this.changeset.clear(),this.form=null},e.prototype.reset=function(e){this.changeset.reset(e)},e.prototype.isOverridden=function(e){return this.changes.hasOwnProperty(e)},Object.defineProperty(e.prototype,"schema",{get:function(){return(this.form||this.pristineResource).schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimalPayload",{get:function(){return{lockVersion:this.pristineResource.lockVersion,_links:{}}},enumerable:!0,configurable:!0}),e.prototype.applyChanges=function(e){var n=this,t=this.pristineResource.$source;return this.form&&(t=this.form.payload.$source),_.each(this.changeset.all,function(l,i){var r=n.schema[i];"object"==typeof r&&r.writable?t._links[i]?e._links[i]=n.getLinkedValue(l,r):e[i]=l:Object(bn.a)("Trying to write "+i+" but is not writable in schema")}),e},e.prototype.buildPayloadFromChanges=function(){var e;return this.pristineResource.isNew?(e=this.form?this.form.payload.$source:this.pristineResource.$source)._links.attachments=this.pristineResource.attachments.elements.map(function(e){return{href:e.href}}):e=this.minimalPayload,this.applyChanges(e)},e.prototype.getLinkedValue=function(e,n){if(_.isNil(e))return{href:null};var t=(n.type||"").startsWith("[]"),l=!1;if((e.forEach||e.elements)&&(l=!0),l&&t){var i=[];if(e)(e.forEach&&e||e.elements).forEach(function(e){e.href&&i.push({href:e.href})});return i}return{href:_.get(e,"href",null)}},e.prototype.setNewDefaults=function(e){var n=this;_.each(e.payload,function(e,t){var l=n.schema[t];"object"==typeof l&&l.writable&&n.setNewDefaultFor(t,e)})},e.prototype.setNewDefaultFor=function(e,n){this.valueExists(e)||(Object(bn.a)("Taking over default value from form for "+e),this.setValue(e,n))},e}(),yu=new l.InjectionToken("editing-portal--schema"),wu=new l.InjectionToken("editing-portal--handler"),Cu=new l.InjectionToken("editing-portal--changeset"),ku=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this)||this;return a.I18n=n,a.elementRef=t,a.change=l,a.schema=i,a.handler=r,a.cdRef=o,a.injector=u,a.self=a,a.schema=a.schema||a.change.schema[a.name],a.change.state&&a.change.state.values$().pipe(Object(Gn.b)(a)).subscribe(function(e){if(!e.schema[a.name])return r.deactivate(!1);a.change=e,a.schema=e.schema[a.name],a.initialize(),a.cdRef.markForCheck()}),a}return a.d(n,e),n.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement),this.initialize()},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"overflowingSelector",{get:function(){return this.$element?this.$element.closest(".__overflowing_element_container").data("overflowingIdentifier"):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inFlight",{get:function(){return this.handler.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.resource[this.name]},set:function(e){this.resource[this.name]=this.parseValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.change.getSchemaName(this.handler.fieldName)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return"subject"===this.name?this.I18n.t("js.placeholders.subject"):""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"resource",{get:function(){return this.change.projectedResource},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){},n.prototype.parseValue=function(e){return e},n}(mu);function Iu(e,n,t,l){var i=new WeakMap;return i.set(Cu,n),i.set(wu,t),i.set(yu,l),new f.c(e,i)}var ju=function(){function e(){this.fields={},this.classes={}}return e.prototype.fieldType=function(e){return this.fields[e]},e.prototype.getClassFor=function(e,n){void 0===n&&(n="unknown");var t=this.fieldType(e)||this.fieldType(n)||this.defaultFieldType;return this.classes[t]},e.prototype.getSpecificClassFor=function(e,n,t){void 0===t&&(t="unknown");var l=this.fieldType(e+"-"+n)||this.fieldType(e+"-"+t);return l?this.classes[l]:this.getClassFor(n,t)},e.prototype.addFieldType=function(e,n,t){return e.fieldType=n,this.register(e,t),this},e.prototype.addSpecificFieldType=function(e,n,t,l){return n.fieldType=e+"-"+t,l=l.map(function(n){return e+"-"+n}),this.register(n,l),this},e.prototype.extendFieldType=function(e,n){var t=this.classes[e]||this.getClassFor(e);return this.addFieldType(t,e,n)},e.prototype.register=function(e,n){var t=this;void 0===n&&(n=[]);var l=e.fieldType;n.forEach(function(e){return t.fields[e]=l}),this.classes[l]=e},e}(),Ru=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(ju),Pu=function(){function e(e,n,t){this.injector=e,this.editField=n,this.elementRef=t,this.onEditFieldReady=new l.EventEmitter}return e.prototype.ngOnInit=function(){this.editFieldHandler&&this.schemaInput?(this.handler=this.editFieldHandler,this.schema=this.schemaInput,this.change=this.changeInput):(this.handler=this.injector.get(wu),this.schema=this.injector.get(yu),this.change=this.injector.get(Cu)),this.componentClass=this.editField.getClassFor(this.handler.fieldName,this.schema.type),this.fieldInjector=Iu(this.injector,this.change,this.handler,this.schema)},e.prototype.ngOnDestroy=function(){this.onEditFieldReady.complete()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.onEditFieldReady.emit()})},e}(),Su=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function _u(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function xu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-error":0}),(e()(),l["ɵeld"](4,0,null,null,9,"form",[["novalidate",""],["role","form"],["tabindex","-1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,r=e.component;"submit"===n&&(i=!1!==l["ɵnov"](e,6).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,6).onReset()&&i);"submit"===n&&(i=!1!==r.handler.handleUserSubmit()&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Ht.u,[],null,null),l["ɵdid"](6,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](8,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](9,0,null,null,1,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["ɵted"](10,null,[" "," "," "])),(e()(),l["ɵand"](16777216,null,null,2,null,_u)),l["ɵdid"](12,671744,null,0,$t.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["ɵdid"](13,16384,null,0,fu.g,[$t.NgComponentOutlet],null,null)],function(e,n){var t=n.component,i=l["ɵinlineInterpolate"](1,"inline-edit--active-field inplace-edit ",t.handler.fieldName,""),r=e(n,3,0,t.handler.isErrorenous);e(n,2,0,i,r),e(n,12,0,t.componentClass,t.fieldInjector)},function(e,n){var t=n.component;e(n,4,0,l["ɵnov"](n,8).ngClassUntouched,l["ɵnov"](n,8).ngClassTouched,l["ɵnov"](n,8).ngClassPristine,l["ɵnov"](n,8).ngClassDirty,l["ɵnov"](n,8).ngClassValid,l["ɵnov"](n,8).ngClassInvalid,l["ɵnov"](n,8).ngClassPending),e(n,9,0,t.handler.htmlId),e(n,10,0,t.handler.fieldLabel,t.handler.errorMessageOnLabel)})}function Tu(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,xu)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.handler)},null)}var Ou=l["ɵccf"]("edit-form-portal",Pu,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,Tu,Su)),l["ɵdid"](1,4440064,null,0,Pu,[l.Injector,Ru,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{schemaInput:"schemaInput",changeInput:"changeInput",editFieldHandler:"editFieldHandler"},{onEditFieldReady:"onEditFieldReady"},[]),Eu=new l.InjectionToken("display-portal--user"),Du=new l.InjectionToken("display-portal--multi-line");var Fu=function(){function e(e,n,t){this.injector=e,this.cdRef=n,this.elementRef=t,this.users=this.injector.get(Eu),this.multiLines=this.injector.get(Du)}return e.prototype.ngAfterViewInit=function(){this.cdRef.detach()},e}(),Nu=[[".-multi-line[_ngcontent-%COMP%]{display:block;margin-bottom:2px}user-avatar[_ngcontent-%COMP%]{margin-right:5px}"]],Au=l["ɵcrt"]({encapsulation:0,styles:Nu,data:{}});function Vu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[", "]))],null,null)}function Mu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](3,{"-multi-line":0}),(e()(),l["ɵeld"](4,0,null,null,1,"user-avatar",[["data-class-list","avatar-medium"]],null,null,null,Qi,Bi)),l["ɵdid"](5,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],{user:[0,"user"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vu)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.multiLines);e(n,2,0,l),e(n,5,0,n.context.$implicit),e(n,8,0,!t.multiLines&&!n.context.last)},function(e,n){e(n,6,0,n.context.$implicit.name)})}function qu(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,Mu)),l["ɵdid"](1,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,n.component.users)},null)}var Lu=l["ɵccf"]("user-field-portal",Fu,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-field-portal",[],null,null,null,qu,Au)),l["ɵdid"](1,4243456,null,0,Fu,[l.Injector,l.ChangeDetectorRef,l.ElementRef],null,null)],null,null)},{userResources:"userResources",multiLines:"multiLines"},{},[]),$u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.updateValue=function(e){this.value=e,this.handler.handleUserSubmit()},n}(ku),Hu=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Bu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"input",[["class","inline-edit--field inline-edit--boolean-field"],["type","checkbox"]],[[1,"aria-required",0],[8,"checked",0],[8,"disabled",0],[8,"id",0]],[[null,"change"],[null,"keydown"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateValue(!i.value)&&l);"keydown"===n&&(l=!1!==i.handler.handleUserKeydown(t)&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.required,t.value,t.inFlight,t.handler.htmlId)})}var zu=l["ɵccf"]("ng-component",$u,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Bu,Hu)),l["ɵdid"](1,245760,null,0,$u,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Wu=function(){function e(e,n,t,l,i){this.ConfigurationService=e,this.timezoneService=n,this.datepickerElem=t,this.date=l,this.options=i,this.datepickerFormat="yy-mm-dd",this.datepickerCont=jQuery(this.datepickerElem),this.datepickerInstance=null,this.initialize(i)}return e.prototype.initialize=function(e){var n=this.ConfigurationService.startOfWeekPresent()?this.ConfigurationService.startOfWeek():jQuery.datepicker._defaults.firstDay,t=_.extend({},e,{firstDay:n,showWeeks:!0,changeMonth:!0,changeYear:!0,dateFormat:this.datepickerFormat,defaultDate:this.timezoneService.formattedISODate(this.date),showButtonPanel:!0});this.datepickerInstance=this.datepickerCont.datepicker(t),this.datepickerCont.attr("autocomplete","off")},e.prototype.clear=function(){this.datepickerInstance.datepicker("setDate",null)},e.prototype.destroy=function(){this.hide(),this.datepickerInstance.datepicker("destroy")},e.prototype.hide=function(){this.datepickerInstance.datepicker("hide"),this.datepickerCont.scrollParent().off("scroll")},e.prototype.show=function(){this.datepickerInstance.datepicker("show"),this.hideDuringScroll()},e.prototype.reshow=function(){this.datepickerInstance.datepicker("show")},e.prototype.hideDuringScroll=function(){var e=this,n=null;this.datepickerCont.scrollParent().scroll(function(){e.datepickerInstance.datepicker("hide"),n&&clearTimeout(n),n=setTimeout(function(){e.visibleAndActive()&&e.datepickerInstance.datepicker("show")},50)})},e.prototype.visibleAndActive=function(){var e=this.datepickerCont;try{return document.elementFromPoint(e.offset().left,e.offset().top)===e[0]&&document.activeElement===e[0]}catch(n){return console.error("Failed to test visibleAndActive "+n),!1}},e}(),Qu=function(){function e(e,n,t){this.elementRef=e,this.ConfigurationService=n,this.timezoneService=t,this.onChange=new l.EventEmitter,this.onInputChange=new l.EventEmitter,this.onClose=new l.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.input=this.$element.find("input"),this.input.on("change",function(){return e.onInputChange.emit(e.currentValue())}),this.setup()},e.prototype.ngOnDestroy=function(){this.datePickerInstance&&this.datePickerInstance.destroy()},e.prototype.setup=function(){var e=this;this.input.focus(function(){return e.showDatePicker()}),this.input.keydown(function(n){e.isEmpty()&&e.datePickerInstance.clear()})},e.prototype.isEmpty=function(){return""===this.currentValue().trim()},e.prototype.currentValue=function(){return this.input.val()},e.prototype.showDatePicker=function(){var e,n=this,t={onSelect:function(e){n.datePickerInstance.hide();var t=e;n.isEmpty()&&(t=null),n.input.val(t),n.input.trigger("change"),n.onChange.emit(t)},onClose:function(){return n.onClose.emit()}};e=this.isEmpty&&this.initialDate?this.timezoneService.parseISODate(this.initialDate).toDate():this.currentValue(),this.datePickerInstance=new Wu(this.ConfigurationService,this.timezoneService,this.input,e,t),this.datePickerInstance.show()},e}(),Uu=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Gu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[],null,null,null,null,null)),l["ɵncd"](null,0)],null,null)}l["ɵccf"]("op-date-picker",Qu,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-date-picker",[],null,null,null,Gu,Uu)),l["ɵdid"](1,245760,null,0,Qu,[l.ElementRef,be,nl],null,null)],function(e,n){e(n,1,0)},null)},{initialDate:"initialDate"},{onChange:"onChange",onInputChange:"onInputChange",onClose:"onClose"},["*"]);var Ku=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.injector.get(nl),n}return a.d(n,e),n.prototype.onValueSelected=function(e){this.value=this.parser(e),this.handler.handleUserSubmit()},n.prototype.parser=function(e){return j(e,"YYYY-MM-DD",!0).isValid()?e:null},n.prototype.formatter=function(e){if(j(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},Object.defineProperty(n.prototype,"defaultDate",{get:function(){return"dueDate"===this.name?this.resource.startDate:""},enumerable:!0,configurable:!0}),n}(ku),Yu=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Zu(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"op-date-picker",[["tabindex","-1"]],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.onValueSelected(t)&&l);return l},Gu,Uu)),l["ɵdid"](1,245760,null,0,Qu,[l.ElementRef,be,nl],{initialDate:[0,"initialDate"]},{onChange:"onChange"}),(e()(),l["ɵeld"](2,0,null,0,5,"input",[["class","inline-edit--field"],["type","text"]],[[1,"required",0],[1,"placeholder",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,3)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,3).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,3)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,3)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.value=r.parser(t))&&i);"keydown"===n&&(i=!1!==r.handler.handleUserKeydown(t)&&i);return i},null,null)),l["ɵdid"](3,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](5,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](7,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,1,0,t.defaultDate),e(n,5,0,t.inFlight,t.formatter(t.value))},function(e,n){var t=n.component;e(n,2,0,t.required,t.placeholder,t.handler.htmlId,l["ɵnov"](n,7).ngClassUntouched,l["ɵnov"](n,7).ngClassTouched,l["ɵnov"](n,7).ngClassPristine,l["ɵnov"](n,7).ngClassDirty,l["ɵnov"](n,7).ngClassValid,l["ɵnov"](n,7).ngClassInvalid,l["ɵnov"](n,7).ngClassPending)})}var Ju=l["ɵccf"]("ng-component",Ku,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Zu,Yu)),l["ɵdid"](1,245760,null,0,Ku,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Xu=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.TimezoneService=n.injector.get(nl),n}return a.d(n,e),n.prototype.parser=function(e){if(!isNaN(e)){var n=parseFloat(e);return j.duration(n,"hours")}return e},n.prototype.formatter=function(e){return Number(j.duration(e).asHours().toFixed(2))},n.prototype.parseValue=function(e){return null===e?null:e.toISOString()},n}(ku),ea=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function na(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"input",[["class","inline-edit--field"],["step","0.01"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.value=r.parser(t))&&i);"keydown"===n&&(i=!1!==r.handler.handleUserKeydown(t)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](2,16384,null,0,Ht.n,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.n]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.formatter(t.value))},function(e,n){var t=n.component;e(n,0,0,t.required,t.required,t.handler.htmlId,l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending)})}var ta=l["ɵccf"]("ng-component",Xu,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,na,ea)),l["ɵdid"](1,245760,null,0,Xu,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),la=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.locale=I18n.locale,n}return a.d(n,e),n}(ku),ia=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ra(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"input",[["class","inline-edit--field"],["step","any"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[1,"lang",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focusout"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.value=t)&&i);"keydown"===n&&(i=!1!==r.handler.handleUserKeydown(t)&&i);"focusout"===n&&(i=!1!==r.handler.onFocusOut()&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](2,16384,null,0,Ht.n,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.n]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.value)},function(e,n){var t=n.component;e(n,0,1,[t.required,t.required,t.locale,t.handler.htmlId,l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending])})}var oa=l["ɵccf"]("ng-component",la,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,ra,ia)),l["ɵdid"](1,245760,null,0,la,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ua=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.locale=I18n.locale,n}return a.d(n,e),n}(ku),aa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function sa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"input",[["class","inline-edit--field"],["type","number"]],[[1,"aria-required",0],[1,"required",0],[1,"lang",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focusout"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.value=t)&&i);"keydown"===n&&(i=!1!==r.handler.handleUserKeydown(t)&&i);"focusout"===n&&(i=!1!==r.handler.onFocusOut()&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](2,16384,null,0,Ht.n,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.n]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,4,0,t.inFlight,t.value)},function(e,n){var t=n.component;e(n,0,1,[t.required,t.required,t.locale,t.handler.htmlId,l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending])})}var ca=l["ɵccf"]("ng-component",ua,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,sa,aa)),l["ɵdid"](1,245760,null,0,ua,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),da=function(){function e(){this.onSave=new l.EventEmitter,this.onCancel=new l.EventEmitter}return e.prototype.save=function(){this.onSave.emit()},e.prototype.cancel=function(){this.onCancel.emit()},e}(),pa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ha(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","inplace-edit--controls"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"accessible-by-keyboard",[["class","inplace-edit--control inplace-edit--control--save"]],[[1,"disabled",0]],[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.save()&&l);return l},jl,Il)),l["ɵdid"](2,49152,null,0,kl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["ɵeld"](3,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-checkmark"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["ɵeld"](5,0,null,null,3,"accessible-by-keyboard",[["class","inplace-edit--control inplace-edit--control--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.cancel()&&l);return l},jl,Il)),l["ɵdid"](6,49152,null,0,kl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["ɵeld"](7,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close"]],null,null,null,hl,dl)),l["ɵdid"](8,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,2,0,t.saveTitle);e(n,4,0,"icon-checkmark",t.saveTitle),e(n,6,0,t.cancelTitle);e(n,8,0,"icon-close",t.cancelTitle)},function(e,n){var t=n.component;e(n,1,0,t.field.required&&t.field.isEmpty()||void 0)})}function fa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","inplace-edit--dashboard"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ha)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.field.handler.active)},null)}l["ɵccf"]("edit-field-controls",da,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-field-controls",[],null,null,null,fa,pa)),l["ɵdid"](1,49152,null,0,da,[],null,null)],null,null)},{cancelTitle:"cancelTitle",saveTitle:"saveTitle",field:"fieldController"},{onSave:"onSave",onCancel:"onCancel"},[]);var ga=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.field=n,n.initializationError=!1,n.isPreview=!1,n.previewHtml="",n.text={},n.editorType=n.resource.getEditorTypeFor(n.field.name),n}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.handler.registerOnSubmit(function(){return n.getCurrentValue()}),this.text={attachmentLabel:this.I18n.t("js.label_formattable_attachment_hint"),save:this.I18n.t("js.inplace.button_save",{attribute:this.schema.name}),cancel:this.I18n.t("js.inplace.button_cancel",{attribute:this.schema.name})}},n.prototype.onCkeditorSetup=function(e){this.resource.isNew||setTimeout(function(){return e.editing.view.focus()})},n.prototype.getCurrentValue=function(){var e=this;return this.editor.getTransformedContent().then(function(n){e.rawValue=n})},n.prototype.onContentChange=function(e){this.rawValue!==e&&(this.rawValue=e)},n.prototype.handleUserSubmit=function(){var e=this;return this.getCurrentValue().then(function(){e.handler.handleUserSubmit()}),!1},Object.defineProperty(n.prototype,"ckEditorContext",{get:function(){return{resource:this.resource,macros:"none",previewContext:this.previewContext,options:{rtl:this.schema.options&&this.schema.options.rtl}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"previewContext",{get:function(){return this.handler.previewContext(this.resource)},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this.editor&&this.editor.initialized&&(this.editor.content=this.rawValue,this.cdRef.markForCheck())},Object.defineProperty(n.prototype,"rawValue",{get:function(){return this.value&&this.value.raw?this.value.raw:""},set:function(e){this.value={raw:e}},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return!(this.value&&this.value.raw)},n.prototype.initialize=function(){this.resource.isNew&&this.editor&&this.reset()},n}(ku),ma=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function va(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},fa,pa)),l["ɵdid"](1,49152,null,0,da,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.field)},null)}function ba(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{editor:0}),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper op-ckeditor-element"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onContentChange"],[null,"onInitializationFailed"],[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onContentChange"===n&&(l=!1!==i.onContentChange(t)&&l);"onInitializationFailed"===n&&(l=!1!=(i.initializationError=!0)&&l);"onInitialized"===n&&(l=!1!==i.onCkeditorSetup(t)&&l);return l},Yo,Go)),l["ɵdid"](4,245760,[[1,4]],0,Qo,[l.ElementRef,Vn,A.a,be,Wo],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"}),(e()(),l["ɵand"](16777216,null,null,1,null,va)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.ckEditorContext,t.rawValue),e(n,6,0,!(t.handler.inEditMode||t.initializationError))},null)}var ya=l["ɵccf"]("ng-component",ga,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,ba,ma)),l["ɵdid"](1,245760,null,0,ga,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),wa=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.I18n=n.injector.get(A.a),n.availableOptions=[],n.text={requiredPlaceholder:n.I18n.t("js.placeholders.selection"),placeholder:n.I18n.t("js.placeholders.default"),save:n.I18n.t("js.inplace.button_save",{attribute:n.schema.name}),cancel:n.I18n.t("js.inplace.button_cancel",{attribute:n.schema.name})},n.appendTo=null,n.hiddenOverflowContainer=".__hidden_overflow_container",n.currentValueInvalid=!1,n.requestFocus=!1,n}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;this.nullOption={name:this.text.placeholder,$href:null},this.handler.$onUserActivate.pipe(Object(Gn.b)(this)).subscribe(function(){n.requestFocus=0===n.availableOptions.length,n.requestFocus||n.openAutocompleteSelectField()}),e.prototype.ngOnInit.call(this),this.appendTo=this.overflowingSelector},Object.defineProperty(n.prototype,"value",{get:function(){var e=this.resource[this.name];return e?e[0]:e},enumerable:!0,configurable:!0}),n.prototype.buildSelectedOption=function(){var e=this,n=this.resource[this.name];return n?n.map(function(n){return e.findValueOption(n)}):[]},Object.defineProperty(n.prototype,"selectedOption",{get:function(){return this._selectedOption},set:function(e){var n=this;this._selectedOption=e;this.resource[this.name]=_.castArray(e).map(function(e){return function(e){var t=_.find(n.availableOptions,function(n){return n.$href===e.$href})||n.nullOption;return t&&""===t.$href&&(t.$href=null),t}(e)})},enumerable:!0,configurable:!0}),n.prototype.onOpen=function(){var e=this;jQuery(this.hiddenOverflowContainer).one("scroll",function(){e.ngSelectComponent.close()})},n.prototype.onClose=function(){},n.prototype.repositionDropdown=function(){var e=this;this.ngSelectComponent&&this.ngSelectComponent.dropdownPanel&&setTimeout(function(){return e.ngSelectComponent.dropdownPanel.adjustPosition()},0)},n.prototype.openAutocompleteSelectField=function(){var e=this;window.setTimeout(function(){e.ngSelectComponent.open()},0)},n.prototype.findValueOption=function(e){var n;return e&&(n=_.find(this.valueOptions,function(n){return n.$href===e.$href})),n||this.nullOption},n.prototype.setValues=function(e,n){void 0===n&&(n=!1),n&&e.sort(function(e,n){var t=e.name.toLowerCase(),l=n.name.toLowerCase();return t<l?-1:t>l?1:0}),this.availableOptions=e||[],this.valueOptions=this.availableOptions.map(function(e){return{name:e.name,$href:e.$href}}),this._selectedOption=this.buildSelectedOption(),this.checkCurrentValueValidity(),this.availableOptions.length>0&&this.requestFocus&&(this.openAutocompleteSelectField(),this.requestFocus=!1)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.loadValues()},n.prototype.loadValues=function(){var e=this,n=this.schema.allowedValues;if(Array.isArray(n))this.setValues(n);else{if(this.schema.allowedValues)return this.schema.allowedValues.$load().then(function(n){n.count>0&&"Project"===n.elements[0]._type?e.setValues(n.elements,!0):e.setValues(n.elements)});this.setValues([])}return Promise.resolve()},n.prototype.checkCurrentValueValidity=function(){var e=this;this.value?this.currentValueInvalid=!_.some(this.value,function(n){return _.some(e.availableOptions,function(e){return e.$href===n.$href})}):this.currentValueInvalid=!!this.schema.required},n}(ku),Ca=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ka(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handler.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},fa,pa)),l["ɵdid"](1,49152,null,0,da,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.self)},null)}function Ia(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,25,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,22,"ng-select",[["bindLabel","name"],["class","ng-select"],["role","listbox"]],[[8,"id",0],[1,"required",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"open"],[null,"close"],[null,"add"],[null,"remove"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,8).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.selectedOption=t)&&i);"keydown"===n&&(i=!1!==r.handler.handleUserKeydown(t,!0)&&i);"open"===n&&(i=!1!==r.onOpen()&&i);"close"===n&&(i=!1!==r.onClose()&&i);"add"===n&&(i=!1!==r.repositionDropdown()&&i);"remove"===n&&(i=!1!==r.repositionDropdown()&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](6,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵdid"](8,4964352,[[1,4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],dropdownPosition:[1,"dropdownPosition"],appendTo:[2,"appendTo"],closeOnSelect:[3,"closeOnSelect"],hideSelected:[4,"hideSelected"],virtualScroll:[5,"virtualScroll"],multiple:[6,"multiple"],clearable:[7,"clearable"],items:[8,"items"],clearSearchOnAdd:[9,"clearSearchOnAdd"]},{openEvent:"open",closeEvent:"close",addEvent:"add",removeEvent:"remove"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](22,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](24,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,ka)),l["ɵdid"](26,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,"inline-edit--field -multi-select"),e(n,6,0,t.required);e(n,8,0,"name","top",t.appendTo,!1,!0,!0,!0,!t.required,t.valueOptions,!0),e(n,22,0,t.inFlight,t.selectedOption),e(n,26,0,!t.handler.inEditMode)},function(e,n){e(n,2,1,[n.component.handler.htmlId,l["ɵnov"](n,6).required?"":null,!l["ɵnov"](n,8).multiple,l["ɵnov"](n,8).typeahead,l["ɵnov"](n,8).multiple,l["ɵnov"](n,8).addTag,l["ɵnov"](n,8).searchable,l["ɵnov"](n,8).clearable,l["ɵnov"](n,8).isOpen,l["ɵnov"](n,8).disabled,l["ɵnov"](n,8).filtered,l["ɵnov"](n,24).ngClassUntouched,l["ɵnov"](n,24).ngClassTouched,l["ɵnov"](n,24).ngClassPristine,l["ɵnov"](n,24).ngClassDirty,l["ɵnov"](n,24).ngClassValid,l["ɵnov"](n,24).ngClassInvalid,l["ɵnov"](n,24).ngClassPending])})}var ja=l["ɵccf"]("ng-component",wa,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Ia,Ca)),l["ɵdid"](1,245760,null,0,wa,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ra=t("g4QF"),Pa=function(){function e(){this.config={user:"name",project:"name"}}return e.prototype.sort=function(e,n){if(0===e.length)return e;var t=n||e[0]._type;if(!t)return e;var l=this.sortingProperty(t);return l?_.sortBy(e,function(e){return e[l].toLowerCase()}):e},e.prototype.sortingProperty=function(e){return e=e.toLowerCase().replace(/^\[\]/,""),this.config[e]},e.prototype.hasSortingProperty=function(e){return void 0!==this.sortingProperty(e)},e}(),Sa=function(){function e(){this._fields=[]}return e.prototype.register=function(e,n){this._fields.push({attribute:n,component:e})},e.prototype.getAutocompleterOfAttribute=function(e){var n=_.find(this._fields,function(n){return n.attribute===e});return n?n.component:void 0},e}(),_a=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.selectAutocompleterRegister=n.injector.get(Sa),n.appendTo=null,n.hiddenOverflowContainer=".__hidden_overflow_container",n.referenceOutputs={onCreate:function(e){return n.onCreate(e)},onChange:function(e){return n.onChange(e)},onKeydown:function(e){return n.handler.handleUserKeydown(e,!0)},onOpen:function(){return n.onOpen()},onClose:function(){return n.onClose()},onAfterViewInit:function(e){return n._autocompleterComponent=e}},n}return a.d(n,e),n.prototype.initialize=function(){var e=this;this.halSorting=this.injector.get(Pa),this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default")};var n=this.loadValues();this.handler.$onUserActivate.pipe(Object(Gn.b)(this)).subscribe(function(){n.then(function(){e._autocompleterComponent.openDirectly=!0})})},n.prototype.autocompleterComponent=function(){var e=this.schema.type;return this.selectAutocompleterRegister.getAutocompleterOfAttribute(e)||zt},n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.appendTo=this.overflowingSelector},Object.defineProperty(n.prototype,"selectedOption",{get:function(){var e=this.value?this.value.$href:null;return _.find(this.valueOptions,function(n){return n.$href===e})},set:function(e){var n=_.find(this.availableOptions,function(n){return n.$href===e.$href});n&&""===n.$href&&(n.$href=null),this.value=n},enumerable:!0,configurable:!0}),n.prototype.setValues=function(e){this.availableOptions=this.halSorting.sort(e),this.addEmptyOption(),this.valueOptions=this.availableOptions.map(function(e){return{name:e.name,$href:e.$href}})},n.prototype.loadValues=function(){var e=this,n=this.schema.allowedValues;if(Array.isArray(n))this.setValues(n);else{if(n)return n.$load(!1).then(function(n){e.setValues(n.elements)});this.setValues([])}return Promise.resolve()},n.prototype.addValue=function(e){this.availableOptions.push(e),this.valueOptions.push({name:e.name,$href:e.$href})},Object.defineProperty(n.prototype,"currentValueInvalid",{get:function(){var e=this;return!!(this.value&&!_.some(this.availableOptions,function(n){return n.$href===e.value.$href})||!this.value&&this.schema.required)},enumerable:!0,configurable:!0}),n.prototype.onCreate=function(e){this.addValue(e),this.selectedOption={name:e.name,$href:e.$href},this.handler.handleUserSubmit()},n.prototype.onOpen=function(){var e=this;jQuery(this.hiddenOverflowContainer).one("scroll",function(){e._autocompleterComponent.closeSelect()})},n.prototype.onClose=function(){},n.prototype.onChange=function(e){if(void 0!==e)return this.selectedOption={name:e.name,$href:e.$href},void this.handler.handleUserSubmit();var n=this.getEmptyOption();n&&(this.selectedOption=n,this.handler.handleUserSubmit())},n.prototype.addEmptyOption=function(){this.schema.required||void 0===this.getEmptyOption()&&this.availableOptions.unshift({name:this.text.placeholder,$href:""})},n.prototype.getEmptyOption=function(){var e=this;return _.find(this.availableOptions,function(n){return n.name===e.text.placeholder})},n}(ku),xa=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ta(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](1,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](3,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),l["ɵpod"](4,{availableValues:0,appendTo:1,model:2,required:3,disabled:4,id:5,finishedLoading:6,classes:7})],function(e,n){var t=n.component;e(n,1,0,t.autocompleterComponent());var l=e(n,4,0,t.valueOptions,t.appendTo,t.selectedOption?t.selectedOption:"",t.required,t.inFlight,t.handler.htmlId,!0,"inline-edit--field "+t.handler.fieldName);e(n,3,0,l,t.referenceOutputs)},null)}var Oa=l["ɵccf"]("ng-component",_a,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Ta,xa)),l["ɵdid"](1,245760,null,0,_a,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Ea=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.shouldFocus="subject"===n.name,n}return a.d(n,e),n}(ku),Da=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Fa(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"input",[["class","inline-edit--field"],["type","text"]],[[1,"aria-required",0],[1,"required",0],[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"focusout"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.value=t)&&i);"keydown"===n&&(i=!1!==r.handler.handleUserKeydown(t)&&i);"focusout"===n&&(i=!1!==r.handler.onFocusOut()&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](3,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](5,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](6,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,3,0,t.inFlight,t.value),e(n,6,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,t.required,t.required,t.handler.htmlId,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending)})}var Na=l["ɵccf"]("ng-component",Ea,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Fa,Da)),l["ɵdid"](1,245760,null,0,Ea,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Aa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(ku),Va=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ma(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"input",[["class","inline-edit--field"],["disabled",""],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](3,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},null),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](5,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){e(n,3,0,"",n.component.value)},function(e,n){e(n,0,0,n.component.handler.htmlId,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending)})}var qa,La=l["ɵccf"]("ng-component",Aa,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Ma,Va)),l["ɵdid"](1,245760,null,0,Aa,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),$a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.getField=function(e,n,t,l){var i=new(this.getSpecificClassFor(e._type,n,t.type))(n,l);return i.apply(e,t),i},n}(ju),Ha=function(e){function n(n,t){var l=e.call(this)||this;return l.name=n,l.context=t,l.mode=null,l.activeChange=null,l.I18n=l.$injector.get(A.a),l.texts={empty:l.I18n.t("js.label_no_value"),placeholder:l.I18n.t("js.placeholders.default")},l}return a.d(n,e),n.prototype.apply=function(e,n){this.resource=e,this.schema=n},Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"$injector",{get:function(){return this.context.injector},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.activeChange?this.activeChange.projectedResource[this.name]:this.attribute:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"attribute",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.constructor.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return"-"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.schema.name||this.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.isFormattable?null:this.valueString},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n,t){void 0===t&&(t={}),e.textContent=n},n.prototype.renderEmpty=function(e){var n=document.createElement("div");n.setAttribute("title",this.texts.empty),n.textContent=this.texts.placeholder,n.classList.add("custom-option","-empty"),e.appendChild(n)},n}(mu),Ba=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.isEmpty=function(){return _.isEmpty(this.value)},Object.defineProperty(n.prototype,"value",{get:function(){var e=this.resource[this.name];return this.schema&&e?e.elements?e.elements.map(function(e){return e.name}):e.map?e.map(function(e){return e.name}):e.name?[e.name]:["error: "+JSON.stringify(e)]:[]},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this.value;e.innerHTML="",e.setAttribute("title",t.join(", ")),0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){var t=document.createDocumentFragment(),l=this.optionDiv(this.valueAbridged(e));if(t.appendChild(l),e.length>2){var i=this.optionDiv(e.length.toString(),"badge","-secondary");t.appendChild(i)}n.appendChild(t)},n.prototype.optionDiv=function(e){for(var n,t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var i=document.createElement("div"),r=document.createElement("span");return i.classList.add("custom-option"),(n=r.classList).add.apply(n,t),r.textContent=e,i.appendChild(r),i},n.prototype.valueAbridged=function(e){var n=_.take(e,2);return e.length>2&&n.push("... "),n.join(", ")},n}(Ha),za=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.render=function(e,n){var t=this.value;e.setAttribute("title",n),e.textContent=n,e.innerHTML="",0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){e.forEach(function(e){var t=document.createElement("div");t.classList.add("custom-option","-multiple-lines"),t.setAttribute("title",e),t.textContent=e,n.appendChild(t)})},n}(Ba),Wa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.resource[this.name]||0:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percentLabel",{get:function(){return this.roundedProgress+"%"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"roundedProgress",{get:function(){return Math.round(Number(this.value))||0},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){e.setAttribute("title",n),e.innerHTML='\n      <span>\n        <span style="width: 80px" class="progress-bar">\n          <span style="width: '+this.roundedProgress+'%" class="inner-progress closed"></span>\n          <span style="width: 0%" class="inner-progress done"></span>\n        </span>\n        <span class="progress-bar-legend">'+this.percentLabel+"</span>\n      </span>\n    "},n}(Ha),Qa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.render=function(e,n){var t=this.percentLabel;e.setAttribute("title",t),e.innerHTML="",e.textContent=t},n}(Wa),Ua=function(){function e(){this.portalCallbacks=[]}return e.prototype.add=function(e){this.portalCallbacks.push(e)},e.prototype.clear=function(){this.portalCallbacks.forEach(function(e){return e()}),this.portalCallbacks=[]},e}(),Ga=function(){function e(e,n,t){this.appRef=e,this.componentFactoryResolver=n,this.injector=t}return e.prototype.create=function(e,n,t){void 0===t&&(t=!1);var l=new f.b(e,this.componentFactoryResolver,this.appRef,this.injector),i=function(e,n,t){var l=new WeakMap;return l.set(Eu,n),l.set(Du,t),new f.c(e,l)}(this.injector,n,t),r=new f.a(Fu,null,i);return setTimeout(function(){return l.attachComponentPortal(r)}),l},e}(),Ka=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userDisplayPortal=n.$injector.get(Ga),n.portalCleanup=n.$injector.get(Ua),n}return a.d(n,e),n.prototype.render=function(e,n){var t=this.attribute;e.setAttribute("title",n),e.textContent=n,e.innerHTML="",0===t.length?this.renderEmpty(e):this.renderValues(t,e)},n.prototype.renderValues=function(e,n){var t=this;this.outlet=this.userDisplayPortal.create(n,e,!0),this.portalCleanup.add(function(){return t.outlet.dispose()})},n}(Ba),Ya="inline-edit--display-field",Za="inline-edit--container",Ja=function(){function e(e,n,t){void 0===t&&(t={}),this.injector=e,this.container=n,this.options=t,this.displayFieldService=this.injector.get($a),this.I18n=this.injector.get(A.a),this.fieldCache={}}return e.prototype.render=function(e,n,t,l){var i=this.renderFieldValue(e,n,t,l),r=i[0],o=i[1];return null===r?o:(this.setSpanAttributes(o,r,n,e),o)},e.prototype.renderFieldValue=function(e,n,t,l){var i=document.createElement("span"),r=this.getSchemaName(e,t,n),o=e.schema[r];if(!o)return[null,i];var u=this.getField(e,o,r,t);u.render(i,this.getText(u,o,l),o.options);var a=u.title;return a&&i.setAttribute("title",a),i.setAttribute("aria-label",this.getAriaLabel(u,e)),[u,i]},e.prototype.getField=function(e,n,t,l){var i=this.fieldCache[t];return i||(i=this.fieldCache[t]=this.getFieldForCurrentContext(e,t,n)),i.apply(e,n),i.activeChange=l,i},e.prototype.getFieldForCurrentContext=function(e,n,t){var l={container:this.container,injector:this.injector,options:this.options},i=["[]CustomOption"].indexOf(t.type)>=0;if("single-view"===this.container&&i)return new za(n,l);var r=["[]User"].indexOf(t.type)>=0;return"single-view"===this.container&&r?new Ka(n,l):"timeline"===this.container&&"percentageDone"===n?new Qa(n,l):this.displayFieldService.getField(e,n,t,l)},e.prototype.getText=function(e,n,t){return e.isEmpty()?t||this.getDefaultPlaceholder(n):e.valueString},e.prototype.setSpanAttributes=function(e,n,t,l){e.classList.add(Ya,t),e.dataset.fieldName=t,e.setAttribute("tabindex","id"===t?"-1":"0"),n.required&&e.classList.add("-required"),n.isEmpty()&&e.classList.add("-placeholder"),n.writable?(e.classList.add("-editable"),e.setAttribute("role","button")):e.classList.add("-read-only")},e.prototype.getAriaLabel=function(e,n){var t,l=this.getLabelContent(e);if(e.isFormattable&&!e.isEmpty())try{t=_.escape(jQuery("<div>"+l+"</div>").text())}catch(i){console.error("Failed to parse formattable labelContent"),t="Label for "+e.displayName}else t=l;return e.writable&&n.isAttributeEditable(e.name)?this.I18n.t("js.inplace.button_edit",{attribute:e.displayName+" "+t}):e.displayName+" "+t},e.prototype.getLabelContent=function(e){return e.isEmpty()?this.I18n.t("js.inplace.null_value_label"):e.valueString},e.prototype.getSchemaName=function(e,n,t){return n?n.getSchemaName(t):e.getSchemaName?e.getSchemaName(t):t},e.prototype.getDefaultPlaceholder=function(e){return"Formattable"===e.type?this.I18n.t("js.work_packages.placeholders.formattable",{name:e.name}):"-"},e}(),Xa=function(e){function n(){var n=e.call(this)||this;return n.name="Changesets",n.changesets=Object(s.g)(),n.initializeMembers(),n}return a.d(n,e),n}(s.a),es=function(e,n){this.wasNew=!1,this.id=n.id.toString(),this.wasNew=e.pristineResource.isNew,this.resource=n,this.changes=e.changes},ns=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.hook=t,l.comittedChanges=new c.a,l.stateGroup=new Xa,l}return a.d(n,e),n.prototype.save=function(e){return a.b(this,void 0,void 0,function(){var n,t,l,i,r;return a.e(this,function(o){switch(o.label){case 0:return e.inFlight=!0,[4,e.buildRequestPayload()];case 1:if(n=o.sent(),t=n[0],l=n[1],null!==(i=t.getErrors()))throw e.inFlight=!1,i;return[4,e.pristineResource.$links.updateImmediately(l)];case 2:return(r=o.sent()).retainFrom(e.pristineResource),this.onSaved(r),e.inFlight=!1,[2,this.complete(e,r)]}})})},n.prototype.complete=function(e,n){var t=new es(e,n);return this.comittedChanges.next(t),this.reset(e),t},n.prototype.reset=function(e){e.clear(),this.clearSome(e.href)},n.prototype.typedState=function(e){return this.multiState.get(e.href)},n.prototype.edit=function(e,n){var t=this.multiState.get(e.href),l=this.newChangeset(e,t,n);return t.putValue(l),l},n.prototype.newChangeset=function(e,n,t){return new(this.hook.call("halResourceChangesetClass",e).pop()||bu)(e,n,t)},n.prototype.changeFor=function(e){var n=this.multiState.get(e.href),t=e;e.state&&(t=e.state.getValueOr(e));var l=n.value;return l&&!l.isEmpty()?l:!l||t.hasOwnProperty("lockVersion")&&l.pristineResource.lockVersion<t.lockVersion?this.edit(t):l},n.prototype.temporaryEditResource=function(e){var n=Object(s.b)(e.state,this.typedState(e));return Object(s.d)(n,function(e){return e.pipe(Object(v.a)(function(e){var n=e[0],t=e[1];return n&&t&&!t.isEmpty()?t.projectedResource:n}))})},n.prototype.stopEditing=function(e){this.multiState.get(e.href).clear()},n.prototype.load=function(e){return Promise.reject("Loading not applicable for changesets.")},n.prototype.onSaved=function(e){e.state&&e.push(e)},n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)}))},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.stateGroup.changesets},enumerable:!0,configurable:!0}),n}(mn);!function(e){e.hasSelectionWithin=function(e){try{var n=window.getSelection(),t=n.toString().length>0,l=e.contains(n.anchorNode);return t&&l}catch(i){return console.error("Failed to test whether in selection ",i),!1}}}(qa||(qa={}));var ts,ls,is=function(){function e(e,n,t,l,i){var r=this;this.componentFactoryResolver=e,this.FocusHelper=n,this.appRef=t,this.$transitions=l,this.injector=i,this.active=null,this.isOpening=!1;var o=this.portalHostElement=document.createElement("div");o.classList.add("op-context-menu--overlay"),document.body.appendChild(o),this.bodyPortalHost=new f.b(o,this.componentFactoryResolver,this.appRef,this.injector),l.onStart({},function(){return r.close()}),jQuery(window).on("keydown",function(e){return r.active&&e.which===wl.a.ESCAPE&&r.close(),!0}),jQuery(window).on("click",function(e){r.active&&2!==e.button&&!r.portalHostElement.contains(e.target)&&r.close()})}return e.prototype.show=function(e,n,t){var l=this;void 0===t&&(t=ki),this.close(),this.isOpening=!0;var i=new f.a(t,null,this.injectorFor(e.locals));this.bodyPortalHost.attach(i),this.portalHostElement.style.display="block",this.active=e,setTimeout(function(){l.reposition(n),l.active&&l.active.onOpen(l.activeMenu),l.isOpening=!1})},e.prototype.isActive=function(e){return this.active&&this.active===e},e.prototype.close=function(){this.isOpening||(this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active&&this.active.onClose(),this.active=null)},e.prototype.reposition=function(e){this.active&&this.activeMenu.position(this.active.positionArgs(e)).css("visibility","visible")},Object.defineProperty(e.prototype,"activeMenu",{get:function(){return jQuery(this.portalHostElement).find(".dropdown")},enumerable:!0,configurable:!0}),e.prototype.injectorFor=function(e){var n=new WeakMap;return e.service=this,n.set(Ci,e),new f.c(this.injector,n)},e}();(ls=ts||(ts={})).setPosition=function(e,n){try{e.setSelectionRange(n,n)}catch(t){Object(bn.a)("Failed to set click position for edit field.",t)}},ls.getPosition=function(e){var n=e.originalEvent;try{if(document.caretRangeFromPoint)return document.caretRangeFromPoint(e.clientX,e.clientY).startOffset;if(n.rangeParent){var t=document.createRange();return t.setStart(n.rangeParent,n.rangeOffset),t.startOffset}return 0}catch(l){return Object(bn.a)("Failed to get click position for edit field.",l),0}};var rs=function(){function e(e){this.injector=e,this.states=this.injector.get(d),this.halEditing=this.injector.get(ns),this.halNotification=this.injector.get(Mn),this.halEvents=this.injector.get(ct),this.activeFields={},this.errorsPerAttribute={},this.editMode=!1}return e.prototype.onSaved=function(e,n){var t=e?"created":"updated";this.halEvents.push(n,{eventType:t})},e.prototype.hasActiveFields=function(){return!_.isEmpty(this.activeFields)},Object.defineProperty(e.prototype,"change",{get:function(){return this.halEditing.changeFor(this.resource)},enumerable:!0,configurable:!0}),e.prototype.activate=function(e,n){var t=this;return void 0===n&&(n=!1),this.loadFieldSchema(e,n).then(function(l){return l.writable||n?t.renderField(e,l):(t.halNotification.showEditingBlockedError(l.name||e),Promise.reject())})},e.prototype.activateWhenNeeded=function(e){var n=this;return this.activeFields[e]?Promise.resolve():this.requireVisible(e).then(function(){return n.activate(e,!0)})},e.prototype.activateMissingFields=function(){var e=this;this.change.getForm().then(function(n){_.each(n.validationErrors,function(n,t){"id"!==t&&e.activateWhenNeeded(t)})})},e.prototype.submit=function(){return a.b(this,void 0,void 0,function(){var e,n=this;return a.e(this,function(t){switch(t.label){case 0:return this.change.isEmpty()&&!this.resource.isNew?(this.closeEditFields(),[2,Promise.resolve(this.resource)]):(this.errorsPerAttribute={},e=_.keys(this.activeFields),[4,Promise.all(_.map(this.activeFields,function(e){return e.onSubmit()}))]);case 1:return t.sent(),[2,new Promise(function(t,l){n.halEditing.save(n.change).then(function(l){n.closeEditFields(e),t(l.resource),n.halNotification.showSave(l.resource,l.wasNew),n.editMode=!1,n.onSaved(l.wasNew,l.resource)}).catch(function(e){n.halNotification.handleRawError(e,n.resource),e instanceof En&&(n.handleSubmissionErrors(e),l())})})]}})})},e.prototype.destroy=function(){this.subscription&&this.subscription.unsubscribe(),_.each(this.activeFields,function(e){e&&e.deactivate(!1)})},e.prototype.closeEditFields=function(e){var n=this;e||(e=_.keys(this.activeFields)),e.forEach(function(e){var t=n.activeFields[e];t&&t.deactivate(!1),n.change.reset(e)})},e.prototype.handleSubmissionErrors=function(e){this.handleErroneousAttributes(e)},e.prototype.handleErroneousAttributes=function(e){var n=e.getInvolvedAttributes();if(this.errorsPerAttribute=e.getMessagesPerAttribute(),0!==n.length)return this.setErrorsForFields(n)},e.prototype.setErrorsForFields=function(e){var n=this,t=e.map(function(e){return n.requireVisible(e).then(function(){return n.activeFields[e]&&n.activeFields[e].setErrors(n.errorsPerAttribute[e]||[]),n.activateWhenNeeded(e)})});Promise.all(t).then(function(){setTimeout(function(){return n.focusOnFirstError()})}).catch(function(){console.error("Failed to activate all erroneous fields.")})},e.prototype.loadFieldSchema=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.change.getSchemaName(e);return new Promise(function(e,i){t.loadFormAndCheck(l,n);var r=t.change.schema[l];if(!r)throw new Error;e(r)})},e.prototype.loadFormAndCheck=function(e,n){var t=this;void 0===n&&(n=!1);var l=this.change.getSchemaName(e);this.change.getForm().then(function(i){var r=i.schema[l];r.writable||n||(t.halNotification.showEditingBlockedError(r.name||e),t.closeEditFields([e]))}).catch(function(n){console.error("Failed to build edit field: %o",n),t.halNotification.handleRawError(n,t.resource),t.closeEditFields([e])})},e.prototype.renderField=function(e,n){var t=this;return this.activateField(this,n,e,this.errorsPerAttribute[e]||[]).then(function(n){return t.activeFields[e]=n,n}).catch(function(e){console.error("Failed to render edit field:"+e),t.halNotification.handleRawError(e)})},e}(),os=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this)||this;return a.injector=n,a.form=t,a.fieldName=l,a.schema=i,a.element=r,a.pathHelper=o,a.withErrors=u,a.FocusHelper=a.injector.get(m.a),a.ConfigurationService=a.injector.get(be),a.I18n=a.injector.get(A.a),a.$onUserActivate=new c.a,void 0!==u&&a.setErrors(u),a}return a.d(n,e),n.prototype.stopPropagation=function(e){return e.stopPropagation(),!1},Object.defineProperty(n.prototype,"inEditMode",{get:function(){return this.form.editMode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inFlight",{get:function(){return this.form.change.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.focus=function(e){var n=this.element.querySelector(".inline-edit--field");n?(n.focus(),e&&"INPUT"===n.tagName&&ts.setPosition(n,e)):Object(bn.a)("Tried to focus on "+this.fieldName+", but element does not (yet) exist.")},n.prototype.onFocusOut=function(){this.resource.subject&&this.withErrors&&0===this.withErrors.length&&this.handleUserSubmit()},n.prototype.setErrors=function(e){this.errors=e,this.element.classList.toggle("-error",this.isErrorenous)},n.prototype.handleUserSubmit=function(){var e=this;return this.inFlight||this.form.editMode?Promise.resolve():this.onSubmit().then(function(){return e.form.submit()})},n.prototype.handleUserKeydown=function(e,n){return void 0===n&&(n=!1),this.inEditMode&&!n?e.which!==wl.a.ENTER||(this.form.submit(),!1):e.which!==wl.a.ESCAPE||(this.handleUserCancel(),!1)},n.prototype.handleUserCancel=function(){this.reset()},n.prototype.reset=function(){this.form.change.reset(this.fieldName),this.deactivate(!0)},n.prototype.deactivate=function(e){void 0===e&&(e=!1),delete this.form.activeFields[this.fieldName],this.onDestroy.next(),this.onDestroy.complete(),this.form.reset(this.fieldName,e)},Object.defineProperty(n.prototype,"isErrorenous",{get:function(){return this.errors.length>0},enumerable:!0,configurable:!0}),n.prototype.isChanged=function(){return this.form.change.contains(this.fieldName)},Object.defineProperty(n.prototype,"resource",{get:function(){return this.form.resource},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"project",{get:function(){return this.form.change.projectedResource.project},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"htmlId",{get:function(){return"wp-"+this.resource.id+"-inline-edit--field-"+this.fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fieldLabel",{get:function(){return this.schema.name||this.fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorMessageOnLabel",{get:function(){return this.isErrorenous?this.I18n.t("js.inplace.errors.messages_on_field",{messages:this.errors.join(" ")}):""},enumerable:!0,configurable:!0}),n.prototype.previewContext=function(e){return e.previewPath()},n}(gu),us=function(){function e(e,n,t){this.appRef=e,this.componentFactoryResolver=n,this.pathHelper=t}return e.prototype.create=function(e,n,t,l,i,r){var o=this.createDomOutlet(e,n),u=new os(n,t,i,l,e,this.pathHelper,r);u.onDestroy.pipe(Object(y.a)(1)).subscribe(function(){return o.detach()});var a=Iu(n,t.change,u,l),s=new f.a(Pu,null,a);return e.innerHTML="",o.attachComponentPortal(s).instance.onEditFieldReady.pipe(Object(y.a)(1)).toPromise().then(function(){return u})},e.prototype.createDomOutlet=function(e,n){return new f.b(e,this.componentFactoryResolver,this.appRef,n)},e}(),as=function(){function e(){}return e.prototype.blockedTransition=function(e){return!0},e}(),ss=function(e){function n(n,t,i,r,o,u,a,c,d,p){var h=e.call(this,n)||this;h.injector=n,h.elementRef=t,h.halEditing=i,h.halNotification=r,h.$transitions=o,h.ConfigurationService=u,h.editingPortalService=a,h.$state=c,h.I18n=d,h.editFormRouting=p,h.initializeEditMode=!1,h.skippedFields=[],h.onSavedEmitter=new l.EventEmitter,h.fields={},h.registeredFields=Object(s.f)();var f=d.t("js.work_packages.confirm_edit_cancel"),g=u.warnOnLeavingUnsaved();return h.unregisterListener=o.onBefore({},function(e){if(h.editing){if(!h.editFormRouting||h.editFormRouting.blockedTransition(e)){if(g&&!window.confirm(f))return!1;h.stop()}return!0}}),h}return a.d(n,e),n.prototype.ngOnDestroy=function(){this.unregisterListener(),this.destroy()},n.prototype.ngOnInit=function(){this.editMode=this.initializeEditMode,this.initializeEditMode&&this.start()},n.prototype.activateField=function(e,n,t,l){return a.b(this,void 0,void 0,function(){var i=this;return a.e(this,function(r){return[2,this.waitForField(t).then(function(r){r.setActive(!0);var o=r.editContainer.nativeElement;return i.editingPortalService.create(o,i.injector,e,n,t,l)})]})})},n.prototype.reset=function(e,n){return void 0===n&&(n=!1),a.b(this,void 0,void 0,function(){var t;return a.e(this,function(l){switch(l.label){case 0:return[4,this.waitForField(e)];case 1:return(t=l.sent()).reset(),t.deactivate(n),[2]}})})},n.prototype.onSaved=function(n,t){e.prototype.onSaved.call(this,n,t),this.stopEditingAndLeave(t,n)},n.prototype.requireVisible=function(e){var n=this;return new Promise(function(t,l){var i=setInterval(function(){void 0!==n.fields[e]&&(clearInterval(i),t())},50)})},Object.defineProperty(n.prototype,"editing",{get:function(){return this.editMode||this.hasActiveFields()},enumerable:!0,configurable:!0}),n.prototype.register=function(e){this.fields[e.fieldName]=e,this.registeredFields.putValue(_.keys(this.fields)),(this.editMode&&!this.skipField(e)||this.activeFields[e.fieldName])&&e.activateOnForm(!0)},n.prototype.waitForField=function(e){var n=this;return this.registeredFields.values$().pipe(Object(Yn.a)(function(n){return n.indexOf(e)>=0}),Object(y.a)(1),Object(v.a)(function(){return n.fields[e]})).toPromise()},n.prototype.start=function(){var e=this;_.each(this.fields,function(n){return e.activate(n.fieldName)})},n.prototype.stop=function(){this.editMode=!1,this.closeEditFields(),this.halEditing.stopEditing(this.resource),this.destroy()},n.prototype.save=function(){var e=this,n=this.resource.isNew;return this.submit().then(function(t){e.stopEditingAndLeave(t,n)})},n.prototype.stopEditingAndLeave=function(e,n){this.stop(),this.onSavedEmitter.emit({savedResource:e,isInitial:n})},n.prototype.focusOnFirstError=function(){jQuery(this.elementRef.nativeElement).find(".inline-edit--active-field.-error .inline-edit--field").first().trigger("focus")},n.prototype.skipField=function(e){var n=e.fieldName;if(!(-1!==this.skippedFields.indexOf(n)))return!1;var t=this.resource[n],l=this.change.changes[n];return t&&!l},n}(rs),cs=function(){function e(e,n,t,l,i,r,o,u,a,s,c,d){this.states=e,this.injector=n,this.elementRef=t,this.halNotification=l,this.ConfigurationService=i,this.opContextMenu=r,this.halEditing=o,this.wpCacheService=u,this.editForm=a,this.NotificationsService=s,this.cdRef=c,this.I18n=d,this.displayFieldOptions={},this.isDropTarget=!1,this.editFieldContainerClass=Za,this.active=!1,this.destroyed=!1}return e.prototype.setActive=function(e){void 0===e&&(e=!0),this.active=e,this.destroyed||this.cdRef.detectChanges()},e.prototype.ngOnInit=function(){var e=this;this.fieldRenderer=new Ja(this.injector,"single-view",this.displayFieldOptions),this.$element=jQuery(this.elementRef.nativeElement),this.editForm.register(this),this.halEditing.temporaryEditResource(this.resource).values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.resource=n,e.render()})},e.prototype.ngOnDestroy=function(){this.destroyed=!0},e.prototype.startDragOverActivation=function(e){return!(this.isDropTarget&&this.isEditable&&!this.active)||(this.handleUserActivate(null),e.preventDefault(),!1)},e.prototype.render=function(){var e=this.fieldRenderer.render(this.resource,this.fieldName,null,this.displayPlaceholder);this.displayContainer.nativeElement.innerHTML="",this.displayContainer.nativeElement.appendChild(e)},e.prototype.deactivate=function(e){var n=this;void 0===e&&(e=!1),this.editContainer.nativeElement.innerHTML="",this.editContainer.nativeElement.hidden=!0,this.setActive(!1),e&&setTimeout(function(){return n.$element.find("."+Ya).focus()},20)},Object.defineProperty(e.prototype,"isEditable",{get:function(){var e=this.resource.schema[this.fieldName];return this.resource.isAttributeEditable(this.fieldName)&&e&&e.writable},enumerable:!0,configurable:!0}),e.prototype.activateIfEditable=function(e){return qa.hasSelectionWithin(e.target)?(Object(bn.a)("Not activating "+this.fieldName+" because of active selection within"),!0):jQuery(e.target).closest("a,macro",this.displayContainer.nativeElement).length>0||(this.isEditable&&this.handleUserActivate(e),this.opContextMenu.close(),e.preventDefault(),e.stopImmediatePropagation(),!1)},e.prototype.activateOnForm=function(e){var n=this;return void 0===e&&(e=!1),this.setActive(!0),this.editForm.activate(this.fieldName,e).catch(function(){return n.deactivate(!0)})},e.prototype.handleUserActivate=function(e){var n=0;return e&&(n=ts.getPosition(e)),this.activateOnForm().then(function(e){e&&(e.$onUserActivate.next(),e.focus(n))}),!1},e.prototype.reset=function(){this.render(),this.deactivate()},e}(),ds=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ps(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{displayContainer:0}),l["ɵqud"](402653184,2,{editContainer:0}),(e()(),l["ɵeld"](2,0,null,null,6,"div",[],null,[[null,"dragover"]],function(e,n,t){var l=!0,i=e.component;"dragover"===n&&(l=!1!==i.startDragOverActivation(t)&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpad"](5,4),(e()(),l["ɵeld"](6,0,[[2,0],["editContainer",1]],null,0,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,[[1,0],["displayContainer",1]],null,1,"div",[["tabindex","-1"]],[[8,"hidden",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,8).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,8).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.activateIfEditable(t)&&i);return i},null,null)),l["ɵdid"](8,16384,null,0,Cl,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"})],function(e,n){var t=n.component,l=e(n,5,0,t.editFieldContainerClass,t.fieldName,t.active?"-active":"",t.wrapperClasses||"-small");e(n,4,0,l);e(n,8,0,!1)},function(e,n){var t=n.component;e(n,6,0,!t.active),e(n,7,0,t.active)})}var hs=l["ɵccf"]("editable-attribute-field",cs,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](1,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{fieldName:"fieldName",resource:"resource",wrapperClasses:"wrapperClasses",displayFieldOptions:"displayFieldOptions",displayPlaceholder:"displayPlaceholder",isDropTarget:"isDropTarget"},{},[]);function fs(e){return"-"+(e=ms(e)).replace(" ","-")}function gs(e,n){return e=ms(e),n.t("js.grid.widgets.project_status."+e.replace(" ","_"))}function ms(e){return e||"not set"}var vs=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.I18n=n.injector.get(A.a),n._availableStatusCodes=["not set","off track","at risk","on track"],n.currentStatusCode="not set",n.availableStatuses=n._availableStatusCodes.map(function(e){return{code:e,name:gs(e,n.I18n),colorClass:fs(e)}}),n.hiddenOverflowContainer="#content-wrapper",n.appendToContainer="body",n}return a.d(n,e),n.prototype.ngOnInit=function(){this.currentStatusCode=null===this.resource.status?"not set":this.resource.status;var e=this;window.setTimeout(function(){e.ngSelectComponent.open()},0)},n.prototype.onChange=function(){this.resource.status="not set"===this.currentStatusCode?null:this.currentStatusCode,this.handler.handleUserSubmit()},n.prototype.onOpen=function(){var e=this;setTimeout(function(){var n=e.ngSelectComponent;n.dropdownPanel&&n.dropdownPanel._updatePosition(),jQuery(e.hiddenOverflowContainer).one("scroll.autocompleteContainer",function(){e.ngSelectComponent.close()})},25)},n.prototype.onClose=function(){jQuery(this.hiddenOverflowContainer).off("scroll.autocompleteContainer")},n}(ku),bs=[[""]],ys=l["ɵcrt"]({encapsulation:0,styles:bs,data:{}});function ws(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["class","project-status--bulb"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](3,0,null,null,3,"span",[["class","project-status--name"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](6,null,["",""]))],function(e,n){e(n,2,0,"project-status--bulb",n.context.item.colorClass);e(n,5,0,"project-status--name",n.context.item.colorClass)},function(e,n){e(n,6,0,n.context.item.name)})}function Cs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["class","project-status--bulb"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](3,0,null,null,3,"span",[["class","project-status--name"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](6,null,["",""]))],function(e,n){e(n,2,0,"project-status--bulb",n.context.item.colorClass);e(n,5,0,"project-status--name",n.context.item.colorClass)},function(e,n){e(n,6,0,n.context.item.name)})}function ks(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,22,"ng-select",[["bindLabel","name"],["bindValue","code"],["class","project-status ng-select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"open"],[null,"close"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,3).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.currentStatusCode=t)&&i);"open"===n&&(i=!1!==r.onOpen()&&i);"close"===n&&(i=!1!==r.onClose()&&i);"change"===n&&(i=!1!==r.onChange()&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](3,4964352,[[1,4]],12,Lt.a,[[8,"project-status"],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],appendTo:[2,"appendTo"],hideSelected:[3,"hideSelected"],items:[4,"items"]},{changeEvent:"change",openEvent:"open",closeEvent:"close"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](17,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](19,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](0,[[4,2]],null,1,null,ws)),l["ɵdid"](21,16384,null,0,Lt.i,[l.TemplateRef],null,null),(e()(),l["ɵand"](0,[[2,2]],null,1,null,Cs)),l["ɵdid"](23,16384,null,0,Lt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,3,0,"name","code",t.appendToContainer,!0,t.availableStatuses),e(n,17,0,t.inFlight,t.currentStatusCode)},function(e,n){e(n,1,1,[!l["ɵnov"](n,3).multiple,l["ɵnov"](n,3).typeahead,l["ɵnov"](n,3).multiple,l["ɵnov"](n,3).addTag,l["ɵnov"](n,3).searchable,l["ɵnov"](n,3).clearable,l["ɵnov"](n,3).isOpen,l["ɵnov"](n,3).disabled,l["ɵnov"](n,3).filtered,l["ɵnov"](n,19).ngClassUntouched,l["ɵnov"](n,19).ngClassTouched,l["ɵnov"](n,19).ngClassPristine,l["ɵnov"](n,19).ngClassDirty,l["ɵnov"](n,19).ngClassValid,l["ɵnov"](n,19).ngClassInvalid,l["ɵnov"](n,19).ngClassPending])})}var Is=l["ɵccf"]("ng-component",vs,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,ks,ys)),l["ɵdid"](1,245760,null,0,vs,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),js=t("FC3Z"),Rs=t("Yh/3"),Ps=t("6bXR"),Ss=function(){function e(e){this.wpCacheService=e,this.count=0}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.count=_.size(n.watchers.elements)})},e.prototype.ngOnDestroy=function(){},e}(),_s=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function xs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","wp-tabs-count"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.count)})}function Ts(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,xs)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.count>0)},null)}l["ɵccf"]("wp-watchers-count",Ss,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-watchers-count",[],null,null,null,Ts,_s)),l["ɵdid"](1,245760,null,0,Ss,[Cn],null,null)],function(e,n){e(n,1,0)},null)},{wpId:"wpId"},{},[]);var Os=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.updateElements=function(){var e=this;return this.$href?this.$load().then(function(n){return e.elements=n.elements}):Promise.resolve()},n}(L),Es=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n),this.elements=this.elements||[]},n}(Os),Ds=function(){function e(e,n){this.http=e,this.halResource=n}return e.prototype.uploadAndMapResponse=function(e,n,t){void 0===t&&(t="post");var l=this.upload(e,n);return{uploads:l.uploads,finished:l.finished.then(function(e){return e.map(function(e){return{response:e,uploadUrl:e.staticDownloadLocation.href}})})}},e.prototype.upload=function(e,n,t){var l=this;void 0===t&&(t="post"),n=_.filter(n,function(e){return"directory"!==e.type});var i=_.map(n,function(n){return l.uploadSingle(e,n,t)});return{uploads:i,finished:this.whenFinished(i)}},e.prototype.uploadSingle=function(e,n,t,l){void 0===t&&(t="post"),void 0===l&&(l="json");var i=new FormData,r={description:n.description,fileName:n.customName||n.name};return i.append("metadata",JSON.stringify(r)),i.append("file",n,r.fileName),[n,this.http.request(t,e,{body:i,observe:"events",withCredentials:!0,responseType:l,reportProgress:!0}).pipe(Object(rt.a)())]},e.prototype.whenFinished=function(e){var n=this,t=e.map(function(e){e[0];return e[1].pipe(Object(Yn.a)(function(e){return e.type===V.g.Response}),Object(v.a)(function(e){return n.halResource.createHalResource(e.body)})).toPromise()});return Promise.all(t)},e}();function Fs(e){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"canAddAttachments",{get:function(){return!!this.$links.addAttachment||this.isNew},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasAttachments",{get:function(){return _.get(this.attachments,"elements.length",0)>0},enumerable:!0,configurable:!0}),n.prototype.lookupDownloadLocationByName=function(e){if(!this.attachments||!this.attachments.elements)return null;var n=_.find(this.attachments.elements,function(n){return n.name===e});return _.get(n,"staticDownloadLocation.href",null)},n.prototype.removeAttachment=function(e){var n=this;return _.pull(this.attachments.elements,e),e.$isHal?e.delete().then(function(){n.attachmentsBackend?n.updateAttachments():n.attachments.count=Math.max(n.attachments.count-1,0)}).catch(function(t){n.halNotification.handleRawError(t,n),n.attachments.elements.push(e)}):Promise.resolve()},n.prototype.updateAttachments=function(){var e=this;return this.attachments.updateElements().then(function(){return e.updateState(),e.attachments})},n.prototype.uploadAttachments=function(e){var n=this,t=this.performUpload(e),l=t.uploads,i=t.finished,r=I18n.t("js.label_upload_notification"),o=this.NotificationsService.addAttachmentUpload(r,l);return i.then(function(e){return setTimeout(function(){return n.NotificationsService.remove(o)},700),n.attachments.count+=e.length,e.forEach(function(e){n.attachments.elements.push(e.response)}),n.updateState(),e}).catch(function(e){var t;return console.error("Error while uploading: %O",e),t=e.error instanceof ErrorEvent?n.I18n.t("js.error_attachment_upload",{error:e}):"Error"===_.get(e,"error._type")?e.error.message:e.error,n.halNotification.handleRawError(t),t||I18n.t("js.error.internal")})},n.prototype.performUpload=function(e){var n="";return n=!this.isNew&&this.id&&this.attachmentsBackend?this.addAttachment.$link.href:this.pathHelper.api.v3.attachments.path,this.opFileUpload.uploadAndMapResponse(n,e)},n.prototype.updateState=function(){this.state&&this.state.putValue(this)},n.prototype.$initialize=function(n){this.NotificationsService=this.injector.get(Vn),this.halNotification=this.injector.get(Mn),this.opFileUpload=this.injector.get(Ds),this.pathHelper=this.injector.get(ge),e.prototype.$initialize.call(this,n);var t=this.attachments||{$source:{},elements:[]};this.attachments=new Es(this.injector,t,!1,this.halInitializer,"HalResource")},n}(e)}var Ns=function(){function e(e,n,t,l,i){this.timezoneService=e,this.isReversed=n,this.activities=t,this.activity=l,this.index=i}return e.prototype.number=function(e){return void 0===e&&(e=!1),this.orderedIndex(this.index,e)},Object.defineProperty(e.prototype,"date",{get:function(){return this.activityDate(this.activity)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateOfPrevious",{get:function(){if(this.index>0)return this.activityDate(this.activities[this.index-1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this.activity.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.activity.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNextDate",{get:function(){return this.date!==this.dateOfPrevious},enumerable:!0,configurable:!0}),e.prototype.isInitial=function(e){void 0===e&&(e=!1);var n=this.number(e);if(0!==this.activity._type.indexOf("Activity"))return!1;if(1===n)return!0;for(;--n>0;){var t=this.orderedIndex(n,e)-1,l=this.activities[t];if(!_.isNil(l)&&0===l._type.indexOf("Activity"))return!1}return!0},e.prototype.activityDate=function(e){return moment(e.createdAt).format("LL")},e.prototype.orderedIndex=function(e,n){return void 0===n&&(n=!1),n||this.isReversed?this.activities.length-e:e+1},e}(),As=function(){function e(){this.cacheDurationInSeconds=120,this.cache={id:null,state:Object(s.f)()}}return e.prototype.require=function(e,n){var t=this;void 0===n&&(n=!1);var l=e.id,i=this.cache.state;return(n||this.cache.id!==l)&&i.clear(),this.isCached(l)?Promise.resolve(i.value):(this.cache.id=l,this.cache.state.putFromPromiseIfPristine(function(){return t.load(e)}),this.cache.state.values$().pipe(Object(y.a)(1)).toPromise())},e.prototype.clear=function(e){this.cache.id===e&&this.cache.state.clear()},e.prototype.isCached=function(e){var n=this.cache.state;return this.cache.id===e&&n.hasValue()&&!n.isValueOlderThan(1e3*this.cacheDurationInSeconds)},e}(),Vs=function(e){function n(n,t){var l=e.call(this)||this;return l.ConfigurationService=n,l.timezoneService=t,l}return a.d(n,e),Object.defineProperty(n.prototype,"order",{get:function(){return this.isReversed?"desc":"asc"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReversed",{get:function(){return this.ConfigurationService.commentsSortedInDescendingOrder()},enumerable:!0,configurable:!0}),n.prototype.load=function(e){var n=this,t=[],l=[],i=function(e){t.push(e.elements)};return l.push(e.activities.$update().then(i)),e.revisions&&l.push(e.revisions.$update().then(i)),Promise.all(l).then(function(){return n.sortedActivityList(t)})},n.prototype.sortedActivityList=function(e,n){void 0===n&&(n="createdAt");var t=_.sortBy(_.flatten(e),n);return this.isReversed?t.reverse():t},n.prototype.info=function(e,n,t){return new Ns(this.timezoneService,this.isReversed,e,n,t)},n}(As),Ms=Fs(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.overriddenSchema=void 0,n.I18n=n.injector.get(A.a),n.states=n.injector.get(d),n.wpActivity=n.injector.get(Vs),n.workPackageDmService=n.injector.get(yn),n.wpCacheService=n.injector.get(Cn),n.schemaCacheService=n.injector.get(vn),n.NotificationsService=n.injector.get(Vn),n.workPackageNotificationService=n.injector.get(qn),n.pathHelper=n.injector.get(ge),n.opFileUpload=n.injector.get(Ds),n.attachmentsBackend=!0,n}return a.d(n,e),Object.defineProperty(n.prototype,"ancestorIds",{get:function(){return this.ancestors.map(function(e){return e.id})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReadonly",{get:function(){return this.status&&this.status.isReadonly},enumerable:!0,configurable:!0}),n.prototype.subjectWithType=function(e){return void 0===e&&(e=40),""+(this.type?this.type.name+": ":"")+this.subjectWithId(e)},n.prototype.subjectWithId=function(e){void 0===e&&(e=40);var n=this.isNew?"":" (#"+this.id+")";return""+_.truncate(this.subject,{length:e})+n},Object.defineProperty(n.prototype,"isMilestone",{get:function(){return this.schema.hasOwnProperty("date")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLeaf",{get:function(){var e=this.$links.children;return!(e&&e.length>0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEditable",{get:function(){return this.isNew||!!this.$links.update},enumerable:!0,configurable:!0}),n.prototype.previewPath=function(){return this.isNew?e.prototype.previewPath.call(this):this.pathHelper.api.v3.work_packages.id(this.id).path},n.prototype.getEditorTypeFor=function(e){return"description"===e?"full":"constrained"},n.prototype.isAttributeEditable=function(e){var n=this.schema[e];return this.isEditable&&n&&n.writable&&(!this.isReadonly||"status"===e)},n.prototype.performUpload=function(e){var n="";return n=this.isNew?this.pathHelper.api.v3.attachments.path:this.attachments.$href,this.opFileUpload.uploadAndMapResponse(n,e)},n.prototype.getSchemaName=function(e){return!this.isMilestone||"startDate"!==e&&"dueDate"!==e?e:"date"},n.prototype.isParentOf=function(e){return e.parent.$links.self.$link.href===this.$links.self.$link.href},n.prototype.updateLinkedResources=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var l={};n.forEach(function(n){var t=e[n];l[n]=t?t.$update():Promise.reject(void 0)});var i=Promise.all(_.values(l));return i.then(function(){e.wpCacheService.touch(e.id)}),i},n.prototype.initializeNewResource=function(e){var n=this;this.overriddenSchema=e.schema,this.$source.id="new",this._type="WorkPackage",this.__initialized_at=Date.now(),this.update=this.$links.update=e.$links.self,this.updateImmediately=this.$links.updateImmediately=function(e){return n.workPackageDmService.createWorkPackage(e)}},n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n);var t=this.attachments||{$source:{},elements:[]};this.attachments=new Es(this.injector,_.get(t,"$source",t),!1,this.halInitializer,"HalResource")},n.prototype.$linkableKeys=function(){return _.without(e.prototype.$linkableKeys.call(this),"schema")},Object.defineProperty(n.prototype,"schema",{get:function(){if(this.hasOverriddenSchema)return this.overriddenSchema;var e=this.schemaCacheService.state(this);if(!e.hasValue())throw"Accessing schema of "+this.id+" without it being loaded.";return e.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.workPackages.get(this.id)},enumerable:!0,configurable:!0}),n.prototype.push=function(e){this.wpActivity.clear(e.id),e.parent&&this.wpCacheService.require(e.parent.id,!0),this.wpCacheService.updateWorkPackage(e)},Object.defineProperty(n.prototype,"hasOverriddenSchema",{get:function(){return null!=this.overriddenSchema},enumerable:!0,configurable:!0}),n}(L)),qs=function(){function e(e,n,t,i,r,o,u,a){var s=this;this.querySpace=e,this.pathHelper=n,this.notificationService=t,this.CurrentProject=i,this.halResourceService=r,this.schemaCacheService=o,this.cdRef=u,this.I18n=a,this.text={placeholder:this.I18n.t("js.relations_autocomplete.placeholder")},this.inputPlaceholder=this.text.placeholder,this.additionalFilters=[],this.hiddenOverflowContainer="body",this.onCancel=new l.EventEmitter,this.onSelected=new l.EventEmitter,this.onEmptySelected=new l.EventEmitter,this.isLoading=!1,this.searchInput$=new c.a,this.appendToContainer="body",this.results$=this.searchInput$.pipe(Object(at.a)(250),Object(ft.a)(),Object(Dn.a)(function(){return s.isLoading=!0}),Object(lt.a)(function(e){return s.autocompleteWorkPackages(e)}))}return e.prototype.reset=function(){this.cancel()},e.prototype.ngAfterContentInit=function(){var e=this;this.ngSelectComponent&&setTimeout(function(){e.ngSelectComponent.focus()},25)},e.prototype.cancel=function(){this.onCancel.emit()},e.prototype.onWorkPackageSelected=function(e){var n=this;e&&this.schemaCacheService.ensureLoaded(e).then(function(){n.onSelected.emit(e),n.ngSelectComponent.close()})},e.prototype.autocompleteWorkPackages=function(e){var n=this;return null===e||0===e.length?(this.isLoading=!1,Object(tt.a)([])):(e=e.replace(/^#/,""),Object(nt.a)(this.workPackage.availableRelationCandidates.$link.$fetch({query:e,filters:JSON.stringify(this.additionalFilters),type:this.filterCandidatesFor||this.selectedRelationType})).pipe(Object(v.a)(function(e){return e.elements}),Object(q.a)(function(e){return n.notificationService.handleRawError(e),Object(tt.a)([])}),Object(Dn.a)(function(){return n.isLoading=!1})))},e.prototype.onOpen=function(){var e=this;setTimeout(function(){var n=e.ngSelectComponent;n&&n.dropdownPanel._updatePosition(),jQuery(e.hiddenOverflowContainer).one("scroll",function(){e.ngSelectComponent.close()})},25)},e}(),Ls=[["ng-select.wp-inline-create--reference-autocompleter{border:none}ng-select.wp-inline-create--reference-autocompleter .ng-clear-wrapper{display:none}"]],$s=l["ɵcrt"]({encapsulation:2,styles:Ls,data:{}});function Hs(e){return l["ɵvid"](0,[(e()(),l["ɵted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function Bs(e){return l["ɵvid"](0,[(e()(),l["ɵted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function zs(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,23,"div",[["class","wp-relations--autocomplete"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,22,"ng-select",[["class","ng-select"],["ngClass","wp-inline-create--reference-autocompleter"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"open"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,7).handleKeyDown(t)&&i);"open"===n&&(i=!1!==r.onOpen()&&i);"change"===n&&(i=!1!==r.onWorkPackageSelected(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](5120,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](6,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](7,4964352,[[1,4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{placeholder:[0,"placeholder"],appendTo:[1,"appendTo"],loading:[2,"loading"],closeOnSelect:[3,"closeOnSelect"],typeahead:[4,"typeahead"],multiple:[5,"multiple"],items:[6,"items"]},{changeEvent:"change",openEvent:"open"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵand"](0,[[4,2]],null,1,null,Hs)),l["ɵdid"](22,16384,null,0,Lt.i,[l.TemplateRef],null,null),(e()(),l["ɵand"](0,[[2,2]],null,1,null,Bs)),l["ɵdid"](24,16384,null,0,Lt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,6,0,"wp-inline-create--reference-autocompleter");e(n,7,0,t.inputPlaceholder,t.appendToContainer,t.isLoading,!0,t.searchInput$,!1,l["ɵunv"](n,7,6,l["ɵnov"](n,20).transform(t.results$)))},function(e,n){e(n,2,0,!l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).typeahead,l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).addTag,l["ɵnov"](n,7).searchable,l["ɵnov"](n,7).clearable,l["ɵnov"](n,7).isOpen,l["ɵnov"](n,7).disabled,l["ɵnov"](n,7).filtered)})}l["ɵccf"]("wp-relations-autocomplete",qs,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-autocomplete",[],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;"keydown.escape"===n&&(i=!1!==l["ɵnov"](e,1).reset()&&i);return i},zs,$s)),l["ɵdid"](1,1097728,null,0,qs,[b,ge,qn,Qn,Q,vn,l.ChangeDetectorRef,A.a],null,null)],null,null)},{inputPlaceholder:"inputPlaceholder",workPackage:"workPackage",selectedRelationType:"selectedRelationType",filterCandidatesFor:"filterCandidatesFor",additionalFilters:"additionalFilters",hiddenOverflowContainer:"hiddenOverflowContainer"},{onCancel:"onCancel",onSelected:"onSelected",onEmptySelected:"onEmptySelected"},[]);var Ws=function(){function e(e,n,t,l,i,r){this.$state=e,this.states=n,this.halEvents=t,this.notificationService=l,this.pathHelper=i,this.wpCacheService=r}return e.prototype.changeParent=function(e,n){var t=this,l={lockVersion:e.lockVersion};return l._links=n?{parent:{href:this.pathHelper.api.v3.work_packages.id(n).toString()}}:{parent:{href:null}},e.changeParent(l).then(function(l){return t.wpCacheService.updateWorkPackage(l),t.notificationService.showSave(l),t.halEvents.push(e,{eventType:"association",relatedWorkPackage:n,relationType:"parent"}),l}).catch(function(n){return t.notificationService.handleRawError(n,e),Promise.reject(n)})},e.prototype.removeParent=function(e){return this.changeParent(e,null)},e.prototype.addExistingChildWp=function(e,n){var t=this;return this.wpCacheService.require(n).then(function(n){return t.changeParent(n,e.id).then(function(l){return t.wpCacheService.loadWorkPackage(e.id,!0),t.halEvents.push(e,{eventType:"association",relatedWorkPackage:n.id,relationType:"child"}),l})})},e.prototype.addNewChildWp=function(e){var n=this;e.project.$load().then(function(){var t,l=["work-packages.list.new",{parent_id:e.id}];n.$state.includes("work-packages.show")&&(l[0]="work-packages.new"),(t=n.$state).go.apply(t,l)})},e.prototype.removeChild=function(e){var n=this;return e.$load().then(function(){var t=e.parent;return e.changeParent({_links:{parent:{href:null}},lockVersion:e.lockVersion}).then(function(e){n.wpCacheService.loadWorkPackage(t.id,!0),n.wpCacheService.updateWorkPackage(e)}).catch(function(t){return n.notificationService.handleRawError(t,e),Promise.reject(t)})})},e}(),Qs=function(){function e(e,n,t){this.I18n=e,this.wpRelationsHierarchy=n,this.notificationService=t,this.onSwitch=new l.EventEmitter,this.isSaving=!1,this.text={edit_parent:this.I18n.t("js.relation_buttons.change_parent"),set_or_remove_parent:this.I18n.t("js.relations_autocomplete.parent_placeholder"),remove_parent:this.I18n.t("js.relation_buttons.remove_parent"),set_parent:this.I18n.t("js.relation_buttons.set_parent")}}return e.prototype.canModifyParent=function(){return!!this.workPackage.changeParent},Object.defineProperty(e.prototype,"parent",{get:function(){return this.workPackage&&this.workPackage.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.editing},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.toggle(!1)},e.prototype.open=function(){this.toggle(!0)},e.prototype.updateParent=function(e){var n=this;this.close();var t=e?e.id:null;_.get(this.parent,"id",null)!==t&&(this.isSaving=!0,this.wpRelationsHierarchy.changeParent(this.workPackage,t).catch(function(e){n.notificationService.handleRawError(e,n.workPackage)}).then(function(){return n.isSaving=!1}))},e.prototype.toggle=function(e){this.editing!==e&&(this.editing=e,this.onSwitch.emit(this.editing))},e}(),Us=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Gs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"a",[["class","wp-breadcrumb-parent breadcrumb-project-title nocut"],["uiSref","work-packages.show.activity"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,2).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](2,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](3,{workPackageId:0}),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=e(n,3,0,n.component.parent.id);e(n,2,0,"work-packages.show.activity",t)},function(e,n){var t=n.component;e(n,0,0,t.parent.name),e(n,4,0,t.parent.name)})}function Ks(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.set_parent)})}function Ys(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.open()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"}),(e()(),l["ɵand"](16777216,null,0,1,null,Ks)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,l["ɵinlineInterpolate"](1,"wp-relation--parent-change -no-decoration hide-when-print icon-small ",t.parent?"icon-edit icon5":"icon-add icon4",""),t.parent?t.text.edit_parent:t.text.set_parent),e(n,3,0,!t.parent)},null)}function Zs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"accessible-by-keyboard",[["linkClass","wp-relation--parent-remove hide-when-print -no-decoration icon-small icon-remove icon4"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.updateParent(null)&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"]},{execute:"execute"})],function(e,n){e(n,1,0,"wp-relation--parent-remove hide-when-print -no-decoration icon-small icon-remove icon4",n.component.text.remove_parent)},null)}function Js(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Gs)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ys)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Zs)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.parent),e(n,4,0,t.canModifyParent()),e(n,6,0,t.canModifyParent()&&t.parent)},null)}function Xs(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-autocomplete",[["filterCandidatesFor","parent"]],null,[[null,"onCancel"],[null,"onSelected"],[null,"keydown.escape"]],function(e,n,t){var i=!0,r=e.component;"keydown.escape"===n&&(i=!1!==l["ɵnov"](e,1).reset()&&i);"onCancel"===n&&(i=!1!==r.close()&&i);"onSelected"===n&&(i=!1!==r.updateParent(t)&&i);return i},zs,$s)),l["ɵdid"](1,1097728,null,0,qs,[b,ge,qn,Qn,Q,vn,l.ChangeDetectorRef,A.a],{inputPlaceholder:[0,"inputPlaceholder"],workPackage:[1,"workPackage"],filterCandidatesFor:[2,"filterCandidatesFor"]},{onCancel:"onCancel",onSelected:"onSelected"})],function(e,n){var t=n.component;e(n,1,0,t.text.set_or_remove_parent,t.workPackage,"parent")},null)}function ec(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Js)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Xs)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.active),e(n,3,0,t.active)},null)}l["ɵccf"]("wp-breadcrumb-parent",Qs,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-breadcrumb-parent",[],null,null,null,ec,Us)),l["ɵdid"](1,49152,null,0,Qs,[A.a,Ws,qn],null,null)],null,null)},{workPackage:"workPackage"},{onSwitch:"onSwitch"},[]);var nc=function(){function e(e){this.I18n=e,this.text={parent:this.I18n.t("js.relations_hierarchy.parent_headline"),hierarchy:this.I18n.t("js.relations_hierarchy.hierarchy_headline")},this.inputActive=!1}return Object.defineProperty(e.prototype,"hierarchyCount",{get:function(){return this.workPackage.ancestors.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hierarchyLabel",{get:function(){return 1===this.hierarchyCount?this.text.parent:this.text.hierarchy},enumerable:!0,configurable:!0}),e}(),tc=[[".active-parent-select[_ngcontent-%COMP%]{width:100%}"]],lc=l["ɵcrt"]({encapsulation:0,styles:tc,data:{}});function ic(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["class","wp-breadcrumb--ellipsed"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"icon4 icon-small icon-arrow-right5":0}),(e()(),l["ɵeld"](4,0,null,null,3,"a",[["class","breadcrumb-project-title nocut"],["uiSref","work-packages.show.activity"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,6).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](6,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](7,{workPackageId:0})],function(e,n){var t=e(n,3,0,!n.parent.context.first);e(n,2,0,"wp-breadcrumb--ellipsed",t);var l=e(n,7,0,n.parent.context.$implicit.id);e(n,6,0,"work-packages.show.activity",l)},function(e,n){e(n,4,0,n.parent.context.$implicit.name,n.parent.context.$implicit.name)})}function rc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ic)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,!n.context.last)},null)}function oc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](3,null,["",": "])),(e()(),l["ɵand"](16777216,null,null,1,null,rc)),l["ɵdid"](5,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,5,0,n.component.workPackage.ancestors)},function(e,n){e(n,3,0,n.component.hierarchyLabel)})}function uc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","wp-breadcrumb -show"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"ul",[["class","breadcrumb"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,oc)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](4,0,null,null,5,"li",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](6,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](7,{"active-parent-select":0,"icon4 icon-small icon-arrow-right5":1}),(e()(),l["ɵeld"](8,0,null,null,1,"wp-breadcrumb-parent",[],null,[[null,"onSwitch"]],function(e,n,t){var l=!0,i=e.component;"onSwitch"===n&&(l=!1!=(i.inputActive=!i.inputActive)&&l);return l},ec,Us)),l["ɵdid"](9,49152,null,0,Qs,[A.a,Ws,qn],{workPackage:[0,"workPackage"]},{onSwitch:"onSwitch"})],function(e,n){var t=n.component;e(n,3,0,!t.inputActive&&t.hierarchyCount>0);var l=e(n,7,0,t.inputActive,!t.inputActive&&t.hierarchyCount>1);e(n,6,0,l),e(n,9,0,t.workPackage)},null)}function ac(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,uc)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["ɵccf"]("wp-breadcrumb",nc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-breadcrumb",[],null,null,null,ac,lc)),l["ɵdid"](1,49152,null,0,nc,[A.a],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var sc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function cc(e){return l["ɵvid"](0,[l["ɵncd"](null,0)],null,null)}l["ɵccf"]("edit-form,[edit-form]",ss,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],null,null)],function(e,n){e(n,1,0)},null)},{resource:"resource",initializeEditMode:"inEditMode",skippedFields:"skippedFields"},{onSavedEmitter:"onSaved"},["*"]);function dc(e){void 0===e&&(e=16);for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",l=0,i=new Array(e);l<i.length;l++){i[l];t+=n.charAt(Math.floor(Math.random()*n.length))}return t}var pc=function(){function e(e,n){this.uiRouterGlobals=e,this.wpCacheService=n,this.uniqueElementIdentifier="work-packages--subject-type-row-"+dc(16)}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){var e=this;this.workPackage||this.wpCacheService.loadWorkPackage(this.uiRouterGlobals.params.workPackageId).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n})},e}(),hc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function fc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","work-packages--subject-type-row __overflowing_element_container"]],[[1,"data-overflowing-identifier",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","work-packages--type-selector work-packages--subject-element"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](5,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"]},null),(e()(),l["ɵeld"](6,0,null,null,2,"div",[["class","work-packages--details--subject work-packages--subject-element"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](8,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,"work-packages--subject-type-row __overflowing_element_container","__overflowing_"+t.uniqueElementIdentifier);e(n,5,0,"type",t.workPackage,"work-packages--type-selector work-packages--subject-element -no-label");e(n,8,0,"subject",t.workPackage,"work-packages--details--subject work-packages--subject-element -no-label")},function(e,n){e(n,0,0,".__overflowing_"+n.component.uniqueElementIdentifier)})}function gc(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,fc)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["ɵccf"]("wp-subject",pc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-subject",[],null,null,null,gc,hc)),l["ɵdid"](1,245760,null,0,pc,[g.Q,Cn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var mc=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.load=function(e){return e.watchers.$update().then(function(e){return e.elements})},n}(As),vc=function(){function e(e,n,t){this.I18n=e,this.wpWatchersService=n,this.wpCacheService=t,this.showText=!1,this.disabled=!1}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n,e.setWatchStatus()})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"isWatched",{get:function(){return this.workPackage.hasOwnProperty("unwatch")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayWatchButton",{get:function(){return this.isWatched||this.workPackage.hasOwnProperty("watch")},enumerable:!0,configurable:!0}),e.prototype.toggleWatch=function(){var e=this,n=this.nextStateLink();n(n.$link.payload).then(function(){e.wpWatchersService.clear(e.workPackage.id),e.wpCacheService.loadWorkPackage(e.workPackage.id,!0)})},e.prototype.nextStateLink=function(){var e=this.isWatched?"unwatch":"watch";return this.workPackage[e]},e.prototype.setWatchStatus=function(){this.isWatched?(this.buttonTitle=this.I18n.t("js.label_unwatch_work_package"),this.buttonText=this.I18n.t("js.label_unwatch"),this.buttonClass="-active",this.buttonId="unwatch-button",this.watchIconClass="icon-watched"):(this.buttonTitle=this.I18n.t("js.label_watch_work_package"),this.buttonText=this.I18n.t("js.label_watch"),this.buttonClass="",this.buttonId="watch-button",this.watchIconClass="icon-unwatched")},e}(),bc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function yc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.buttonText)})}function wc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"button",[["class","button toolbar-icon"]],[[1,"title",0],[8,"disabled",0],[8,"id",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleWatch()&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,yc)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"button toolbar-icon",t.buttonClass),e(n,4,0,l["ɵinlineInterpolate"](1,"button--icon ",t.watchIconClass,"")),e(n,6,0,t.showText)},function(e,n){var t=n.component;e(n,0,0,t.buttonTitle,t.disabled,t.buttonId)})}function Cc(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,wc)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.displayWatchButton)},null)}var kc;l["ɵccf"]("wp-watcher-button",vc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-watcher-button",[],null,null,null,Cc,bc)),l["ɵdid"](1,245760,null,0,vc,[A.a,mc,Cn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",showText:"showText",disabled:"disabled"},{},[]);!function(e){e.isClickedWithModifier=function(e){var n=e.ctrlKey||e.shiftKey||e.metaKey,t=1===e.button;return n||t}}(kc||(kc={}));var Ic=function(){function e(e,n,t,l){this.querySpace=e,this.states=n,this.wpCacheService=t,this.opContextMenu=l,this.selectionState=Object(s.f)(),this.reset()}return e.prototype.ngOnDestroy=function(){Mousetrap.unbind(["command+d","ctrl+d"]),Mousetrap.unbind(["command+a","ctrl+a"])},e.prototype.isSelected=function(e){return this.currentState.selected[e]},e.prototype.selectAll=function(e){var n=this._emptyState;e.forEach(function(e){e.workPackageId&&(n.selected[e.workPackageId]=!0)}),this.selectionState.putValue(n)},e.prototype.getSelectedWorkPackages=function(){var e=this.states.workPackages;return this.getSelectedWorkPackageIds().map(function(n){return e.get(n).value})},e.prototype.getSelectedWorkPackageIds=function(){var e=[];return _.each(this.currentState.selected,function(n,t){n&&e.push(t)}),e},e.prototype.reset=function(){this.selectionState.putValue(this._emptyState)},e.prototype.selection$=function(){return this.selectionState.values$()},Object.defineProperty(e.prototype,"currentState",{get:function(){return this.selectionState.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.selectionCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionCount",{get:function(){return _.size(this.currentState.selected)},enumerable:!0,configurable:!0}),e.prototype.toggleRow=function(e){var n=this.currentState.selected[e];this.setRowState(e,!n)},e.prototype.setRowState=function(e,n){var t=this.currentState;t.selected[e]=n,this.selectionState.putValue(t)},e.prototype.setSelection=function(e,n){var t={selected:{},activeRowIndex:n};t.selected[e]=!0,this.selectionState.putValue(t)},e.prototype.setMultiSelectionFrom=function(e,n,t){var l=this.currentState;if(0===this.selectionCount||null===l.activeRowIndex)l.selected[n]=!0,l.activeRowIndex=t;else{var i=Math.min(t,l.activeRowIndex),r=Math.max(t,l.activeRowIndex);e.forEach(function(e,n){e.workPackageId&&(l.selected[e.workPackageId]=n>=i&&n<=r)})}this.selectionState.putValue(l)},e.prototype.registerSelectAllListener=function(e){var n=this;Mousetrap.bind(["command+a","ctrl+a"],function(t){return n.selectAll(e()),t.preventDefault(),n.opContextMenu.close(),!1})},e.prototype.registerDeselectAllListener=function(){var e=this;Mousetrap.bind(["command+d","ctrl+d"],function(n){return e.reset(),n.preventDefault(),e.opContextMenu.close(),!1})},Object.defineProperty(e.prototype,"_emptyState",{get:function(){return{selected:{},activeRowIndex:null}},enumerable:!0,configurable:!0}),e}(),jc=function(){function e(e,n){this.querySpace=e,this.wpTableSelection=n,this.state=e.focusedWorkPackage}return e.prototype.isFocused=function(e){return this.focusedWorkPackage===e},e.prototype.ifShouldFocus=function(e){var n=this.state.value;n&&n.focusAfterRender&&(e(n.workPackageId),n.focusAfterRender=!1,this.state.putValue(n,"Setting focus to false after callback."))},Object.defineProperty(e.prototype,"focusedWorkPackage",{get:function(){var e=this.state.value;if(e)return e.workPackageId;var n=this.querySpace.results.value;return n&&n.elements.length>0?n.elements[0].id.toString():null},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.state.clear()},e.prototype.whenChanged=function(){return this.state.values$().pipe(Object(v.a)(function(e){return e.workPackageId}),Object(ft.a)())},e.prototype.updateFocus=function(e,n){void 0===n&&(n=!1),this.wpTableSelection.isEmpty&&this.wpTableSelection.setRowState(e,!0),this.state.putValue({workPackageId:e,focusAfterRender:n})},e}(),Rc=function(){function e(e,n,t,l,i,r,o){this.http=e,this.$state=n,this.PathHelper=t,this.UrlParamsHelper=l,this.NotificationsService=i,this.I18n=r,this.halEvents=o,this.text={successful_delete:this.I18n.t("js.work_packages.message_successful_bulk_delete")}}return e.prototype.performBulkDelete=function(e,n){var t=this,l={"ids[]":e},i=this.http.delete(this.PathHelper.workPackagesBulkDeletePath(),{params:l,withCredentials:!0}).toPromise();return n&&i.then(function(){t.NotificationsService.addSuccess(t.text.successful_delete),e.forEach(function(e){return t.halEvents.push({_type:"WorkPackage",id:e},{eventType:"deleted"})}),t.$state.includes("**.list.details.**")&&e.indexOf(t.$state.params.workPackageId)>-1&&t.$state.go("work-packages.list",t.$state.params)}).catch(function(){var e=t.UrlParamsHelper.buildQueryString(l);window.location.href=t.PathHelper.workPackagesBulkDeletePath()+"?"+e}),i},e}(),Pc=function(){function e(e){this.injector=e,this.$state=this.injector.get(g.G),this.keepTab=this.injector.get(_e)}return e.prototype.goBack=function(e){void 0===e&&(e=!1),!this.backRoute||this.backRoute.name.includes("new")?this.$state.go("work-packages.list",this.$state.params):this.keepTab.isDetailsState(this.backRoute.parent)?e?this.$state.go("work-packages.list",this.$state.params):this.$state.go(this.keepTab.currentDetailsState,this.$state.params):this.$state.go(this.backRoute.name,this.backRoute.params)},e.prototype.sync=function(e){var n=e.from(),t=e.to();if(n.name&&n.data&&t.data&&n.data.parent!==t.data.parent){var l=a.a({},e.params("from"));this.backRoute={name:n.name,params:l,parent:n.data.parent}}},Object.defineProperty(e.prototype,"backRoute",{get:function(){return this._backRoute},set:function(e){this._backRoute=e},enumerable:!0,configurable:!0}),e}(),Sc=function(e){function n(n,t,l,i,r,o,u,a,s,c,d){var p=e.call(this,l,r,n)||this;return p.elementRef=n,p.WorkPackageService=t,p.locals=l,p.I18n=i,p.cdRef=r,p.$state=o,p.states=u,p.wpTableFocus=a,p.wpListService=s,p.notificationService=c,p.backRoutingService=d,p.busy=!1,p.childrenDeletionConfirmed=!1,p.text={label_visibility_settings:p.I18n.t("js.label_visibility_settings"),button_save:p.I18n.t("js.modals.button_save"),confirm:p.I18n.t("js.button_confirm"),warning:p.I18n.t("js.label_warning"),cancel:p.I18n.t("js.button_cancel"),close:p.I18n.t("js.close_popup_title"),label_confirm_children_deletion:p.I18n.t("js.modals.destroy_work_package.confirm_deletion_children")},p}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.workPackages=this.locals.workPackages,this.workPackageLabel=this.I18n.t("js.units.workPackage",{count:this.workPackages.length}),1===this.workPackages.length&&(this.singleWorkPackage=this.workPackages[0],this.singleWorkPackageChildren=this.singleWorkPackage.children),this.text.title=this.I18n.t("js.modals.destroy_work_package.title",{label:this.workPackageLabel}),this.text.text=this.I18n.t("js.modals.destroy_work_package.text",{label:this.workPackageLabel,count:this.workPackages.length}),this.text.childCount=function(e){var t=n.children(e).length;return n.I18n.t("js.units.child_work_packages",{count:t})},this.text.hasChildren=function(e){return n.I18n.t("js.modals.destroy_work_package.has_children",{childUnits:n.text.childCount(e)})},this.text.deletesChildren=this.I18n.t("js.modals.destroy_work_package.deletes_children")},Object.defineProperty(n.prototype,"blockedDueToUnconfirmedChildren",{get:function(){return this.mustConfirmChildren&&!this.childrenDeletionConfirmed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mustConfirmChildren",{get:function(){if(this.singleWorkPackage&&this.singleWorkPackageChildren)this.singleWorkPackageChildren.length;return!!_.find(this.workPackages,function(e){return e.children&&e.children.length>0})},enumerable:!0,configurable:!0}),n.prototype.confirmDeletion=function(e){var n=this;return!this.busy&&!this.blockedDueToUnconfirmedChildren&&(this.busy=!0,this.WorkPackageService.performBulkDelete(this.workPackages.map(function(e){return e.id}),!0).then(function(){n.busy=!1,n.closeMe(e),n.wpTableFocus.clear(),"work-packages.list"!==n.$state.current.name&&n.backRoutingService.goBack(!0)}).catch(function(){n.busy=!1}),!1)},n.prototype.children=function(e){return e.hasOwnProperty("children")?e.children:[]},n}(He.a),_c=function(){function e(e){this.opContextMenu=e,this.items=[]}return e.prototype.onClose=function(){this.afterFocusOn.focus()},e.prototype.onOpen=function(e){e.find(".menu-item").first().focus()},e.prototype.positionArgs=function(e){return{my:"left top",at:"right bottom",of:e,collision:"flipfit"}},Object.defineProperty(e.prototype,"locals",{get:function(){return{items:this.items}},enumerable:!0,configurable:!0}),e.prototype.open=function(e){this.opContextMenu.show(this,e)},Object.defineProperty(e.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),e}(),xc=function(e){function n(n,t){var l=e.call(this,t)||this;return l.elementRef=n,l.opContextMenu=t,l.items=[],l}return a.d(n,e),n.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.$element.on("click",function(n){return n.preventDefault(),n.stopPropagation(),e.opContextMenu.isActive(e)?(e.opContextMenu.close(),!1):(e.open(n),!1)}),Mousetrap(this.$element[0]).bind("shift+alt+f10",function(n){e.open(n)})},n.prototype.positionArgs=function(e){return{my:"left top",at:"left bottom",of:this.$element,collision:"flipfit"}},n}(_c),Tc=[{key:"log_time",link:"logTime",resource:"workPackage"},{key:"change_project",icon:"icon-move",link:"move",resource:"workPackage"},{key:"copy",link:"copy",resource:"workPackage"},{key:"delete",link:"delete",resource:"workPackage"},{key:"export-pdf",link:"pdf",resource:"workPackage"},{key:"export-atom",link:"atom",resource:"workPackage"}],Oc=function(){function e(e,n,t){this.workPackage=e,this.PathHelper=n,this.$state=t,this.project=e.project}return Object.defineProperty(e.prototype,"allActions",{get:function(){return{workPackage:this.workPackage,project:this.project}},enumerable:!0,configurable:!0}),e.prototype.copyLink=function(){return 0===this.$state.current.name.indexOf("work-packages.list.details")?this.PathHelper.workPackageDetailsCopyPath(this.project.identifier,this.workPackage.id):this.PathHelper.workPackageCopyPath(this.workPackage.id)},e.prototype.linkForAction=function(e){return"copy"===e.key?e.link=this.copyLink():e.link=this.allActions[e.resource][e.link].href,e},e.prototype.isPermitted=function(e){return void 0!==this.allActions[e.resource]&&void 0!==this.allActions[e.resource][e.link]},e.prototype.permittedActionKeys=function(e){var n=this,t=_.filter(e,function(e){return n.isPermitted(e)});return _.map(t,function(e){return e.key})},e.prototype.permittedActionsWithLinks=function(e){var n=this,t=_.filter(_.cloneDeep(e),function(e){return n.isPermitted(e)});return _.map(t,function(e){return n.linkForAction(e)})},e}(),Ec=function(e){function n(n,t,l,i,r,o,u,a){var s=e.call(this,r,u)||this;return s.HookService=n,s.$state=t,s.injector=l,s.PathHelper=i,s.elementRef=r,s.opModalService=o,s.opContextMenuService=u,s.authorisationService=a,s}return a.d(n,e),n.prototype.open=function(e){var n=this;this.workPackage.project.$load().then(function(){n.authorisationService.initModelAuth("work_package",n.workPackage.$links);var t=new Oc(n.workPackage,n.PathHelper,n.$state),l=n.getPermittedActions(t);n.buildItems(l),n.opContextMenu.show(n,e)})},n.prototype.triggerContextMenuAction=function(e,n){var t=e.link;switch(n){case"copy":this.$state.go("work-packages.copy",{copiedFromWorkPackageId:this.workPackage.id});break;case"delete":this.opModalService.show(Sc,this.injector,{workPackages:[this.workPackage]});break;default:window.location.href=t}},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.getPermittedActions=function(e){var n=e.permittedActionsWithLinks(Tc);return _.each(this.getPermittedPluginActions(e),function(e){var t=e.indexBy?e.indexBy(n):n.length;n.splice(t,0,e)}),n},n.prototype.getPermittedPluginActions=function(e){var n=this.HookService.call("workPackageSingleContextMenu");return e.permittedActionsWithLinks(n)},n.prototype.buildItems=function(e){var n=this,t=this.workPackage.configureForm;return this.items=e.map(function(e){var t=e.key;return{disabled:!1,linkText:I18n.t("js.button_"+t),href:e.link,icon:e.icon||"icon-"+t,onClick:function(l){return(!e.link||!kc.isClickedWithModifier(l))&&(n.triggerContextMenuAction(e,t),!0)}}}),t&&this.items.push({href:t.href,icon:"icon-settings3",linkText:I18n.t("js.button_configure-form"),onClick:function(){return!1}}),this.items},n}(xc),Dc=function(e,n){this.I18n=e,this.halEditing=n,this.text={button_more:this.I18n.t("js.button_more")}},Fc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Nc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","work-packages--details-toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"wp-watcher-button",[],null,null,null,Cc,bc)),l["ɵdid"](2,245760,null,0,vc,[A.a,mc,Cn],{workPackage:[0,"workPackage"],showText:[1,"showText"]},null),(e()(),l["ɵeld"](3,0,null,null,4,"button",[["class","button dropdown-relative"],["wpSingleContextMenu",""]],[[1,"accesskey",0]],null,null,null,null)),l["ɵdid"](4,4210688,null,0,Ec,[It,g.G,l.Injector,ge,l.ElementRef,Wn.b,is,In],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](5,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--dropdown-indicator"]],null,null,null,hl,dl)),l["ɵdid"](7,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage,!0),e(n,4,0,t.workPackage);e(n,7,0,"button--dropdown-indicator")},function(e,n){var t=n.component;e(n,3,0,7),e(n,5,0,t.text.button_more)})}l["ɵccf"]("wp-details-toolbar",Dc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-details-toolbar",[],null,null,null,Nc,Fc)),l["ɵdid"](1,49152,null,0,Dc,[A.a,ns],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Ac=t("dzgT"),Vc=function(){function e(e,n){this.wpCacheService=e,this.wpRelations=n,this.count=0}return e.prototype.ngOnInit=function(){var e=this;this.wpRelations.require(this.wpId.toString()),Object(Ac.a)(this.wpRelations.state(this.wpId.toString()).values$(),this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$()).pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){var t=n[0],l=n[1],i=_.size(t),r=_.size(l.children);e.count=i+r})},e.prototype.ngOnDestroy=function(){},e}(),Mc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function qc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","wp-tabs-count"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.count)})}function Lc(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,qc)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.count>0)},null)}l["ɵccf"]("wp-relations-count",Vc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-count",[],null,null,null,Lc,Mc)),l["ɵdid"](1,245760,null,0,Vc,[Cn,On],null,null)],function(e,n){e(n,1,0)},null)},{wpId:"wpId"},{},[]);var $c=function(){function e(e,n,t){this.I18n=e,this.injector=n,this.deviceService=t,this.localStorageKey="openProject-mainMenuWidth",this.defaultWidth=230,this.currentProject=this.injector.get(Qn),this.global=window,this.htmlNode=document.getElementsByTagName("html")[0],this.mainMenu=jQuery("#main-menu")[0],this.hideElements=jQuery(".can-hide-navigation"),this.titleData=new Ot.a(""),this.titleData$=this.titleData.asObservable(),this.changeData=new Ot.a({}),this.changeData$=this.changeData.asObservable()}return e.prototype.initializeMenu=function(){if(this.mainMenu){this.elementWidth=parseInt(window.OpenProject.guardedLocalStorage(this.localStorageKey)),this.elementWidth?this.setWidth():this.saveWidth(this.mainMenu.offsetWidth);var e=this.injector.get(Qn);(jQuery(document.body).hasClass("controller-my")&&0==this.elementWidth||null===e.id)&&this.saveWidth(this.defaultWidth),this.deviceService.isMobile&&this.closeMenu()}},e.prototype.toggleNavigation=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.showNavigation?this.closeMenu():this.deviceService.isMobile?(this.setWidth(window.innerWidth),this.setupAutocloseMainMenu()):this.saveWidth(parseInt(window.OpenProject.guardedLocalStorage(this.localStorageKey))),this.toggleClassHidden(),this.setToggleTitle(),setTimeout(function(){jQuery('#main-menu [class*="-menu-item"]:visible').first().focus()},500)},e.prototype.closeMenu=function(){this.setWidth(0),this.hideElements.addClass("hidden-navigation")},e.prototype.closeWhenOnMobile=function(){this.deviceService.isMobile&&this.closeMenu()},e.prototype.setToggleTitle=function(){this.showNavigation?this.toggleTitle=this.I18n.t("js.label_hide_project_menu"):this.toggleTitle=this.I18n.t("js.label_expand_project_menu"),this.titleData.next(this.toggleTitle)},e.prototype.toggleClassHidden=function(){this.hideElements.toggleClass("hidden-navigation",!this.showNavigation)},e.prototype.saveWidth=function(e){var n=this,t=window.innerWidth-520;null!=e&&e>t&&(e=t),this.setWidth(e),window.OpenProject.guardedLocalStorage(this.localStorageKey,String(this.elementWidth)),this.setToggleTitle();var l=jQuery.Event("change");jQuery("#content-wrapper").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n.changeData.next(l)})},e.prototype.setWidth=function(e){void 0!==e&&(this.elementWidth=e),this.snapBack(),this.ensureContentVisibility(),this.global.showNavigation=this.showNavigation,this.toggleClassHidden(),this.htmlNode.style.setProperty("--main-menu-width",this.elementWidth+"px")},e.prototype.setupAutocloseMainMenu=function(){var e=this;jQuery("#main-menu").off("focusout.main_menu"),jQuery("#main-menu").on("focusout.main_menu",function(n){var t=n.originalEvent;e.showNavigation&&document.getElementById("main-menu-toggle")!==t.relatedTarget&&setTimeout(function(){jQuery.contains(document.getElementById("main-menu"),t.relatedTarget)||e.closeMenu()},0)})},e.prototype.snapBack=function(){this.elementWidth<=10&&(this.elementWidth=0)},e.prototype.ensureContentVisibility=function(){var e=document.documentElement.clientWidth;this.elementWidth>=e-150&&(this.elementWidth=e-150)},Object.defineProperty(e.prototype,"showNavigation",{get:function(){return this.elementWidth>10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGlobalPage",{get:function(){return!this.currentProject.id},enumerable:!0,configurable:!0}),e}(),Hc=function(){function e(e){this.documentElement=e}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.hasBodyClass("-browser-mobile")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEdge",{get:function(){return this.hasBodyClass("-browser-edge")},enumerable:!0,configurable:!0}),e.prototype.hasBodyClass=function(e){return this.documentElement.body.classList.contains(e)},e}(),Bc=function(){function e(e,n,t,l){this.toggleService=e,this.elementRef=n,this.$transitions=t,this.browserDetector=l,this.moving=!1}return e.prototype.ngOnInit=function(){var e=this;this.resizingElement=document.getElementsByClassName(this.elementClass)[0];var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);this.elementFlex=n?parseInt(n,10):this.resizingElement.offsetWidth,0===this.elementFlex&&this.resizingElement.parentElement&&(this.elementFlex=this.resizingElement.parentElement.offsetWidth/2),this.resizingElement.style.flexBasis=this.elementFlex+"px",jQuery(document).ready(function(){e.applyColumnLayout(e.resizingElement,e.elementFlex)}),this.element=this.elementRef.nativeElement,this.toggleService.changeData$.pipe(Object(ft.a)(),Object(Gn.b)(this)).subscribe(function(n){e.toggleFullscreenColumns()});var t=this;jQuery(window).resize(function(){t.toggleFullscreenColumns()})},e.prototype.ngOnDestroy=function(){this.resizingElement.style.flexBasis=null},e.prototype.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),1!==e.buttons&&1!==e.which||(this.oldPosition=e.clientX,this.moving=!0,this.mouseMoveHandler=this.resizeElement.bind(this,this.resizingElement),document.getElementsByTagName("body")[0].setAttribute("style","cursor: col-resize !important"),window.addEventListener("mousemove",this.mouseMoveHandler),window.addEventListener("touchmove",this.mouseMoveHandler,{passive:!1}))},e.prototype.handleTouchEnd=function(e){window.removeEventListener("touchmove",this.mouseMoveHandler);var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);n&&(this.elementFlex=parseInt(n,10))},e.prototype.handleMouseUp=function(e){if(!this.moving)return!0;window.removeEventListener("mousemove",this.mouseMoveHandler),document.body.style.cursor="auto";var n=window.OpenProject.guardedLocalStorage(this.localStorageKey);n&&(this.elementFlex=parseInt(n,10)),this.moving=!1;var t=new Event(this.resizeEvent);return window.dispatchEvent(t),!1},e.prototype.resizeElement=function(e,n){n.preventDefault(),n.stopPropagation();var t=this.oldPosition-(n.clientX||n.pageX);this.oldPosition=n.clientX||n.pageX,this.elementFlex=this.elementFlex+t;var l=this.elementFlex<530?530:this.elementFlex;window.OpenProject.guardedLocalStorage(this.localStorageKey,String(l)),this.applyColumnLayout(e,l),e.style.flexBasis=l+"px"},e.prototype.applyColumnLayout=function(e,n){e===jQuery(".work-packages-full-view--split-right")[0]?this.toggleFullscreenColumns():this.toggleColumns(e,700)},e.prototype.toggleColumns=function(e,n){void 0===n&&(n=750),e&&!this.browserDetector.isEdge&&jQuery(e).toggleClass("-can-have-columns",e.offsetWidth>n)},e.prototype.toggleFullscreenColumns=function(){var e=jQuery(".work-packages-full-view--split-left")[0];this.toggleColumns(e)},e}(),zc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Wc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","work-packages--resizer icon-resizer-vertical-lines"]],null,null,null,null,null))],null,null)}l["ɵccf"]("wp-resizer",Bc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,1).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["ɵnov"](e,1).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["ɵnov"](e,1).handleMouseUp(t)&&i);return i},Wc,zc)),l["ɵdid"](1,245760,null,0,Bc,[$c,l.ElementRef,g.O,Hc],null,null)],function(e,n){e(n,1,0)},null)},{elementClass:"elementClass",resizeEvent:"resizeEvent",localStorageKey:"localStorageKey"},{},[]);var Qc=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.name},enumerable:!0,configurable:!0}),e.prototype.setIfFirst=function(e,n){this.isEmpty&&e&&(this.name=e,this.params=n)},e}(),Uc=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.schema=function(){return this.halResourceService.get(this.projectsPath.schema).toPromise()},n.prototype.listUrl=function(){return this.projectsPath.toString()},n.prototype.oneUrl=function(e){return this.projectsPath.id(e).toString()},Object.defineProperty(n.prototype,"projectsPath",{get:function(){return this.pathHelper.api.v3.projects},enumerable:!0,configurable:!0}),n}(Ve),Gc=function(e){function n(n,t,l){var i=e.call(this)||this;return i.states=n,i.schemaCacheService=t,i.projectDmService=l,i}return a.d(n,e),n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)})).then(function(e){})},n.prototype.updateValue=function(n,t){var l=this;this.schemaCacheService.ensureLoaded(t).then(function(){e.prototype.updateValue.call(l,n,t)})},n.prototype.load=function(e){var n=this;return this.projectDmService.one(parseInt(e)).then(function(e){return n.schemaCacheService.ensureLoaded(e).then(function(){return e})})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.projects},enumerable:!0,configurable:!0}),n}(mn),Kc=function(){function e(e){this.titleService=e}return Object.defineProperty(e.prototype,"current",{get:function(){return this.titleService.getTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleParts",{get:function(){return this.current.split(" | ")},enumerable:!0,configurable:!0}),e.prototype.setFirstPart=function(e){var n=this.titleParts;n[0]=e,this.titleService.setTitle(n.join(" | "))},e}(),Yc=function(){function e(e,n){this.injector=e,this.workPackageId=n,this.wpCacheService=this.injector.get(Cn),this.states=this.injector.get(d),this.I18n=this.injector.get(A.a),this.keepTab=this.injector.get(_e),this.PathHelper=this.injector.get(ge),this.halEditing=this.injector.get(ns),this.wpTableFocus=this.injector.get(jc),this.notificationService=this.injector.get(qn),this.projectCacheService=this.injector.get(Gc),this.authorisationService=this.injector.get(In),this.cdRef=this.injector.get(l.ChangeDetectorRef),this.text={},this.titleService=this.injector.get(Kc),this.initializeTexts()}return e.prototype.ngOnDestroy=function(){},e.prototype.observeWorkPackage=function(){var e=this;this.wpCacheService.require(this.workPackageId).catch(function(n){return e.notificationService.handleRawError(n)}),this.wpCacheService.state(this.workPackageId).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n,e.init(),e.cdRef.detectChanges()})},e.prototype.initializeTexts=function(){var e=this;this.text.tabs={},["overview","activity","relations","watchers"].forEach(function(n){e.text.tabs[n]=e.I18n.t("js.work_packages.tabs."+n)})},e.prototype.init=function(){var e=this;this.projectCacheService.require(this.workPackage.project.idFromLink).then(function(){e.projectIdentifier=e.workPackage.project.identifier}),this.authorisationService.initModelAuth("work_package",this.workPackage.$links),this.titleService.setFirstPart(this.workPackage.subjectWithType(20)),this.showStaticPagePath=this.PathHelper.workPackagePath(this.workPackageId),this.keepTab.observable.pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.updateFocusAnchorLabel(n.active)})},e.prototype.updateFocusAnchorLabel=function(e){var n=this.I18n.t("js.label_work_package_details_you_are_here",{tab:this.I18n.t("js.work_packages.tabs."+e),type:this.workPackage.type.name,subject:this.workPackage.subject});return this.focusAnchorLabel=n},e.prototype.canViewWorkPackageWatchers=function(){return!(!this.workPackage||!this.workPackage.watchers)},Object.defineProperty(e.prototype,"isEditable",{get:function(){return this.workPackage.isEditable},enumerable:!0,configurable:!0}),e}(),Zc=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,n,u.params.workPackageId)||this;return a.injector=n,a.states=t,a.firstRoute=l,a.keepTab=i,a.wpTableSelection=r,a.wpTableFocus=o,a.$state=u,a}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.observeWorkPackage();var n=this.$state.params.workPackageId;if(this.wpTableFocus.focusedWorkPackage)this.wpTableFocus.updateFocus(n,!1);else{var t="work-packages.list.details.overview"===this.firstRoute.name,l=this.firstRoute.params&&n===this.firstRoute.params.workPackageI;this.wpTableFocus.updateFocus(n,t&&l)}this.wpTableSelection.isEmpty&&this.wpTableSelection.setRowState(n,!0),this.wpTableFocus.whenChanged().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(t){!(n.toString()===t.toString())&&e.$state.includes("work-packages.list.details")&&e.$state.go(e.$state.current.name,{workPackageId:t,focus:!1})})},n.prototype.close=function(){this.$state.go("work-packages.list",this.$state.params)},n.prototype.switchToFullscreen=function(){this.$state.go(this.keepTab.currentShowState,this.$state.params)},Object.defineProperty(n.prototype,"shouldFocus",{get:function(){return!0===this.$state.params.focus},enumerable:!0,configurable:!0}),n.prototype.initializeTexts=function(){e.prototype.initializeTexts.call(this),this.text.closeDetailsView=this.I18n.t("js.button_close_details"),this.text.goTofullScreen=this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")},n}(Yc),Jc=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Xc(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["uiSref","work-packages.list.details.watchers"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,1).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](1,737280,[[4,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["ɵdid"](2,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,4,{_srefs:1}),l["ɵdid"](4,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](5,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"wp-watchers-count",[],null,null,null,Ts,_s)),l["ɵdid"](7,245760,null,0,Ss,[Cn],{wpId:[0,"wpId"]},null)],function(e,n){var t=n.component;e(n,1,0,"work-packages.list.details.watchers");e(n,4,0,"selected"),e(n,7,0,t.workPackage.id)},function(e,n){e(n,5,0,n.component.text.tabs.watchers)})}function ed(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","work-packages--details-content work-packages-tab-view--overflow"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"span",[["class","hidden-for-sighted"],["focus","shouldFocus"],["tabindex","-1"]],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](2,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"wp-breadcrumb",[],null,null,null,ac,lc)),l["ɵdid"](4,49152,null,0,nc,[A.a],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](5,0,null,null,5,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](6,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](7,0,null,0,1,"wp-subject",[],null,null,null,gc,hc)),l["ɵdid"](8,245760,null,0,pc,[g.Q,Cn],null,null),(e()(),l["ɵeld"](9,16777216,null,0,1,"div",[["class","work-package-details-tab"],["ui-view",""]],null,null,null,Mt.c,Mt.a)),l["ɵdid"](10,245760,null,0,oo.a,[g.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null)],function(e,n){var t=n.component;e(n,2,0,"shouldFocus"),e(n,4,0,t.workPackage),e(n,6,0,t.workPackage),e(n,8,0);e(n,10,0,"")},function(e,n){e(n,1,0,n.component.focusAnchorLabel)})}function nd(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"wp-details-toolbar",[],null,null,null,Nc,Fc)),l["ɵdid"](2,49152,null,0,Dc,[A.a,ns],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function td(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,37,"div",[["class","work-packages--details loading-indicator--location"],["data-indicator-name","wpDetails"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,29,"div",[["id","tabs"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,28,"ul",[["class","tabrow"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,5,"li",[["uiSref","work-packages.list.details.overview"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,4).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](4,737280,[[1,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["ɵdid"](5,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,1,{_srefs:1}),l["ɵdid"](7,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,5,"li",[["uiSref","work-packages.list.details.activity"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,10).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](10,737280,[[2,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["ɵdid"](11,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,2,{_srefs:1}),l["ɵdid"](13,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](14,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,7,"li",[["uiSref","work-packages.list.details.relations"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,16).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](16,737280,[[3,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"]},null),l["ɵdid"](17,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,3,{_srefs:1}),l["ɵdid"](19,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](20,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,1,"wp-relations-count",[],null,null,null,Lc,Mc)),l["ɵdid"](22,245760,null,0,Vc,[Cn,On],{wpId:[0,"wpId"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Xc)),l["ɵdid"](24,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](25,0,null,null,2,"li",[["class","tab-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,1,"accessible-by-keyboard",[["linkClass","work-packages--details-fullscreen-icon"],["spanClass","icon-context icon-to-fullscreen"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},jl,Il)),l["ɵdid"](27,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](28,0,null,null,2,"li",[["class","tab-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,1,"accessible-by-keyboard",[["linkClass","work-packages--details-close-icon"],["spanClass","icon-context icon-close"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.close()&&l);return l},jl,Il)),l["ɵdid"](30,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],spanClass:[2,"spanClass"],linkAriaLabel:[3,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵand"](16777216,null,null,1,null,ed)),l["ɵdid"](32,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,nd)),l["ɵdid"](34,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](35,0,null,null,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](36,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,37).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["ɵnov"](e,37).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["ɵnov"](e,37).handleMouseUp(t)&&i);return i},Wc,zc)),l["ɵdid"](37,245760,null,0,Bc,[$c,l.ElementRef,g.O,Hc],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,4,0,"work-packages.list.details.overview");e(n,7,0,"selected");e(n,10,0,"work-packages.list.details.activity");e(n,13,0,"selected");e(n,16,0,"work-packages.list.details.relations");e(n,19,0,"selected"),e(n,22,0,t.workPackage.id),e(n,24,0,t.canViewWorkPackageWatchers());e(n,27,0,"work-packages--details-fullscreen-icon",t.text.goTofullScreen,"icon-context icon-to-fullscreen",t.text.goTofullScreen);e(n,30,0,"work-packages--details-close-icon",t.text.closeDetailsView,"icon-context icon-close",t.text.closeDetailsView),e(n,32,0,t.workPackage),e(n,34,0,t.workPackage);e(n,37,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},function(e,n){var t=n.component;e(n,8,0,t.text.tabs.overview),e(n,14,0,t.text.tabs.activity),e(n,20,0,t.text.tabs.relations)})}function ld(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,td)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var id=l["ɵccf"]("wp-split-view-entry",Zc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"wp-split-view-entry",[],null,null,null,ld,Jc)),l["ɵprd"](4608,null,Mn,qn,[l.Injector,g.G,Cn]),l["ɵdid"](2,245760,null,0,Zc,[l.Injector,d,Qc,_e,Ic,jc,g.G],null,null)],function(e,n){e(n,2,0)},null)},{},{},[]),rd=_r.compareByHrefOrString,od=function(){function e(e,n,t,l){void 0===l&&(l=[]),this.injector=e,this.change=n,this.filters=t,this.excluded=l,this.currentUser=this.injector.get(Zn),this.halResourceService=this.injector.get(Q)}return e.prototype.applyDefaultsFromFilters=function(){var e=this;_.each(this.filters,function(n){if("="===n.operator.id&&-1===e.excluded.indexOf(n.id)&&!e.filterAlreadyApplied(n)){var t=n.values[0];t&&e.setValueFor(n.id,t)}})},e.prototype.setValueFor=function(e,n){var t=this.findSpecialValue(n,e)||n;t&&(this.change.projectedResource[e]=t)},e.prototype.findSpecialValue=function(e,n){return"parent"===n?e:e instanceof L&&"/api/v3/users/me"===e.$href&&this.currentUser.isLoggedIn?this.halResourceService.fromSelfLink("/api/v3/users/"+this.currentUser.userId):void 0},e.prototype.filterAlreadyApplied=function(e){if(e.values.length<=1)return!1;for(var n=this.change.projectedResource[e.id],t=0;t<e.values.length;t++)if(rd(n,e.values[t]))return!0;return!1},e}(),ud="/api/v3/work_packages/new",ad=function(){function e(e,n,t,l,i,r,o,u){var a=this;this.injector=e,this.hooks=n,this.wpCacheService=t,this.halResourceService=l,this.querySpace=i,this.halEditing=r,this.workPackageDmService=o,this.halEvents=u,this.newWorkPackageCreatedSubject=new c.a,this.halEditing.comittedChanges.pipe(Object(Gn.b)(this),Object(Yn.a)(function(e){return"WorkPackage"===e.resource._type&&e.wasNew})).subscribe(function(e){a.newWorkPackageCreated(e.resource)}),this.halEditing.changes$(ud).pipe(Object(Gn.b)(this),Object(Yn.a)(function(e){return!e})).subscribe(function(){a.reset()})}return e.prototype.ngOnDestroy=function(){},e.prototype.newWorkPackageCreated=function(e){this.halEvents.push(e,{eventType:"created"}),this.reset(),this.newWorkPackageCreatedSubject.next(e)},e.prototype.onNewWorkPackage=function(){return this.newWorkPackageCreatedSubject.asObservable()},e.prototype.createNewWorkPackage=function(e){var n=this;return this.getEmptyForm(e).then(function(e){return n.fromCreateForm(e)})},e.prototype.createNewTypedWorkPackage=function(e,n){var t=this;return this.workPackageDmService.typedCreateForm(n,e).then(function(e){return t.fromCreateForm(e)})},e.prototype.fromCreateForm=function(e){var n=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());n.initializeNewResource(e);var t=this.halEditing.edit(n,e);return this.hooks.call("workPackageNewInitialization",t),t},e.prototype.copyWorkPackage=function(e){var n=this,t=e.pristineResource.$source;return this.workPackageDmService.emptyCreateForm(t).then(function(e){return n.fromCreateForm(e)})},e.prototype.copyFrom=function(e){var n=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());return n.initializeNewResource(e),this.halEditing.edit(n,e)},e.prototype.getEmptyForm=function(e){return this.form||(this.form=this.workPackageDmService.emptyCreateForm({},e)),this.form},e.prototype.cancelCreation=function(){this.halEditing.stopEditing({href:ud}),this.reset()},e.prototype.changesetUpdates$=function(){return this.halEditing.state(ud).values$()},e.prototype.createOrContinueWorkPackage=function(e,n){var t=this,l=this.continueExistingEdit(n);return l||(l=this.createNewWithDefaults(e,n)),l.then(function(e){return t.halEditing.updateValue(ud,e),t.wpCacheService.updateWorkPackage(e.pristineResource),e})},e.prototype.reset=function(){this.wpCacheService.clearSome("new"),this.form=void 0},e.prototype.continueExistingEdit=function(e){var n=this.halEditing.state(ud).value;if(void 0!==n){var t=n.projectedResource.type,l=!n.isEmpty(),i=!t&&!e,r=e&&t&&t.idFromLink===e.toString();if(l&&(i||r))return Promise.resolve(n)}return null},e.prototype.createNewWithDefaults=function(e,n){var t=this;return(n?this.createNewTypedWorkPackage(e,n):this.createNewWorkPackage(e)).then(function(e){if(!e)throw"No new work package was created";var l=[];return n&&(l=["type"]),t.applyDefaults(e,e.projectedResource,l),e})},e.prototype.applyDefaults=function(e,n,t){var l=this.querySpace.query.value;l&&new od(this.injector,e,l.filters,t).applyDefaultsFromFilters()},e}(),sd=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.browserDetector=l,o.wpCreate=i,o.$state=r,o}return a.d(n,e),n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.active&&(this.browserDetector.isMobile&&(this.stateName="work-packages.new"),this.loadingPromise=this.wpCreate.getEmptyForm(this.projectIdentifier).then(function(e){return n.buildItems(e.schema.type.allowedValues)}))},n.prototype.open=function(e){var n=this;this.loadingPromise.then(function(){n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"types-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(e){var n=this;this.items=e.map(function(e){return{disabled:!1,linkText:e.name,href:n.$state.href(n.stateName,{type:e.id}),ariaLabel:e.name,class:Ul.inlineClass("type",e.id),onClick:function(t){return!kc.isClickedWithModifier(t)&&(n.$state.go(n.stateName,{type:e.id}),!0)}}})},n}(xc),cd=function(){function e(e,n,t){this.$state=e,this.currentProject=n,this.I18n=t,this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package")}}return e.prototype.ngOnInit=function(){this.projectIdentifier=this.currentProject.identifier},e.prototype.createWorkPackage=function(){this.$state.go(this.stateName,{projectPath:this.projectIdentifier})},e.prototype.isDisabled=function(){return!this.allowed||this.$state.includes("**.new")},e}(),dd=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function pd(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","wp-create-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"button",[["class","button -alt-highlight add-work-package"],["opTypesCreateDropdown",""]],[[8,"disabled",0],[1,"aria-label",0]],null,null,null,null)),l["ɵdid"](2,4210688,null,0,sd,[l.ElementRef,is,Hc,ad,g.G],{projectIdentifier:[0,"projectIdentifier"],stateName:[1,"stateName"],active:[2,"active"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](5,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,hl,dl)),l["ɵdid"](7,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,t.projectIdentifier,t.stateName,t.allowed);e(n,4,0,"button--icon icon-add");e(n,7,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,1,0,t.isDisabled(),t.text.explanation),e(n,5,0,t.text.createWithDropdown)})}l["ɵccf"]("wp-create-button",cd,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-create-button",[],null,null,null,pd,dd)),l["ɵdid"](1,114688,null,0,cd,[g.G,Qn,A.a],null,null)],function(e,n){e(n,1,0)},null)},{stateName:"stateName",allowed:"allowed"},{},[]);var hd=function(e){function n(n,t,l,i,r,o,u,a){var s=e.call(this,n,t)||this;return s.elementRef=n,s.opContextMenu=t,s.$state=l,s.workPackageNotificationService=i,s.halEditing=r,s.notificationService=o,s.I18n=u,s.halEvents=a,s}return a.d(n,e),n.prototype.open=function(e){var n=this,t=this.halEditing.changeFor(this.workPackage);t.getForm().then(function(l){var i=l.schema.status.allowedValues;n.buildItems(i),t.schema.status.writable?n.opContextMenu.show(n,e):n.notificationService.addError(n.I18n.t("js.work_packages.message_work_package_status_blocked"))})},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"wp-status-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.updateStatus=function(e){var n=this,t=this.halEditing.changeFor(this.workPackage);t.projectedResource.status=e,this.workPackage.isNew||this.halEditing.save(t).then(function(){n.workPackageNotificationService.showSave(n.workPackage),n.halEvents.push(n.workPackage,{eventType:"updated"})})},n.prototype.buildItems=function(e){var n=this;this.items=e.map(function(e){return{disabled:!1,linkText:e.name,postIcon:e.isReadonly?"icon-locked":null,postIconTitle:n.I18n.t("js.work_packages.message_work_package_read_only"),class:Ul.inlineClass("status",e.id),onClick:function(){return n.updateStatus(e),!0}}})},n}(xc),fd=function(){function e(e,n,t,l){this.I18n=e,this.cdRef=n,this.wpCacheService=t,this.halEditing=l,this.text={explanation:this.I18n.t("js.label_edit_status"),workPackageReadOnly:this.I18n.t("js.work_packages.message_work_package_read_only"),workPackageStatusBlocked:this.I18n.t("js.work_packages.message_work_package_status_blocked")}}return e.prototype.ngOnInit=function(){var e=this;this.halEditing.temporaryEditResource(this.workPackage).values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.workPackage=n,e.cdRef.detectChanges(),e.workPackage.status&&e.workPackage.status.$load()})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"buttonTitle",{get:function(){return this.workPackage.isReadonly?this.text.workPackageReadOnly:this.workPackage.isEditable&&this.isDisabled?this.text.workPackageStatusBlocked:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusHighlightClass",{get:function(){var e=this.status;if(e)return Ul.backgroundClass("status",e.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){if(this.halEditing)return this.changeset.projectedResource.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowed",{get:function(){return this.workPackage.isAttributeEditable("status")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){var e=this.changeset.isWritable("status");return!this.allowed||!e||this.changeset.inFlight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeset",{get:function(){return this.halEditing.changeFor(this.workPackage)},enumerable:!0,configurable:!0}),e}(),gd=[[".wp-status-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;padding:5px;margin-bottom:0;background-color:var(--status-selector-bg-color);border:none;color:#fff;white-space:nowrap;max-width:100%}.wp-status-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button--text[_ngcontent-%COMP%]{margin:0 5px}.wp-status-button.-small[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:12px;padding:4px;margin-right:0}"]],md=l["ɵcrt"]({encapsulation:0,styles:gd,data:{}});function vd(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-locked"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"button--icon icon-locked")},null)}function bd(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,"div",[["class","wp-status-button"]],[[1,"title",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](3,0,null,null,8,"button",[["class","button"],["wpStatusDropdown",""]],[[8,"disabled",0],[1,"aria-label",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵdid"](6,4210688,null,0,hd,[l.ElementRef,is,g.G,qn,ns,Vn,A.a,ct],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vd)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](9,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,hl,dl)),l["ɵdid"](11,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,"wp-status-button",t.containerClass);e(n,5,0,"button",t.statusHighlightClass),e(n,6,0,t.workPackage),e(n,8,0,t.workPackage.isReadonly);e(n,11,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,0,0,t.buttonTitle),e(n,3,0,t.isDisabled,t.text.explanation),e(n,9,0,t.status.name)})}function yd(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,bd)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.status)},null)}l["ɵccf"]("wp-status-button",fd,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-status-button",[],null,null,null,yd,md)),l["ɵdid"](1,245760,null,0,fd,[A.a,l.ChangeDetectorRef,Cn,ns],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",containerClass:"containerClass"},{},[]);var wd=function(){function e(e,n){this.pathHelper=e,this.I18n=n}return e.prototype.ngOnInit=function(){this.href=this.pathHelper.userPath(this.user.idFromLink),this.name=this.user.name,this.label=this.I18n.t("js.label_author",{user:this.name})},e}(),Cd=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function kd(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"a",[],[[1,"href",4],[1,"title",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.href,t.label,t.user.name)})}l["ɵccf"]("user-link",wd,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-link",[],null,null,null,kd,Cd)),l["ɵdid"](1,114688,null,0,wd,[ge,A.a],null,null)],function(e,n){e(n,1,0)},null)},{user:"user"},{},[]);var Id=function(){function e(e,n){this.wpeditForm=e,this.elementRef=n}return e.prototype.ngOnInit=function(){this.$element=jQuery(this.elementRef.nativeElement)},e.prototype.activate=function(e){if(jQuery(e.target).closest(".help-text--entry").length)return!0;var n=this.wpeditForm.fields[this.fieldName];return n&&n.handleUserActivate(null),!1},e}(),jd=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Rd(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","wp-replacement-label"],["tabindex","-1"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.activate(t)&&l);return l},null,null)),l["ɵncd"](null,0)],null,null)}l["ɵccf"]("wp-replacement-label",Id,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-replacement-label",[],null,null,null,Rd,jd)),l["ɵdid"](1,114688,null,0,Id,[ss,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{fieldName:"fieldName"},{},["*"]);var Pd=t("umFc"),Sd=t("goJk"),_d=function(){function e(e,n,t,l){this.state=e,this.I18n=n,this.injector=t,this.pathHelper=l,this.text={}}return Object.defineProperty(e.prototype,"viewpoints",{get:function(){return this._viewpoints},set:function(e){this._viewpoints=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.viewpoints=this.workPackage.bcf.viewpoints.map(function(n){return{id:n.id,fileName:n.file_name,fullPath:e.pathHelper.attachmentDownloadPath(n.id,n.file_name)}}),this.galleryOptions=[{width:"100%",height:"400px",thumbnailsColumns:4,imageAnimation:"",previewAnimation:!1,previewCloseOnEsc:!0,previewKeyboardNavigation:!0,imageSize:"contain",imageArrowsAutoHide:!0,thumbnailsArrowsAutoHide:!0,thumbnailsAutoHide:!0,thumbnailsMargin:5,thumbnailMargin:5,previewDownload:!0,arrowPrevIcon:"icon-arrow-left2",arrowNextIcon:"icon-arrow-right2",closeIcon:"icon-close",downloadIcon:"icon-download",previewCloseOnClick:!0},{breakpoint:800,width:"100%",height:"300px",imagePercent:80,thumbnailsPercent:20,thumbnailsMargin:5,thumbnailMargin:5,imageSize:"contain"},{breakpoint:400,height:"200px"}],this.galleryImages=this.viewpoints.map(function(e){return{small:e.fullPath,medium:e.fullPath,big:e.fullPath}})},e.prototype.galleryPreviewOpen=function(){console.log("preview open"),jQuery("#top-menu")[0].style.zIndex="10"},e.prototype.galleryPreviewClose=function(){console.log("preview close"),jQuery("#top-menu")[0].style.zIndex=""},e.prototype.ngOnDestroy=function(){},e}(),xd=[[".bcf--viewpoints[_ngcontent-%COMP%]{clear:both}.bcf--viewpoints[_ngcontent-%COMP%]   ngx-gallery[_ngcontent-%COMP%]{background:var(--gray-lighter);padding:5px}.bcf--snapshot-preview[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:5px;float:left}.bcf--snapshot-preview.-tiny[_ngcontent-%COMP%]{display:inline-block;float:initial;width:initial;height:100px;margin-right:5px}.bcf--snapshot-preview.-tiny[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-arrow{color:var(--content-link-color)}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-arrow.ngx-gallery-disabled{display:none}"]],Td=l["ɵcrt"]({encapsulation:0,styles:xd,data:{}});function Od(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"h3",[["class","attributes-groupe header-text"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["BCF"])),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","bcf--viewpoints"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"ngx-gallery",[],[[4,"width",null],[4,"height",null],[4,"left",null]],[[null,"previewOpen"],[null,"previewClose"],["window","resize"]],function(e,n,t){var i=!0,r=e.component;"window:resize"===n&&(i=!1!==l["ɵnov"](e,5).onResize()&&i);"previewOpen"===n&&(i=!1!==r.galleryPreviewOpen()&&i);"previewClose"===n&&(i=!1!==r.galleryPreviewClose()&&i);return i},Pd.b,Pd.a)),l["ɵprd"](4608,null,Sd.NgxGalleryHelperService,Sd.NgxGalleryHelperService,[l.Renderer]),l["ɵdid"](5,4571136,null,0,Sd.NgxGalleryComponent,[l.ElementRef],{options:[0,"options"],images:[1,"images"]},{previewOpen:"previewOpen",previewClose:"previewClose"})],function(e,n){var t=n.component;e(n,5,0,t.galleryOptions,t.galleryImages)},function(e,n){e(n,3,0,l["ɵnov"](n,5).width,l["ɵnov"](n,5).height,l["ɵnov"](n,5).left)})}l["ɵccf"]("bcf-wp-single-view",_d,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"bcf-wp-single-view",[],null,null,null,Od,Td)),l["ɵdid"](1,245760,null,0,_d,[g.G,A.a,l.Injector,ge],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Ed=function(){function e(e,n,t,l,i){this.wpViewHierarchies=e,this.states=n,this.wpRelationHierarchy=t,this.wpCacheService=l,this.querySpace=i}return Object.defineProperty(e.prototype,"applicable",{get:function(){return this.wpViewHierarchies.isEnabled},enumerable:!0,configurable:!0}),e.prototype.canIndent=function(e){if(!e.changeParent||!this.applicable)return!1;var n=this.renderedWorkPackageIds,t=n.indexOf(e.id);if(0===t)return!1;var l=e.ancestorIds,i=l.length;if(0===i)return!0;var r=l[i-1];return n[t-1]!==r},e.prototype.canOutdent=function(e){return!(!e.changeParent||!this.applicable)&&!!e.parent},e.prototype.indent=function(e){return a.b(this,void 0,void 0,function(){var n,t,l,i,r,o;return a.e(this,function(u){switch(u.label){case 0:return this.canIndent(e)?(n=this.renderedWorkPackageIds,t=n.indexOf(e.id),l=n[t-1],i=l,[4,this.wpCacheService.require(l)]):[2,Promise.reject()];case 1:return r=u.sent(),(o=_.difference(r.ancestorIds,e.ancestorIds))&&o.length>0&&(i=o[0]),[2,this.wpRelationHierarchy.changeParent(e,i)]}})})},e.prototype.outdent=function(e){if(!this.canOutdent(e))return Promise.reject();var n=null,t=e.ancestorIds,l=t.length;return l>1&&(n=t[l-2]),this.wpRelationHierarchy.changeParent(e,n)},Object.defineProperty(e.prototype,"renderedWorkPackageIds",{get:function(){return this.querySpace.renderedWorkPackageIds.getValueOr([])},enumerable:!0,configurable:!0}),e}(),Dd=function(){function e(e,n,t,l,i,r){this.HookService=e,this.UrlParamsHelper=n,this.wpViewRepresentation=t,this.wpViewTimeline=l,this.wpViewIndent=i,this.PathHelper=r,this.BULK_ACTIONS=[{text:I18n.t("js.work_packages.bulk_actions.edit"),key:"edit",link:"update",href:this.PathHelper.staticBase+"/work_packages/bulk/edit"},{text:I18n.t("js.work_packages.bulk_actions.move"),key:"move",link:"move",href:this.PathHelper.staticBase+"/work_packages/move/new"},{text:I18n.t("js.work_packages.bulk_actions.copy"),key:"copy",link:"copy",href:this.PathHelper.staticBase+"/work_packages/move/new?copy=true"},{text:I18n.t("js.work_packages.bulk_actions.delete"),key:"delete",link:"delete",href:this.PathHelper.staticBase+"/work_packages/bulk?_method=delete"}]}return e.prototype.getPermittedActionLinks=function(e,n,t){var l=[],i=this.getAllowedActions(e,n);return i=(i=i.concat(this.getAllowedParentActions(e))).concat(this.getAllowedRelationActions(e,t)),_.each(i,function(n){l.push({key:n.key,text:n.text,icon:n.icon,link:n.link?e[n.link].href:void 0})}),l},e.prototype.getIntersectOfPermittedActions=function(e){var n=this,t=[],l=_.filter(this.BULK_ACTIONS,function(t){return _.every(e,function(e){return n.getAllowedActions(e,[t]).length>=1})});return _.each(l,function(l){t.push({key:l.key,text:l.text,link:n.getBulkActionLink(l,e)})}),t},e.prototype.getBulkActionLink=function(e,n){var t={"ids[]":n.map(function(e){return e.id})},l=this.UrlParamsHelper.buildQueryString(t),i=e.href.split("?");return i.shift()+"?"+i.concat(new Array(l)).join("&")},e.prototype.getAllowedActions=function(e,n){var t=[];return _.each(n,function(n){n.link&&e.hasOwnProperty(n.link)&&(n.text=n.text||I18n.t("js.button_"+n.key),t.push(n))}),_.each(this.HookService.call("workPackageTableContextMenu"),function(n){if(e.hasOwnProperty(n.link)){var l=n.indexBy?n.indexBy(t):t.length;t.splice(l,0,n)}}),t},e.prototype.getAllowedParentActions=function(e){var n=[];return this.wpViewRepresentation.isList?(this.wpViewIndent.canOutdent(e)&&n.push({key:"hierarchy-outdent",icon:"icon-paragraph-left",text:I18n.t("js.relation_buttons.hierarchy_outdent")}),this.wpViewIndent.canIndent(e)&&n.push({key:"hierarchy-indent",icon:"icon-paragraph-right",text:I18n.t("js.relation_buttons.hierarchy_indent")}),n):[]},e.prototype.getAllowedRelationActions=function(e,n){var t=[];return e.addRelation&&this.wpViewTimeline.isVisible&&(t.push({key:"relation-precedes",text:I18n.t("js.relation_buttons.add_predecessor"),link:"addRelation"}),t.push({key:"relation-follows",text:I18n.t("js.relation_buttons.add_follower"),link:"addRelation"})),e.addChild&&n&&t.push({key:"relation-new-child",text:I18n.t("js.relation_buttons.add_new_child"),link:"addChild"}),t},e.prototype.getPermittedActions=function(e,n,t){return 1===e.length?this.getPermittedActionLinks(e[0],n,t):this.getIntersectOfPermittedActions(e)},e}(),Fd=function(){function e(e){this.injector=e,this.I18n=this.injector.get(A.a),this.authorisationService=this.injector.get(In),this.referenceComponentClass=null,this.referenceTarget=null,this.buttonTexts={reference:"",create:this.I18n.t("js.label_create_work_package")},this.newInlineWorkPackageCreated=new c.a,this.newInlineWorkPackageReferenced=new c.a}return Object.defineProperty(e.prototype,"canAdd",{get:function(){return this.canCreateWorkPackages||this.authorisationService.can("work_package","addChild")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canReference",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCreateWorkPackages",{get:function(){return this.authorisationService.can("work_packages","createWorkPackage")&&this.authorisationService.can("work_packages","editWorkPackage")},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.newInlineWorkPackageCreated.complete(),this.newInlineWorkPackageReferenced.complete()},e}();function Nd(e,n){return"click"!==e.type&&("keydown"!==e.type||e.which!==wl.a.ENTER)||(n(),!1)}var Ad=function(){function e(){}return e.prototype.handleEvent=function(e,n){var t=this;Nd(n,function(){return t.processEvent(e,n)})},e}();function Vd(e){return"wp-row-"+e+"-table"}function Md(e){return jQuery("."+Vd(e))}function qd(e){try{var n=Md(e),t=n.scrollParent(),l=t.scrollTop(),i=l+t.height(),r=n[0].offsetTop,o=r+n.height();r<l?t[0].scrollTop=r:o>i&&(t[0].scrollTop=o-t.height())}catch(u){console.warn("Can't scroll row element into view: "+u)}}var Ld="wp-table--cell-td",$d=function(){function e(e){this.injector=e,this.fieldRenderer=new Ja(this.injector,"table")}return e.prototype.build=function(e,n){var t=document.createElement("td"),l=n.id;t.classList.add(Ld,l),"subject"===l&&t.classList.add("-max");var i=e.schema[l];i&&"User"===i.type&&t.classList.add("-contains-avatar");var r=document.createElement("span");r.classList.add("wp-table--cell-container",Za,l);var o=this.fieldRenderer.render(e,l,null);return r.appendChild(o),t.appendChild(r),t},e.prototype.refresh=function(e,n,t){var l=this.fieldRenderer.render(n,t,null);e.innerHTML="",e.appendChild(l)},e}(),Hd=function(){function e(e){this.injector=e,this.states=this.injector.get(d),this.wpRelations=this.injector.get(On),this.wpTableRelationColumns=this.injector.get($n)}return e.prototype.build=function(e,n){var t=document.createElement("td");t.classList.add(Ld,"wp-table--relation-cell-td",n.id),t.dataset.columnId=n.id;var l=this.wpTableRelationColumns.getExpandFor(e.id)===n.id,i=this.wpRelations.state(e.id).value,r=this.wpTableRelationColumns.relationsForColumn(e,i,n),o=this.renderIndicator(),u=this.renderBadge(r);return l&&t.classList.add("-expanded"),r.length>0&&(t.appendChild(u),t.appendChild(o)),t},e.prototype.renderIndicator=function(){var e=document.createElement("span");return e.classList.add("wp-table--relation-indicator"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","0"),e},e.prototype.renderBadge=function(e){var n=document.createElement("span");return n.classList.add("wp-table--relation-count"),n.textContent=""+e.length,n.classList.add("badge","-border-only"),n},e}(),Bd={id:"__internal-sorthandle"},zd={id:"__internal-contextMenu"},Wd=function(){function e(e){this.injector=e,this.tableActionsService=this.injector.get(De)}return e.prototype.build=function(e){var n=document.createElement("td");n.classList.add(Ld,"wp-table--context-menu-td",zd.id,"hide-when-print");var t=document.createElement("span");return t.classList.add("wp-table--context-menu-span"),this.tableActionsService.render(e).forEach(function(e){t.appendChild(e)}),n.appendChild(t),n},e}(),Qd=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.wpTableSelection=this.injector.get(Ic),this.wpTableColumns=this.injector.get($e),this.I18n=this.injector.get(A.a),this.cellBuilder=new $d(this.injector),this.relationCellBuilder=new Hd(this.injector),this.contextLinkBuilder=new Wd(this.injector),this.augmentedColumns=this.buildAugmentedColumns()}return Object.defineProperty(e.prototype,"columns",{get:function(){return this.wpTableColumns.getColumns()},enumerable:!0,configurable:!0}),e.prototype.buildAugmentedColumns=function(){var e=this.columns.concat([zd]);return this.workPackageTable.configuration.dragAndDropEnabled&&e.unshift(Bd),e},e.prototype.buildCell=function(e,n){if(Le(n))return this.relationCellBuilder.build(e,n);switch(n.id){case zd.id:if(this.workPackageTable.configuration.actionsColumnEnabled)return this.contextLinkBuilder.build(e);if(this.workPackageTable.configuration.columnMenuEnabled){var t=document.createElement("td");return t.classList.add("hide-when-print"),t}return null;default:return this.cellBuilder.build(e,n)}},e.prototype.buildEmpty=function(e){var n=this.createEmptyRow(e);return this.buildEmptyRow(e,n)},e.prototype.createEmptyRow=function(e){var n=this.classIdentifier(e),t=document.createElement("tr");return t.setAttribute("tabindex","0"),t.dataset.workPackageId=e.id,t.dataset.classIdentifier=n,t.classList.add("wp-table--row","wp--row",n,n+"-table","issue"),t},Object.defineProperty(e.prototype,"placeholderRow",{get:function(){var e=document.createElement("tr"),n=document.createElement("td");return e.classList.add("wp--placeholder-row"),n.colSpan=this.augmentedColumns.length,e.appendChild(n),e},enumerable:!0,configurable:!0}),e.prototype.classIdentifier=function(e){return"wp-row-"+e.id},e.prototype.refreshRow=function(e,n){var t=this,l=n.find("."+Ld).detach(),i=[];return this.augmentedColumns.forEach(function(n){var r=l.filter("td."+n.id);if(n.id.startsWith("__internal")||t.isColumnBeingEdited(e,n))i.push(r[0]);else{var o=t.buildCell(e,n);o&&i.push(o)}}),n.prepend(i),n},e.prototype.isColumnBeingEdited=function(e,n){var t=this.workPackageTable.editing.forms[e.id];return t&&t.activeFields[n.id]},e.prototype.buildEmptyRow=function(e,n){var t,l=this,i=this.workPackageTable.editing.change(e),r={};if(i&&!i.isEmpty()){var o=(t=this.classIdentifier(e),jQuery("."+t+"-table"));i.changedAttributes.forEach(function(e){r[e]=o.find("."+Ld+"."+e)})}return this.augmentedColumns.forEach(function(t){var i,o=r[t.id];o&&o.length?(Object(bn.a)("Rendering previous open column "+t.id+" on "+e.id),jQuery(n).append(o)):(i=l.buildCell(e,t))&&n.appendChild(i)}),this.wpTableSelection.isSelected(e.id)&&n.classList.add("-checked"),[n,!1]},e}(),Ud=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.states=this.injector.get(d)}return e.prototype.isApplicable=function(e){return!0},e}();function Gd(e){var n=e.value||"nullValue";if(e.href)try{n+=e.href.map(function(e){return e.href}).join("-")}catch(t){console.error("Failed to extract group identifier for "+e.value)}return n=n.toLowerCase().replace(/[^a-z0-9]+/g,"-"),Kd(e)+"-"+n}function Kd(e){return e._links.groupBy.href.split("/").pop()}function Yd(e){return"__row-group-"+e}function Zd(e){return"group-"+e.identifier}var Jd=function(){function e(e){this.injector=e,this.I18n=this.injector.get(A.a),this.text={collapse:this.I18n.t("js.label_collapse"),expand:this.I18n.t("js.label_expand")}}return e.prototype.buildGroupRow=function(e,n){var t,l,i=document.createElement("tr");return e.collapsed?(l=this.text.expand,t="icon-plus"):(l=this.text.collapse,t="icon-minus2"),i.classList.add("wp-table--group-header",Zd(e)),i.id="wp-table-rowgroup-"+e.index,i.dataset.groupIndex=e.index.toString(),i.dataset.groupIdentifier=e.identifier,i.innerHTML='\n      <td colspan="'+n+'" class="-no-highlighting">\n        <div class="expander icon-context '+t+'">\n          <span class="hidden-for-sighted">'+_.escape(l)+'</span>\n        </div>\n        <div class="group--value">\n          '+_.escape(function(e){var n=e.value;return null===n?"-":n}(e))+'\n          <span class="count">\n            ('+e.count+")\n          </span>\n        </div>\n      </td>\n    ",i},e.prototype.setActualCount=function(e,n){var t=n.querySelector("#wp-table-rowgroup-"+e.index);t&&(t.querySelector(".count").textContent="("+(e.renderedCount||e.count)+")")},e}();function Xd(e){return"__relations-expanded-from-"+e}var ep=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.states=l.injector.get(d),l.I18n=l.injector.get(A.a),l}return a.d(n,e),n.prototype.buildCell=function(n,t){return Le(t)?this.emptyRelationCell(t):e.prototype.buildCell.call(this,n,t)},n.prototype.buildEmptyRelationRow=function(n,t,l){var i=t.denormalized(n),r=this.states.workPackages.get(i.targetId).value,o=this.createEmptyRelationRow(n,r),u=e.prototype.buildEmptyRow.call(this,r,o),a=u[0];u[1];return[a,r]},n.prototype.createEmptyRelationRow=function(e,n){var t=this.relationClassIdentifier(e,n),l=document.createElement("tr");return l.dataset.workPackageId=n.id,l.dataset.classIdentifier=t,l.classList.add("wp--row","wp-table--row","issue","wp-table--relations-aditional-row",t,t+"-table",Xd(e.id)),l},n.prototype.relationClassIdentifier=function(e,n){return t=n.id,"wp-relation-row-"+e.id+"-to-"+t;var t},n.prototype.appendRelationLabel=function(e,n,t,l,i){var r=t.denormalized(n),o="";("toType"===i&&(o=this.I18n.t("js.relation_labels."+r.reverseRelationType)),"ofType"===i)&&(o=this.states.workPackages.get(r.target.id).value.type.name);var u=document.createElement("span");u.classList.add("relation-row--type-label"),u.textContent=o;document.createTextNode(r.target.name);e.find(".wp-table--relation-cell-td").empty(),e.find(".wp-table--relation-cell-td."+l).append(u)},n.prototype.emptyRelationCell=function(e){var n=document.createElement("td");return n.classList.add("wp-table--relation-cell-td",Ld,e.id),n},n}(Qd),np=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpRelations=this.injector.get(On),this.wpTableColumns=this.injector.get($e),this.wpTableRelationColumns=this.injector.get($n),this.relationRowBuilder=new ep(e,n)}return e.prototype.render=function(){var e=this;this.isApplicable&&_.clone(this.tablePass.renderedOrder).forEach(function(n,t){if(n.workPackage){var l=n.workPackage,i=l.id,r=e.wpRelations.state(i);r.hasValue()&&0!==_.size(r.value)&&e.wpTableRelationColumns.relationsToExtendFor(l,r.value,function(t,r,o){var u,a=e.relationRowBuilder.buildEmptyRelationRow(l,t,o),s=a[0],c=a[1];(u=s.classList).add.apply(u,n.additionalClasses),e.relationRowBuilder.appendRelationLabel(jQuery(s),l,t,r.id,o),e.tablePass.spliceRow(s,"."+e.relationRowBuilder.classIdentifier(l)+",."+Xd(i),{classIdentifier:e.relationRowBuilder.relationClassIdentifier(l,c),additionalClasses:n.additionalClasses.concat(["wp-table--relations-aditional-row"]),workPackage:c,belongsTo:l,renderType:"relations",hidden:n.hidden,data:{relation:t,columnId:r.id,relationType:o}})})}})},e.prototype.refreshRelationRow=function(e,n,t){var l=this.relationRowBuilder.refreshRow(n,t);return this.relationRowBuilder.appendRelationLabel(l,e.belongsTo,e.data.relation,e.data.columnId,e.data.relationType),l},Object.defineProperty(e.prototype,"isApplicable",{get:function(){return this.wpTableColumns.hasRelationColumns()},enumerable:!0,configurable:!0}),e}(),tp=function(){function e(e,n){this.injector=e,this.workPackageTable=n,this.states=this.injector.get(d),this.wpTableTimeline=this.injector.get(N),this.wpCacheService=this.injector.get(Cn)}return e.prototype.build=function(e){var n=document.createElement("div");return n.classList.add("wp-timeline-cell","wp--row"),e&&(n.dataset.workPackageId=e),n},e.prototype.insert=function(e,n,t){var l;void 0===t&&(t=[]);var i=this.build(e);(l=i.classList).add.apply(l,t),n.appendChild(i)},e}(),lp=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t}return e.prototype.render=function(){var e=this;this.timelineBody=document.createDocumentFragment(),this.timelineBuilder=new tp(this.injector,this.table),this.tablePass.renderedOrder.forEach(function(n){var t,l=n.workPackage?n.workPackage.id:null,i=e.timelineBuilder.build(l);(t=i.classList).add.apply(t,[n.classIdentifier,n.classIdentifier+"-timeline"].concat(n.additionalClasses)),e.timelineBody.appendChild(i)})},e}(),ip=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpTableHighlighting=this.injector.get(sn),this.querySpace=this.injector.get(b)}return e.prototype.render=function(){var e=this;if(this.isApplicable){var n=this.wpTableHighlighting.current.mode;window.getComputedStyle(document.body);this.tablePass.renderedOrder.forEach(function(t,l){if(t.workPackage){var i=t.workPackage[n];if(i){var r=i.id;e.tablePass.tableBody.children[l].classList.add(Ul.backgroundClass(n,r))}}})}},Object.defineProperty(e.prototype,"isApplicable",{get:function(){return!(this.wpTableHighlighting.isInline||this.wpTableHighlighting.isDisabled)},enumerable:!0,configurable:!0}),e}(),rp=function(){function e(e,n){this.querySpace=e,this.injector=n}return Object.defineProperty(e.prototype,"applies",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.onNewOrder=function(e){},e.prototype.canPickup=function(e){return!0},e.prototype.handleDrop=function(e,n){return Promise.resolve(void 0)},e.prototype.changeShadowElement=function(e,n){return void 0===n&&(n=!1),n?e.classList.remove("-dragged"):e.classList.add("-dragged"),!0},e}();function op(e){return"__collapsed-group-"+e}function up(e){return"__hierarchy-group-"+e}function ap(e){return"__hierarchy-root-"+e}var sp=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.wpTableHierarchies=n.injector.get(We),n.relationHierarchyService=n.injector.get(Ws),n}return a.d(n,e),Object.defineProperty(n.prototype,"applies",{get:function(){return this.wpTableHierarchies.isEnabled},enumerable:!0,configurable:!0}),n.prototype.canPickup=function(e){return!!e.changeParent},n.prototype.handleDrop=function(e,n){var t=this.determineParent(n),l=t?t.id:null;return this.relationHierarchyService.changeParent(e,l)},n.prototype.determineParent=function(e){for(var n=e.previousElementSibling;null!==n;){var t=n.className.indexOf(up(""))>=0,l=n.className.indexOf(ap(""))>=0;if(!t&&!l)return null;var i=n.dataset.workPackageId;if(n.classList.contains(ap(i)))return{el:n,id:i};n=n.previousElementSibling}return null},n}(rp),cp=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.wpTableGroupBy=n.injector.get(Be),n.halEditing=n.injector.get(ns),n.halNotification=n.injector.get(Mn),n}return a.d(n,e),Object.defineProperty(n.prototype,"applies",{get:function(){return this.wpTableGroupBy.isEnabled},enumerable:!0,configurable:!0}),n.prototype.canPickup=function(e){var n=this.groupedAttribute;return null!==n&&e.isAttributeEditable(n)},n.prototype.handleDrop=function(e,n){var t=this,l=this.halEditing.changeFor(e),i=this.getValueForGroup(n);return l.projectedResource[this.groupedAttribute]=i,this.halEditing.save(l).catch(function(n){return t.halNotification.handleRawError(n,e)})},n.prototype.getValueForGroup=function(e){var n=function(e,n){for(var t=e.previousElementSibling;t;){if(t.matches(n))return t;t=t.previousElementSibling}return null}(e,".wp-table--group-header"),t=this.groups.find(function(e){return Gd(e)===n.dataset.groupIdentifier});if(!t)return null;if(t._links&&t._links.valueLink){var l=t._links.valueLink;return 1===l.length?l[0]:l}return t.value},Object.defineProperty(n.prototype,"groupedAttribute",{get:function(){var e=this.wpTableGroupBy.current;return e?e.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groups",{get:function(){return this.querySpace.groups.value||[]},enumerable:!0,configurable:!0}),n}(rp),dp=function(){function e(){this.register=[sp,cp]}return e.prototype.add=function(e){this.register.push(e)},e.prototype.get=function(e){var n=e.get(b);return this.register.map(function(t){return new t(n,e)}).find(function(e){return e.applies})||new rp(n,e)},e}(),pp=function(){function e(e){this.injector=e;var n=this.injector.get(dp);this.actionService=n.get(e)}return e.prototype.build=function(e,n){var t=document.createElement("td");if(!this.actionService.canPickup(e))return t;t.classList.add(Ld,"wp-table--sort-td",Bd.id,"hide-when-print");var l=document.createElement("span");return l.classList.add("wp-table--drag-and-drop-handle","icon-drag-handle"),t.appendChild(l),t},e}(),hp=function(){function e(e,n,t){this.injector=e,this.table=n,this.tablePass=t,this.wpTableColumns=this.injector.get($e),this.wpTableOrder=this.injector.get(Sn),this.dragDropHandleBuilder=new pp(this.injector)}return e.prototype.render=function(){var e=this;this.table.configuration.dragAndDropEnabled&&this.wpTableOrder.withLoadedPositions().then(function(n){e.tablePass.renderedOrder.forEach(function(t,l){if(t.workPackage&&"relations"!==t.renderType){var i=e.dragDropHandleBuilder.build(t.workPackage,n[t.workPackage.id]);i&&t.element.replaceChild(i,t.element.firstElementChild)}})})},e}(),fp=function(){function e(e,n,t){this.injector=e,this.workPackageTable=n,this.rowBuilder=t,this.halEditing=this.injector.get(ns),this.states=this.injector.get(d),this.I18n=this.injector.get(A.a)}return e.prototype.render=function(){var e=this;return Object(bn.b)("Primary render pass",function(){e.prepare(),e.doRender(),e.postRender()}),this.highlighting.render(),Object(bn.b)("Relations render pass",function(){e.relations.render()}),Object(bn.b)("Drag handle render pass",function(){e.dragDropHandle.render()}),Object(bn.b)("Timelines render pass",function(){e.timeline.render()}),this},e.prototype.refresh=function(e,n,t){var l=jQuery(t).find("."+e.classIdentifier),i=null;switch(e.renderType){case"primary":i=this.rowBuilder.refreshRow(n,l);break;case"relations":i=this.relations.refreshRelationRow(e,n,l)}null!==i&&l.length&&l.replaceWith(i)},Object.defineProperty(e.prototype,"result",{get:function(){return this.renderedOrder.map(function(e){return{classIdentifier:e.classIdentifier,workPackageId:e.workPackage?e.workPackage.id:null,hidden:e.hidden}})},enumerable:!0,configurable:!0}),e.prototype.spliceRow=function(e,n,t){var l=jQuery(this.tableBody).find(n).last();l.after(e);var i=l.index();this.renderedOrder.splice(i+1,0,t)},e.prototype.prepare=function(){this.timeline=new lp(this.injector,this.workPackageTable,this),this.relations=new np(this.injector,this.workPackageTable,this),this.dragDropHandle=new hp(this.injector,this.workPackageTable,this),this.highlighting=new ip(this.injector,this.workPackageTable,this),this.tableBody=document.createDocumentFragment(),this.renderedOrder=[]},e.prototype.postRender=function(){0===this.renderedOrder.length&&this.workPackageTable.renderPlaceholderRow&&this.tableBody.appendChild(this.rowBuilder.placeholderRow)},e.prototype.appendRow=function(e,n,t,l){void 0===t&&(t=[]),void 0===l&&(l=!1),this.tableBody.appendChild(n),this.renderedOrder.push({classIdentifier:this.rowBuilder.classIdentifier(e),additionalClasses:t,workPackage:e,renderType:"primary",element:n,hidden:l})},e.prototype.appendNonWorkPackageRow=function(e,n,t,l){void 0===t&&(t=[]),void 0===l&&(l=!1),e.classList.add(n),this.tableBody.appendChild(e),this.renderedOrder.push({element:e,classIdentifier:n,additionalClasses:t,workPackage:null,renderType:"primary",hidden:l})},e}(),gp=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.injector=n,i.workPackageTable=t,i.rowBuilder=l,i}return a.d(n,e),n.prototype.doRender=function(){var e=this;this.workPackageTable.originalRows.forEach(function(n){var t=e.workPackageTable.originalRowIndex[n],l=e.rowBuilder.buildEmpty(t.object)[0];t.element=l,e.appendRow(t.object,l),e.tableBody.appendChild(l)})},n}(fp),mp=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t,new Qd(n,t))||this;return o.injector=n,o.workPackageTable=t,o.groups=l,o.headerBuilder=i,o.colspan=r,o}return a.d(n,e),n.prototype.doRender=function(){var e=this,n=null;this.workPackageTable.originalRows.forEach(function(t){var l=e.workPackageTable.originalRowIndex[t],i=e.matchingGroup(l.object);if(i&&n!==i){i.renderedCount=0;var r=Zd(i),o=e.headerBuilder.buildGroupRow(i,e.colspan);e.appendNonWorkPackageRow(o,r),n=i}l.group=n,e.buildSingleRow(l)}),this.groups.forEach(function(n){e.headerBuilder.setActualCount(n,e.tableBody)})},n.prototype.matchingGroup=function(e){var n=this;return _.find(this.groups,function(t){var l=e[Kd(t)];if(void 0===l&&(l=null),_.isArray(l))return n.matchesMultiValue(l,t);if(l&&l.$href)return!!_.find(t._links.valueLink,function(e){return l.$href===e.href});var i=""===t.value?null:t.value;return i&&(i=i.replace("%","")),i==l})},n.prototype.matchesMultiValue=function(e,n){if(e.length!==n.href.length)return!1;var t=function(e){return _.map(e,function(e){return e.href}).sort().join(", ")};return _.isEqualWith(e,n.href,function(e,n){return t(e)===t(n)})},n.prototype.buildSingleRow=function(e){var n,t=e.group,l=t.collapsed,i=[],r=this.rowBuilder.buildEmpty(e.object),o=r[0];r[1];i.push(Yd(t.index)),l&&i.push("-collapsed"),e.element=o,(n=o.classList).add.apply(n,i),this.appendRow(e.object,o,i,l),t.renderedCount+=1},n}(gp),vp=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.querySpace=l.injector.get(b),l.states=l.injector.get(d),l.wpTableColumns=l.injector.get($e),l.I18n=l.injector.get(A.a),l}return a.d(n,e),n.prototype.isApplicable=function(e){return!_.isEmpty(this.groups)},Object.defineProperty(n.prototype,"groups",{get:function(){return this.querySpace.groups.value||[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collapsedGroups",{get:function(){return this.querySpace.collapsedGroups.value||{}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"colspan",{get:function(){return this.wpTableColumns.columnCount+2},enumerable:!0,configurable:!0}),n.prototype.buildRows=function(){var e=new Jd(this.injector);return new mp(this.injector,this.workPackageTable,this.getGroupData(),e,this.colspan).render()},n.prototype.refreshExpansionState=function(){var e=this.getGroupData(),n=this.wpTableColumns.columnCount+1,t=this.querySpace.rendered.value,l=new Jd(this.injector);jQuery(this.workPackageTable.tableAndTimelineContainer).find(".wp-table--group-header").each(function(i,r){var o=jQuery(r).data("groupIndex"),u=e[o],a=l.buildGroupRow(u,n);r.parentNode&&r.parentNode.replaceChild(a,r);var s=jQuery("."+Yd(o));s.toggleClass("-collapsed",!!u.collapsed),s.filter(".wp-table--row").each(function(e,n){var l=jQuery(n).index();t[l].hidden=!!u.collapsed})}),this.querySpace.rendered.putValue(t,"Updated hidden state of rows after group change.")},n.prototype.getGroupData=function(){var e=this;return this.groups.map(function(n,t){return n.index=t,n._links&&n._links.valueLink&&(n.href=n._links.valueLink),n.identifier=Gd(n),n.collapsed=e.collapsedGroups[n.identifier],n})},n}(Ud),bp="wp-table--hierarchy-aditional-row",yp=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.wpTableHierarchies=l.injector.get(We),l.states=l.injector.get(d),l.text={leaf:function(e){return l.I18n.t("js.work_packages.hierarchy.leaf",{level:e})},expanded:function(e){return l.I18n.t("js.work_packages.hierarchy.children_expanded",{level:e})},collapsed:function(e){return l.I18n.t("js.work_packages.hierarchy.children_collapsed",{level:e})}},l}return a.d(n,e),n.prototype.refreshRow=function(n,t){var l=e.prototype.refreshRow.call(this,n,t);return l.find(".wp-table--hierarchy-span").remove(),this.appendHierarchyIndicator(n,l),l},n.prototype.buildEmpty=function(n){var t,l=e.prototype.buildEmpty.call(this,n),i=l[0],r=(l[1],this.ancestorRowData(n)),o=r[0],u=r[1];return(t=i.classList).add.apply(t,o),this.appendHierarchyIndicator(n,jQuery(i)),[i,u]},n.prototype.ancestorRowData=function(e){var n=this.wpTableHierarchies.current,t=[],l=!1;return this.parentsWithVisibleChildren[e.id]&&t.push(ap(e.id)),_.isArray(e.ancestors)&&e.ancestors.forEach(function(e){t.push(up(e.id)),n.collapsed[e.id]&&(l=!0,t.push(op(e.id)))}),[t,l]},n.prototype.buildAncestorRow=function(e,n,t){var l=this.states.workPackages.get(e.id).value,i=this.buildEmpty(l),r=i[0],o=i[1];return r.classList.add(bp),[r,o]},n.prototype.appendHierarchyIndicator=function(e,n,t){var l=void 0===t?e.ancestors.length:t,i=this.buildHierarchyIndicator(e,n,l);n.find("td.subject").addClass("-with-hierarchy").prepend(i),n.find("td.subject").css("minWidth",125+20*l+"px"),n.find("td.subject .wp-table--cell-container").css("width","calc(100% - 25px - "+20*l+"px)")},n.prototype.buildHierarchyIndicator=function(e,n,t){var l=document.createElement("span"),i=this.wpTableHierarchies.collapsed(e.id),r=25+20*t+"px";if(l.classList.add("wp-table--hierarchy-span"),l.style.width=r,l.dataset.indentation=r,this.parentsWithVisibleChildren[e.id]){var o=i?"-hierarchy-collapsed":"";l.innerHTML='\n            <a href tabindex="0" role="button" class="wp-table--hierarchy-indicator '+o+'">\n              <span class="wp-table--hierarchy-indicator-icon" aria-hidden="true"></span>\n              <span class="wp-table--hierarchy-indicator-expanded hidden-for-sighted">'+this.text.expanded(t)+'</span>\n              <span class="wp-table--hierarchy-indicator-collapsed hidden-for-sighted">'+this.text.collapsed(t)+"</span>\n            </a>\n        "}else l.innerHTML='\n            <span tabindex="0" class="wp-table--leaf-indicator">\n              <span class="hidden-for-sighted">'+this.text.leaf(t)+"</span>\n            </span>\n        ";return l},n}(Qd),wp=function(e){function n(n,t,l){var i=e.call(this,n,t,l)||this;return i.injector=n,i.workPackageTable=t,i.rowBuilder=l,i.querySpace=i.injector.get(b),i.states=i.injector.get(d),i.wpCacheService=i.injector.get(Cn),i.wpTableHierarchies=i.injector.get(We),i.rendered={},i.additionalParents={},i.deferred={},i.parentsWithVisibleChildren={},i}return a.d(n,e),n.prototype.prepare=function(){var n=this;e.prototype.prepare.call(this),this.hierarchies=this.wpTableHierarchies.current,_.each(this.workPackageTable.originalRowIndex,function(e){e.object.ancestors.forEach(function(e){n.parentsWithVisibleChildren[e.id]=!0})}),this.rowBuilder.parentsWithVisibleChildren=this.parentsWithVisibleChildren},n.prototype.doRender=function(){var e=this;this.workPackageTable.originalRows.forEach(function(n){var t=e.workPackageTable.originalRowIndex[n],l=t.object;if(!e.deferInsertion(l)){if(l.ancestors.length)e.buildWithHierarchy(t);else{var i=e.rowBuilder.buildEmpty(l),r=i[0],o=i[1];t.element=r,e.tableBody.appendChild(r),e.markRendered(r,l,o)}e.renderAllDeferredChildren(l)}})},n.prototype.deferInsertion=function(e){var n=this,t=e.ancestors;if(0===t.length)return!1;for(var l=t.concat([e]),i=l.length-2;i>=0;--i){var r=l[i],o=this.workPackageTable.originalRowIndex[r.id];if(this.rendered[r.id])return!1;if(o){var u=this.deferred[r.id]||[],a=l.slice(i+1,l.length);return a=a.map(function(e){return n.wpCacheService.state(e.id).value}),u=u.concat(a),this.deferred[r.id]=_.uniqBy(u,function(e){return e.id}),!0}}return!1},n.prototype.renderAllDeferredChildren=function(e){var n=this,t=e.id;(this.deferred[t]||[]).forEach(function(e){n.insertUnderParent(n.getOrBuildRow(e),e.parent),n.renderAllDeferredChildren(e)})},n.prototype.getOrBuildRow=function(e){var n=this.workPackageTable.originalRowIndex[e.id];return n||(n={object:e}),n},n.prototype.buildWithHierarchy=function(e){var n=this,t=e.object.ancestors,l=[];t.forEach(function(e,i){var r=n.states.workPackages.get(e.id).getValueOr(e);if(!n.rendered[r.id]){var o=n.rowBuilder.buildAncestorRow(r,l,i),u=o[0],a=o[1];if(0===i)n.tableBody.appendChild(u),n.markRendered(u,r,a,!0);else{var s=t[i-1];n.insertAtExistingHierarchy(r,u,s,a,!0)}n.additionalParents[r.id]=r}l.push(up(r.id)),t.slice(0,i).forEach(function(e){l.push(up(e.id))})});var i=_.last(t);this.insertUnderParent(e,i)},n.prototype.insertUnderParent=function(e,n){var t=this.rowBuilder.buildEmpty(e.object),l=t[0],i=t[1];e.element=l,this.insertAtExistingHierarchy(e.object,l,n,i,!1)},n.prototype.markRendered=function(e,n,t,l){void 0===t&&(t=!1),void 0===l&&(l=!1),this.rendered[n.id]=!0,this.renderedOrder.push(this.buildRenderInfo(e,n,t,l))},n.prototype.insertAtExistingHierarchy=function(e,n,t,l,i){var r=".__hierarchy-root-"+t.id,o=".__hierarchy-group-"+t.id;this.spliceRow(n,r+","+o,this.buildRenderInfo(n,e,l,i)),this.rendered[e.id]=!0},n.prototype.buildRenderInfo=function(e,n,t,l){var i={element:e,classIdentifier:"",additionalClasses:[],workPackage:n,renderType:"primary",hidden:t},r=this.rowBuilder.ancestorRowData(n),o=r[0];r[1];return l?(i.additionalClasses=[bp].concat(o),i.classIdentifier="wp-ancestor-row-"+n.id):(i.additionalClasses=o,i.classIdentifier=this.rowBuilder.classIdentifier(n)),i},n}(fp),Cp=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.workPackageTable=t,l.states=l.injector.get(d),l.wpTableColumns=l.injector.get($e),l.wpTableHierarchies=l.injector.get(We),l}return a.d(n,e),n.prototype.isApplicable=function(e){return this.wpTableHierarchies.isEnabled},n.prototype.buildRows=function(){var e=new yp(this.injector,this.workPackageTable);return new wp(this.injector,this.workPackageTable,e).render()},n}(Ud),kp=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.I18n=l.injector.get(A.a),l}return a.d(n,e),n.prototype.buildRows=function(){var e=new Qd(this.injector,this.workPackageTable);return new gp(this.injector,this.workPackageTable,e).render()},n}(Ud),Ip=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;return r.injector=n,r.table=t,r.workPackageId=l,r.classIdentifier=i,r.wpTableColumns=r.injector.get($e),r.wpCacheService=r.injector.get(Cn),r.states=r.injector.get(d),r.FocusHelper=r.injector.get(m.a),r.editingPortalService=r.injector.get(us),r.cellBuilder=new $d(r.injector),r.resourceSubscription=r.wpCacheService.requireAndStream(r.workPackageId).subscribe(function(e){return r.resource=e}),r}return a.d(n,e),n.prototype.destroy=function(){this.resourceSubscription.unsubscribe(),e.prototype.destroy.call(this)},n.prototype.findContainer=function(e){return this.rowContainer.find("."+Ld+"."+e+" .wp-table--cell-container").first()},n.prototype.findCell=function(e){return this.rowContainer.find("."+Ld+"."+e).first()},n.prototype.activateField=function(e,n,t,l){var i=this;return this.waitForContainer(t).then(function(r){var o=i.findCell(t);o.addClass("-editing");var u=parseInt(o.css("width"));return u=u>150?u-10:150,o.css("max-width",u+"px"),o.css("width",u+"px"),i.editingPortalService.create(r,i.injector,e,n,t,l)})},n.prototype.reset=function(e,n){var t=this.findContainer(e),l=this.findCell(e);t.length&&(this.findCell(e).css("width",""),this.findCell(e).css("max-width",""),this.cellBuilder.refresh(t[0],this.resource,e),l.removeClass("-editing"),n&&this.FocusHelper.focusElement(t))},n.prototype.requireVisible=function(e){return this.wpTableColumns.addColumn(e),this.waitForContainer(e)},n.prototype.focusOnFirstError=function(){jQuery(this.table.tableAndTimelineContainer).find(".inline-edit--active-field.-error .inline-edit--field").first().trigger("focus")},n.prototype.waitForContainer=function(e){var n=this;return new Promise(function(t,l){var i=setInterval(function(){var l=n.findContainer(e);l.length>0&&(clearInterval(i),t(l[0]))},100)})},Object.defineProperty(n.prototype,"rowContainer",{get:function(){return jQuery(this.table.tableAndTimelineContainer).find("."+this.classIdentifier+"-table")},enumerable:!0,configurable:!0}),n}(rs),jp=function(){function e(e,n){this.table=e,this.injector=n,this.halEditing=this.injector.get(ns),this.forms={}}return e.prototype.reset=function(){_.each(this.forms,function(e){return e.destroy()}),this.forms={}},e.prototype.change=function(e){return this.halEditing.typedState(e).value},e.prototype.stopEditing=function(e){this.halEditing.stopEditing(e);var n=this.forms[e.id];n&&(n.destroy(),delete this.forms[e.id])},e.prototype.startEditing=function(e,n){var t=e.id,l=this.forms[t];return l||(this.forms[t]=new Ip(this.injector,this.table,t,n))},e}(),Rp=function(){function e(e,n,t,l,i,r,o){this.injector=e,this.tableAndTimelineContainer=n,this.scrollContainer=t,this.tbody=l,this.timelineBody=i,this.timelineController=r,this.configuration=o,this.querySpace=this.injector.get(b),this.wpCacheService=this.injector.get(Cn),this.states=this.injector.get(d),this.I18n=this.injector.get(A.a),this.portalCleanupService=this.injector.get(Ua),this.originalRows=[],this.originalRowIndex={},this.builders=[new Cp(this.injector,this),new vp(this.injector,this),new kp(this.injector,this)],this.lastRenderPass=null,this.editing=new jp(this,this.injector)}return Object.defineProperty(e.prototype,"renderedRows",{get:function(){return this.querySpace.rendered.getValueOr([])},enumerable:!0,configurable:!0}),e.prototype.findRenderedRow=function(e){var n=_.findIndex(this.renderedRows,function(n){return n.classIdentifier===e});return[n,this.renderedRows[n]]},Object.defineProperty(e.prototype,"rowBuilder",{get:function(){var e=this;return _.find(this.builders,function(n){return n.isApplicable(e)})},enumerable:!0,configurable:!0}),e.prototype.buildIndex=function(e){var n=this;this.originalRowIndex={},this.originalRows=e.map(function(e,t){var l=e.id;return n.originalRowIndex[l]={object:e,workPackageId:l,position:t},l})},e.prototype.initialSetup=function(e){this.buildIndex(e),this.redrawTableAndTimeline()},e.prototype.redrawTableAndTimeline=function(){var e=this,n=this.performRenderPass();requestAnimationFrame(function(){e.timelineBody.innerHTML="",e.timelineBody.appendChild(n.timeline.timelineBody),e.querySpace.rendered.putValue(n.result)})},e.prototype.redrawTable=function(){var e=this.performRenderPass();this.querySpace.rendered.putValue(e.result)},e.prototype.refreshRows=function(e){var n=this,t=this.lastRenderPass;t?_.each(t.renderedOrder,function(l){l.workPackage&&l.workPackage.id===e.id&&(Object(bn.a)("Refreshing rendered row "+l.classIdentifier),l.workPackage=e,t.refresh(l,e,n.tbody))}):Object(bn.a)("Trying to refresh a singular row without a previous render pass.")},Object.defineProperty(e.prototype,"renderPlaceholderRow",{get:function(){return this.configuration.dragAndDropEnabled},enumerable:!0,configurable:!0}),e.prototype.performRenderPass=function(){var e=this;this.portalCleanupService.clear(),this.editing.reset();var n=this.lastRenderPass=this.rowBuilder.buildRows();return requestAnimationFrame(function(){e.tbody.innerHTML="",e.tbody.appendChild(n.tableBody)}),n},e}(),Pp=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.states=l.injector.get(d),l.wpTableSelection=l.injector.get(Ic),l.wpTableColumns=l.injector.get($e),l.I18n=l.injector.get(A.a),l.text={cancelButton:l.I18n.t("js.button_cancel")},l}return a.d(n,e),n.prototype.buildCell=function(n,t){switch(t.id){case zd.id:return this.buildCancelButton();default:return e.prototype.buildCell.call(this,n,t)}},n.prototype.buildNew=function(e,n){var t=this.buildEmpty(e);return[t[0],t[1]]},n.prototype.createEmptyRow=function(e){var n=this.classIdentifier(e),t=document.createElement("tr");return t.id=Vd(e.id),t.dataset.workPackageId=e.id,t.dataset.classIdentifier=n,t.classList.add("wp-inline-create-row","wp--row","wp-table--row","issue",n,n+"-table"),t},n.prototype.buildCancelButton=function(){var e=document.createElement("td");return e.classList.add(Ld,"wp-table--cancel-create-td"),e.innerHTML='\n    <a\n       href="#"\n       class="wp-table--cancel-create-link icon icon-cancel"\n       aria-label="'+this.text.cancelButton+'">\n    </a>\n   ',e},n}(Qd),Sp=function(){function e(e,n,t,l,i,r,o,u,a,s,c){this.injector=e,this.elementRef=n,this.FocusHelper=t,this.I18n=l,this.querySpace=i,this.cdRef=r,this.wpCreate=o,this.wpInlineCreate=u,this.wpTableColumns=a,this.wpTableFocus=s,this.authorisationService=c,this.canAdd=!1,this.canReference=!1,this.mode="inactive",this.focus=!1,this.text=this.wpInlineCreate.buttonTexts}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.authorisationService.observeUntil(Object(Gn.a)(this)).subscribe(function(){e.canReference=e.hasReferenceClass&&e.wpInlineCreate.canReference,e.canAdd=e.wpInlineCreate.canAdd,e.cdRef.detectChanges()})},Object.defineProperty(e.prototype,"isActive",{get:function(){return"inactive"!==this.mode},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){jQuery(this.table.timelineBody).addClass("-inline-create-mirror"),this.registerCreationCallback(),this.refreshOnColumnChanges(),this.registerCancelHandler()},e.prototype.registerCancelHandler=function(){var e=this;this.$element.on("click keydown",".wp-table--cancel-create-link",function(n){return Nd(n,function(){e.resetRow()}),n.stopImmediatePropagation(),!1})},e.prototype.refreshOnColumnChanges=function(){var e=this;this.wpTableColumns.updates$().pipe(Object(Yn.a)(function(){return e.isActive}),Object(Gn.b)(this)).subscribe(function(){return e.refreshRow()})},e.prototype.registerCreationCallback=function(){var e=this;this.wpCreate.onNewWorkPackage().pipe(Object(Gn.b)(this)).subscribe(function(n){e.currentWorkPackage&&e.currentWorkPackage.__initialized_at===n.__initialized_at?(e.resetRow(),e.table.configuration.isEmbedded||e.wpTableFocus.updateFocus(n.id),e.wpInlineCreate.newInlineWorkPackageCreated.next(n.id)):(e.wpCreate.cancelCreation(),e.removeWorkPackageRow(),e.showRow()),e.cdRef.detectChanges()})},e.prototype.handleAddRowClick=function(){return this.addWorkPackageRow(),!1},e.prototype.handleReferenceClick=function(){return this.mode="reference",!1},Object.defineProperty(e.prototype,"referenceClass",{get:function(){return this.wpInlineCreate.referenceComponentClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasReferenceClass",{get:function(){return!!this.referenceClass},enumerable:!0,configurable:!0}),e.prototype.addWorkPackageRow=function(){var e=this;this.wpCreate.createOrContinueWorkPackage(this.projectIdentifier).then(function(n){var t=e.currentWorkPackage=n.projectedResource;e.editingSubscription=e.wpCreate.changesetUpdates$().pipe(Object(Yn.a)(function(){return!!e.currentWorkPackage})).subscribe(function(n){e.isActive?(e.currentWorkPackage.overriddenSchema=n.schema,e.refreshRow()):e.insertRow(t)})})},e.prototype.insertRow=function(e){var n=this,t=this.workPackageEditForm=this.renderInlineCreateRow(e);setTimeout(function(){t.activateMissingFields(),n.hideRow()})},e.prototype.refreshRow=function(){var e=new Pp(this.injector,this.table),n=this.$element.find(".wp-inline-create-row");n.length&&this.currentWorkPackage&&e.refreshRow(this.currentWorkPackage,n)},e.prototype.renderInlineCreateRow=function(e){var n=new Pp(this.injector,this.table),t=this.table.editing.startEditing(e,n.classIdentifier(e)),l=n.buildNew(e,t)[0];return this.$element.append(l),t},e.prototype.resetRow=function(){var e=this;this.focus=!0,this.removeWorkPackageRow(),setTimeout(function(){e.showRow(),e.cdRef.detectChanges()},50)},e.prototype.removeWorkPackageRow=function(){this.wpCreate.cancelCreation(),this.currentWorkPackage=null,this.$element.find(".wp-row-new").remove(),this.editingSubscription&&this.editingSubscription.unsubscribe()},e.prototype.showRow=function(){this.mode="inactive",this.cdRef.detectChanges()},e.prototype.hideRow=function(){this.mode="create",this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"colspan",{get:function(){return this.wpTableColumns.columnCount+1},enumerable:!0,configurable:!0}),e}(),_p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.RELATION_TYPES=function(e){void 0===e&&(e=!0);var n=["relates","duplicates","duplicated","blocks","blocked","precedes","follows","includes","partof","requires","required"];return e&&n.push("parent","children"),n},n.LOCALIZED_RELATION_TYPES=function(e){return void 0===e&&(e=!0),n.RELATION_TYPES(e).map(function(e){return{name:e,label:I18n.t("js.relation_labels."+e)}})},n.DEFAULT=function(){return"relates"},n.prototype.normalizedType=function(e){return this.denormalized(e).relationType},n.prototype.denormalized=function(e){var n=this.to.href===e.$href?"from":"to";return{target:this[n],targetId:this[n].id,relationType:"from"===n?this.reverseType:this.type,reverseRelationType:"from"===n?this.type:this.reverseType}},n.prototype.isInvolved=function(e){return _.values(this.ids).indexOf(e.toString())>=0},Object.defineProperty(n.prototype,"ids",{get:function(){return{from:Ms.idFromLink(this.from.href),to:Ms.idFromLink(this.to.href)}},enumerable:!0,configurable:!0}),n.prototype.updateDescription=function(e){return this.$links.updateImmediately({description:e})},n.prototype.updateType=function(e){return this.$links.updateImmediately({type:e})},n}(L),xp=function(){function e(e,n,t,l,i,r,o,u,a){this.parent=e,this.wpInlineCreate=n,this.wpCacheService=t,this.wpRelations=l,this.notificationService=i,this.halEvents=r,this.urlParamsHelper=o,this.querySpace=u,this.I18n=a,this.isDisabled=!1,this.queryFilters=this.buildQueryFilters(),this.text={abort:this.I18n.t("js.relation_buttons.abort")}}return e.prototype.addExisting=function(){var e=this;if(!_.isNil(this.selectedWpId)){var n=this.selectedWpId;this.isDisabled=!0,this.wpInlineCreate.add(this.workPackage,n).then(function(){e.wpCacheService.loadWorkPackage(e.workPackage.id,!0),e.halEvents.push(e.workPackage,{eventType:"association",relatedWorkPackage:n,relationType:e.relationType}),e.isDisabled=!1,e.wpInlineCreate.newInlineWorkPackageReferenced.next(n),e.cancel()}).catch(function(n){e.notificationService.handleRawError(n,e.workPackage),e.isDisabled=!1,e.cancel()})}},e.prototype.onSelected=function(e){e&&(this.selectedWpId=e.id,this.addExisting())},Object.defineProperty(e.prototype,"relationType",{get:function(){return this.wpInlineCreate.relationType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"workPackage",{get:function(){return this.wpInlineCreate.referenceTarget},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this.parent.resetRow()},e.prototype.buildQueryFilters=function(){var e=this,n=this.querySpace.query.value;if(!n)return[];var t=_p.RELATION_TYPES(!0),l=n.filters.filter(function(n){var l=e.urlParamsHelper.buildV3GetFilterIdFromFilter(n);return-1===t.indexOf(l)});return this.urlParamsHelper.buildV3GetFilters(l)},e}(),Tp=function(e){function n(n,t){var l=e.call(this,n)||this;return l.injector=n,l.wpRelationsHierarchyService=t,l.referenceComponentClass=xp,l.relationType="children",l.referenceTarget=null,l.buttonTexts={reference:l.I18n.t("js.relation_buttons.add_existing_child"),create:l.I18n.t("js.relation_buttons.add_new_child")},l}return a.d(n,e),n.prototype.add=function(e,n){return this.wpRelationsHierarchyService.addExistingChildWp(e,n)},n.prototype.remove=function(e,n){return this.wpRelationsHierarchyService.removeChild(n)},Object.defineProperty(n.prototype,"canAdd",{get:function(){return!!(this.referenceTarget&&this.canCreateWorkPackages&&this.canAddChild)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return!(!this.referenceTarget||!this.canAddChild)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canAddChild",{get:function(){var e=this.referenceTarget;return e&&!e.isMilestone&&e.changeParent},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(Fd),Op=function(e){function n(n){var t=e.call(this,n)||this;return t.injector=n,t.wpRelations=t.injector.get(On),t.referenceComponentClass=xp,t.relationType="",t.referenceTarget=null,t.buttonTexts={reference:t.I18n.t("js.relation_buttons.add_existing"),create:t.I18n.t("js.relation_buttons.create_new")},t}return a.d(n,e),n.prototype.add=function(e,n){return this.wpRelations.addCommonRelation(n,this.relationType,e.id)},n.prototype.remove=function(e,n){var t=this.wpRelations.find(n,e,this.relationType);return void 0!==t?this.wpRelations.removeRelation(t):Promise.reject()},Object.defineProperty(n.prototype,"canAdd",{get:function(){return!!(this.referenceTarget&&this.canCreateWorkPackages&&this.referenceTarget.addRelation)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return!!this.canAdd},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(Fd),Ep=function(){function e(e){this.querySpace=e}return e.prototype.classIdentifier=function(e){return"wp-row-"+e.id},Object.defineProperty(e.prototype,"renderedCards",{get:function(){return this.querySpace.rendered.getValueOr([])},enumerable:!0,configurable:!0}),e.prototype.findRenderedCard=function(e){return _.findIndex(this.renderedCards,function(n){return n.classIdentifier===e})},e.prototype.updateRenderedCardsValues=function(e){var n=this;this.querySpace.rendered.putValue(e.map(function(e){return{classIdentifier:n.classIdentifier(e),workPackageId:e.id,hidden:!1}}))},e}(),Dp=function(e,n,t){this.elementRef=e,this.querySpace=n,this.injector=t,Object(bn.a)("Opening isolated query space %O in %O",t,e.nativeElement)},Fp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),Np=function(){function e(e,n,t,l,i,r,o){this.halResourceService=e,this.wpCacheService=n,this.wpSchemaCacheService=t,this.wpActivity=l,this.notificationService=i,this.halEditing=r,this.halEvents=o}return e.prototype.fetchAction=function(){var e=this;this.halResourceService.get(this.action.href).toPromise().then(function(n){e.action=n})},e.prototype.update=function(){var e=this,n={lockVersion:this.workPackage.lockVersion,_links:{workPackage:{href:this.workPackage.href}}};this.halResourceService.post(this.action.href+"/execute",n).toPromise().then(function(n){e.notificationService.showSave(n,!1),e.workPackage=n,e.wpActivity.clear(e.workPackage.id),e.wpSchemaCacheService.ensureLoaded(n).then(function(){e.wpCacheService.updateWorkPackage(n,!0),e.halEditing.stopEditing(n),e.halEvents.push(n,{eventType:"updated"})})}).catch(function(n){e.notificationService.handleRawError(n,e.workPackage)})},e.prototype.onMouseEnter=function(){this.fetchAction()},e}(),Ap=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Vp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"button",[["class","custom-action--button button -narrow hide-when-print"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.update()&&l);return l},null,null)),(e()(),l["ɵted"](1,null,[" ","\n"]))],null,function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"",t.action.description?t.action.description:t.action.name,"")),e(n,1,0,t.action.name)})}l["ɵccf"]("wp-custom-action",Np,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-custom-action",[],null,[[null,"mouseenter"]],function(e,n,t){var i=!0;"mouseenter"===n&&(i=!1!==l["ɵnov"](e,1).onMouseEnter()&&i);return i},Vp,Ap)),l["ɵdid"](1,49152,null,0,Np,[Q,Cn,vn,Vs,qn,ns,ct],null,null)],null,null)},{workPackage:"workPackage",action:"action"},{},[]);var Mp=function(){function e(){}return Object.defineProperty(e.prototype,"actions",{get:function(){return this.workPackage.customActions},enumerable:!0,configurable:!0}),e}(),qp=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Lp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-custom-action",[["class","custom-action"]],null,[[null,"mouseenter"]],function(e,n,t){var i=!0;"mouseenter"===n&&(i=!1!==l["ɵnov"](e,1).onMouseEnter()&&i);return i},Vp,Ap)),l["ɵdid"](1,49152,null,0,Np,[Q,Cn,vn,Vs,qn,ns,ct],{workPackage:[0,"workPackage"],action:[1,"action"]},null)],function(e,n){e(n,1,0,n.component.workPackage,n.context.$implicit)},null)}function $p(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Lp)),l["ɵdid"](1,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,1,0,n.component.actions)},null)}l["ɵccf"]("wp-custom-actions",Mp,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-custom-actions",[],null,null,null,$p,qp)),l["ɵdid"](1,49152,null,0,Mp,[],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Hp=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.$initialize=function(n){var t=this;e.prototype.$initialize.call(this,n),this.filters=this.filters.map(function(e){return new Je(t.injector,e,!0,t.halInitializer,"QueryFilterInstance")})},n}(L),Bp=function(){function e(e,n,t,l,i,r,o,u,a,s,d,p,h,f){this.I18n=e,this.currentProject=n,this.PathHelper=t,this.states=l,this.halEditing=i,this.halResourceService=r,this.displayFieldService=o,this.wpCacheService=u,this.hook=a,this.injector=s,this.cdRef=d,this.elementRef=p,this.cleanupService=h,this.browserDetector=f,this.showProject=!1,this.groupedFields=[],this.resourceContextChange=new c.a,this.text={attachments:{label:this.I18n.t("js.label_attachments")},project:{required:this.I18n.t("js.project.required_outside_context"),context:this.I18n.t("js.project.context"),switchTo:this.I18n.t("js.project.click_to_switch_context")},fields:{description:this.I18n.t("js.work_packages.properties.description")},infoRow:{createdBy:this.I18n.t("js.label_created_by"),lastUpdatedOn:this.I18n.t("js.label_last_updated_on")}},this.firstTimeFocused=!1}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement);var n=this.halEditing.changeFor(this.workPackage);this.resourceContextChange.next(this.contextFrom(n)),this.refresh(n),this.resourceContextChange.pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(ft.a)(function(e,n){return _.isEqual(e,n)}),Object(v.a)(function(){return e.halEditing.changeFor(e.workPackage)})).subscribe(function(n){return e.refresh(n)}),this.halEditing.typedState(this.workPackage).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.resourceContextChange.next(e.contextFrom(n))})},e.prototype.ngOnDestroy=function(){},e.prototype.refresh=function(e){var n=this.workPackage.isNew,t=e.projectedResource;t.project?this.projectContext={href:this.PathHelper.projectWorkPackagePath(t.project.idFromLink,this.workPackage.id),matches:t.project.href===this.currentProject.apiv3Path}:this.projectContext={matches:!1,href:null},n&&!this.currentProject.inProjectContext&&(this.projectContext.field=this.getFields(t,["project"]));var l=t.schema._attributeGroups;this.groupedFields=this.rebuildGroupedFields(t,l),this.cdRef.detectChanges()},e.prototype.shouldHideGroup=function(e){var n=0===e.members.length,t=this.workPackage.isNew&&!!e.query;return n||t},e.prototype.trackByName=function(e,n){return n.name},e.prototype.attributeGroupComponent=function(e){return this.hook.call("attributeGroupComponent",e,this.workPackage).pop()||null},e.prototype.attachmentListComponent=function(){return this.hook.call("workPackageAttachmentListComponent",this.workPackage).pop()||null},e.prototype.attachmentUploadComponent=function(){return this.hook.call("workPackageAttachmentUploadComponent",this.workPackage).pop()||null},Object.defineProperty(e.prototype,"idLabel",{get:function(){return"#"+this.workPackage.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectContextText",{get:function(){var e=this.workPackage.project.idFromLink,n='<a href="'+this.PathHelper.projectPath(e)+'">'+this.workPackage.project.name+"<a>";return this.I18n.t("js.project.work_package_belongs_to",{projectname:n})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableTwoColumnLayout",{get:function(){return this.workPackage.isNew&&!this.browserDetector.isEdge},enumerable:!0,configurable:!0}),e.prototype.rebuildGroupedFields=function(e,n){var t=this;return n?n.map(function(n){var l=t.getAttributesGroupId(n);return"WorkPackageFormAttributeGroup"===n._type?{name:n.name,id:l||dc(16),members:t.getFields(e,n.attributes),type:n._type,isolated:!1}:{name:n.name,id:l||dc(16),query:t.halResourceService.createHalResourceOfClass(Hp,n._embedded.query),relationType:n.relationType,members:[n._embedded.query],type:n._type,isolated:!0}}):[]},e.prototype.getFields=function(e,n){var t=this,l=[];return n.forEach(function(n){if("date"!==n)if(e.schema[n]){var i=t.displayField(e,n);l.push({name:n,label:i.label,multiple:!1,spanAll:i.isFormattable,field:i})}else Object(bn.a)("Unknown field for current schema",n);else l.push(t.getDateField(e))}),l},e.prototype.getDateField=function(e){var n={name:"date",label:this.I18n.t("js.work_packages.properties.date"),multiple:!1};return e.schema.hasOwnProperty("date")?n.field=this.displayField(e,"date"):(n.fields=[this.displayField(e,"startDate"),this.displayField(e,"dueDate")],n.multiple=!0),n},e.prototype.contextFrom=function(e){var n=e.schema,t=e.projectedResource,l=null,i=t.project&&t.project.href;return l=n.baseSchema?n.baseSchema.href:n.href,{isNew:t.isNew,schema:l,project:i}},e.prototype.displayField=function(e,n){return this.displayFieldService.getField(e,n,e.schema[n],{container:"single-view",injector:this.injector,options:{}})},e.prototype.getAttributesGroupId=function(e){var n=this.$element.find("[data-group-name='"+e.name+"']").data("overflowingIdentifier");return n?n.replace(".__overflowing_",""):""},e}(),zp=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Wp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","wp-new--subject-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](2,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){e(n,2,0,"subject",n.component.workPackage,"-no-label")},null)}function Qp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-status-button",[],null,null,null,yd,md)),l["ɵdid"](1,245760,null,0,fd,[A.a,l.ChangeDetectorRef,Cn,ns],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function Up(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attribute-help-text",[],null,null,null,Wr,Br)),l["ɵdid"](1,114688,null,0,Hr,[l.ElementRef,qr,Lr,Wn.b,l.ChangeDetectorRef,l.Injector,A.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,1,0,"status","WorkPackage")},null)}function Gp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"div",[["class","work-packages--info-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[": "])),(e()(),l["ɵeld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](6,0,null,null,1,"user-link",[["class","user-link"]],null,null,null,kd,Cd)),l["ɵdid"](7,114688,null,0,wd,[ge,A.a],{user:[0,"user"]},null),(e()(),l["ɵted"](-1,null,[". "])),(e()(),l["ɵeld"](9,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](12,0,null,null,1,"op-date-time",[],null,null,null,il,ll)),l["ɵdid"](13,114688,null,0,tl,[nl],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["ɵted"](-1,null,[". "]))],function(e,n){var t=n.component;e(n,7,0,t.workPackage.author),e(n,13,0,t.workPackage.updatedAt)},function(e,n){var t=n.component;e(n,1,0,t.idLabel),e(n,3,0,t.text.infoRow.createdBy),e(n,9,0,t.text.infoRow.lastUpdatedOn)})}function Kp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["*"]))],null,null)}function Yp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"div",[["class","attributes-key-value"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-span-all-columns":0}),(e()(),l["ɵeld"](4,0,null,null,7,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,4,"wp-replacement-label",[],null,null,null,Rd,jd)),l["ɵdid"](6,114688,null,0,Id,[ss,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["ɵted"](7,0,[" "," "])),(e()(),l["ɵand"](16777216,null,0,1,null,Kp)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](10,0,null,null,1,"attribute-help-text",[],null,null,null,Wr,Br)),l["ɵdid"](11,114688,null,0,Hr,[l.ElementRef,qr,Lr,Wn.b,l.ChangeDetectorRef,l.Injector,A.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null),(e()(),l["ɵeld"](12,0,null,null,2,"div",[["class","attributes-key-value--value-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](14,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.context.$implicit.spanAll);e(n,2,0,"attributes-key-value",l),e(n,6,0,n.context.$implicit.name),e(n,9,0,n.context.$implicit.field.required&&n.context.$implicit.field.writable);e(n,11,0,n.context.$implicit.name,"WorkPackage"),e(n,14,0,n.context.$implicit.name,t.workPackage)},function(e,n){e(n,7,0,n.context.$implicit.label)})}function Zp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","attributes-group -project-context __overflowing_element_container __overflowing_project_context"],["data-overflowing-identifier",".__overflowing_project_context"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"p",[["class","wp-project-context--warning"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Yp)),l["ɵdid"](4,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,4,0,t.projectContext.field,t.trackByName)},function(e,n){e(n,2,0,n.component.text.project.required)})}function Jp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","attributes-group -project-context hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"a",[["class","project-context--switch-link"]],[[1,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.projectContextText),e(n,5,0,t.projectContext.href,t.text.project.switchTo)})}function Xp(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"bcf-wp-single-view",[],null,null,null,Od,Td)),l["ɵdid"](2,245760,null,0,_d,[g.G,A.a,l.Injector,ge],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function eh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,41,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](36,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),(e()(),l["ɵeld"](37,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](38,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](40,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["ɵpod"](41,{workPackage:0,group:1,query:2}),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,38,0,t.attributeGroupComponent(n.parent.context.$implicit));var l=e(n,41,0,t.workPackage,n.parent.context.$implicit,n.parent.context.$implicit.query);e(n,40,0,l)},null)}function nh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](5,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"],ndcDynamicInjector:[1,"ndcDynamicInjector"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](7,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["ɵpod"](8,{workPackage:0,group:1}),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,5,0,t.attributeGroupComponent(n.parent.context.$implicit),t.injector);var l=e(n,8,0,t.workPackage,n.parent.context.$implicit);e(n,7,0,l)},function(e,n){e(n,3,0,n.parent.context.$implicit.name)})}function th(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","attributes-group __overflowing_element_container"]],[[8,"hidden",0],[1,"data-group-name",0],[1,"data-overflowing-identifier",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,eh)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,nh)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,"attributes-group __overflowing_element_container","__overflowing_"+n.context.$implicit.id),e(n,4,0,n.context.$implicit.isolated),e(n,6,0,!n.context.$implicit.isolated)},function(e,n){e(n,0,0,n.component.shouldHideGroup(n.context.$implicit),n.context.$implicit.name,".__overflowing_"+n.context.$implicit.id)})}function lh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,29,"div",[["class","work-package--single-view"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-can-have-columns":0}),(e()(),l["ɵand"](16777216,null,null,1,null,Wp)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,8,"div",[["class","wp-info-wrapper"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Qp)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Up)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Gp)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](13,0,null,null,1,"wp-custom-actions",[["class","custom-actions"]],null,null,null,$p,qp)),l["ɵdid"](14,49152,null,0,Mp,[],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Zp)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Jp)),l["ɵdid"](18,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Xp)),l["ɵdid"](20,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](21,0,null,null,6,"div",[["class","attributes-group description-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,2,"div",[["class","single-attribute work-packages--details--description"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](27,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"],isDropTarget:[3,"isDropTarget"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,th)),l["ɵdid"](29,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.enableTwoColumnLayout);e(n,2,0,"work-package--single-view",l),e(n,5,0,t.workPackage.isNew),e(n,8,0,!t.workPackage.isNew),e(n,10,0,!t.workPackage.isNew),e(n,12,0,!t.workPackage.isNew),e(n,14,0,t.workPackage),e(n,16,0,t.projectContext&&t.projectContext.field),e(n,18,0,!t.workPackage.isNew&&t.projectContext&&!t.projectContext.matches),e(n,20,0,t.workPackage.bcf);e(n,27,0,"description",t.workPackage,"-no-label",!0),e(n,29,0,t.groupedFields,t.trackByName)},function(e,n){e(n,24,0,n.component.text.fields.description)})}function ih(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"div",[["class","work-packages--attachments attributes-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,13,"div",[["class","work-packages--attachments-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](6,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](8,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["ɵpod"](9,{resource:0}),(e()(),l["ɵeld"](10,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](11,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](13,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["ɵpod"](14,{resource:0})],function(e,n){var t=n.component;e(n,6,0,t.attachmentListComponent());var l=e(n,9,0,t.workPackage);e(n,8,0,l),e(n,11,0,t.attachmentUploadComponent());var i=e(n,14,0,t.workPackage);e(n,13,0,i)},function(e,n){e(n,4,0,n.component.text.attachments.label)})}function rh(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,lh)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ih)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage.canAddAttachments||t.workPackage.hasAttachments)},null)}l["ɵccf"]("wp-single-view",Bp,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](2,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",showProject:"showProject"},{},[]);var oh=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,n,u.params.workPackageId)||this;return a.injector=n,a.states=t,a.firstRoute=l,a.keepTab=i,a.wpTableSelection=r,a.wpTableFocus=o,a.$state=u,a.backRoutingService=a.injector.get(Pc),a}return a.d(n,e),n.prototype.ngOnInit=function(){this.observeWorkPackage()},n.prototype.initializeTexts=function(){e.prototype.initializeTexts.call(this),this.text.full_view={button_more:this.I18n.t("js.button_more")}},n.prototype.init=function(){e.prototype.init.call(this),this.wpTableFocus.updateFocus(this.workPackage.id),this.setWorkPackageScopeProperties(this.workPackage),this.text.goBack=this.I18n.t("js.button_back")},n.prototype.goBack=function(){this.backRoutingService.goBack()},n.prototype.setWorkPackageScopeProperties=function(e){this.isWatched=e.hasOwnProperty("unwatch"),this.displayWatchButton=e.hasOwnProperty("unwatch")||e.hasOwnProperty("watch"),e.watchers&&(this.watchers=e.watchers.elements),this.type=e.type,this.author=e.author,this.authorPath=this.author.showUserPath,this.authorActive=this.author.isActive,this.attachments=e.attachments.elements},n}(Yc),uh=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ah(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"wp-watcher-button",[],null,null,null,Cc,bc)),l["ɵdid"](2,245760,null,0,vc,[A.a,mc,Cn],{workPackage:[0,"workPackage"],showText:[1,"showText"]},null)],function(e,n){e(n,2,0,n.component.workPackage,!1)},null)}function sh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"li",[["uiSref","work-packages.show.watchers"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,1).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](1,737280,[[3,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](2,{workPackageId:0}),l["ɵdid"](3,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,3,{_srefs:1}),l["ɵdid"](5,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,1,"wp-watchers-count",[],null,null,null,Ts,_s)),l["ɵdid"](8,245760,null,0,Ss,[Cn],{wpId:[0,"wpId"]},null)],function(e,n){var t=n.component,l=e(n,2,0,t.workPackage.id);e(n,1,0,"work-packages.show.watchers",l);e(n,5,0,"selected"),e(n,8,0,t.workPackage.id)},function(e,n){e(n,6,0,n.component.text.tabs.watchers)})}function ch(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,64,"div",[["class","work-packages--show-view"],["edit-form",""]],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"wp-breadcrumb",[],null,null,null,ac,lc)),l["ɵdid"](3,49152,null,0,nc,[A.a],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](4,0,null,0,25,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,24,"div",[["id","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,9,"div",[["class","wp-show--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,4,"div",[["class","wp-show--back-button hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,3,"accessible-by-keyboard",[["linkClass","work-packages-back-button button"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.goBack()&&l);return l},jl,Il)),l["ɵdid"](9,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](10,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-back-up"]],null,null,null,hl,dl)),l["ɵdid"](11,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](12,0,null,null,3,"ul",[["class","subject-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,2,"li",[["class","subject-header-inner"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,1,"wp-subject",[],null,null,null,gc,hc)),l["ɵdid"](15,245760,null,0,pc,[g.Q,Cn],null,null),(e()(),l["ɵeld"](16,0,null,null,13,"ul",[["class","toolbar-items hide-when-print"],["id","toolbar-items"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"wp-create-button",[["stateName","work-packages.new"]],null,null,null,pd,dd)),l["ɵdid"](19,114688,null,0,cd,[g.G,Qn,A.a],{stateName:[0,"stateName"],allowed:[1,"allowed"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ah)),l["ɵdid"](21,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](22,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](24,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](25,0,null,null,4,"li",[["class","toolbar-item action_menu_main"],["id","action-show-more-dropdown-menu"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,3,"button",[["class","button dropdown-relative toolbar-icon"],["wpSingleContextMenu",""]],[[1,"title",0]],null,null,null,null)),l["ɵdid"](27,4210688,null,0,Ec,[It,g.G,l.Injector,ge,l.ElementRef,Wn.b,is,In],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](28,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,hl,dl)),l["ɵdid"](29,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](30,0,null,0,34,"div",[["class","work-packages-full-view--split-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,4,"div",[["class","work-packages-full-view--split-left"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,3,"div",[["class","work-packages--panel-inner"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](35,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](36,0,null,null,28,"div",[["class","work-packages-full-view--split-right work-packages-tab-view--overflow"]],null,null,null,null,null)),(e()(),l["ɵeld"](37,0,null,null,24,"div",[["class","work-packages--panel-inner"]],null,null,null,null,null)),(e()(),l["ɵeld"](38,0,null,null,1,"span",[["class","hidden-for-sighted"],["focus",""],["tabindex","-1"]],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](39,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](40,0,null,null,19,"div",[["id","tabs"]],null,null,null,null,null)),(e()(),l["ɵeld"](41,0,null,null,18,"ul",[["class","tabrow"]],null,null,null,null,null)),(e()(),l["ɵeld"](42,0,null,null,6,"li",[["uiSref","work-packages.show.activity"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,43).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](43,737280,[[1,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](44,{workPackageId:0}),l["ɵdid"](45,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,1,{_srefs:1}),l["ɵdid"](47,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](48,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](49,0,null,null,8,"li",[["uiSref","work-packages.show.relations"],["uiSrefActive","selected"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,50).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](50,737280,[[2,4]],0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](51,{workPackageId:0}),l["ɵdid"](52,1196032,null,1,Rs.a,[g.Q],null,null),l["ɵqud"](603979776,2,{_srefs:1}),l["ɵdid"](54,147456,null,0,Ps.a,[Rs.a,l.Renderer2,l.ElementRef],{active:[0,"active"]},null),(e()(),l["ɵeld"](55,0,null,null,0,"a",[["href",""]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](56,0,null,null,1,"wp-relations-count",[],null,null,null,Lc,Mc)),l["ɵdid"](57,245760,null,0,Vc,[Cn,On],{wpId:[0,"wpId"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,sh)),l["ɵdid"](59,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](60,16777216,null,null,1,"div",[["class","tabcontent"],["ui-view",""]],null,null,null,Mt.c,Mt.a)),l["ɵdid"](61,245760,null,0,oo.a,[g.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null),(e()(),l["ɵeld"](62,0,null,null,2,"div",[["class","work-packages-full-view--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](63,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,64).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["ɵnov"](e,64).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["ɵnov"](e,64).handleMouseUp(t)&&i);return i},Wc,zc)),l["ɵdid"](64,245760,null,0,Bc,[$c,l.ElementRef,g.O,Hc],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage);e(n,9,0,"work-packages-back-button button",t.text.goBack,t.text.goBack);e(n,11,0,"button--icon icon-back-up"),e(n,15,0);e(n,19,0,"work-packages.new",!(!t.workPackage.addChild&&!t.workPackage.$links.copy)),e(n,21,0,t.displayWatchButton),e(n,27,0,t.workPackage);e(n,29,0,"button--icon icon-show-more"),e(n,35,0,t.workPackage);e(n,39,0,"");var l=e(n,44,0,t.workPackage.id);e(n,43,0,"work-packages.show.activity",l);e(n,47,0,"selected");var i=e(n,51,0,t.workPackage.id);e(n,50,0,"work-packages.show.relations",i);e(n,54,0,"selected"),e(n,57,0,t.workPackage.id),e(n,59,0,t.canViewWorkPackageWatchers());e(n,61,0,"");e(n,64,0,"work-packages-full-view--split-right","openProject-fullViewFlexBasis")},function(e,n){var t=n.component;e(n,26,0,t.text.full_view.button_more),e(n,38,0,t.focusAnchorLabel),e(n,48,0,t.text.tabs.activity),e(n,55,0,t.text.tabs.relations)})}function dh(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,ch)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var ph=l["ɵccf"]("wp-full-view-entry",oh,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-full-view-entry",[["class","work-packages-page--ui-view"]],null,null,null,dh,uh)),l["ɵdid"](1,245760,null,0,oh,[l.Injector,d,Qc,_e,Ic,jc,g.G],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),hh=function(){function e(){}return e.prototype.ngOnInit=function(){this.activityHtmlId="activity-"+this.activityNo,this.activityLabel="#"+this.activityNo},e}();var fh=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function gh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"a",[["uiSref","work-packages.show.activity"]],[[8,"id",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,2).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](2,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](3,{workPackageId:0,"#":1})],function(e,n){var t=n.component,l=e(n,3,0,t.workPackage.id,t.activityHtmlId);e(n,2,0,"work-packages.show.activity",l)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"",t.activityHtmlId,"-link"),t.activityLabel)})}l["ɵccf"]("activity-link",hh,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"activity-link",[],null,null,null,gh,fh)),l["ɵdid"](1,114688,null,0,hh,[],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activityNo:"activityNo"},{},[]);var mh=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(e){var n=this.pathHelper.api.v3.users.id(e).toString();return this.halResourceService.get(n).toPromise()},e}(),vh=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.userDmService=t,l}return a.d(n,e),n.prototype.load=function(e){return this.userDmService.load(e)},n.prototype.loadAll=function(e){var n=this,t=e.map(function(e){return n.load(e)});return Promise.all(t).then(function(){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.users},enumerable:!0,configurable:!0}),n}(mn),bh=function(){function e(e,n,t,l){this.I18n=e,this.timezoneService=n,this.cdRef=t,this.userCacheService=l}return e.prototype.ngOnInit=function(){this.loadAuthor(),this.project=this.workPackage.project,this.revision=this.activity.identifier,this.message=this.activity.message.html;var e=this.activity.showRevision.$link.href,n=this.activity.formattedIdentifier,t=document.createElement("a");t.href=e,t.title=this.revision,t.textContent=this.I18n.t("js.label_committed_link",{revision_identifier:n}),this.revisionLink=this.I18n.t("js.label_committed_at",{committed_revision_link:t.outerHTML,date:this.timezoneService.formattedDatetime(this.activity.createdAt)})},e.prototype.loadAuthor=function(){var e=this;void 0===this.activity.author?this.userName=this.activity.authorName:this.userCacheService.require(this.activity.author.idFromLink).then(function(n){e.userId=n.id,e.userName=n.name,e.userActive=n.isActive,e.userAvatar=n.avatar,e.userPath=n.showUser.href,e.userLabel=e.I18n.t("js.label_author",{user:e.userName}),e.cdRef.detectChanges()})},e}(),yh=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar"]],[[1,"data-user-name",0],[1,"data-user-id",0]],null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],null,null)],null,function(e,n){var t=n.component;e(n,0,0,t.userName,t.userId)})}function Ch(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar"]],[[1,"data-user-name",0],[1,"data-use-fallback",0]],null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],null,null)],null,function(e,n){e(n,0,0,n.component.userName,!0)})}function kh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"a",[],[[1,"href",4],[1,"aria-label",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userPath,t.userLabel,t.userName)})}function Ih(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","user"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.userName)})}function jh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"div",[["class","work-package-details-activities-activity-contents"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","comments-number"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"activity-link",[],null,null,null,gh,fh)),l["ɵdid"](3,114688,null,0,hh,[],{workPackage:[0,"workPackage"],activityNo:[1,"activityNo"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,wh)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ch)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,kh)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ih)),l["ɵdid"](11,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](12,0,null,null,0,"span",[["class","revision-activity--revision-link date"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,"span",[["class","user-comment wiki"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,t.workPackage,t.activityNo),e(n,5,0,t.activity.author&&t.userName),e(n,7,0,!t.activity.author&&t.userName),e(n,9,0,t.userActive),e(n,11,0,!t.userActive)},function(e,n){var t=n.component;e(n,12,0,t.revisionLink),e(n,14,0,t.message)})}function Rh(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,jh)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["ɵccf"]("revision-activity",bh,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"revision-activity",[],null,null,null,Rh,yh)),l["ɵdid"](1,114688,null,0,bh,[A.a,nl,l.ChangeDetectorRef,vh],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo"},{},[]);var Ph=function(){function e(e,n,t){this.I18n=e,this.workPackageNotificationService=n,this.NotificationsService=t,this.quoteEvents=new c.a}return e.prototype.createComment=function(e,n){var t=this;return e.addComment({comment:n},{"Content-Type":"application/json; charset=UTF-8"}).catch(function(n){return t.errorAndReject(n,e)})},e.prototype.updateComment=function(e,n){var t=this;JSON.stringify({comment:n});return e.update({comment:n},{"Content-Type":"application/json; charset=UTF-8"}).then(function(e){return t.NotificationsService.addSuccess(t.I18n.t("js.work_packages.comment_updated")),e}).catch(function(e){return t.errorAndReject(e)})},e.prototype.errorAndReject=function(e,n){return this.workPackageNotificationService.handleRawError(e,n),Promise.reject(e)},e}(),Sh=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.setValue=function(n,t){var l=this;e.prototype.setValue.call(this,n,t),!this.pristineResource.isNew||"project"!==n&&"type"!==n||this.updateForm().then(function(){return l.push()})},n.prototype.applyChanges=function(n){return delete n.description,e.prototype.applyChanges.call(this,n)},n.prototype.setNewDefaultFor=function(n,t){"description"===n&&this.pristineResource.isNew?this.pristineResource.description=t:e.prototype.setNewDefaultFor.call(this,n,t)},n}(bu),_h=function(e){function n(n,t){var l=e.call(this)||this;return l.elementRef=n,l.injector=t,l.fieldName="comment",l.handler=l,l.active=!1,l.inEditMode=!1,l.inFlight=!1,l.onDestroy=new c.a,l}return a.d(n,e),n.prototype.ngOnInit=function(){this.change=new Sh(this.workPackage)},n.prototype.reset=function(e){void 0===e&&(e=""),e.length>0&&(e+="\n"),this.change.setValue("comment",{raw:e})},Object.defineProperty(n.prototype,"schema",{get:function(){return{name:I18n.t("js.label_comment"),writable:!0,required:!1,type:"_comment",hasDefault:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rawComment",{get:function(){return _.get(this.commentValue,"raw","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commentValue",{get:function(){return this.change.value("comment")},enumerable:!0,configurable:!0}),n.prototype.handleUserCancel=function(){this.deactivate(!0)},n.prototype.activate=function(e){this.active=!0,this.reset(e)},n.prototype.deactivate=function(e){this.active=!1,this.onDestroy.next(),this.onDestroy.complete()},n.prototype.focus=function(){var e=this.elementRef.nativeElement.querySelector(".inplace-editing--trigger-container");e&&e.focus()},n.prototype.onFocusOut=function(){},n.prototype.handleUserKeydown=function(e,n){},n.prototype.isChanged=function(){return!1},n.prototype.stopPropagation=function(e){return!1},n}(gu),xh=function(e){function n(n,t,l,i,r,o,u,a,s,c,d){var p=e.call(this,n,t)||this;return p.elementRef=n,p.injector=t,p.sanitization=l,p.PathHelper=i,p.wpLinkedActivities=r,p.commentService=o,p.wpCacheService=u,p.ConfigurationService=a,p.userCacheService=s,p.cdRef=c,p.I18n=d,p.userCanEdit=!1,p.userCanQuote=!1,p.details=[],p.focused=!1,p.text={label_created_on:p.I18n.t("js.label_created_on"),label_updated_on:p.I18n.t("js.label_updated_on"),quote_comment:p.I18n.t("js.label_quote_comment"),edit_comment:p.I18n.t("js.label_edit_comment")},p}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.updateCommentText(),this.isComment="Activity::Comment"===this.activity._type,this.isBcfComment="Activity::BcfComment"===this.activity._type,this.isBcfComment&&_.get(this.activity.bcfComment,"viewpoint.snapshot")&&(this.bcfSnapshot=_.get(this.activity.bcfComment,"viewpoint.snapshot")),this.$element=jQuery(this.elementRef.nativeElement),this.reset(),this.userCanEdit=!!this.activity.update,this.userCanQuote=!!this.workPackage.addComment,this.$element.bind("focusin",this.focus.bind(this)),this.$element.bind("focusout",this.blur.bind(this)),_.each(this.activity.details,function(e){n.details.push(e.html)}),this.userCacheService.require(this.activity.user.idFromLink).then(function(e){n.userId=e.id,n.userName=e.name,n.userActive=e.isActive,n.userAvatar=e.avatar,n.userPath=e.showUser.href,n.userLabel=n.I18n.t("js.label_author",{user:n.userName}),n.cdRef.detectChanges()})},n.prototype.shouldHideIcons=function(){return!((this.isComment||this.isBcfComment)&&this.focussing())},n.prototype.ngAfterViewInit=function(){window.location.hash==="activity-"+this.activityNo&&this.elementRef.nativeElement.scrollIntoView(!0)},n.prototype.activate=function(){e.prototype.activate.call(this,this.activity.comment.raw),this.cdRef.detectChanges()},n.prototype.handleUserSubmit=function(){return this.inFlight||!this.rawComment?Promise.resolve():this.updateComment()},n.prototype.quoteComment=function(){this.commentService.quoteEvents.next(this.quotedText(this.activity.comment.raw))},n.prototype.updateComment=function(){return a.b(this,void 0,void 0,function(){var e=this;return a.e(this,function(n){switch(n.label){case 0:return this.inFlight=!0,[4,this.onSubmit()];case 1:return n.sent(),[2,this.commentService.updateComment(this.activity,this.rawComment||"").then(function(n){e.activity=n,e.updateCommentText(),e.wpLinkedActivities.require(e.workPackage,!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.deactivate(!0)}).catch(function(){return e.deactivate(!0)})]}})})},n.prototype.focusEditIcon=function(){jQuery(".edit-activity--"+this.activityNo+" a").focus()},n.prototype.focus=function(){this.focused=!0,this.cdRef.detectChanges()},n.prototype.blur=function(){this.focused=!1,this.cdRef.detectChanges()},n.prototype.focussing=function(){return this.focused},n.prototype.setErrors=function(e){},n.prototype.quotedText=function(e){var n=e.split("\n").map(function(e){return"\n> "+e}).join("");return this.userName+" wrote:\n"+n},Object.defineProperty(n.prototype,"htmlId",{get:function(){return"user_activity_edit_field_"+this.activityNo},enumerable:!0,configurable:!0}),n.prototype.deactivate=function(n){e.prototype.deactivate.call(this,n),n&&this.focusEditIcon()},n.prototype.updateCommentText=function(){this.postedComment=this.sanitization.bypassSecurityTrustHtml(this.activity.comment.html)},n}(_h),Th=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Oh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar"]],[[1,"data-user-name",0],[1,"data-user-id",0]],null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],null,null)],null,function(e,n){var t=n.component;e(n,0,0,t.userName,t.userId)})}function Eh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"a",[],[[1,"href",4],[1,"aria-label",0],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.userPath,t.userLabel,t.userName)})}function Dh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.userName)})}function Fh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.quoteComment()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","action-icon icon-quote"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.quote_comment);e(n,3,0,"action-icon icon-quote",t.text.quote_comment)},null)}function Nh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"accessible-by-keyboard",[],[[8,"className",0]],[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.activate()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkTitle:[0,"linkTitle"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","action-icon icon-edit"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.edit_comment);e(n,3,0,"action-icon icon-edit",t.text.edit_comment)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"edit-activity--",t.activityNo,""))})}function Ah(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[["class","activity-thumbnail"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.PathHelper.attachmentDownloadPath(t.bcfSnapshot.id,t.bcfSnapshot.file_name))})}function Vh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","inplace-edit"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","user-comment--form inplace-edit--write-value"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"edit-form-portal",[],null,null,null,Tu,Su)),l["ɵdid"](3,4440064,null,0,Pu,[l.Injector,Ru,l.ElementRef],{schemaInput:[0,"schemaInput"],changeInput:[1,"changeInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,3,0,t.schema,t.change,t.handler)},null)}function Mh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","message wiki"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.postedComment)})}function qh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[["class","message"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Lh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ul",[["class","work-package-details-activities-messages"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,qh)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.details)},null)}function $h(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,27,"div",[["class","work-package-details-activities-activity-contents"]],null,[[null,"mouseenter"],[null,"mouseleave"]],function(e,n,t){var l=!0,i=e.component;"mouseenter"===n&&(l=!1!==i.focus()&&l);"mouseleave"===n&&(l=!1!==i.blur()&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Oh)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Eh)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Dh)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](7,0,null,null,3,"span",[["class","date"]],null,null,null,null,null)),(e()(),l["ɵted"](8,null,[" "," "])),(e()(),l["ɵeld"](9,0,null,null,1,"op-date-time",[],null,null,null,il,ll)),l["ɵdid"](10,114688,null,0,tl,[nl],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["ɵeld"](11,0,null,null,7,"div",[["class","comments-number"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,1,"activity-link",[],null,null,null,gh,fh)),l["ɵdid"](13,114688,null,0,hh,[],{workPackage:[0,"workPackage"],activityNo:[1,"activityNo"]},null),(e()(),l["ɵeld"](14,0,null,null,4,"div",[["class","comments-icons"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Fh)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Nh)),l["ɵdid"](18,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ah)),l["ɵdid"](20,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](21,0,null,null,6,"div",[["class","user-comment"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vh)),l["ɵdid"](23,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Mh)),l["ɵdid"](25,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Lh)),l["ɵdid"](27,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.userName),e(n,4,0,t.userActive),e(n,6,0,!t.userActive),e(n,10,0,t.activity.createdAt),e(n,13,0,t.workPackage,t.activityNo),e(n,16,0,t.userCanQuote),e(n,18,0,t.userCanEdit),e(n,20,0,t.bcfSnapshot),e(n,23,0,t.active),e(n,25,0,!t.active&&(t.isComment||t.isBcfComment)),e(n,27,0,!t.isInitial)},function(e,n){var t=n.component;e(n,8,0,t.isInitial?t.text.label_created_on:t.text.label_updated_on),e(n,14,0,t.shouldHideIcons())})}function Hh(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,$h)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["ɵccf"]("user-activity",xh,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-activity",[],null,null,null,Hh,Th)),l["ɵdid"](1,4308992,null,0,xh,[l.ElementRef,l.Injector,rr.DomSanitizer,ge,Vs,Ph,Cn,be,vh,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",isInitial:"isInitial"},{},[]);var Bh=function(){function e(e,n){this.PathHelper=e,this.I18n=n}return e.prototype.ngOnInit=function(){this.projectId=this.workPackage.project.idFromLink,this.activityType=this.activity._type},e}(),zh=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Wh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"revision-activity",[],null,null,null,Rh,yh)),l["ɵdid"](1,114688,null,0,bh,[A.a,nl,l.ChangeDetectorRef,vh],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.activity,t.activityNo)},null)}function Qh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-activity",[],null,null,null,Hh,Th)),l["ɵdid"](1,4308992,null,0,xh,[l.ElementRef,l.Injector,rr.DomSanitizer,ge,Vs,Ph,Cn,be,vh,l.ChangeDetectorRef,A.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.activity,t.activityNo,t.isInitial)},null)}function Uh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"div",[],null,null,null,null,null)),l["ɵdid"](2,16384,null,0,$t.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Wh)),l["ɵdid"](4,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Qh)),l["ɵdid"](6,16384,null,0,$t.NgSwitchDefault,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],null,null)],function(e,n){e(n,2,0,n.component.activityType);e(n,4,0,"Revision")},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"activity-",t.activityNo,""))})}l["ɵccf"]("activity-entry",Bh,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"activity-entry",[],null,null,null,Uh,zh)),l["ɵdid"](1,114688,null,0,Bh,[ge,A.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",isInitial:"isInitial"},{},[]);var Gh=function(e){function n(n,t,l,i,r,o,u,a,s,c,d){var p=e.call(this,n,t)||this;return p.elementRef=n,p.injector=t,p.commentService=l,p.wpLinkedActivities=i,p.ConfigurationService=r,p.loadingIndicator=o,p.wpCacheService=u,p.workPackageNotificationService=a,p.NotificationsService=s,p.cdRef=c,p.I18n=d,p.text={editTitle:p.I18n.t("js.label_add_comment_title"),addComment:p.I18n.t("js.label_add_comment"),cancelTitle:p.I18n.t("js.label_cancel_comment"),placeholder:p.I18n.t("js.label_add_comment_title")},p.fieldLabel=p.text.editTitle,p.inFlight=!1,p}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canAddComment=!!this.workPackage.addComment,this.showAbove=this.ConfigurationService.commentsSortedInDescendingOrder(),this.commentService.quoteEvents.pipe(Object(Gn.b)(this)).subscribe(function(e){n.activate(e),n.commentContainer.nativeElement.scrollIntoView()})},n.prototype.startDragOverActivation=function(e){return!!this.active||(this.activate(),e.preventDefault(),!1)},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"htmlId",{get:function(){return"wp-comment-field"},enumerable:!0,configurable:!0}),n.prototype.activate=function(n){e.prototype.activate.call(this,n),this.showAbove||this.scrollToBottom(),this.cdRef.detectChanges()},n.prototype.deactivate=function(e){e&&this.focus(),this.active=!1,this.cdRef.detectChanges()},n.prototype.handleUserSubmit=function(){return a.b(this,void 0,void 0,function(){var e=this;return a.e(this,function(n){switch(n.label){case 0:return this.inFlight||!this.rawComment?[2,Promise.resolve()]:(this.inFlight=!0,[4,this.onSubmit()]);case 1:return n.sent(),[2,this.loadingIndicator.wpDetails.promise=this.commentService.createComment(this.workPackage,this.commentValue).then(function(){e.active=!1,e.NotificationsService.addSuccess(e.I18n.t("js.work_packages.comment_added")),e.wpLinkedActivities.require(e.workPackage,!0),e.wpCacheService.updateWorkPackage(e.workPackage),e.inFlight=!1,e.deactivate(!0)}).catch(function(n){e.inFlight=!1,n instanceof En?e.workPackageNotificationService.showError(n,e.workPackage):e.NotificationsService.addError(e.I18n.t("js.work_packages.comment_send_failed"))})]}})})},n.prototype.scrollToBottom=function(){var e=jQuery(this.elementRef.nativeElement).scrollParent()[0];e&&setTimeout(function(){e.scrollTop=e.scrollHeight},400)},n.prototype.setErrors=function(e){},n}(_h),Kh=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Yh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),l["ɵdid"](1,540672,null,0,$t.NgTemplateOutlet,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function Zh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,Tu,Su)),l["ɵdid"](1,4440064,null,0,Pu,[l.Injector,Ru,l.ElementRef],{schemaInput:[0,"schemaInput"],changeInput:[1,"changeInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,1,0,t.schema,t.change,t.handler)},null)}function Jh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","inplace-edit--read"]],null,[[null,"dragover"]],function(e,n,t){var l=!0,i=e.component;"dragover"===n&&(l=!1!==i.startDragOverActivation(t)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"accessible-by-keyboard",[["class","inplace-editing--trigger-container"],["linkClass","inplace-editing--trigger-link"],["spanClass","inplace-editing--container inline-edit--display-field"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.activate()&&l);return l},jl,Il)),l["ɵdid"](2,49152,null,0,kl,[],{linkClass:[0,"linkClass"],spanClass:[1,"spanClass"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](3,0,null,0,1,"span",[["class","inplace-editing--trigger-text inline-edit--formattable-display-text -default"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,0,2,"span",[["class","inplace-editing--trigger-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-edit"]],null,null,null,hl,dl)),l["ɵdid"](7,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,2,0,"inplace-editing--trigger-link","inplace-editing--container inline-edit--display-field",t.text.editTitle);e(n,7,0,"icon-edit",t.text.editTitle)},function(e,n){e(n,4,0,n.component.text.placeholder)})}function Xh(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[1,0],["commentContainer",1]],null,5,"div",[["class","work-package--details--long-field work-packages--activity--add-comment hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[["class","inline-edit--container inplace-edit"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Zh)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Jh)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.active),e(n,5,0,!t.active)},null)}function ef(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,null,null,null,null,null,null,null)),l["ɵdid"](1,540672,null,0,$t.NgTemplateOutlet,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function nf(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{commentContainer:0}),(e()(),l["ɵeld"](1,0,null,null,7,"div",[["id","work-package-activites-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,6,"div",[["id","work-package-comment-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Yh)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Xh)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ef)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,!t.showAbove),e(n,6,0,t.canAddComment),e(n,8,0,t.showAbove)},null)}l["ɵccf"]("work-package-comment",Gh,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"work-package-comment",[],null,null,null,nf,Kh)),l["ɵdid"](1,245760,null,1,Gh,[l.ElementRef,l.Injector,Ph,Vs,be,Nn,Cn,qn,Vn,l.ChangeDetectorRef,A.a],null,null),l["ɵqud"](603979776,1,{template:0})],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var tf=function(){function e(e,n,t,l,i){this.wpCacheService=e,this.I18n=n,this.cdRef=t,this.$transition=l,this.wpActivity=i,this.unfilteredActivities=[],this.visibleActivities=[],this.onlyComments=!1,this.text={commentsOnly:this.I18n.t("js.label_activity_show_only_comments"),showAll:this.I18n.t("js.label_activity_show_all")},this.reverse=i.isReversed,this.togglerText=this.text.commentsOnly}return e.prototype.ngOnInit=function(){var e=this;this.wpCacheService.observe(this.workPackageId).pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n,e.wpActivity.require(e.workPackage).then(function(n){e.updateActivities(n),e.cdRef.detectChanges()})})},e.prototype.ngOnDestroy=function(){},e.prototype.updateActivities=function(e){var n=this;this.unfilteredActivities=e;var t=this.getVisibleActivities();this.visibleActivities=t.map(function(e,t){return n.info(e,t)}),this.showToggler=this.shouldShowToggler()},e.prototype.shouldShowToggler=function(){var e=this.unfilteredActivities.length,n=this.getActivitiesWithComments().length;return e>1&&n>0&&n<this.unfilteredActivities.length},e.prototype.getVisibleActivities=function(){return this.onlyComments?this.getActivitiesWithComments():this.unfilteredActivities},e.prototype.getActivitiesWithComments=function(){return this.unfilteredActivities.filter(function(e){return!!_.get(e,"comment.html")})},e.prototype.toggleComments=function(){this.onlyComments=!this.onlyComments,this.updateActivities(this.unfilteredActivities),this.onlyComments?this.togglerText=this.text.showAll:this.togglerText=this.text.commentsOnly},e.prototype.info=function(e,n){return this.wpActivity.info(this.unfilteredActivities,e,n)},e}(),lf=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.tabName=n.I18n.t("js.work_packages.tabs.activity"),n.trackByHref=_r.trackByHrefAndProperty("version"),n}return a.d(n,e),n.prototype.ngOnInit=function(){this.workPackageId=this.$transition.params("to").workPackageId,e.prototype.ngOnInit.call(this)},n.prototype.ngOnDestroy=function(){},n}(tf),rf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function of(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"accessible-by-keyboard",[["linkClass","activity-comments--toggler button -small -transparent"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleComments()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,1,0,"activity-comments--toggler button -small -transparent",n.component.togglerText)},function(e,n){e(n,2,0,n.component.togglerText)})}function uf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"h3",[["class","activity-date"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-with-toggler":0}),(e()(),l["ɵeld"](4,0,null,null,0,"span",[["class","activity-date--label"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,[[1,2]],null,1,null,of)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.parent.context.first&&t.showToggler);e(n,2,0,"activity-date",l),e(n,6,0,n.parent.context.first&&t.showToggler)},function(e,n){e(n,4,0,n.parent.context.$implicit.date)})}function af(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","work-package-details-activities-activity"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,[[1,2]],null,1,null,uf)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"activity-entry",[],null,null,null,Uh,zh)),l["ɵdid"](4,114688,null,0,Bh,[ge,A.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.first||n.context.$implicit.isNextDate);var l=t.workPackage,i=n.context.$implicit.activity,r=n.context.$implicit.number(n.context.$implicit.isReversed),o=n.context.$implicit.isInitial();e(n,4,0,l,i,r,o)},null)}function sf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","detail-activity"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","work-package-details-activities-list"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,[[1,2]],null,1,null,af)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,3,0,t.visibleActivities,t.trackByHref)},null)}function cf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"work-package-comment",[],null,null,null,nf,Kh)),l["ɵdid"](1,245760,null,1,Gh,[l.ElementRef,l.Injector,Ph,Vs,be,Nn,Cn,qn,Vn,l.ChangeDetectorRef,A.a],{workPackage:[0,"workPackage"]},null),l["ɵqud"](603979776,1,{template:0}),(e()(),l["ɵand"](0,[[1,2]],null,0,null,sf))],function(e,n){e(n,1,0,n.component.workPackage)},null)}var df=l["ɵccf"]("wp-activity-tab",lf,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-activity-tab",[],null,null,null,cf,rf)),l["ɵdid"](1,245760,null,0,lf,[Cn,A.a,l.ChangeDetectorRef,g.J,Vs],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),pf=function(){function e(e,n,t,l,i,r,o){this.wpCacheService=e,this.notificationService=n,this.wpRelations=t,this.halEvents=l,this.I18n=i,this.cdRef=r,this.PathHelper=o,this.showRelationInfo=!1,this.showEditForm=!1,this.userInputs={newRelationText:"",showDescriptionEditForm:!1,showRelationTypesForm:!1,showRelationInfo:!1},this.fieldController={handler:{active:!0},required:!1},this.text={cancel:this.I18n.t("js.button_cancel"),save:this.I18n.t("js.button_save"),removeButton:this.I18n.t("js.relation_buttons.remove"),description_label:this.I18n.t("js.relation_buttons.update_description"),toggleDescription:this.I18n.t("js.relation_buttons.toggle_description"),updateRelation:this.I18n.t("js.relation_buttons.update_relation"),placeholder:{description:this.I18n.t("js.placeholders.relation_description")}}}return e.prototype.ngOnInit=function(){var e=this;this.relation=this.relatedWorkPackage.relatedBy,this.userInputs.newRelationText=this.relation.description||"",this.availableRelationTypes=_p.LOCALIZED_RELATION_TYPES(!1),this.selectedRelationType=_.find(this.availableRelationTypes,{name:this.relation.normalizedType(this.workPackage)}),this.wpCacheService.observe(this.relatedWorkPackage.id).pipe(Object(Gn.b)(this)).subscribe(function(n){e.relatedWorkPackage=n})},e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"normalizedRelationType",{get:function(){var e=this.relation.normalizedType(this.workPackage);return this.I18n.t("js.relation_labels."+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relationReady",{get:function(){return this.relatedWorkPackage&&this.relatedWorkPackage.$loaded},enumerable:!0,configurable:!0}),e.prototype.startDescriptionEdit=function(){var e=this;this.userInputs.showDescriptionEditForm=!0,setTimeout(function(){var n=jQuery(e.relationDescriptionTextarea.nativeElement),t=n.val().length;n.focus(),n.prop("selectionStart",t),n.prop("selectionEnd",t)})},e.prototype.handleDescriptionKey=function(e){27===e.which&&this.cancelDescriptionEdit()},e.prototype.cancelDescriptionEdit=function(){this.userInputs.showDescriptionEditForm=!1,this.userInputs.newRelationText=this.relation.description||""},e.prototype.saveDescription=function(){var e=this;this.wpRelations.updateRelation(this.relation,{description:this.userInputs.newRelationText}).then(function(n){e.relation=n,e.relatedWorkPackage.relatedBy=n,e.userInputs.showDescriptionEditForm=!1,e.notificationService.showSave(e.relatedWorkPackage),e.cdRef.detectChanges()})},Object.defineProperty(e.prototype,"showDescriptionInfo",{get:function(){return this.userInputs.showRelationInfo||this.relation.description},enumerable:!0,configurable:!0}),e.prototype.activateRelationTypeEdit=function(){this.groupByWorkPackageType&&(this.userInputs.showRelationTypesForm=!0)},e.prototype.cancelRelationTypeEditOnEscape=function(e){this.userInputs.showRelationTypesForm=!1},e.prototype.saveRelationType=function(){var e=this;this.wpRelations.updateRelationType(this.workPackage,this.relatedWorkPackage,this.relation,this.selectedRelationType.name).then(function(n){e.notificationService.showSave(e.relatedWorkPackage),e.relatedWorkPackage.relatedBy=n,e.relation=n,e.userInputs.showRelationTypesForm=!1,e.cdRef.detectChanges()}).catch(function(n){return e.notificationService.handleRawError(n,e.workPackage)})},e.prototype.toggleUserDescriptionForm=function(){this.userInputs.showDescriptionEditForm=!this.userInputs.showDescriptionEditForm},e.prototype.removeRelation=function(){var e=this;this.wpRelations.removeRelation(this.relation).then(function(){e.halEvents.push(e.workPackage,{eventType:"association",relatedWorkPackage:null,relationType:e.relation.normalizedType(e.workPackage)}),e.wpCacheService.updateWorkPackage(e.relatedWorkPackage),e.notificationService.showSave(e.relatedWorkPackage)}).catch(function(n){return e.notificationService.handleRawError(n,e.relatedWorkPackage)})},e}(),hf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ff(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.normalizedRelationType)})}function gf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.relatedWorkPackage.type.name)})}function mf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[["class","relation-row--type"],["tabindex","0"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.activateRelationTypeEdit()&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵand"](16777216,null,null,1,null,ff)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,gf)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"span",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,3,0,t.groupByWorkPackageType),e(n,5,0,!t.groupByWorkPackageType)},function(e,n){e(n,6,0,n.component.text.updateRelation)})}function vf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function bf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","inline-edit--container inplace-edit"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"select",[["class","inline-edit--field form--select"],["focus",""],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown.escape"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.selectedRelationType=t)&&i);"change"===n&&(i=!1!==r.saveRelationType()&&i);"keydown.escape"===n&&(i=!1!==r.cancelRelationTypeEditOnEscape(t)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](7,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vf)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.selectedRelationType);e(n,7,0,""),e(n,9,0,t.availableRelationTypes)},function(e,n){e(n,1,0,l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending)})}function yf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","grid-content medium-5 collapse"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[["class","wp-relations--subject-field"],["uiSref","work-packages.show.relations"]],[[8,"textContent",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,3).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](3,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](4,{workPackageId:0})],function(e,n){var t=e(n,4,0,n.component.relatedWorkPackage.id);e(n,3,0,"work-packages.show.relations",t)},function(e,n){var t=n.component;e(n,1,0,t.relatedWorkPackage.subjectWithId(),t.normalizedRelationType+" "+t.relatedWorkPackage.subjectWithId())})}function wf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"editable-attribute-field",[["fieldName","status"]],null,null,null,ps,ds)),l["ɵdid"](3,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){var t=n.component;e(n,1,0,t.relatedWorkPackage);e(n,3,0,"status",t.relatedWorkPackage)},null)}function Cf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","relation-row--remove-btn"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.removeRelation(i.relation)&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove -padded wp-relations--icon"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"relation-row--remove-btn",t.text.removeButton,t.text.removeButton);e(n,3,0,"icon-remove -padded wp-relations--icon",t.text.removeButton)},null)}function kf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","wp-relation--description-read-value"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.startDescriptionEdit()&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-placeholder":0}),l["ɵdid"](4,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],function(e,n){var t=e(n,3,0,!n.component.relation.description);e(n,2,0,"wp-relation--description-read-value",t)},function(e,n){var t=n.component;e(n,0,0,t.relation.description||t.text.placeholder.description)})}function If(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","wp-relation--description-wrapper textarea-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,[[1,0],["relationDescriptionTextarea",1]],null,5,"textarea",[["autofocus",""],["class","wp-relation--description-textarea"],["name","description"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,2)._compositionEnd(t.target.value)&&i);"keyup"===n&&(i=!1!==r.handleDescriptionKey(t)&&i);"ngModelChange"===n&&(i=!1!==(r.userInputs.newRelationText=t)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](7,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.saveDescription()&&l);"onCancel"===n&&(l=!1!==i.cancelDescriptionEdit()&&l);return l},fa,pa)),l["ɵdid"](8,49152,null,0,da,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,4,0,"description",t.userInputs.newRelationText),e(n,8,0,t.text.cancel,t.text.save,t.fieldController)},function(e,n){e(n,1,0,l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending)})}function jf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","grid-block hierarchy-item description-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,kf)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,If)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.userInputs.showDescriptionEditForm),e(n,4,0,t.userInputs.showDescriptionEditForm)},null)}function Rf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,24,"div",[["focus-within","'.wp-relations-controls-section accessible-by-keyboard'"]],[[8,"className",0]],null,null,null,null)),l["ɵdid"](1,212992,null,0,ho,[l.ElementRef],null,null),(e()(),l["ɵeld"](2,0,null,null,20,"div",[["class","grid-block hierarchy-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,4,"div",[["class","grid-content medium-2 collapse"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,mf)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,bf)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,yf)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](10,0,null,null,2,"div",[["class","grid-content medium-3 collapse wp-relations-status-field"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,wf)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](13,0,null,null,9,"div",[["class","grid-content medium-2 collapse wp-relations-controls-section"],["ng-class","{'-expanded': userInputs.showRelationInfo }"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,6,"accessible-by-keyboard",[["linkClass","wp-relations--description-btn"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!=(i.userInputs.showRelationInfo=!i.userInputs.showRelationInfo)&&l);return l},jl,Il)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](16,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](17,{"-visible":0}),l["ɵdid"](18,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](19,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 -padded wp-relations--icon wp-relations--description-icon"],["icon-title","text.toggleDescription"]],null,null,null,hl,dl)),l["ɵdid"](20,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Cf)),l["ɵdid"](22,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,jf)),l["ɵdid"](24,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0),e(n,5,0,!t.userInputs.showRelationTypesForm),e(n,7,0,t.userInputs.showRelationTypesForm),e(n,9,0,t.relatedWorkPackage),e(n,12,0,t.relatedWorkPackage);var l=e(n,17,0,t.showDescriptionInfo);e(n,16,0,l);e(n,18,0,"wp-relations--description-btn",t.text.description_label,t.text.description_label);e(n,20,0,"icon-info1 -padded wp-relations--icon wp-relations--description-icon","text.toggleDescription"),e(n,22,0,t.relation.delete),e(n,24,0,t.userInputs.showRelationInfo)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"relation-row relation-row-",t.relatedWorkPackage.id,""))})}function Pf(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{relationDescriptionTextarea:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Rf)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.workPackage&&t.relatedWorkPackage)},null)}l["ɵccf"]("wp-relation-row",pf,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relation-row",[],null,null,null,Pf,hf)),l["ɵdid"](1,245760,null,0,pf,[Cn,qn,On,ct,A.a,l.ChangeDetectorRef,ge],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",relatedWorkPackage:"relatedWorkPackage",groupByWorkPackageType:"groupByWorkPackageType"},{},[]);var Sf=function(){function e(e){this.I18n=e,this.onToggleGroupBy=new l.EventEmitter,this.text={groupByType:this.I18n.t("js.relation_buttons.group_by_wp_type"),groupByRelation:this.I18n.t("js.relation_buttons.group_by_relation_type")}}return Object.defineProperty(e.prototype,"togglerText",{get:function(){return this.groupByWorkPackageType?this.text.groupByRelation:this.text.groupByType},enumerable:!0,configurable:!0}),e.prototype.toggleButton=function(){var e=this;this.onToggleGroupBy.emit(),setTimeout(function(){e.toggleElement.nativeElement.focus()},20)},e}(),_f=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function xf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","attributes-group--header-toggle"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,[[1,0],["wpRelationGroupByToggler",1]],null,5,"div",[["class","panel-toggler ng-scope ng-isolate-scope hide-when-print"],["id","wp-relation-group-by-toggle"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"accessible-by-keyboard",[["linkClass","button -transparent"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleButton()&&l);return l},jl,Il)),l["ɵdid"](3,49152,null,0,kl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["ɵeld"](4,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-small icon-group-by icon4"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](6,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"button -transparent");e(n,5,0,"icon-small icon-group-by icon4")},function(e,n){e(n,6,0,n.component.togglerText)})}function Tf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relation-row",[],null,null,null,Pf,hf)),l["ɵdid"](1,245760,null,0,pf,[Cn,qn,On,ct,A.a,l.ChangeDetectorRef,ge],{workPackage:[0,"workPackage"],relatedWorkPackage:[1,"relatedWorkPackage"],groupByWorkPackageType:[2,"groupByWorkPackageType"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,n.context.$implicit,t.groupByWorkPackageType)},null)}function Of(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Tf)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.relatedWorkPackages)},null)}function Ef(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{toggleElement:0}),(e()(),l["ɵeld"](1,0,null,null,7,"div",[["class","attributes-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"h3",[["class","attributes-group--header-text relation-group--header"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,xf)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Of)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,6,0,t.firstGroup),e(n,8,0,t.relatedWorkPackages)},function(e,n){e(n,4,0,n.component.header)})}l["ɵccf"]("wp-relations-group",Sf,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-group",[],null,null,null,Ef,_f)),l["ɵdid"](1,49152,null,0,Sf,[A.a],null,null)],null,null)},{relatedWorkPackages:"relatedWorkPackages",workPackage:"workPackage",header:"header",firstGroup:"firstGroup",groupByWorkPackageType:"groupByWorkPackageType"},{onToggleGroupBy:"onToggleGroupBy"},[]);var Df=function(){function e(e,n){this.el=e,this.focusHelper=n,this.condition=!0}return e.prototype.ngAfterContentInit=function(){var e=this;this.condition&&setTimeout(function(){e.focusHelper.focusElement(jQuery(e.el.nativeElement))},100)},e}(),Ff=function(){function e(e,n,t,l,i){this.I18n=e,this.wpRelations=n,this.notificationService=t,this.halEvents=l,this.wpCacheService=i,this.showRelationsCreateForm=!1,this.selectedRelationType=_p.DEFAULT(),this.relationTypes=_p.LOCALIZED_RELATION_TYPES(!1),this.isDisabled=!1,this.text={abort:this.I18n.t("js.relation_buttons.abort"),relationType:this.I18n.t("js.relation_buttons.relation_type"),addNewRelation:this.I18n.t("js.relation_buttons.add_new_relation")}}return e.prototype.createRelation=function(){var e=this;this.selectedRelationType&&this.selectedWpId&&(this.isDisabled=!0,this.createCommonRelation().catch(function(){return e.isDisabled=!1}).then(function(){return e.isDisabled=!1}))},e.prototype.onSelected=function(e){e&&(this.selectedWpId=e.id,this.createCommonRelation())},e.prototype.createCommonRelation=function(){var e=this;return this.wpRelations.addCommonRelation(this.workPackage.id,this.selectedRelationType,this.selectedWpId).then(function(n){e.halEvents.push(e.workPackage,{eventType:"association",relatedWorkPackage:n.id,relationType:e.selectedRelationType}),e.notificationService.showSave(e.workPackage),e.toggleRelationsCreateForm()}).catch(function(n){e.notificationService.handleRawError(n,e.workPackage),e.toggleRelationsCreateForm()})},e.prototype.toggleRelationsCreateForm=function(){this.showRelationsCreateForm=!this.showRelationsCreateForm,this.selectedWpId=""},e}(),Nf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Af(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","wp-relations-create-button hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"div",[["class","grid-block"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,6,"div",[["class","grid-content collapse wp-inline-create-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,5,"a",[["autoFocus",""],["class","wp-inline-create--add-link relation-create"],["href",""],["id","relation--add-relation"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.toggleRelationsCreateForm()&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),l["ɵdid"](5,1064960,null,0,Df,[l.ElementRef,m.a],null,null),(e()(),l["ɵeld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](7,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,7,0,"icon icon-add")},function(e,n){e(n,8,0,n.component.text.addNewRelation)})}function Vf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.name),e(n,2,0,n.context.$implicit.name)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function Mf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,19,"div",[["class","v-align wp-relations-create--form"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"div",[["class","grid-content collapse medium-3"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","relation-type--select"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,8,"select",[["class","form--select relationTypeSelect"],["focus",""],["id","relation-type--select"],["role","listbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,4).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.selectedRelationType=t)&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](6,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](8,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](9,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Vf)),l["ɵdid"](11,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](12,0,null,null,2,"div",[["class","grid-content medium-8"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,"wp-relations-autocomplete",[],null,[[null,"onSelected"],[null,"onCancel"],[null,"keydown.escape"]],function(e,n,t){var i=!0,r=e.component;"keydown.escape"===n&&(i=!1!==l["ɵnov"](e,14).reset()&&i);"onSelected"===n&&(i=!1!==r.onSelected(t)&&i);"onCancel"===n&&(i=!1!==r.toggleRelationsCreateForm()&&i);return i},zs,$s)),l["ɵdid"](14,1097728,null,0,qs,[b,ge,qn,Qn,Q,vn,l.ChangeDetectorRef,A.a],{workPackage:[0,"workPackage"],selectedRelationType:[1,"selectedRelationType"],hiddenOverflowContainer:[2,"hiddenOverflowContainer"]},{onCancel:"onCancel",onSelected:"onSelected"}),(e()(),l["ɵeld"](15,0,null,null,4,"div",[["class","grid-content medium-1 collapse wp-relations-controls-section relation-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.toggleRelationsCreateForm()&&l);return l},jl,Il)),l["ɵdid"](17,49152,null,0,kl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["ɵeld"](18,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove -padded"]],null,null,null,hl,dl)),l["ɵdid"](19,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,6,0,t.selectedRelationType);e(n,9,0,""),e(n,11,0,t.relationTypes);e(n,14,0,t.workPackage,t.selectedRelationType,".work-packages-tab-view--overflow");e(n,17,0,"wp-create-relation--cancel");e(n,19,0,"icon-remove -padded",t.text.abort)},function(e,n){e(n,2,0,n.component.text.relationType),e(n,3,0,l["ɵnov"](n,8).ngClassUntouched,l["ɵnov"](n,8).ngClassTouched,l["ɵnov"](n,8).ngClassPristine,l["ɵnov"](n,8).ngClassDirty,l["ɵnov"](n,8).ngClassValid,l["ɵnov"](n,8).ngClassInvalid,l["ɵnov"](n,8).ngClassPending)})}function qf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","wp-relations-create"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Af)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","loading-indicator--location"],["data-indicator-name","relationAddDynamic"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Mf)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.showRelationsCreateForm),e(n,5,0,t.showRelationsCreateForm)},null)}l["ɵccf"]("wp-relations-create",Ff,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-create",[],null,null,null,qf,Nf)),l["ɵdid"](1,49152,null,0,Ff,[A.a,On,qn,ct,Cn],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var Lf=function(){function e(e,n){var t=this;void 0===n&&(n=250),this.emitter=new l.EventEmitter,this.debouncer=new c.a,this.debouncer.pipe(Object(at.a)(n),Object(Ye.a)(e)).subscribe(function(e){return t.emitter.emit(e)})}return e.prototype.emit=function(e){this.debouncer.next(e)},e.prototype.subscribe=function(e,n,t){return this.emitter.subscribe(e,n,t)},e}(),$f=function(){function e(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new Lf(Object(Gn.a)(this))}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return parseInt(this.filter.values[0])},set:function(e){this.filter.values="number"==typeof e?[e.toString()]:[],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unit",{get:function(){switch(this.filter.schema.filter.allowedValues[0].id){case"startDate":case"dueDate":case"updatedAt":case"createdAt":return this.I18n.t("js.work_packages.time_relative.days");default:return""}},enumerable:!0,configurable:!0}),e}(),Hf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Bf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"input",[["class","advanced-filters--number-field"],["min","0"],["required",""],["type","number"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,2)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,3).onChange(t.target.value)&&i);"input"===n&&(i=!1!==l["ɵnov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.value=t)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](3,16384,null,0,Ht.n,[l.Renderer2,l.ElementRef],null,null),l["ɵdid"](4,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.n]),l["ɵdid"](7,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](9,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](10,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](11,0,null,null,0,"label",[["class","advanced-filters--affix"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,""),e(n,7,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]"),t.value),e(n,10,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,1,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,""),l["ɵnov"](n,4).required?"":null,l["ɵnov"](n,9).ngClassUntouched,l["ɵnov"](n,9).ngClassTouched,l["ɵnov"](n,9).ngClassPristine,l["ɵnov"](n,9).ngClassDirty,l["ɵnov"](n,9).ngClassValid,l["ɵnov"](n,9).ngClassInvalid,l["ɵnov"](n,9).ngClassPending),e(n,11,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,""),t.unit)})}l["ɵccf"]("filter-integer-value",$f,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-integer-value",[],null,null,null,Bf,Hf)),l["ɵdid"](1,180224,null,0,$f,[A.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var zf=function(){function e(e,n){this.timezoneService=e,this.I18n=n,this.shouldFocus=!1,this.filterChanged=new Lf(Object(Gn.a)(this))}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values=[e],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){return moment(e,"YYYY-MM-DD",!0).isValid()?e:null},e.prototype.formatter=function(e){if(moment(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},e}(),Wf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Qf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.value=i.parser(t))&&l);return l},Gu,Uu)),l["ɵdid"](2,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange"}),(e()(),l["ɵeld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.value=r.parser(t))&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](5,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](8,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](10,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](11,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]"),t.formatter(t.value)),e(n,11,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,""),l["ɵnov"](n,5).required?"":null,l["ɵnov"](n,10).ngClassUntouched,l["ɵnov"](n,10).ngClassTouched,l["ɵnov"](n,10).ngClassPristine,l["ɵnov"](n,10).ngClassDirty,l["ɵnov"](n,10).ngClassValid,l["ɵnov"](n,10).ngClassInvalid,l["ɵnov"](n,10).ngClassPending)})}l["ɵccf"]("filter-date-value",zf,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-date-value",[],null,null,null,Qf,Wf)),l["ɵdid"](1,180224,null,0,zf,[nl,A.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Uf=function(){function e(e,n){this.timezoneService=e,this.I18n=n,this.shouldFocus=!1,this.filterChanged=new Lf(Object(Gn.a)(this)),this.text={spacer:this.I18n.t("js.filter.value_spacer")}}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"begin",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.filter.values[1]},set:function(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){return j(e,"YYYY-MM-DD",!0).isValid()?e:null},e.prototype.formatter=function(e){if(j(e,"YYYY-MM-DD",!0).isValid()){var n=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(n)}return null},e}(),Gf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Kf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,22,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.begin=i.parser(t))&&l);return l},Gu,Uu)),l["ɵdid"](2,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange"}),(e()(),l["ɵeld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.begin=r.parser(t))&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](5,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](8,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](10,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](11,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](12,0,null,null,0,"span",[["class","advanced-filters--affix"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,9,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.end=i.parser(t))&&l);return l},Gu,Uu)),l["ɵdid"](14,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange"}),(e()(),l["ɵeld"](15,0,null,0,7,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.end=r.parser(t))&&i);return i},null,null)),l["ɵdid"](16,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](17,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](20,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](22,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]-begin"),t.formatter(t.begin)),e(n,11,0,t.shouldFocus),e(n,14,0);e(n,17,0,""),e(n,20,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]-end"),t.formatter(t.end))},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,"-begin"),l["ɵnov"](n,5).required?"":null,l["ɵnov"](n,10).ngClassUntouched,l["ɵnov"](n,10).ngClassTouched,l["ɵnov"](n,10).ngClassPristine,l["ɵnov"](n,10).ngClassDirty,l["ɵnov"](n,10).ngClassValid,l["ɵnov"](n,10).ngClassInvalid,l["ɵnov"](n,10).ngClassPending),e(n,12,0,t.text.spacer),e(n,15,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,"-end"),l["ɵnov"](n,17).required?"":null,l["ɵnov"](n,22).ngClassUntouched,l["ɵnov"](n,22).ngClassTouched,l["ɵnov"](n,22).ngClassPristine,l["ɵnov"](n,22).ngClassDirty,l["ɵnov"](n,22).ngClassValid,l["ɵnov"](n,22).ngClassInvalid,l["ɵnov"](n,22).ngClassPending)})}l["ɵccf"]("filter-dates-value",Uf,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-dates-value",[],null,null,null,Kf,Gf)),l["ɵdid"](1,180224,null,0,Uf,[nl,A.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var Yf=function(){function e(e,n){this.I18n=e,this.timezoneService=n}return e.prototype.ngOnInit=function(){var e=this;_.remove(this.filter.values,function(n){return!e.timezoneService.isValidISODateTime(n)})},e.prototype.isoDateParser=function(e){if(!this.timezoneService.isValidISODate(e))return"";var n=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODateTime(n)},e.prototype.isoDateFormatter=function(e){if(!this.timezoneService.isValidISODateTime(e))return"";var n=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODate(n)},Object.defineProperty(e.prototype,"isTimeZoneDifferent",{get:function(){var e=this.lowerBoundary||this.upperBoundary;return!!e&&(0!==e.hours()||0!==e.minutes())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeZoneText",{get:function(){return this.lowerBoundary&&this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.two_values",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm"),to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.only_end",{to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.lowerBoundary?this.I18n.t("js.filter.time_zone_converted.only_start",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm")}):""},enumerable:!0,configurable:!0}),e}(),Zf=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.I18n=n,l.timezoneService=t,l.shouldFocus=!1,l.filterChanged=new Lf(Object(Gn.a)(l)),l}return a.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values=[e],this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.filter.values[0].toString()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lowerBoundary",{get:function(){return this.value&&this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upperBoundary",{get:function(){return this.value&&this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString).add(24,"hours"):null},enumerable:!0,configurable:!0}),n}(Yf),Jf=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Xf(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["class","advanced-filters--tooltip-trigger -multiline"]],[[1,"data-tooltip",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-warning"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon icon-warning")},function(e,n){e(n,0,0,n.component.timeZoneText)})}function eg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.value=i.isoDateParser(t))&&l);return l},Gu,Uu)),l["ɵdid"](2,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange"}),(e()(),l["ɵeld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.value=r.isoDateParser(t))&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](5,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](8,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](10,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](11,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Xf)),l["ɵdid"](13,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]"),t.isoDateFormatter(t.value)),e(n,11,0,t.shouldFocus),e(n,13,0,t.isTimeZoneDifferent)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,""),l["ɵnov"](n,5).required?"":null,l["ɵnov"](n,10).ngClassUntouched,l["ɵnov"](n,10).ngClassTouched,l["ɵnov"](n,10).ngClassPristine,l["ɵnov"](n,10).ngClassDirty,l["ɵnov"](n,10).ngClassValid,l["ɵnov"](n,10).ngClassInvalid,l["ɵnov"](n,10).ngClassPending)})}l["ɵccf"]("filter-date-time-value",Zf,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-date-time-value",[],null,null,null,eg,Jf)),l["ɵdid"](1,245760,null,0,Zf,[A.a,nl],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var ng=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.I18n=n,l.timezoneService=t,l.shouldFocus=!1,l.filterChanged=new Lf(Object(Gn.a)(l)),l.text={spacer:l.I18n.t("js.filter.value_spacer")},l}return a.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"begin",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.filter.values[1]},set:function(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lowerBoundary",{get:function(){return this.begin&&this.timezoneService.isValidISODateTime(this.begin.toString())?this.timezoneService.parseDatetime(this.begin.toString()):null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upperBoundary",{get:function(){return this.end&&this.timezoneService.isValidISODateTime(this.end.toString())?this.timezoneService.parseDatetime(this.end.toString()):null},enumerable:!0,configurable:!0}),n}(Yf),tg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function lg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["class","advanced-filters--tooltip-trigger -multiline"]],[[1,"data-tooltip",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-warning"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon icon-warning")},function(e,n){e(n,0,0,n.component.timeZoneText)})}function ig(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,22,"div",[["class","inline-label"]],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.begin=i.isoDateParser(t))&&l);return l},Gu,Uu)),l["ɵdid"](2,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange"}),(e()(),l["ɵeld"](3,0,null,0,8,"input",[["class","advanced-filters--date-field"],["required",""],["size","10"],["type","text"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,4)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.begin=r.isoDateParser(t))&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](5,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](8,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](10,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](11,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](12,0,null,null,0,"span",[["class","advanced-filters--affix"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,7,"op-date-picker",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==(i.end=i.isoDateParser(t))&&l);return l},Gu,Uu)),l["ɵdid"](14,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange"}),(e()(),l["ɵeld"](15,0,null,0,5,"input",[["class","advanced-filters--date-field"],["size","10"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.end=r.isoDateParser(t))&&i);return i},null,null)),l["ɵdid"](16,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](18,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](20,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,lg)),l["ɵdid"](22,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0);e(n,5,0,""),e(n,8,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]-begin"),t.isoDateFormatter(t.begin)),e(n,11,0,t.shouldFocus),e(n,14,0),e(n,18,0,l["ɵinlineInterpolate"](1,"v[",t.filter.id,"]-end"),t.isoDateFormatter(t.end)),e(n,22,0,t.isTimeZoneDifferent)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,3,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,"-begin"),l["ɵnov"](n,5).required?"":null,l["ɵnov"](n,10).ngClassUntouched,l["ɵnov"](n,10).ngClassTouched,l["ɵnov"](n,10).ngClassPristine,l["ɵnov"](n,10).ngClassDirty,l["ɵnov"](n,10).ngClassValid,l["ɵnov"](n,10).ngClassInvalid,l["ɵnov"](n,10).ngClassPending),e(n,12,0,t.text.spacer),e(n,15,0,l["ɵinlineInterpolate"](1,"values-",t.filter.id,"-end"),l["ɵnov"](n,20).ngClassUntouched,l["ɵnov"](n,20).ngClassTouched,l["ɵnov"](n,20).ngClassPristine,l["ɵnov"](n,20).ngClassDirty,l["ɵnov"](n,20).ngClassValid,l["ɵnov"](n,20).ngClassInvalid,l["ɵnov"](n,20).ngClassPending)})}l["ɵccf"]("filter-date-times-value",ng,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-date-times-value",[],null,null,null,ig,tg)),l["ɵdid"](1,245760,null,0,ng,[A.a,nl],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var rg=function(){function e(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new Lf(Object(Gn.a)(this)),this.text={enter_text:this.I18n.t("js.work_packages.description_enter_text")}}return e.prototype.ngOnDestroy=function(){},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),e}(),og=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ug(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"input",[["class","advanced-filters--text-field"],["requried","true"],["type","text"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,2)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.value=t)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](7,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,l["ɵinlineInterpolate"](1,"v[",t.filter.name,"]"),t.value),e(n,7,0,t.shouldFocus)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.name,"")),e(n,1,0,l["ɵinlineInterpolate"](1,"values-",t.filter.name,""),l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending),e(n,8,0,l["ɵinlineInterpolate"](1,"values-",t.filter.name,""),t.text.enter_text)})}l["ɵccf"]("filter-string-value",rg,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-string-value",[],null,null,null,ug,og)),l["ɵdid"](1,180224,null,0,rg,[A.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var ag=function(){function e(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new l.EventEmitter,this.text={placeholder:this.I18n.t("js.placeholders.selection"),true:this.I18n.t("js.general_text_Yes"),false:this.I18n.t("js.general_text_No")}}return Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values[0]},set:function(e){this.filter.values[0]=e,this.filterChanged.emit(this.filter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNoValue",{get:function(){return _.isEmpty(this.filter.values)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableOptions",{get:function(){return[!0,!1]},enumerable:!0,configurable:!0}),e}(),sg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function cg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[["disabled",""],["value",""]],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,"");e(n,2,0,"")},function(e,n){e(n,0,0,n.component.text.placeholder)})}function dg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.component.text[n.context.$implicit])})}function pg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,"div",[],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"select",[["class","advanced-filters--select-field"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,2).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.value=t)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](4,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](7,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,cg)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,dg)),l["ɵdid"](11,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,l["ɵinlineInterpolate"](1,"v[",t.filter.name,"]"),t.value),e(n,7,0,t.shouldFocus),e(n,9,0,t.hasNoValue),e(n,11,0,t.availableOptions)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.name,"")),e(n,1,0,l["ɵinlineInterpolate"](1,"values-",t.filter.name,""),l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending)})}l["ɵccf"]("filter-boolean-value",ag,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-boolean-value",[],null,null,null,pg,sg)),l["ɵdid"](1,49152,null,0,ag,[A.a],null,null)],null,null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var hg=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()},e}(),fg=function(){function e(e,n,t,i,r,o){this.RootDm=e,this.halResourceService=n,this.halSorting=t,this.PathHelper=i,this.cdRef=r,this.I18n=o,this.shouldFocus=!1,this.filterChanged=new l.EventEmitter,this._availableOptions=[],this.compareByHrefOrString=_r.compareByHrefOrString,this.text={placeholder:this.I18n.t("js.placeholders.selection")}}return e.prototype.ngOnInit=function(){this.fetchAllowedValues()},e.prototype.ngAfterViewInit=function(){this.ngSelectInstance&&this.shouldFocus&&this.ngSelectInstance.focus()},Object.defineProperty(e.prototype,"value",{get:function(){return this.filter.values},enumerable:!0,configurable:!0}),e.prototype.setValues=function(e){this.filter.values=_.castArray(e),this.filterChanged.emit(this.filter),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"availableOptions",{get:function(){return this._availableOptions},set:function(e){this._availableOptions=this.halSorting.sort(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._isEmpty=0===this.value.length},enumerable:!0,configurable:!0}),e.prototype.repositionDropdown=function(){var e=this;this.ngSelectInstance&&setTimeout(function(){e.ngSelectInstance.dropdownPanel._updatePosition()},25)},Object.defineProperty(e.prototype,"isUserResource",{get:function(){var e=_.get(this.filter.currentSchema,"values.type",null);return e&&e.indexOf("User")>0},enumerable:!0,configurable:!0}),e.prototype.fetchAllowedValues=function(){this.filter.currentSchema.values.allowedValues.$load?this.loadAllowedValues():this.availableOptions=this.filter.currentSchema.values.allowedValues},e.prototype.loadAllowedValues=function(){var e=this,n=[this.filter.currentSchema.values.allowedValues.$load()];this.isUserResource&&n.push(this.RootDm.load()),Promise.all(n).then(function(n){var t=n[0].elements;e.availableOptions=t,e.isUserResource&&"memberOfGroup"!==e.filter.filter.id&&e.addMeValue(n[1].user)})},e.prototype.addMeValue=function(e){if(e&&e.$href){var n=this.halResourceService.createHalResource({_links:{self:{href:this.PathHelper.api.v3.users.me,title:this.I18n.t("js.label_me")}}},!0);this._availableOptions.unshift(n)}},e}(),gg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mg(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{ngSelectInstance:0}),(e()(),l["ɵeld"](1,0,null,null,22,"div",[["class","inline-label ng-select-container"]],[[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,21,"ng-select",[["appendTo","body"],["bindLabel","name"],["class","advanced-filters--ng-select -multi-select ng-select"],["role","listbox"]],[[8,"id",0],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"add"],[null,"remove"],[null,"open"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,7).handleKeyDown(t)&&i);"change"===n&&(i=!1!==r.setValues(t)&&i);"add"===n&&(i=!1!==r.repositionDropdown()&&i);"remove"===n&&(i=!1!==r.repositionDropdown()&&i);"open"===n&&(i=!1!==r.repositionDropdown()&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](6,{"-required-highlighting":0}),l["ɵdid"](7,4964352,[[1,4],["ngSelectInstance",4]],12,Lt.a,[[8,"advanced-filters--ng-select -multi-select"],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],appendTo:[2,"appendTo"],closeOnSelect:[3,"closeOnSelect"],hideSelected:[4,"hideSelected"],virtualScroll:[5,"virtualScroll"],multiple:[6,"multiple"],items:[7,"items"],compareWith:[8,"compareWith"],clearSearchOnAdd:[9,"clearSearchOnAdd"]},{changeEvent:"change",openEvent:"open",addEvent:"add",removeEvent:"remove"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](21,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},null),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](23,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component,l=e(n,6,0,t.isEmpty);e(n,5,0,"advanced-filters--ng-select -multi-select",l);e(n,7,0,"name",t.text.placeholder,"body",!1,!0,!0,!0,t.availableOptions,t.compareByHrefOrString,!0),e(n,21,0,t.filter.values)},function(e,n){var t=n.component;e(n,1,0,l["ɵinlineInterpolate"](1,"div-values-",t.filter.id,"")),e(n,2,1,["values-"+t.filter.id,!l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).typeahead,l["ɵnov"](n,7).multiple,l["ɵnov"](n,7).addTag,l["ɵnov"](n,7).searchable,l["ɵnov"](n,7).clearable,l["ɵnov"](n,7).isOpen,l["ɵnov"](n,7).disabled,l["ɵnov"](n,7).filtered,l["ɵnov"](n,23).ngClassUntouched,l["ɵnov"](n,23).ngClassTouched,l["ɵnov"](n,23).ngClassPristine,l["ɵnov"](n,23).ngClassDirty,l["ɵnov"](n,23).ngClassValid,l["ɵnov"](n,23).ngClassInvalid,l["ɵnov"](n,23).ngClassPending])})}l["ɵccf"]("filter-toggled-multiselect-value",fg,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-toggled-multiselect-value",[],null,null,null,mg,gg)),l["ɵdid"](1,4308992,null,0,fg,[hg,Q,Pa,ge,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged"},[]);var vg=function(){function e(e,n,t,i){this.wpTableFilters=e,this.wpFiltersService=n,this.I18n=t,this.bannerService=i,this.shouldFocus=!1,this.filterChanged=new l.EventEmitter,this.deactivateFilter=new l.EventEmitter,this.showValuesInput=!1,this.eeShowBanners=!1,this.trackByHref=_r.halHref,this.compareByHref=_r.compareByHref,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),button_delete:this.I18n.t("js.button_delete")}}return e.prototype.onFilterUpdated=function(e){this.filter=e,this.showValuesInput=this.filter.currentSchema.isValueRequired(),this.filterChanged.emit(this.filter)},e.prototype.removeThisFilter=function(){this.deactivateFilter.emit(this.filter)},Object.defineProperty(e.prototype,"valueType",{get:function(){if(this.filter.currentSchema&&this.filter.currentSchema.values)return this.filter.currentSchema.values.type},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.eeShowBanners=this.bannerService.eeShowBanners,this.availableOperators=this.filter.schema.availableOperators,this.showValuesInput=this.filter.currentSchema.isValueRequired()},e.prototype.ngOnDestroy=function(){},e}(),bg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function yg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function wg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-integer-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Bf,Hf)),l["ɵdid"](1,180224,null,0,$f,[A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function Cg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-date-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Qf,Wf)),l["ɵdid"](1,180224,null,0,zf,[nl,A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function kg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-dates-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},Kf,Gf)),l["ɵdid"](1,180224,null,0,Uf,[nl,A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function Ig(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-date-time-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},eg,Jf)),l["ɵdid"](1,245760,null,0,Zf,[A.a,nl],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function jg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-date-times-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},ig,tg)),l["ɵdid"](1,245760,null,0,ng,[A.a,nl],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function Rg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-string-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},ug,og)),l["ɵdid"](1,180224,null,0,rg,[A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function Pg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-string-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},ug,og)),l["ɵdid"](1,180224,null,0,rg,[A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function Sg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-boolean-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},pg,sg)),l["ɵdid"](1,49152,null,0,ag,[A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function _g(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-toggled-multiselect-value",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.onFilterUpdated(t)&&l);return l},mg,gg)),l["ɵdid"](1,4308992,null,0,fg,[hg,Q,Pa,ge,l.ChangeDetectorRef,A.a],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged"})],function(e,n){var t=n.component;e(n,1,0,t.shouldFocus,t.filter)},null)}function xg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,20,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,19,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null)),l["ɵdid"](2,16384,null,0,$t.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,wg)),l["ɵdid"](4,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Cg)),l["ɵdid"](6,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,kg)),l["ɵdid"](8,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ig)),l["ɵdid"](10,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,jg)),l["ɵdid"](12,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Rg)),l["ɵdid"](14,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Pg)),l["ɵdid"](16,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Sg)),l["ɵdid"](18,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,_g)),l["ɵdid"](20,16384,null,0,$t.NgSwitchDefault,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],null,null)],function(e,n){e(n,2,0,n.component.valueType);e(n,4,0,"[1]Integer");e(n,6,0,"[1]Date");e(n,8,0,"[2]Date");e(n,10,0,"[1]DateTime");e(n,12,0,"[2]DateTime");e(n,14,0,"[1]String");e(n,16,0,"[1]Float");e(n,18,0,"[1]Boolean")},null)}function Tg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null))],null,null)}function Og(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,23,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"label",[["class","advanced-filters--filter-name"]],[[8,"htmlFor",0],[8,"textContent",0],[1,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,12,"div",[["class","advanced-filters--filter-operator"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"label",[["class","hidden-for-sighted"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["ɵted"](4,null,[" "," "," "])),(e()(),l["ɵeld"](5,0,null,null,9,"select",[["class","advanced-filters--select"],["required",""],["style","vertical-align: top;"]],[[8,"id",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,6).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,6).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.filter.operator=t)&&i);"ngModelChange"===n&&(i=!1!==r.onFilterUpdated(r.filter)&&i);return i},null,null)),l["ɵdid"](6,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["ɵdid"](7,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](10,671744,null,0,Ht.l,[[8,null],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](12,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,yg)),l["ɵdid"](14,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,xg)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Tg)),l["ɵdid"](18,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](19,0,null,null,4,"div",[["class","advanced-filters--remove-filter"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,3,"accessible-by-keyboard",[],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.removeThisFilter()&&l);return l},jl,Il)),l["ɵdid"](21,49152,null,0,kl,[],null,{execute:"execute"}),(e()(),l["ɵeld"](22,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-close advanced-filters--remove-filter-icon"]],null,null,null,hl,dl)),l["ɵdid"](23,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,6,0,t.compareByHref);e(n,7,0,""),e(n,10,0,l["ɵinlineInterpolate"](1,"op[",t.filter.id,"]"),t.filter.operator),e(n,14,0,t.availableOperators),e(n,16,0,t.showValuesInput&&t.valueType),e(n,18,0,!t.showValuesInput);e(n,23,0,"icon-close advanced-filters--remove-filter-icon",t.text.button_delete)},function(e,n){var t=n.component;e(n,1,0,l["ɵinlineInterpolate"](1,"operators-",t.filter.id,""),t.filter.name,t.filter.name),e(n,3,0,l["ɵinlineInterpolate"](1,"operators-",t.filter.id,"")),e(n,4,0,t.filter.name,t.text.open_filter),e(n,5,0,l["ɵinlineInterpolate"](1,"operators-",t.filter.id,""),l["ɵnov"](n,7).required?"":null,l["ɵnov"](n,12).ngClassUntouched,l["ɵnov"](n,12).ngClassTouched,l["ɵnov"](n,12).ngClassPristine,l["ɵnov"](n,12).ngClassDirty,l["ɵnov"](n,12).ngClassValid,l["ɵnov"](n,12).ngClassInvalid,l["ɵnov"](n,12).ngClassPending)})}l["ɵccf"]("[query-filter]",vg,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["query-filter",""]],null,null,null,Og,bg)),l["ɵdid"](1,245760,null,0,vg,[en,Ze,A.a,Ge],null,null)],function(e,n){e(n,1,0)},null)},{shouldFocus:"shouldFocus",filter:"filter"},{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"},[]);var Eg=function(){function e(e,n,t,l){var i=this;this.I18n=e,this.querySpace=n,this.wpTableFilters=t,this.wpCacheService=l,this.filterChanged=new Lf(Object(Gn.a)(this)),this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package"),placeholder:this.I18n.t("js.work_packages.placeholder_filter_by_text")},this.searchTerm=Object(s.f)(""),this.searchTermChanged=new c.a,this.wpTableFilters.pristine$().pipe(Object(Gn.b)(this),Object(v.a)(function(){var e=i.wpTableFilters.find("search");return e?e.values[0]:""})).subscribe(function(e){console.log("upstream "+e+" "+i.searchTerm.timestampOfLastValue),i.searchTerm.value&&!i.searchTerm.isValueOlderThan(500)||(console.log("Upstream value setting to "+e),i.searchTerm.putValue(e))}),this.searchTermChanged.pipe(Object(Gn.b)(this),Object(ft.a)(),Object(Dn.a)(function(e){return i.searchTerm.putValue(e)}),Object(at.a)(500)).subscribe(function(e){var n=i.wpTableFilters.current;if(_.remove(n,function(e){return"search"===e.id}),e.length>0){var t=i.wpTableFilters.instantiate("search");t.operator=t.findOperator("**"),t.values=[e],n.push(t)}i.filterChanged.emit(n)})}return e.prototype.ngOnDestroy=function(){},e}(),Dg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Fg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"input",[["id","filter-by-text-input"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==r.searchTermChanged.next(t)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](3,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](6,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,3,0,l["ɵunv"](n,3,0,l["ɵnov"](n,4).transform(t.searchTerm.values$())))},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"",t.text.placeholder,""),l["ɵnov"](n,6).ngClassUntouched,l["ɵnov"](n,6).ngClassTouched,l["ɵnov"](n,6).ngClassPristine,l["ɵnov"](n,6).ngClassDirty,l["ɵnov"](n,6).ngClassValid,l["ɵnov"](n,6).ngClassInvalid,l["ɵnov"](n,6).ngClassPending)})}l["ɵccf"]("wp-filter-by-text-input",Eg,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-filter-by-text-input",[],null,null,null,Fg,Dg)),l["ɵdid"](1,180224,null,0,Eg,[A.a,b,en,Cn],null,null)],null,null)},{},{filterChanged:"filterChanged"},[]);var Ng=function(){function e(e,n,t,l){this.wpTableFilters=e,this.wpFiltersService=n,this.I18n=t,this.bannerService=l,this.showCloseFilter=!1,this.filtersChanged=new Lf(Object(Gn.a)(this)),this.remainingFilters=[],this.eeShowBanners=!1,this.focusElementIndex=0,this.trackByName=_r.trackByName,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),close_form:this.I18n.t("js.close_form_title"),selected_filter_list:this.I18n.t("js.label_selected_filter_list"),button_delete:this.I18n.t("js.button_delete"),please_select:this.I18n.t("js.placeholders.selection"),filter_by_text:this.I18n.t("js.work_packages.label_filter_by_text")}}return e.prototype.ngOnInit=function(){this.eeShowBanners=this.bannerService.eeShowBanners},e.prototype.ngOnDestroy=function(){},e.prototype.ngOnChanges=function(){this.updateRemainingFilters()},e.prototype.onFilterAdded=function(e){if(e){var n=this.wpTableFilters.instantiate(e);this.filters.push(n);var t=this.currentFilterLength();this.updateFilterFocus(t),this.updateRemainingFilters(),this.filtersChanged.emit(this.filters),this.ngSelectComponent.clearItem(e)}},e.prototype.closeFilter=function(){this.wpFiltersService.toggleVisibility()},e.prototype.isHiddenFilter=function(e){return _.includes(this.wpTableFilters.hidden,e.id)},e.prototype.deactivateFilter=function(e){var n=this.filters.indexOf(e);_.remove(this.filters,function(n){return n.id===e.id}),this.filtersChanged.emit(this.filters),this.updateFilterFocus(n),this.updateRemainingFilters()},Object.defineProperty(e.prototype,"isSecondSpacerVisible",{get:function(){var e=this,n=!!_.find(this.filters,function(e){return"search"===e.id}),t=!!_.find(this.filters,function(n){return"search"!==n.id&&e.isFilterAvailable(n.id)});return n&&t},enumerable:!0,configurable:!0}),e.prototype.updateRemainingFilters=function(){this.remainingFilters=_.sortBy(this.wpTableFilters.remainingVisibleFilters(this.filters),"name")},e.prototype.updateFilterFocus=function(e){var n=this.currentFilterLength();if(0===n)this.focusElementIndex=-1;else{var t=e<n?e:n-1,l=this.currentFilterAt(t);this.focusElementIndex=this.filters.indexOf(l)}},e.prototype.currentFilterLength=function(){return this.filters.length},e.prototype.currentFilterAt=function(e){return this.filters[e]},e.prototype.isFilterAvailable=function(e){return this.wpTableFilters.availableFilters.some(function(n){return n.id===e})},e.prototype.onOpen=function(){var e=this;setTimeout(function(){e.ngSelectComponent.dropdownPanel._updatePosition()},25)},e}(),Ag=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Vg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"a",[["class","advanced-filters--close icon-context icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeFilter()&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.text.close_form)})}function Mg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[["class","advanced-filters--filter"],["query-filter",""]],[[8,"id",0],[8,"hidden",0]],[[null,"deactivateFilter"],[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"deactivateFilter"===n&&(l=!1!==i.deactivateFilter(t)&&l);"filterChanged"===n&&(l=!1!==i.filtersChanged.emit(i.filters)&&l);return l},Og,bg)),l["ɵdid"](1,245760,null,0,vg,[en,Ze,A.a,Ge],{shouldFocus:[0,"shouldFocus"],filter:[1,"filter"]},{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"})],function(e,n){var t=n.component;e(n,1,0,n.parent.context.index==t.focusElementIndex,n.parent.context.$implicit)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"filter_",n.parent.context.$implicit.id,""),t.isHiddenFilter(n.parent.context.$implicit))})}function qg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Mg)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,n.component.isFilterAvailable(n.context.$implicit.id))},null)}function Lg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"li",[["class","advanced-filters--spacer"]],null,null,null,null,null))],null,null)}function $g(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[["class","advanced-filters--add-filter-info"],["opReferrer","wp-filter#filters"]],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsale_for_more,t.text.upsale_link,"wp-filter#filters")},null)}function Hg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,40,"fieldset",[["class","advanced-filters--container"],["id","filters"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vg)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](4,0,null,null,34,"ul",[["class","advanced-filters--filters"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,4,"li",[["class","advanced-filters--filter --without-operator"],["id","filter_search"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"label",[["class","advanced-filters--filter-name"],["for","filter-by-text-input"]],[[8,"textContent",0],[1,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,2,"div",[["class","advanced-filters--filter-value"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,1,"wp-filter-by-text-input",[],null,[[null,"filterChanged"]],function(e,n,t){var l=!0,i=e.component;"filterChanged"===n&&(l=!1!==i.filtersChanged.emit(t)&&l);return l},Fg,Dg)),l["ɵdid"](9,180224,null,0,Eg,[A.a,b,en,Cn],null,{filterChanged:"filterChanged"}),(e()(),l["ɵeld"](10,0,null,null,0,"li",[["class","advanced-filters--spacer"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,qg)),l["ɵdid"](12,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Lg)),l["ɵdid"](14,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](15,0,null,null,23,"li",[["class","advanced-filters--add-filter"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,3,"label",[["aria-hidden","true"],["class","advanced-filters--add-filter-label"],["for","add_filter_select"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,hl,dl)),l["ɵdid"](18,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](19,null,[" ",": "])),(e()(),l["ɵeld"](20,0,null,null,1,"label",[["class","hidden-for-sighted"],["for","add_filter_select"]],null,null,null,null,null)),(e()(),l["ɵted"](21,null,[" "," "," "," "])),(e()(),l["ɵeld"](22,0,null,null,16,"div",[["class","advanced-filters--add-filter-value"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,15,"ng-select",[["appendTo","body"],["bindLabel","name"],["class","ng-select"],["id","add_filter_select"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"open"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,26).handleKeyDown(t)&&i);"open"===n&&(i=!1!==r.onOpen()&&i);"change"===n&&(i=!1!==r.onFilterAdded(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](5120,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](26,4964352,[[1,4],["ngSelectComponent",4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],appendTo:[2,"appendTo"],closeOnSelect:[3,"closeOnSelect"],virtualScroll:[4,"virtualScroll"],clearOnBackspace:[5,"clearOnBackspace"],multiple:[6,"multiple"],clearable:[7,"clearable"],items:[8,"items"],clearSearchOnAdd:[9,"clearSearchOnAdd"]},{changeEvent:"change",openEvent:"open"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),(e()(),l["ɵand"](16777216,null,null,1,null,$g)),l["ɵdid"](40,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,t.showCloseFilter),e(n,12,0,t.filters,t.trackByName),e(n,14,0,t.isSecondSpacerVisible);e(n,18,0,"icon-add icon4");e(n,26,0,"name",t.text.please_select,"body",!0,!0,!0,!1,!0,t.remainingFilters,!0),e(n,40,0,t.eeShowBanners)},function(e,n){var t=n.component;e(n,1,0,t.text.selected_filter_list),e(n,6,0,t.text.filter_by_text,t.text.filter_by_text),e(n,19,0,t.text.label_filter_add),e(n,21,0,t.text.label_filter_add,t.text.open_filter,t.text.close_filter),e(n,23,0,!l["ɵnov"](n,26).multiple,l["ɵnov"](n,26).typeahead,l["ɵnov"](n,26).multiple,l["ɵnov"](n,26).addTag,l["ɵnov"](n,26).searchable,l["ɵnov"](n,26).clearable,l["ɵnov"](n,26).isOpen,l["ɵnov"](n,26).disabled,l["ɵnov"](n,26).filtered)})}function Bg(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{ngSelectComponent:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Hg)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.filters)},null)}l["ɵccf"]("query-filters",Ng,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"query-filters",[],null,null,null,Bg,Ag)),l["ɵdid"](1,770048,null,0,Ng,[en,Ze,A.a,Ge],null,null)],function(e,n){e(n,1,0)},null)},{filters:"filters",showCloseFilter:"showCloseFilter"},{filtersChanged:"filtersChanged"},[]);var zg=function(){function e(e,n,t){this.wpTableFilters=e,this.cdRef=n,this.wpFiltersService=t,this.showFilterButton=!1,this.filterButtonText=I18n.t("js.button_filter"),this.filtersChanged=new Lf(Object(Gn.a)(this)),this.filtersCompleted=new Lf(Object(Gn.a)(this)),this.filters=this.wpTableFilters.current,this.loaded=!1,this.visible$=this.wpFiltersService.observeUntil(Object(Gn.a)(this))}return e.prototype.ngOnInit=function(){var e=this;this.wpTableFilters.pristine$().pipe(Object(Gn.b)(this)).subscribe(function(){e.filters=e.wpTableFilters.current,e.loaded=!0,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e.prototype.replaceIfComplete=function(e){var n=this.wpTableFilters.replaceIfComplete(e);this.filtersCompleted.emit(n),this.filtersChanged.emit(this.filters)},e}(),Wg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Qg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"button",[["class","button -small advanced-filters--toggle"]],[[2,"-active",null]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.wpFiltersService.toggleVisibility()&&l);return l},null,null)),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵeld"](2,0,null,null,0,"i",[["class","button--icon icon-filter"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["ɵunv"](n,0,0,l["ɵnov"](n,1).transform(t.visible$))),e(n,3,0,t.filterButtonText)})}function Ug(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"query-filters",[],null,[[null,"filtersChanged"]],function(e,n,t){var l=!0,i=e.component;"filtersChanged"===n&&(l=!1!==i.replaceIfComplete(t)&&l);return l},Bg,Ag)),l["ɵdid"](1,770048,null,0,Ng,[en,Ze,A.a,Ge],{filters:[0,"filters"],showCloseFilter:[1,"showCloseFilter"]},{filtersChanged:"filtersChanged"})],function(e,n){e(n,1,0,n.component.filters,!0)},null)}function Gg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","hide-when-print"],["id","query_form_content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ug)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,!!n.component.filters)},null)}function Kg(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,Qg)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](2,0,null,null,6,"div",[["class","work-packages--filters-optional-container"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](5,{"-loaded":0}),(e()(),l["ɵand"](16777216,null,null,2,null,Gg)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef])],function(e,n){var t=n.component;e(n,1,0,t.showFilterButton);var i=e(n,5,0,t.loaded);e(n,4,0,"work-packages--filters-optional-container",i),e(n,7,0,l["ɵunv"](n,7,0,l["ɵnov"](n,8).transform(t.visible$)))},null)}l["ɵccf"]("filter-container",zg,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-container",[],null,null,null,Kg,Wg)),l["ɵdid"](1,245760,null,0,zg,[en,l.ChangeDetectorRef,Ze],null,null)],function(e,n){e(n,1,0)},null)},{showFilterButton:"showFilterButton",filterButtonText:"filterButtonText"},{filtersChanged:"filtersChanged",filtersCompleted:"filtersCompleted"},[]);var Yg=function(){function e(e,n,t,l,i,r,o){this.wpTableHierarchies=e,this.wpTableSortBy=n,this.wpTableGroupBy=t,this.wpTableRelationColumns=l,this.elementRef=i,this.cdRef=r,this.I18n=o,this.text={toggleHierarchy:this.I18n.t("js.work_packages.hierarchy.show"),openMenu:this.I18n.t("js.label_open_menu"),sortColumn:"Sorting column"}}return e.prototype.ngOnDestroy=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.initialize()})},e.prototype.initialize=function(){var e=this;this.element=jQuery(this.elementRef.nativeElement),Object(Ac.a)([this.wpTableSortBy.onReadyWithAvailable(),this.wpTableSortBy.live$()]).pipe(Object(Gn.b)(this)).subscribe(function(){var n=e.wpTableSortBy.current[0];n&&e.headerColumn.$href===n.column.$href?e.currentSortDirection=n.direction:e.currentSortDirection=null,e.setActiveColumnClass(),e.sortable=e.wpTableSortBy.isSortable(e.headerColumn),e.directionClass=e.getDirectionClass(),e.cdRef.detectChanges()}),this.isHierarchyColumn="subject"===this.headerColumn.id,"sortHandle"===this.headerColumn.id&&(this.columnType="sort"),this.isHierarchyColumn?this.columnType="hierarchy":"toType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)?(this.columnType="relation",this.columnName=this.headerColumn.type.name):"ofType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)&&(this.columnType="relation",this.columnName=I18n.t("js.relation_labels."+this.headerColumn.relationType)),this.isHierarchyColumn&&(this.hierarchyIcon="icon-hierarchy",this.isHierarchyDisabled=this.wpTableGroupBy.isEnabled,this.wpTableGroupBy.live$().pipe(Object(Gn.b)(this)).subscribe(function(){e.isHierarchyDisabled=e.wpTableGroupBy.isEnabled,e.cdRef.detectChanges()}),this.wpTableHierarchies.live$().pipe(Object(Gn.b)(this)).subscribe(function(){e.setHierarchyIcon(),e.cdRef.detectChanges()}),this.setHierarchyIcon()),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"displayDropdownIcon",{get:function(){return this.table&&this.table.configuration.columnMenuEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayHierarchyIcon",{get:function(){return this.table&&this.table.configuration.hierarchyToggleEnabled},enumerable:!0,configurable:!0}),e.prototype.toggleHierarchy=function(e){return this.wpTableHierarchies.toggleState()&&this.wpTableGroupBy.disable(),this.setHierarchyIcon(),e.stopPropagation(),!1},e.prototype.setHierarchyIcon=function(){this.wpTableHierarchies.isEnabled?(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.hide"),this.hierarchyIcon="icon-hierarchy"):(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.show"),this.hierarchyIcon="icon-no-hierarchy")},e.prototype.getDirectionClass=function(){if(!this.currentSortDirection)return"";switch(this.currentSortDirection.$href){case tn:return"asc";case ln:return"desc";default:return""}},e.prototype.setActiveColumnClass=function(){this.element.toggleClass("active-column",!!this.currentSortDirection)},e}(),Zg=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Jg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[["aria-hidden","true"],["class","hierarchy-header--icon"],["tabindex","-1"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleHierarchy(t)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,2,0,l["ɵinlineInterpolate"](1,"icon ",t.hierarchyIcon,""))},function(e,n){e(n,0,0,n.component.text.toggleHierarchy)})}function Xg(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"a",[["href","#"],["lang-attribute",""]],[[8,"lang",0],[8,"id",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpad"](3,2),(e()(),l["ɵted"](4,null,["",""]))],function(e,n){var t=n.component,l=e(n,3,0,t.directionClass&&"sort",t.directionClass);e(n,2,0,l)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"",t.locale,""),l["ɵinlineInterpolate"](1,"",t.headerColumn.id,"")),e(n,4,0,t.headerColumn.name)})}function em(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.headerColumn.name)})}function nm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["ɵinlineInterpolate"](1,"",t.text.openMenu,""))},null)}function tm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Jg)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Xg)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,em)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,nm)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.displayHierarchyIcon),e(n,4,0,t.sortable),e(n,6,0,!t.sortable),e(n,8,0,t.displayDropdownIcon)},null)}function lm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["ɵinlineInterpolate"](1,"",t.text.openMenu,""))},null)}function im(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[],[[1,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-relations relations-header--icon"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](4,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,lm)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,"icon-context icon-relations relations-header--icon"),e(n,6,0,t.displayDropdownIcon)},function(e,n){var t=n.component;e(n,1,0,t.headerColumn.name),e(n,4,0,t.columnName)})}function rm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","draggable-table--sort-header"]],[[1,"title",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.sortColumn)})}function om(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"a",[["href","#"],["lang-attribute",""]],[[8,"lang",0],[8,"id",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpad"](3,2),(e()(),l["ɵted"](4,null,["",""]))],function(e,n){var t=n.component,l=e(n,3,0,t.directionClass&&"sort",t.directionClass);e(n,2,0,l)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"",t.locale,""),l["ɵinlineInterpolate"](1,"",t.headerColumn.id,"")),e(n,4,0,t.headerColumn.name)})}function um(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.headerColumn.name)})}function am(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","dropdown-indicator icon-small icon-pulldown"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0,"dropdown-indicator icon-small icon-pulldown",l["ɵinlineInterpolate"](1,"",t.text.openMenu,""))},null)}function sm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,om)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,um)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,am)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.sortable),e(n,4,0,!t.sortable),e(n,6,0,t.displayDropdownIcon)},null)}function cm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),l["ɵdid"](1,16384,null,0,$t.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,tm)),l["ɵdid"](3,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,im)),l["ɵdid"](5,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,rm)),l["ɵdid"](7,278528,null,0,$t.NgSwitchCase,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,sm)),l["ɵdid"](9,16384,null,0,$t.NgSwitchDefault,[l.ViewContainerRef,l.TemplateRef,$t.NgSwitch],null,null)],function(e,n){e(n,1,0,n.component.columnType);e(n,3,0,"hierarchy");e(n,5,0,"relation");e(n,7,0,"sort")},null)}l["ɵccf"]("sortHeader",Yg,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"sortHeader",[],null,null,null,cm,Zg)),l["ɵdid"](1,4374528,null,0,Yg,[We,rn,Be,$n,l.ElementRef,l.ChangeDetectorRef,A.a],null,null)],null,null)},{headerColumn:"headerColumn",locale:"locale",table:"table"},{},[]);var dm=function(e){function n(n,t,l,i){var r=e.call(this,t,l,n)||this;return r.elementRef=n,r.locals=t,r.cdRef=l,r.I18n=i,r.confirmed=!1,r.text={title:r.I18n.t("js.modals.form_submit.title"),text:r.I18n.t("js.modals.form_submit.text"),button_continue:r.I18n.t("js.button_continue"),button_cancel:r.I18n.t("js.button_cancel"),close_popup:r.I18n.t("js.close_popup_title")},r.options=t.options||{},r.closeOnEscape=_.defaultTo(r.options.closeByEscape,!0),r.closeOnOutsideClick=_.defaultTo(r.options.closeByDocument,!0),r.showClose=_.defaultTo(r.options.showClose,!0),r.text=_.defaults(r.options.text,r.text),r}return a.d(n,e),n.prototype.confirmAndClose=function(e){this.confirmed=!0,this.closeMe(e)},n}(He.a),pm=function(){function e(e,n){this.opModalService=e,this.injector=n}return e.prototype.confirm=function(e){var n=this;return new Promise(function(t,l){n.opModalService.show(dm,n.injector,{options:e}).closingEvent.subscribe(function(e){e.confirmed?t():l()})})},e}(),hm=function(e){function n(n,t,l,i,r,o,u,a,s,c){var d=e.call(this,n,t)||this;return d.elementRef=n,d.opContextMenu=t,d.wpTableColumns=l,d.wpTableSortBy=i,d.wpTableGroupBy=r,d.wpTableHierarchies=o,d.opModalService=u,d.injector=a,d.I18n=s,d.confirmDialog=c,d.text={confirmDelete:{text:d.I18n.t("js.work_packages.table_configuration.sorting_mode.warning"),title:d.I18n.t("js.modals.form_submit.title")}},d}return a.d(n,e),n.prototype.open=function(e){this.table.configuration.columnMenuEnabled&&(this.buildItems(),this.opContextMenu.show(this,e))},Object.defineProperty(n.prototype,"locals",{get:function(){return{showAnchorRight:this.column&&"id"!==this.column.id,contextMenuId:"column-context-menu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t={of:this.$element.find(".generic-table--sort-header-outer")},l=e.prototype.positionArgs.call(this,n);return _.assign(l,t),l},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element.find("#"+this.column.id)},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(){var e=this,n=this.column;this.items=[{hidden:!this.wpTableSortBy.isSortable(n),linkText:this.I18n.t("js.work_packages.query.sort_descending"),icon:"icon-sort-descending",onClick:function(t){return e.wpTableSortBy.isManualSortingMode?(e.confirmDialog.confirm({text:e.text.confirmDelete}).then(function(){return e.wpTableSortBy.setAsSingleSortCriteria(n,ln),!0}),!1):(e.wpTableSortBy.addSortCriteria(n,ln),!0)}},{hidden:!this.wpTableSortBy.isSortable(n),linkText:this.I18n.t("js.work_packages.query.sort_ascending"),icon:"icon-sort-ascending",onClick:function(t){return e.wpTableSortBy.isManualSortingMode?(e.confirmDialog.confirm({text:e.text.confirmDelete}).then(function(){return e.wpTableSortBy.setAsSingleSortCriteria(n,tn),!0}),!1):(e.wpTableSortBy.addSortCriteria(n,tn),!0)}},{hidden:!this.wpTableGroupBy.isGroupable(n)||this.wpTableGroupBy.isCurrentlyGroupedBy(n),linkText:this.I18n.t("js.work_packages.query.group"),icon:"icon-group-by",onClick:function(){return e.wpTableHierarchies.isEnabled&&e.wpTableHierarchies.setEnabled(!1),e.wpTableGroupBy.setBy(n),!0}},{hidden:this.wpTableColumns.isFirst(n),linkText:this.I18n.t("js.work_packages.query.move_column_left"),icon:"icon-column-left",onClick:function(){return e.wpTableColumns.shift(n,-1),!0}},{hidden:this.wpTableColumns.isLast(n),linkText:this.I18n.t("js.work_packages.query.move_column_right"),icon:"icon-column-right",onClick:function(){return e.wpTableColumns.shift(n,1),!0}},{linkText:this.I18n.t("js.work_packages.query.hide_column"),icon:"icon-delete",onClick:function(){var t=e.wpTableColumns.previous(n)||e.wpTableColumns.next(n);return e.wpTableColumns.removeColumn(n),setTimeout(function(){t&&jQuery("#"+t.id).focus()}),!0}},{linkText:this.I18n.t("js.work_packages.query.insert_columns"),icon:"icon-columns",onClick:function(){return e.opModalService.show(zn,e.injector,{initialTab:"columns"}),!0}}]},n}(xc),fm=function(){function e(e,n,t,l){this.I18n=e,this.injector=n,this.opModalService=t,this.opContextMenu=l}return e.prototype.ngOnInit=function(){this.text={configureTable:I18n.t("js.toolbar.settings.configure_view")}},e.prototype.openTableConfigurationModal=function(){this.opContextMenu.close(),this.opModalService.show(zn,this.injector)},e}(),gm=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"accessible-by-keyboard",[["linkClass","wp-table--columns-selection"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.openTableConfigurationModal()&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](2,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-button icon-small icon-settings"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,1,0,"wp-table--columns-selection",t.text.configureTable,t.text.configureTable);e(n,3,0,"icon-button icon-small icon-settings")},null)}l["ɵccf"]("wp-table-config-menu",fm,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table-config-menu",[],null,null,null,mm,gm)),l["ɵdid"](1,114688,null,0,fm,[A.a,l.Injector,Wn.b,is],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var vm=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function bm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"a",[["aria-haspopup","true"],["class","wp-inline-create--add-link"],["href",""],["role","link"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.handleAddRowClick()&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"wp-inline-create--split-link":0}),l["ɵdid"](4,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),l["ɵdid"](5,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null),(e()(),l["ɵeld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](7,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.hasReferenceClass);e(n,2,0,"wp-inline-create--add-link",l),e(n,5,0,t.focus);e(n,7,0,"icon icon-add")},function(e,n){var t=n.component;e(n,0,0,!t.isAllowed||void 0,t.text.create),e(n,8,0,t.text.create)})}function ym(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"a",[["aria-haspopup","true"],["class","wp-inline-create--reference-link wp-inline-create--split-link"],["href",""],["role","link"]],[[1,"disabled",0],[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.handleReferenceClick()&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-link"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,4,0,"icon icon-link")},function(e,n){var t=n.component;e(n,1,0,!t.isAllowed||void 0,t.text.create),e(n,5,0,t.text.reference)})}function wm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"tr",[["class","wp-inline-create-button-row hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"td",[["class","wp-inline-create-button-td -no-highlighting"]],[[1,"colspan",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","wp-inline-create-button"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,bm)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ym)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.canAdd),e(n,6,0,t.canReference)},function(e,n){e(n,1,0,n.component.colspan)})}function Cm(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function km(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"tr",[["class","wp-inline-create-button-row hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"td",[["class","wp-inline-reference-row-td -no-highlighting"]],[[1,"colspan",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,Cm)),l["ɵdid"](3,671744,null,0,$t.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["ɵdid"](4,16384,null,0,fu.g,[$t.NgComponentOutlet],null,null)],function(e,n){var t=n.component;e(n,3,0,t.referenceClass,t.injector)},function(e,n){e(n,1,0,n.component.colspan)})}function Im(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,wm)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,km)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,"inactive"===t.mode),e(n,4,0,t.hasReferenceClass&&"reference"===t.mode)},null)}function jm(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Im)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.canAdd||t.canReference)},null)}l["ɵccf"]("[wpInlineCreate]",Sp,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["wpInlineCreate",""]],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;"keydown.escape"===n&&(i=!1!==l["ɵnov"](e,1).resetRow()&&i);return i},jm,vm)),l["ɵdid"](1,4440064,null,0,Sp,[l.Injector,l.ElementRef,m.a,A.a,b,l.ChangeDetectorRef,ad,Fd,$e,jc,In],null,null)],function(e,n){e(n,1,0)},null)},{table:"wp-inline-create--table",projectIdentifier:"wp-inline-create--project-identifier"},{},[]);var Rm=function(){function e(e,n,t,l,i,r,o,u){this.injector=e,this.elementRef=n,this.querySpace=t,this.states=l,this.displayFieldService=i,this.wpTableColumns=r,this.wpTableSums=o,this.I18n=u,this.text={sum:u.t("js.label_sum")}}return e.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),Object(Ac.a)([this.wpTableColumns.live$(),this.wpTableSums.live$(),this.querySpace.results.values$()]).pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(n){var t=n[0],l=n[1],i=n[2];l&&i.sumsSchema?i.sumsSchema.$load().then(function(n){e.refresh(t,i,n)}):e.clear()})},e.prototype.clear=function(){this.$element.empty()},e.prototype.refresh=function(e,n,t){this.clear(),this.render(e,n,t)},e.prototype.render=function(e,n,t){var l=this;e.forEach(function(e,i){var r=document.createElement("td");r.classList.add("wp-table--sum-container");var o=l.renderContent(n.totalSums,e.id,t[e.id]);0===i&&(l.appendFirstLabel(o),r.setAttribute("colspan","2")),r.appendChild(o),l.$element.append(r)}),this.$element.append('<td><div class="generic-table--footer-outer"></div></td>')},e.prototype.renderContent=function(e,n,t){var l=document.createElement("div");if(!t)return l;var i=this.displayFieldService.getField(e,n,t,{injector:this.injector,container:"table",options:{}});return i.isEmpty()||i.render(l,i.valueString),l},e.prototype.appendFirstLabel=function(e){var n=document.createElement("span");n.textContent=""+this.text.sum,jQuery(e).prepend(n)},e}();function Pm(e,n,t,l,i,r,o,u,a,s,c,d,p){var h,f,g=e.get(b),m=null;p.change=i.changeFor(p.workPackage);var v=jQuery("body");function y(e,n){var l=t.getAbsoluteLeftCoordinates(),i=n.clientX-l;return Math.floor(i/e.viewParams.pixelPerDay)}function w(e){return function(n){var t=y(p,n.originalEvent)-m,l=Math.floor(n.offsetX/p.viewParams.pixelPerDay),i=p.viewParams.dateDisplayStart.clone().add(l,"days");h=d.onDaysMoved(p.change,i,t,e),function(e,n){d.assignDateValues(e.change,c,n)}(p,h),d.update(s,c,p)}}function C(e){e.keyCode===wl.a.ESCAPE&&I(!0)}function k(e){var n=p.workPackage;d.isEmpty(n)&&(n.isLeaf&&d.canMoveDates(n)?(a.style.cursor="",f&&f.remove(),f=d.displayPlaceholderUnderCursor(e,p),a.appendChild(f),a.onmouseleave=function(){f.remove()},a.onmousedown=function(e){f.remove(),s.style.pointerEvents="none",e.preventDefault();var n=Math.floor(e.offsetX/p.viewParams.pixelPerDay),t=p.viewParams.dateDisplayStart.clone().add(n,"days").format("YYYY-MM-DD"),l=d.onMouseDown(e,t,p,c,s);if(d.update(s,c,p),"create"===l)return I(!1),void e.preventDefault();a.onmousemove=function(e){var t=Math.floor(e.offsetX/p.viewParams.pixelPerDay),i=p.viewParams.dateDisplayStart.clone().add(t,"days"),r=t-n,o=d.onDaysMoved(p.change,i,r,l);d.assignDateValues(p.change,c,o),d.update(s,c,p)},a.onmouseleave=function(){I(!0)},a.onmouseup=function(){I(!1)},v.on("keyup.timelinecell",C)}):a.style.cursor="not-allowed")}function I(n){if(t.disableViewParamsCalculation=!1,a.onmousemove=k,a.onmousedown=_.noop,a.onmouseleave=_.noop,a.onmouseup=_.noop,s.style.pointerEvents="auto",v.off(".timelinecell"),t.resetCursor(),m=null,h={},n||p.change.isEmpty())p.change.clear(),d.update(s,c,p),d.onMouseDownEnd(c,p.change),t.refreshView();else{var f=function(){p.change.clear(),d.onMouseDownEnd(c,p.change),t.refreshView()};(b=p.change,y=e.get(Me),w=j().toISOString(),u.table.promise=i.save(b).then(function(e){o.showSave(e.resource);var n=_.map(g.rendered.value,function(e){return e.workPackageId});u.table.promise=y.loadIdsUpdatedSince(n,w).then(function(n){l.updateWorkPackageList(n.elements),r.push(e.resource,{eventType:"updated"})})}).catch(function(e){o.handleRawError(e,p.workPackage)})).then(f).catch(f)}var b,y,w}s.onmousedown=function(e){1===e.which&&function(e,n){n.preventDefault();if(e.classList.add("active-drag"),v.on("mouseup.timelinecell",function(){return e.classList.remove("active-drag")}),t.disableViewParamsCalculation=!0,m=y(p,n),!p.workPackage.isLeaf&&!p.viewParams.activeSelectionMode)return;var l=d.onMouseDown(n,null,p,c,e);v.on("mousemove.timelinecell",w(l)),v.on("keyup.timelinecell",C),v.on("mouseup.timelinecell",function(){return I(!1)})}(s,e)},a.onmousemove=k}var Sm,_m=function(e,n,t,l,i,r){this.center=e,this.left=n,this.leftHover=t,this.right=l,this.rightHover=i,this.farRight=r},xm=function(){function e(e,n,t,l,i,r){this.injector=e,this.workPackageTimeline=n,this.renderers=t,this.latestRenderInfo=l,this.classIdentifier=i,this.workPackageId=r,this.wpCacheService=this.injector.get(Cn),this.halEditing=this.injector.get(ns),this.halEvents=this.injector.get(ct),this.notificationService=this.injector.get(qn),this.states=this.injector.get(d),this.loadingIndicator=this.injector.get(Nn),this.wpElement=null}return e.prototype.getMarginLeftOfLeftSide=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfLeftSide(this.latestRenderInfo)},e.prototype.getMarginLeftOfRightSide=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfRightSide(this.latestRenderInfo)},e.prototype.getPaddingLeftForIncomingRelationLines=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingLeftForIncomingRelationLines(this.latestRenderInfo)},e.prototype.getPaddingRightForOutgoingRelationLines=function(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingRightForOutgoingRelationLines(this.latestRenderInfo)},e.prototype.canConnectRelations=function(){var e=this.latestRenderInfo.workPackage;return e.isMilestone?!_.isNil(e.date):!_.isNil(e.startDate)||!_.isNil(e.dueDate)},e.prototype.clear=function(){this.cellElement.html(""),this.wpElement=null},Object.defineProperty(e.prototype,"cellContainer",{get:function(){return this.workPackageTimeline.timelineBody},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellElement",{get:function(){return this.cellContainer.find("."+this.classIdentifier)},enumerable:!0,configurable:!0}),e.prototype.lazyInit=function(e,n){var t=this.workPackageTimeline.timelineBody[0],l=this.cellElement;return l.length?null!==this.wpElement&&t.contains(this.wpElement)&&this.elementShape===e.type?Promise.resolve():(this.clear(),this.wpElement=e.render(n),this.labels=e.createAndAddLabels(n,this.wpElement),this.elementShape=e.type,l.append(this.wpElement),e.canMoveDates(n.workPackage)&&(this.wpElement.classList.add("-editable"),Pm(this.injector,0,this.workPackageTimeline,this.wpCacheService,this.halEditing,this.halEvents,this.notificationService,this.loadingIndicator,l[0],this.wpElement,this.labels,e,n)),Promise.resolve()):Promise.reject()},e.prototype.cellRenderer=function(e){return e.isMilestone?this.renderers.milestone:this.renderers.generic},e.prototype.refreshView=function(e){var n=this;this.latestRenderInfo=e;var t=this.cellRenderer(e.workPackage);this.lazyInit(t,e).then(function(){t.update(n.wpElement,n.labels,e)||n.clear()})},e}(),Tm=function(){function e(e,n){this.injector=e,this.workPackageTimeline=n,this.TimezoneService=this.injector.get(nl),this.wpTableTimeline=this.injector.get(N),this.fieldRenderer=new Ja(this.injector,"timeline"),this.dateDisplaysOnMouseMove={}}return Object.defineProperty(e.prototype,"type",{get:function(){return"bar"},enumerable:!0,configurable:!0}),e.prototype.canMoveDates=function(e){return e.schema.startDate.writable&&e.schema.dueDate.writable&&e.isAttributeEditable("startDate")},e.prototype.isEmpty=function(e){var n=j(e.startDate),t=j(e.dueDate);return _.isNaN(n.valueOf())&&_.isNaN(t.valueOf())},e.prototype.displayPlaceholderUnderCursor=function(e,n){var t=Math.floor(e.offsetX/n.viewParams.pixelPerDay),l=document.createElement("div");return l.style.pointerEvents="none",l.style.position="absolute",l.style.height="1em",l.style.width="30px",l.style.zIndex="9999",l.style.left=t*n.viewParams.pixelPerDay+"px",this.applyTypeColor(n,l),l},e.prototype.assignDateValues=function(e,n,t){this.assignDate(e,"startDate",t.startDate),this.assignDate(e,"dueDate",t.dueDate),this.updateLabels(!0,n,e)},e.prototype.onDaysMoved=function(e,n,t,l){var i=e.pristineResource.startDate,r=e.pristineResource.dueDate,o=j().format("YYYY-MM-DD"),u=j(e.projectedResource.startDate),a=j(e.projectedResource.dueDate),s={};return"left"===l?s.startDate=j(i||r).add(t,"days"):"right"===l?s.dueDate=j(r||o).add(t,"days"):"both"===l?(i&&(s.startDate=j(i).add(t,"days")),r&&(s.dueDate=j(r).add(t,"days"))):"dragright"===l&&(s.dueDate=u.clone().add(t,"days")),"both"!==l&&(void 0!==s.startDate&&s.startDate.isAfter(a)?s.startDate=a:void 0!==s.dueDate&&s.dueDate.isBefore(u)&&(s.dueDate=u)),s},e.prototype.onMouseDown=function(e,n,t,l,i){if(t.viewParams.activeSelectionMode)return t.viewParams.activeSelectionMode(t.workPackage),e.preventDefault(),"both";var r,o=t.change.projectedResource;return jQuery(e.target).hasClass("leftHandle")?(r="left",this.workPackageTimeline.forceCursor("col-resize"),null===o.startDate&&(o.startDate=o.dueDate)):jQuery(e.target).hasClass("rightHandle")||n?(r="right",this.workPackageTimeline.forceCursor("col-resize")):(r="both",this.workPackageTimeline.forceCursor("ew-resize")),n&&(o.startDate=n,o.dueDate=n,r="dragright"),this.updateLabels(!0,l,t.change),r},e.prototype.onMouseDownEnd=function(e,n){this.updateLabels(!1,e,n)},e.prototype.update=function(e,n,t){var l=t.change,i=e.querySelector(".timeline-element--bg"),r=t.viewParams,o=j(l.projectedResource.startDate),u=j(l.projectedResource.dueDate);_.isNaN(o.valueOf())&&_.isNaN(u.valueOf())?e.style.visibility="hidden":e.style.visibility="visible",_.isNaN(u.valueOf())&&!_.isNaN(o.valueOf())&&(u=j(),i.style.backgroundImage="linear-gradient(90deg, rgba(255,255,255,0) 0%, #F1F1F1 100%)"),_.isNaN(o.valueOf())&&!_.isNaN(u.valueOf())&&(o=u.clone(),i.style.backgroundImage="linear-gradient(90deg, #F1F1F1 0%, rgba(255,255,255,0) 80%)");var a=o.diff(r.dateDisplayStart,"days");e.style.left=E(r,a);var s=u.diff(o,"days")+1;if(e.style.width=E(r,s),!_.isNaN(o.valueOf())||!_.isNaN(u.valueOf())){var c=_.max([t.viewParams.pixelPerDay,2]);e.style.minWidth=c+"px"}return n&&this.updateLabels(!1,n,l),this.checkForActiveSelectionMode(t,i),this.checkForSpecialDisplaySituations(t,i),this.applyTypeColor(t,i),!0},e.prototype.checkForActiveSelectionMode=function(e,n){e.viewParams.activeSelectionMode&&(n.style.backgroundImage=null,e.viewParams.selectionModeStart===""+e.workPackage.id&&(jQuery(n).addClass("selection-start"),n.style.background=null))},e.prototype.getMarginLeftOfLeftSide=function(e){var n=e.change.projectedResource,t=j(n.startDate),l=j(n.dueDate),i=(t=_.isNaN(t.valueOf())?l.clone():t).diff(e.viewParams.dateDisplayStart,"days");return O(e.viewParams,i)},e.prototype.getMarginLeftOfRightSide=function(e){var n=e.change.projectedResource,t=j(n.startDate),l=j(n.dueDate);t=_.isNaN(t.valueOf())?l.clone():t,l=_.isNaN(l.valueOf())?t.clone():l;var i=t.diff(e.viewParams.dateDisplayStart,"days"),r=l.diff(t,"days")+1;return O(e.viewParams,i+r)},e.prototype.getPaddingLeftForIncomingRelationLines=function(e){return e.viewParams.pixelPerDay/8},e.prototype.getPaddingRightForOutgoingRelationLines=function(e){return 0},e.prototype.render=function(e){var n=document.createElement("div"),t=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div");return n.className=R+" "+this.type,t.className="timeline-element--bg",l.className="leftHandle",i.className="rightHandle",n.appendChild(t),n.appendChild(l),n.appendChild(i),n},e.prototype.createAndAddLabels=function(e,n){var t=document.createElement("div");t.classList.add("bar-label"),this.applyTypeColor(e,t),n.appendChild(t);var l=document.createElement("div");l.classList.add("labelLeft","hide-on-hover"),n.appendChild(l);var i=document.createElement("div");i.classList.add("containerRight"),n.appendChild(i);var r=document.createElement("div");r.classList.add("labelRight","hide-on-hover"),i.appendChild(r);var o=document.createElement("div");o.classList.add("labelFarRight","hide-on-hover"),i.appendChild(o);var u=document.createElement("div");u.classList.add("labelHoverLeft","show-on-hover","-label-style"),n.appendChild(u);var a=document.createElement("div");a.classList.add("labelHoverRight","show-on-hover","-label-style"),n.appendChild(a);var s=new _m(t,l,u,r,a,o);return this.updateLabels(!1,s,e.change),s},e.prototype.applyTypeColor=function(e,n){var t=e.workPackage,l=t.type,i=e.viewParams.activeSelectionMode,r=l.id;i||this.isParentWithVisibleChildren(t)?n.classList.remove(Ul.backgroundClass("type",r)):n.classList.add(Ul.backgroundClass("type",r))},e.prototype.assignDate=function(e,n,t){t&&(e.projectedResource[n]=t.format("YYYY-MM-DD"))},e.prototype.checkForSpecialDisplaySituations=function(e,n){var t=e.workPackage,l=e.viewParams.activeSelectionMode;t.isLeaf||l?n.classList.remove("-readonly"):n.classList.add("-readonly"),this.isParentWithVisibleChildren(t)&&(n.classList.add("-clamp-style"),n.style.borderStyle="solid",n.style.borderWidth="2px",n.style.borderBottom="none",n.style.background="none")},e.prototype.updateLabels=function(e,n,t){var l=this.wpTableTimeline.getNormalizedLabels(t.projectedResource);e||(this.renderLabel(t,n,"left",l.left),this.renderLabel(t,n,"right",l.right),this.renderLabel(t,n,"farRight",l.farRight)),this.renderHoverLabels(n,t)},e.prototype.renderHoverLabels=function(e,n){this.renderLabel(n,e,"leftHover","startDate"),this.renderLabel(n,e,"rightHover","dueDate")},e.prototype.renderLabel=function(e,n,t,l){var i=n[t];if(i)if(i.innerHTML="",null!==l){var r=this.fieldRenderer.renderFieldValue(e.projectedResource,l,e),o=r[0],u=r[1];i&&o&&u?(u.classList.add("label-content"),i.appendChild(u),i.classList.add("not-empty")):i&&i.classList.remove("not-empty")}else i.classList.remove("not-empty")},e.prototype.isParentWithVisibleChildren=function(e){if(!this.workPackageTimeline.inHierarchyMode)return!1;var n=this.workPackageTimeline.workPackageTable.lastRenderPass;return!!n&&!!n.parentsWithVisibleChildren[e.id]},e}(),Om=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"type",{get:function(){return"milestone"},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(e){var n=j(e.date);return _.isNaN(n.valueOf())},n.prototype.canMoveDates=function(e){return e.schema.date.writable&&e.isAttributeEditable("date")},n.prototype.displayPlaceholderUnderCursor=function(e,n){var t=Math.floor(e.offsetX/n.viewParams.pixelPerDay),l=document.createElement("div");l.className="timeline-element milestone",l.style.pointerEvents="none",l.style.height="1em",l.style.width="1em",l.style.left=t*n.viewParams.pixelPerDay+"px";var i=document.createElement("div");return i.className="diamond",i.style.left="0.5em",i.style.height="1em",i.style.width="1em",l.appendChild(i),this.applyTypeColor(n,i),l},n.prototype.assignDateValues=function(e,n,t){this.assignDate(e,"date",t.date),this.updateLabels(!0,n,e)},n.prototype.onDaysMoved=function(e,n,t,l){var i=e.pristineResource.date,r={};return i&&(r.date=j(i).add(t,"days")),r},n.prototype.onMouseDown=function(e,n,t,l,i){if(t.viewParams.activeSelectionMode)return t.viewParams.activeSelectionMode(t.workPackage),e.preventDefault(),"both";var r="both";return this.workPackageTimeline.forceCursor("ew-resize"),n?(t.change.projectedResource.date=n,r="create"):(this.updateLabels(!0,l,t.change),r)},n.prototype.update=function(e,n,t){var l=t.viewParams,i=j(t.change.projectedResource.date);if(_.isNaN(i.valueOf()))return!1;var r=jQuery(".diamond",e)[0];r.style.width="15px",r.style.height="15px",r.style.width="15px",r.style.height="15px",r.style.marginLeft=t.viewParams.pixelPerDay/2-7.5+"px",this.applyTypeColor(t,r);var o=i.diff(l.dateDisplayStart,"days");return e.style.left=O(l,o)+"px",n&&this.updateLabels(!1,n,t.change),this.checkForActiveSelectionMode(t,r),!0},n.prototype.getMarginLeftOfLeftSide=function(e){var n=e.change,t=j(n.projectedResource.date).diff(e.viewParams.dateDisplayStart,"days");return O(e.viewParams,t)},n.prototype.getMarginLeftOfRightSide=function(e){return this.getMarginLeftOfLeftSide(e)+e.viewParams.pixelPerDay},n.prototype.getPaddingLeftForIncomingRelationLines=function(e){return e.viewParams.pixelPerDay/2-1},n.prototype.getPaddingRightForOutgoingRelationLines=function(e){return 7.5},n.prototype.render=function(e){var n=document.createElement("div");n.className=R+" "+this.type;var t=document.createElement("div");return t.className="diamond",n.appendChild(t),n},n.prototype.createAndAddLabels=function(e,n){var t=document.createElement("div");t.classList.add("labelLeft","hide-on-hover"),n.appendChild(t);var l=document.createElement("div");l.classList.add("containerRight"),n.appendChild(l);var i=document.createElement("div");i.classList.add("labelRight","hide-on-hover"),l.appendChild(i);var r=document.createElement("div");r.classList.add("labelFarRight","hide-on-hover"),l.appendChild(r);var o=document.createElement("div");o.classList.add("labelHoverRight","show-on-hover","-label-style"),n.appendChild(o);var u=new _m(null,t,null,i,o,r);return this.updateLabels(!1,u,e.change),u},n.prototype.renderHoverLabels=function(e,n){this.renderLabel(n,e,"rightHover","date")},n.prototype.updateLabels=function(e,n,t){var l=this.wpTableTimeline.getNormalizedLabels(t.projectedResource);e||("startDate"===l.left&&"dueDate"===l.right?(this.renderLabel(t,n,"left",null),this.renderLabel(t,n,"right","date")):(this.renderLabel(t,n,"left",l.left),this.renderLabel(t,n,"right",l.right)),this.renderLabel(t,n,"farRight",l.farRight)),this.renderHoverLabels(n,t)},n.prototype.renderLabel=function(n,t,l,i){"startDate"!==i&&"dueDate"!==i||(i="date"),e.prototype.renderLabel.call(this,n,t,l,i)},n}(Tm),Em=function(){function e(e,n){this.injector=e,this.wpTimeline=n,this.states=this.injector.get(d),this.halEditing=this.injector.get(ns),this.cells={},this.cellRenderers={milestone:new Om(this.injector,n),generic:new Tm(this.injector,n)}}return e.prototype.hasCell=function(e){return this.getCellsFor(e).length>0},e.prototype.getCellsFor=function(e){return _.filter(this.cells,function(n){return n.workPackageId===e})||[]},e.prototype.refreshAllCells=function(){var e=this;this.synchronizeCells(),_.each(this.cells,function(n){return e.refreshSingleCell(n)})},e.prototype.refreshCellsFor=function(e){var n=this;_.each(this.getCellsFor(e),function(e){return n.refreshSingleCell(e)})},e.prototype.refreshSingleCell=function(e){var n=this.renderInfoFor(e.workPackageId);n.workPackage&&e.refreshView(n)},e.prototype.synchronizeCells=function(){var e=this,n=Object.keys(this.cells),t=[];_.each(this.wpTimeline.workPackageIdOrder,function(n){var l=n.workPackageId;if(l&&!e.states.workPackages.get(l).isPristine()){var i=n.classIdentifier;e.cells[i]||(e.cells[i]=e.buildCell(i,l.toString())),t.push(i)}}),_.difference(n,t).forEach(function(n){e.cells[n].clear(),delete e.cells[n]})},e.prototype.buildCell=function(e,n){return new xm(this.injector,this.wpTimeline,this.cellRenderers,this.renderInfoFor(n),e,n)},e.prototype.renderInfoFor=function(e){var n=this.states.workPackages.get(e).value;return{viewParams:this.wpTimeline.viewParameters,workPackage:n,change:this.halEditing.changeFor(n)}},e}(),Dm=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.states=l.injector.get(d),l.halEditing=l.injector.get(ns),l}return a.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.cell, keydown.table.cell"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return"."+Ya+".-editable"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.tableAndTimelineContainer)},n.prototype.processEvent=function(e,n){Object(bn.a)("Starting editing on cell: ",n.target),n.preventDefault();var t=jQuery(n.target).closest("."+Ya),l=t.data("fieldName");if(!l)return Object(bn.a)("Click handled by cell not a field? ",n.target),!0;var i=t.closest(".wp-table--row"),r=i.data("workPackageId"),o=this.states.workPackages.get(r).value,u=i.data("classIdentifier"),a=e.editing.startEditing(o,u),s=ts.getPosition(n);return a.activate(l).then(function(e){e.$onUserActivate.next(),e.focus(s)}).catch(function(){return t.addClass("-read-only")}),!1},n}(Ad),Fm=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.wpTableRelationColumns=l.injector.get($n),l}return a.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.relationsCell, keydown.table.relationsCell"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--relation-indicator"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.tableAndTimelineContainer)},n.prototype.processEvent=function(e,n){Object(bn.a)("Handled click on relation cell %o",n.target),n.preventDefault();var t=jQuery(n.target).closest(".wp-table--relation-cell-td").data("columnId"),l=jQuery(n.target).closest(".wp-table--row").data("workPackageId");return this.wpTableRelationColumns.getExpandFor(l)===t?this.wpTableRelationColumns.collapse(l):this.wpTableRelationColumns.setExpandFor(l,t),!1},n}(Ad),Nm=function(e){function n(n,t,l,i,r){void 0===i&&(i={}),void 0===r&&(r=!0);var o=e.call(this,n.get(is))||this;return o.injector=n,o.workPackageId=t,o.$element=l,o.additionalPositionArgs=i,o.allowSplitScreenActions=r,o.states=o.injector.get(d),o.wpRelationsHierarchyService=o.injector.get(Ws),o.opModalService=o.injector.get(Wn.b),o.$state=o.injector.get(g.G),o.wpTableSelection=o.injector.get(Ic),o.WorkPackageContextMenuHelper=o.injector.get(Dd),o.workPackage=o.states.workPackages.get(o.workPackageId).value,o.selectedWorkPackages=o.getSelectedWorkPackages(),o.permittedActions=o.WorkPackageContextMenuHelper.getPermittedActions(o.selectedWorkPackages,Tc,o.allowSplitScreenActions),o.items=o.buildItems(),o}return a.d(n,e),Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"work-package-context-menu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,this.additionalPositionArgs),t},n.prototype.triggerContextMenuAction=function(e){var n=e.link;switch(e.key){case"delete":this.deleteSelectedWorkPackages();break;case"edit":this.editSelectedWorkPackages(n);break;case"copy":this.copySelectedWorkPackages(n);break;case"relation-new-child":this.wpRelationsHierarchyService.addNewChildWp(this.workPackage);break;default:window.location.href=n}},n.prototype.deleteSelectedWorkPackages=function(){var e=this.getSelectedWorkPackages();this.opModalService.show(Sc,this.injector,{workPackages:e})},n.prototype.editSelectedWorkPackages=function(e){this.getSelectedWorkPackages().length>1&&(window.location.href=e)},n.prototype.copySelectedWorkPackages=function(e){var n=this.getSelectedWorkPackages();if(n.length>1)window.location.href=e;else{var t={copiedFromWorkPackageId:n[0].id};this.$state.go("work-packages.list.copy",t)}},n.prototype.getSelectedWorkPackages=function(){var e=this.wpTableSelection.getSelectedWorkPackages();return 0===e.length?[this.workPackage]:(-1===e.indexOf(this.workPackage)&&e.push(this.workPackage),e)},n.prototype.buildItems=function(){var e=this,n=this.permittedActions.map(function(n){return{class:void 0,disabled:!1,linkText:n.text,href:n.href,icon:null!=n.icon?n.icon:"icon-"+n.key,onClick:function(t){return(!n.href||!kc.isClickedWithModifier(t))&&(e.triggerContextMenuAction(n),!0)}}});return this.workPackage.isNew||(n.unshift({disabled:!1,icon:"icon-view-fullscreen",class:"openFullScreenView",href:this.$state.href("work-packages.show",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_fullscreen"),onClick:function(n){return!kc.isClickedWithModifier(n)&&(e.$state.go("work-packages.show",{workPackageId:e.workPackageId}),!0)}}),this.allowSplitScreenActions&&n.unshift({disabled:!1,icon:"icon-view-split",class:"detailsViewMenuItem",href:this.$state.href("work-packages.list.details.overview",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_details"),onClick:function(n){return!kc.isClickedWithModifier(n)&&(e.$state.go("work-packages.list.details.overview",{workPackageId:e.workPackageId}),!0)}})),n},n}(_c),Am=function(e){function n(n,t,l,i,r){void 0===i&&(i={});var o=e.call(this,n,t,l,i,!0)||this;return o.injector=n,o.workPackageId=t,o.$element=l,o.additionalPositionArgs=i,o.table=r,o.wpViewIndentation=o.injector.get(Ed),o}return a.d(n,e),n.prototype.triggerContextMenuAction=function(n){switch(n.key){case"relation-precedes":this.table.timelineController.startAddRelationPredecessor(this.workPackage);break;case"relation-follows":this.table.timelineController.startAddRelationFollower(this.workPackage);break;case"hierarchy-indent":this.wpViewIndentation.indent(this.workPackage);break;case"hierarchy-outdent":this.wpViewIndentation.outdent(this.workPackage);break;default:e.prototype.triggerContextMenuAction.call(this,n)}},n}(Nm),Vm=function(){function e(e,n){this.injector=e,this.table=n,this.opContextMenu=this.injector.get(is)}return Object.defineProperty(e.prototype,"rowSelector",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tableAndTimelineContainer)},e.prototype.openContextMenu=function(e,n,t){var l=new Am(this.injector,n,jQuery(e.target),t,this.table);this.opContextMenu.show(l,e)},e}(),Mm=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l}return a.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.contextmenu"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table-context-menu-link"},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){var l=jQuery(t.target);if(l.closest("."+xe).length)return Object(bn.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.rowSelector).data("workPackageId");return i&&e.prototype.openContextMenu.call(this,t,i),!1},n}(Vm),qm=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l}return a.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"keydown.table.contextmenu"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return this.rowSelector},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(n,t){if(!n.configuration.contextMenuEnabled)return!1;var l=jQuery(t.target);if(t.keyCode!==wl.a.F10||!t.shiftKey||!t.altKey)return!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.SELECTOR).data("workPackageId"),r={my:"left top",at:"left bottom",of:l};return e.prototype.openContextMenu.call(this,t,i,r),!1},n}(Vm),Lm=function(e){function n(n,t){var l=e.call(this,n,t)||this;return l.injector=n,l.wpTableSelection=l.injector.get(Ic),l}return a.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"contextmenu.table.rightclick"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--row,.wp-timeline-cell"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.tableAndTimelineContainer)},n.prototype.handleEvent=function(n,t){if(!n.configuration.contextMenuEnabled)return!1;var l=jQuery(t.target);if(l.closest("."+xe).length)return Object(bn.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();var i=l.closest(this.SELECTOR).data("workPackageId");if(i){var r=this.table.findRenderedRow(i)[0];this.wpTableSelection.isSelected(i)||this.wpTableSelection.setSelection(i,r),e.prototype.openContextMenu.call(this,t,i)}return!1},n}(Vm),$m=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(g.G),this.states=this.injector.get(d),this.keepTab=this.injector.get(_e),this.wpTableSelection=this.injector.get(Ic),this.wpTableFocus=this.injector.get(jc)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.row"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--row"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(t.is("a")||t.parent().is("a"))return!0;if(t.parents("."+Ld).length)return Object(bn.a)("Skipping click on inner cell"),!0;var l=t.closest(this.SELECTOR),i=l.data("workPackageId"),r=l.data("classIdentifier");if(!i)return!0;if(t.is("a")||t.parent().is("a"))return!0;var o=e.findRenderedRow(r),u=o[0];o[1];return n.ctrlKey||n.metaKey||n.shiftKey||this.wpTableSelection.setSelection(i,u),n.shiftKey&&this.wpTableSelection.setMultiSelectionFrom(e.renderedRows,i,u),(n.ctrlKey||n.metaKey)&&this.wpTableSelection.toggleRow(i),this.wpTableFocus.updateFocus(i),!1},e}(),Hm=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(g.G),this.states=this.injector.get(d),this.wpTableSelection=this.injector.get(Ic),this.wpTableFocus=this.injector.get(jc)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"dblclick.table.row"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return"."+Ld},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(kc.isClickedWithModifier(n))return!0;if(t.parents("."+Ld).length)return Object(bn.a)("Skipping click on inner cell"),!0;var l=t.closest(this.SELECTOR).closest(".wp-table--row").data("workPackageId");return!(!t.is("a")&&!t.parent().is("a"))||(this.wpTableFocus.updateFocus(l),this.$state.go("work-packages.show",{workPackageId:l}),!1)},e}(),Bm=function(){function e(e,n){this.injector=e,this.querySpace=this.injector.get(b),this.builder=new vp(e,n)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.groupheader"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-table--group-header .expander"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tbody)},e.prototype.handleEvent=function(e,n){n.preventDefault(),n.stopPropagation();var t=jQuery(n.target).parents(".wp-table--group-header").data("groupIdentifier"),l=this.collapsedState.value||{};l[t]=!l[t],this.collapsedState.putValue(l);var i=performance.now();this.builder.refreshExpansionState();var r=performance.now();Object(bn.a)("Group redraw took "+(r-i)+" milliseconds.")},Object.defineProperty(e.prototype,"collapsedState",{get:function(){return this.querySpace.collapsedGroups},enumerable:!0,configurable:!0}),e}(),zm=function(e){function n(n,t){var l=e.call(this)||this;return l.injector=n,l.states=l.injector.get(d),l.wpTableHierarchies=l.injector.get(We),l}return a.d(n,e),Object.defineProperty(n.prototype,"EVENT",{get:function(){return"click.table.hierarchy"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SELECTOR",{get:function(){return".wp-table--hierarchy-indicator"},enumerable:!0,configurable:!0}),n.prototype.eventScope=function(e){return jQuery(e.tbody)},n.prototype.processEvent=function(e,n){var t=jQuery(n.target).closest(".wp-table--row").data("workPackageId");return this.wpTableHierarchies.toggle(t),n.stopImmediatePropagation(),n.preventDefault(),!1},n}(Ad),Wm=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(g.G),this.keepTab=this.injector.get(_e),this.states=this.injector.get(d),this.wpTableSelection=this.injector.get(Ic),this.wpTableFocus=this.injector.get(jc)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.table.wpLink"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return"."+xe},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.tableAndTimelineContainer)},e.prototype.handleEvent=function(e,n){if(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)return!0;var t=jQuery(n.target),l=t.closest(this.SELECTOR),i=l.data("wpState"),r=l.data("workPackageId");t.closest("a").blur();var o=t.closest(".wp-table--row").data("classIdentifier"),u=e.findRenderedRow(o),a=u[0];u[1];return this.wpTableSelection.setSelection(r,a),this.$state.go(this.keepTab[i],{workPackageId:r,focus:!0}),n.preventDefault(),n.stopPropagation(),!1},e}(),Qm=function(e,n){this.injector=e,this.table=n,this.querySpace=this.injector.get(b),this.wpTableColumns=this.injector.get($e),this.wpTableColumns.updates$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(){if(n.originalRows.length>0){var e=performance.now();n.redrawTable();var t=performance.now();Object(bn.a)("column redraw took "+(t-e)+" milliseconds.")}})},Um=function(){function e(e,n){var t=this;this.injector=e,this.wpTableHierarchies=this.injector.get(We),this.querySpace=this.injector.get(b),this.wpTableHierarchies.updates$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions),Object(v.a)(function(e){return e.isVisible}),Object(ft.a)()).subscribe(function(){t.wpTableHierarchies.isEnabled||n.redrawTableAndTimeline()});var l=this.wpTableHierarchies.isEnabled;this.wpTableHierarchies.updates$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions),Object(Yn.a)(function(){return t.querySpace.rendered.hasValue()})).subscribe(function(e){e.isVisible===l&&t.renderHierarchyState(e),l=e.isVisible})}return e.prototype.renderHierarchyState=function(e){var n=this.querySpace.rendered.value;jQuery('[class^="__hierarchy-group-"]').removeClass(function(e,n){return(n.match(/__collapsed-group-\d+/g)||[]).join(" ")});var t={};_.each(e.collapsed,function(e,l){jQuery("."+ap(l)+" .wp-table--hierarchy-indicator").toggleClass("-hierarchy-collapsed",e);var i=jQuery("."+up(l));i.toggleClass(op(l),e),i.filter(".wp-table--row").each(function(l,i){var r=jQuery(i).index();t[r]||(n[r].hidden=e,t[r]=e)})}),e.last&&qd(e.last),this.querySpace.rendered.putValue(n,"Updated hidden state of rows after hierarchy change.")},e}(),Gm=function(e,n){this.injector=e,this.wpTableRelationColumns=this.injector.get($n),this.querySpace=this.injector.get(b),this.wpTableRelationColumns.updates$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(){n.redrawTableAndTimeline()})},Km=function(e,n){var t=this;this.injector=e,this.table=n,this.querySpace=this.injector.get(b),this.wpTableSortBy=this.injector.get(rn),this.wpTableOrder=this.injector.get(Sn),this.states=this.injector.get(d),this.querySpace.initialized.values$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(){var e;e=t.wpTableSortBy.isManualSortingMode?t.wpTableOrder.orderedWorkPackages():t.querySpace.results.value.elements,n.initialSetup(e)}),this.states.workPackages.observeChange().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions.asObservable()),Object(Yn.a)(function(){var e=t.querySpace.rendered.getValueOr([]);return e&&e.length>0})).subscribe(function(e){e[0];var n=e[1];void 0!==n&&t.table.refreshRows(n)})},Ym=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.wpTableSelection=this.injector.get(Ic),this.wpTableFocus=this.injector.get(jc),this.querySpace=this.injector.get(b),this.FocusHelper=this.injector.get(m.a),this.querySpace.rendered.values$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(){t.wpTableFocus.ifShouldFocus(function(e){var n=Md(e);n.length&&(qd(e),t.FocusHelper.focusElement(n,!0))})}),this.wpTableSelection.selection$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){t.renderSelectionState(e)}),this.wpTableSelection.registerSelectAllListener(function(){return n.renderedRows}),this.wpTableSelection.registerDeselectAllListener()}return e.prototype.renderSelectionState=function(e){var n=jQuery(this.table.tableAndTimelineContainer);n.find(".wp-table--row.-checked").removeClass("-checked"),_.each(e.selected,function(e,t){n.find('.wp-table--row[data-work-package-id="'+t+'"]').toggleClass("-checked",e)})},e}(),Zm=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.querySpace=this.injector.get(b),this.wpTableTimeline=this.injector.get(N),this.wpTableTimeline.live$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){t.renderVisibility(e.visible)})}return e.prototype.renderVisibility=function(e){var n=jQuery(this.table.tableAndTimelineContainer).parent();n.find(".work-packages-tabletimeline--timeline-side").toggle(e),n.find(".work-packages-tabletimeline--table-side").toggleClass("-timeline-visible",e)},e}(),Jm=function(e,n){this.injector=e,this.wpTableHighlighting=this.injector.get(sn),this.querySpace=this.injector.get(b),this.wpTableHighlighting.updates$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions),Object(ft.a)()).subscribe(function(){return n.redrawTable()})},Xm=t("PTRy"),ev=function(){function e(e,n){this.down=!1,this.elements=e,this.scrollWhenOutside=n.scrollWhenOutside||!1,this.maxSpeed=n.maxSpeed||5,this.margin=n.margin||10,this.scrollWhenOutside=n.scrollWhenOutside||!1,this.autoScroll=n.autoScroll,this.point={},this.pointCB=Object(Xm.createPointCB)(this.point),this.init()}return e.prototype.init=function(){var e=this;jQuery(window).on("mousemove.domautoscroll touchmove.domautoscroll",function(n){e.pointCB(n),e.onMove(n)}),jQuery(window).on("mouseup.domautoscroll touchend.domautoscroll",function(){return e.onUp()}),jQuery(window).on("scroll.domautoscroll",function(n){return e.setScroll(n)})},e.prototype.destroy=function(){jQuery(window).off(".domautoscroll"),this.elements=[],this.cleanAnimation()},e.prototype.add=function(e){this.elements.push(e)},e.prototype.onUp=function(){cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.windowAnimationFrame)},e.prototype.setScroll=function(e){for(var n=this,t=0;t<this.elements.length;t++)if(this.elements[t]===e.target){this.scrolling=!0;break}this.scrolling&&requestAnimationFrame(function(){return n.scrolling=!1})},e.prototype.cleanAnimation=function(){cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.windowAnimationFrame)},e.prototype.getTarget=function(e){if(!e)return[];var n=[];this.elements.includes(e)&&n.push(e);for(var t=e;t=t.parentNode;)this.elements.includes(t)&&n.push(t);return n},e.prototype.getElementsUnderPoint=function(){for(var e=[],n=0;n<this.elements.length;n++)this.inside(this.point,this.elements[n])&&e.push(this.elements[n]);return e},e.prototype.onMove=function(e){if(this.autoScroll()&&!e.dispatched){var n=[];null!==e.target&&n.push(e.target);var t=document.body;n.length>0&&n[0].parentNode===t?n=this.getElementsUnderPoint():0===(n=this.getTarget(n[0])).length&&(n=this.getElementsUnderPoint()),this.current=n,0===this.current.length&&(this.current=[this.outerScrollContainer]),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.scrollTick.bind(this))}},e.prototype.setOuterScrollContainer=function(e){this.outerScrollContainer=e},e.prototype.scrollTick=function(){var e=this;0!==this.current.length&&(this.current.forEach(function(n){n&&e.scrollAutomatically(n)}),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.scrollTick.bind(this)))},e.prototype.scrollAutomatically=function(e){var n,t,l=this,i=Object(Xm.getClientRect)(e);n=this.point.x<i.left+this.margin?-this.maxSpeed:this.point.x>i.right-this.margin?this.maxSpeed:0,t=this.point.y<i.top+this.margin?-this.maxSpeed:this.point.y>i.bottom-this.margin?this.maxSpeed:0,setTimeout(function(){t&&l.scrollY(e,t),n&&l.scrollX(e,n)})},e.prototype.scrollY=function(e,n){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+n):e.scrollTop+=n},e.prototype.scrollX=function(e,n){e===window?window.scrollTo(e.pageXOffset+n,e.pageYOffset):e.scrollLeft+=n},e.prototype.inside=function(e,n,t){return t?e.y>t.top&&e.y<t.bottom&&e.x>t.left&&e.x<t.right:Object(Xm.pointInside)(e,n)},e}();!function(e){e.findIndex=function(e){return e.parentElement?Array.from(e.parentElement.children).indexOf(e):-1},e.reinsert=function(e,n,t){n="string"==typeof n?parseInt(n,10):n;var l=Array.from(t.children);(n<0||n>=l.length||0===l.length)&&t.appendChild(e);var i=l[n];i?t.insertBefore(e,i):t.appendChild(e)}}(Sm||(Sm={}));var nv=function(){function e(e,n){var t=this;this.document=e,this.injector=n,this.drake=null,this.members=[],this.escapeListener=function(e){t.drake&&"Escape"===e.key&&t.drake.cancel(!0)},this.document.documentElement.addEventListener("keydown",this.escapeListener)}return e.prototype.ngOnDestroy=function(){this.document.documentElement.removeEventListener("keydown",this.escapeListener),this.autoscroll&&this.autoscroll.destroy(),this.drake&&this.drake.destroy()},e.prototype.remove=function(e){this.initialized&&(_.remove(this.drake.containers,function(n){return n===e}),_.remove(this.members,function(n){return n.dragContainer===e}))},e.prototype.member=function(e){return _.find(this.members,function(n){return n.dragContainer===e})},Object.defineProperty(e.prototype,"initialized",{get:function(){return null!==this.drake},enumerable:!0,configurable:!0}),e.prototype.register=function(e){this.members.push(e);var n=e.dragContainer;this.autoscroll?this.autoscroll.add(n):this.setupAutoscroll([n]),null===this.drake?this.initializeDrake([n]):this.drake.containers.push(n)},e.prototype.addScrollContainer=function(e){this.autoscroll?this.autoscroll.add(e):this.setupAutoscroll([e]),this.autoscroll.setOuterScrollContainer(e)},e.prototype.setupAutoscroll=function(e){var n=this;this.autoscroll=new ev(e,{margin:100,maxSpeed:10,scrollWhenOutside:!0,autoScroll:function(){return n.drake&&n.drake.dragging}})},e.prototype.getMember=function(e){return this.members.find(function(n){return n.dragContainer===e})},e.prototype.initializeDrake=function(e){var n=this;this.drake=dragula(e,{moves:function(e,t,l,i){var r=n.getMember(t);return!!r&&r.moves(e,t,l,i)},accepts:function(e,t){var l=n.getMember(t);return!l||!l.accepts||l.accepts(e,t)},invalid:function(){return!1},direction:"vertical",copy:!1,revertOnSpill:!0,removeOnSpill:!1,mirrorContainer:document.body,ignoreInputTextSelection:!0}),this.drake.on("drag",function(e,n){e.dataset.sourceIndex=Sm.findIndex(e).toString()}),this.drake.on("over",function(e,n){var t=n.closest(".drop-zone");t&&t.classList.add("-dragged-over")}),this.drake.on("out",function(e,n){var t=n.closest(".drop-zone");t&&t.classList.remove("-dragged-over")}),this.drake.on("cloned",function(e,t){var l=n.member(t.parentElement);l&&l.onCloned&&l.onCloned(e,t)}),this.drake.on("drop",function(e,t,l,i){return a.b(n,void 0,void 0,function(){var n;return a.e(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.handleDrop(e,t,l,i)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),console.error("Failed to handle drop of %O, %O",e,n),[3,3];case 3:return[2]}})})}),this.drake.on("shadow",function(e,t){var l=n.member(t);l&&l.onShadowInserted&&l.onShadowInserted(e)}),this.drake.on("cancel",function(e,t,l){var i=n.member(t);i&&i.onCancel&&i.onCancel(e)})},e.prototype.handleDrop=function(e,n,t,l){return a.b(this,void 0,void 0,function(){var i,r;return a.e(this,function(o){switch(o.label){case 0:return i=this.member(n),r=this.member(t),i&&r?i===r?[2,i.onMoved(e,n,t,l)]:[4,i.onAdded(e,n,t,l)]:[2];case 1:return o.sent()?r.onRemoved(e,n,t,l):Sm.reinsert(e,e.dataset.sourceIndex||-1,t),[2]}})})},e}(),tv=function(){function e(e,n){var t=this;this.injector=e,this.table=n,this.states=this.injector.get(d),this.querySpace=this.injector.get(b),this.dragService=this.injector.get(nv,null),this.inlineCreateService=this.injector.get(Fd),this.halNotification=this.injector.get(Mn),this.wpTableSortBy=this.injector.get(rn),this.wpTableOrder=this.injector.get(Sn),this.browserDetector=this.injector.get(Hc),this.wpCacheService=this.injector.get(Cn),this.wpListService=this.injector.get(ot),this.dragActionRegistry=this.injector.get(dp),null!==this.dragService&&(this.inlineCreateService.newInlineWorkPackageCreated.pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions)).subscribe(function(e){return a.b(t,void 0,void 0,function(){var n;return a.e(this,function(t){switch(t.label){case 0:return[4,this.wpTableOrder.add(this.currentOrder,e)];case 1:return n=t.sent(),this.updateRenderedOrder(n),[2]}})})}),this.querySpace.stopAllSubscriptions.pipe(Object(y.a)(1)).subscribe(function(){t.dragService.remove(t.table.tbody)}),this.dragService.register({dragContainer:this.table.tbody,scrollContainers:[this.table.scrollContainer],accepts:function(){return!0},moves:function(e,n,l){if(!l.classList.contains("wp-table--drag-and-drop-handle"))return!1;var i=e.dataset.workPackageId,r=t.states.workPackages.get(i).value;return!!r&&t.actionService.canPickup(r)},onMoved:function(e,n,l){return a.b(t,void 0,void 0,function(){var n,t,i,r,o,u;return a.e(this,function(a){switch(a.label){case 0:n=e.dataset.workPackageId,t=this.findRowIndex(e),a.label=1;case 1:return a.trys.push([1,7,,8]),[4,this.wpCacheService.require(n)];case 2:return i=a.sent(),[4,this.wpTableOrder.move(this.currentOrder,n,t)];case 3:return r=a.sent(),[4,this.actionService.handleDrop(i,e)];case 4:return a.sent(),this.updateRenderedOrder(r),this.actionService.onNewOrder(r),(o=this.querySpace.query.value)&&this.wpTableSortBy.switchToManualSorting(o)?[4,this.wpListService.save(o)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[3,8];case 7:return u=a.sent(),this.halNotification.handleRawError(u),Sm.reinsert(e,e.dataset.sourceIndex||-1,l),[3,8];case 8:return[2]}})})},onRemoved:function(e){var n=e.dataset.workPackageId,l=t.wpTableOrder.remove(t.currentOrder,n);t.updateRenderedOrder(l)},onAdded:function(e){return a.b(t,void 0,void 0,function(){var n,t,l,i=this;return a.e(this,function(r){switch(r.label){case 0:return n=e.dataset.workPackageId,[4,this.wpCacheService.require(n)];case 1:return t=r.sent(),l=this.findRowIndex(e),[2,this.actionService.handleDrop(t,e).then(function(){return a.b(i,void 0,void 0,function(){var e;return a.e(this,function(t){switch(t.label){case 0:return[4,this.wpTableOrder.add(this.currentOrder,n,l)];case 1:return e=t.sent(),this.updateRenderedOrder(e),this.actionService.onNewOrder(e),[2,!0]}})})}).catch(function(){return!1})]}})})},onCloned:function(e,n){return a.b(t,void 0,void 0,function(){var t,l,i,r;return a.e(this,function(o){switch(o.label){case 0:return t=n.dataset.workPackageId,[4,this.wpCacheService.require(t)];case 1:return l=o.sent(),i=e.children.length,(r=document.createElement("td")).textContent=l.subjectWithId(),r.colSpan=i,r.classList.add("wp-table--cell-td","subject"),e.style.maxWidth="500px",e.innerHTML=r.outerHTML,[2]}})})},onShadowInserted:function(e){t.browserDetector.isEdge||t.actionService.changeShadowElement(e)},onCancel:function(e){t.browserDetector.isEdge||t.actionService.changeShadowElement(e,!0)}}))}return e.prototype.updateRenderedOrder=function(e){return a.b(this,void 0,void 0,function(){var n,t=this;return a.e(this,function(l){switch(l.label){case 0:return e=_.uniq(e),[4,Promise.all(e.map(function(e){return t.wpCacheService.require(e)}))];case 1:return n=l.sent(),this.table.initialSetup(n),[2]}})})},Object.defineProperty(e.prototype,"actionService",{get:function(){return this.dragActionRegistry.get(this.injector)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentOrder",{get:function(){return this.currentRenderedOrder.map(function(e){return e.workPackageId})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRenderedOrder",{get:function(){return this.querySpace.renderedWorkPackages.getValueOr([])},enumerable:!0,configurable:!0}),e.prototype.findRowIndex=function(e){return Array.from(this.table.tbody.getElementsByClassName("wp-table--row")).indexOf(e)||0},e}(),lv=function(){function e(e){this.injector=e}return e.prototype.attachTo=function(e){this.eventHandlers.map(function(n){var t=n(e);return t.eventScope(e).on(t.EVENT,t.SELECTOR,function(n){t.handleEvent(e,n)}),t})},e}(),iv=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.eventHandlers=[function(e){return new zm(n.injector,e)},function(e){return new Dm(n.injector,e)},function(e){return new Wm(n.injector,e)},function(e){return new $m(n.injector,e)},function(e){return new Hm(n.injector,e)},function(e){return new Bm(n.injector,e)},function(e){return new Lm(n.injector,e)},function(e){return new Mm(n.injector,e)},function(e){return new qm(n.injector,e)},function(e){return new Fm(n.injector,e)}],n.stateTransformers=[Ym,Km,Qm,Zm,Um,Gm,Jm,tv],n}return a.d(n,e),n.prototype.attachTo=function(n){var t=this;this.stateTransformers.map(function(e){return new e(t.injector,n)}),e.prototype.attachTo.call(this,n)},n}(lv),rv=".work-packages-tabletimeline--table-side",ov=".work-packages-tabletimeline--timeline-side",uv=".scroll-sync",av=15;function sv(e){if(0===e)return e;var n=av;return e<0&&(n*=-1),n}function cv(e,n,t){var l=e.target,i=function(e){var n=e.deltaX,t=e.deltaY;return e.shiftKey&&(n=t,t=0),[n,t]}(e.originalEvent),r=i[0],o=i[1];0!==o&&(r=sv(r),o=sv(o),window.requestAnimationFrame(function(){n[0].scrollTop=n[0].scrollTop+o,t[0].scrollTop=t[0].scrollTop+o,l.scrollLeft=l.scrollLeft+r}))}var dv=function(){function e(e){var n=this;this.tableAndTimeline=e,this.lastHoveredElement=null,this.eventListener=function(e){var t=e.target;t&&t!==n.lastHoveredElement&&n.handleHover(t),n.lastHoveredElement=t}}return e.prototype.activate=function(){window.addEventListener("mousemove",this.eventListener,{passive:!0})},e.prototype.deactivate=function(){window.removeEventListener("mousemove",this.eventListener),this.removeAllHoverClasses()},e.prototype.locateHoveredTableRow=function(e){var n=e.closest("tr");return 0===n.length?null:n[0]},e.prototype.locateHoveredTimelineRow=function(e){var n=e.closest("div.wp-timeline-cell");return 0===n.length?null:n[0]},e.prototype.handleHover=function(e){var n=jQuery(e),t=this.locateHoveredTableRow(n),l=this.locateHoveredTimelineRow(n);null!==t||null!==l?this.removeOldAndAddNewHoverClass(t,l):this.removeAllHoverClasses()},e.prototype.extractWorkPackageId=function(e){return parseInt(e.getAttribute("data-work-package-id"))},e.prototype.removeOldAndAddNewHoverClass=function(e,n){var t=this,l=null!==e?e:n,i=this.extractWorkPackageId(l),r=this.tableAndTimeline.find("tr.wp-row-"+i).first(),o=this.tableAndTimeline.find("div.wp-row-"+i).first();requestAnimationFrame(function(){t.removeAllHoverClasses(),o.addClass("row-hovered"),r.addClass("row-hovered")})},e.prototype.removeAllHoverClasses=function(){this.tableAndTimeline.find(".row-hovered").removeClass("row-hovered")},e}(),pv=function(){function e(e,n,t,l,i,r,o,u,a,s,c){this.elementRef=e,this.injector=n,this.states=t,this.querySpace=l,this.I18n=i,this.cdRef=r,this.zone=o,this.wpTableGroupBy=u,this.wpTableTimeline=a,this.wpTableColumns=s,this.wpTableSortBy=c,this.trackByHref=_r.trackByHref,this.limitedResults=!1}return e.prototype.ngOnInit=function(){var e=this;this.configuration=new Un(this.configurationObject),this.$element=jQuery(this.elementRef.nativeElement),this.querySpace.stopAllSubscriptions.next(),this.locale=I18n.locale,this.text={cancel:I18n.t("js.button_cancel"),noResults:{title:I18n.t("js.work_packages.no_results.title"),description:I18n.t("js.work_packages.no_results.description")},limitedResults:function(e,n){return I18n.t("js.work_packages.limited_results",{count:e,total:n})},tableSummary:I18n.t("js.work_packages.table.summary"),tableSummaryHints:[I18n.t("js.work_packages.table.text_inline_edit"),I18n.t("js.work_packages.table.text_select_hint"),I18n.t("js.work_packages.table.text_sort_hint")].join(" ")},Object(Ac.a)([this.querySpace.results.values$(),this.wpTableGroupBy.live$(),this.wpTableColumns.live$(),this.wpTableTimeline.live$(),this.wpTableSortBy.live$()]).pipe(Object(Gn.b)(this)).subscribe(function(n){var t=n[0],l=n[1],i=n[2],r=n[3];n[4];e.query=e.querySpace.query.value,e.results=t,e.groupBy=l,e.columns=i,e.numTableColumns=e.columns.length+2,e.scrollSyncUpdate&&e.timelineVisible!==r.visible&&e.scrollSyncUpdate(r.visible),e.timelineVisible=r.visible,e.manualSortEnabled=e.wpTableSortBy.isManualSortingMode,e.limitedResults=e.manualSortEnabled&&t.total>t.count,e.cdRef.detectChanges()}),this.cdRef.detectChanges()},e.prototype.ngOnDestroy=function(){this.wpTableHoverSync.deactivate()},e.prototype.registerTimeline=function(e,n){var t=this.$element.find(".work-package--results-tbody"),l=this.$element.find(".work-package-table--container")[0];this.workPackageTable=new Rp(this.injector,this.$element[0],l,t[0],n,e,this.configuration),this.tbody=t,e.workPackageTable=this.workPackageTable,new iv(this.injector).attachTo(this.workPackageTable);var i,r,o,u=this.getTableAndTimelineElement();this.tableElement=u[0],this.timeline=u[1],this.wpTableHoverSync=new dv(this.$element),this.wpTableHoverSync.activate(),this.scrollSyncUpdate=(i=this.$element,r=jQuery(i).find(rv),o=jQuery(i).find(ov),function(e){var n=!1,t=!1;e?(r.on("wheel"+uv,function(e){cv(e,r,o)}),r.on("scroll"+uv,function(e){n=!0,t||(o[0].scrollTop=e.target.scrollTop),n&&t&&(n=!1,t=!1)}),o.on("wheel"+uv,function(e){cv(e,r,o)}),o.on("scroll"+uv,function(e){t=!0,n||(r[0].scrollTop=e.target.scrollTop),n&&t&&(n=!1,t=!1)})):r.off(uv)}),this.scrollSyncUpdate(this.timelineVisible),this.cdRef.detectChanges()},Object.defineProperty(e.prototype,"isEmbedded",{get:function(){return this.configuration.isEmbedded},enumerable:!0,configurable:!0}),e.prototype.getTableAndTimelineElement=function(){var e=this.$element.find(".work-packages-tabletimeline--table-side"),n=this.$element.find(".work-packages-tabletimeline--timeline-side");if(0===n.length||0===e.length)throw new Error("invalid state");return[e[0],n[0]]},e}(),hv=function(){function e(e,n,t,l,i,r,o,u,a,c,d){this.injector=e,this.elementRef=n,this.states=t,this.wpTableDirective=l,this.NotificationsService=i,this.wpTableTimeline=r,this.notificationService=o,this.wpRelations=u,this.wpTableHierarchies=a,this.halEvents=c,this.I18n=d,this.querySpace=this.injector.get(b),this._viewParameters=new T,this.disableViewParamsCalculation=!1,this.workPackageIdOrder=[],this.renderers={},this.cellsRenderer=new Em(this.injector,this),this.selectionParams={notification:null},this.refreshRequest=Object(s.f)()}return e.prototype.ngAfterViewInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.text={selectionMode:this.I18n.t("js.timelines.selection_mode.notification")},this.outerContainer=this.$element.find(".wp-table-timeline--outer"),this.timelineBody=this.$element.find(".wp-table-timeline--body"),this.wpTableDirective.registerTimeline(this,this.timelineBody[0]),this.updateOnWorkPackageChangesets(),this.setupRefreshListener(),window.addEventListener("wp-resize.timeline",function(){return e.refreshRequest.putValue(void 0)}),this.querySpace.rendered.values$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions),Object(Yn.a)(function(){return e.initialized})).subscribe(function(n){e.workPackageIdOrder=n.filter(function(e){return!e.hidden}),e.refreshView()}),this.wpTableTimeline.live$().pipe(Object(Gn.b)(this),Object(Yn.a)(function(e){return e.visible})).subscribe(function(n){e.refreshRequest.putValue(void 0)})},e.prototype.setupRefreshListener=function(){var e=this;this.refreshRequest.changes$().pipe(Object(Gn.b)(this),Object(at.a)(250)).subscribe(function(){return e.refreshView()})},e.prototype.ngOnDestroy=function(){},e.prototype.workPackageInView=function(e){return this.cellsRenderer.hasCell(e)},e.prototype.workPackageCells=function(e){return this.cellsRenderer.getCellsFor(e)},e.prototype.workPackageIndex=function(e){return this.workPackageIdOrder.findIndex(function(n){return n.classIdentifier===e})},e.prototype.onRefreshRequested=function(e,n){this.renderers[e]=n},e.prototype.getAbsoluteLeftCoordinates=function(){return this.$element.offset().left},e.prototype.getParentScrollContainer=function(){return this.outerContainer.closest(ov)[0]},Object.defineProperty(e.prototype,"viewParameters",{get:function(){return this._viewParameters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inHierarchyMode",{get:function(){return this.wpTableHierarchies.isEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this.workPackageTable&&this.querySpace.rendered.hasValue()},enumerable:!0,configurable:!0}),e.prototype.refreshView=function(){var e=this;this.wpTableTimeline.isVisible?(this.wpTableTimeline.isAutoZoom()?this.applyAutoZoomLevel():(this._viewParameters.settings.zoomLevel=this.wpTableTimeline.zoomLevel,this.wpTableTimeline.appliedZoomLevel=this.wpTableTimeline.zoomLevel),Object(bn.b)("refreshView() in timeline container",function(){e.outerContainer.css("width","auto"),e.calculateViewParams(e._viewParameters),e.cellsRenderer.refreshAllCells(),_.each(e.renderers,function(n,t){Object(bn.a)("Refreshing timeline member "+t),n(e._viewParameters)});var n=e.getParentScrollContainer().scrollWidth;e.outerContainer.width(n)})):Object(bn.a)("refreshView() requested, but TL is invisible.")},e.prototype.updateOnWorkPackageChangesets=function(){var e=this;this.states.workPackages.observeChange().pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(Yn.a)(function(){return e.initialized&&e.wpTableTimeline.isVisible}),Object(Yn.a)(function(n){var t=n[0];return e.cellsRenderer.hasCell(t)})).subscribe(function(n){var t=n[0];e.calculateViewParams(e._viewParameters)?e.refreshRequest.putValue(void 0):e.cellsRenderer.refreshCellsFor(t)})},e.prototype.startAddRelationPredecessor=function(e){var n=this;this.activateSelectionMode(e.id,function(t){n.wpRelations.addCommonRelation(e.id,"follows",t.id).then(function(){n.halEvents.push(e,{eventType:"association",relatedWorkPackage:t.id,relationType:"follows"})}).catch(function(e){return n.notificationService.handleRawError(e,t)})})},e.prototype.startAddRelationFollower=function(e){var n=this;this.activateSelectionMode(e.id,function(t){n.wpRelations.addCommonRelation(e.id,"precedes",t.id).then(function(){n.halEvents.push(e,{eventType:"association",relatedWorkPackage:t.id,relationType:"precedes"})}).catch(function(e){return n.notificationService.handleRawError(e,t)})})},e.prototype.getFirstDayInViewport=function(){var e=this.getParentScrollContainer().scrollLeft,n=Math.floor(e/this.viewParameters.pixelPerDay);return this.viewParameters.dateDisplayStart.clone().add(n,"days")},e.prototype.getLastDayInViewport=function(){var e=this.getParentScrollContainer(),n=e.scrollLeft+e.offsetWidth,t=Math.ceil(n/this.viewParameters.pixelPerDay)+1;return this.viewParameters.dateDisplayStart.clone().add(t,"days")},e.prototype.forceCursor=function(e){jQuery("."+R).css("cursor",e),jQuery(".wp-timeline-cell").css("cursor",e),jQuery(".hascontextmenu").css("cursor",e),jQuery(".leftHandle").css("cursor",e),jQuery(".rightHandle").css("cursor",e)},e.prototype.resetCursor=function(){jQuery("."+R).css("cursor",""),jQuery(".wp-timeline-cell").css("cursor",""),jQuery(".hascontextmenu").css("cursor",""),jQuery(".leftHandle").css("cursor",""),jQuery(".rightHandle").css("cursor","")},e.prototype.resetSelectionMode=function(){this._viewParameters.activeSelectionMode=null,this._viewParameters.selectionModeStart=null,this.selectionParams.notification&&this.NotificationsService.remove(this.selectionParams.notification),Mousetrap.unbind("esc"),this.$element.removeClass("active-selection-mode"),jQuery(".selection-start").removeClass("selection-start"),this.refreshView()},e.prototype.activateSelectionMode=function(e,n){var t=this;e=e.toString(),this._viewParameters.activeSelectionMode=function(e){n(e),t.resetSelectionMode()},this._viewParameters.selectionModeStart=e,Mousetrap.bind("esc",function(){return t.resetSelectionMode()}),this.selectionParams.notification=this.NotificationsService.addNotice(this.text.selectionMode),this.$element.addClass("active-selection-mode"),this.refreshView()},e.prototype.calculateViewParams=function(e){var n=this;if(this.disableViewParamsCalculation)return!1;var t=new T,l=!1;this.workPackageIdOrder.forEach(function(l){var i=l.workPackageId;if(i){var r=n.states.workPackages.get(i).value;if(r){var o=r.startDate?j(r.startDate):e.now,u=r.dueDate?j(r.dueDate):e.now,a=r.date?j(r.date):e.now;t.dateDisplayStart=j.min(t.dateDisplayStart,e.now,o,a),t.dateDisplayEnd=j.max(t.dateDisplayEnd,e.now,u,a)}}}),t.dateDisplayStart=t.dateDisplayStart.subtract(e.dayCountForMarginLeft,"days");var i=this.$element.children().width(),r=e.pixelPerDay,o=Math.ceil(i/r*1.5);t.dateDisplayEnd=t.dateDisplayEnd.add(o,"days"),t.dateDisplayStart.isSame(this._viewParameters.dateDisplayStart)||(l=!0,this._viewParameters.dateDisplayStart=t.dateDisplayStart),t.dateDisplayEnd.isSame(this._viewParameters.dateDisplayEnd)||(l=!0,this._viewParameters.dateDisplayEnd=t.dateDisplayEnd);var u=[this.getFirstDayInViewport(),this.getLastDayInViewport()];return this._viewParameters.visibleViewportAtCalculationTime=u,l},e.prototype.applyAutoZoomLevel=function(){if(0!==this.workPackageIdOrder.length)for(var e,n,t,l,i=(e=this.workPackageIdOrder,n=this.states.workPackages,this._viewParameters,t=j(),l=j(),e.forEach(function(e){var i=e.workPackageId;if(i){var r=n.get(i).value;if(r){var o=r.startDate?r.startDate:r.date;o&&j(o).isBefore(t)&&(t=j(o));var u=r.dueDate?r.dueDate:r.date;u&&j(u).isAfter(l)&&(l=j(u))}}}),l.diff(t,"days")+1),r=this.$element.parent().width()-240,o=0,u=S;o<u.length;o++){var a=u[o];if(r/x(a)>=i||a===_.last(S))return this._viewParameters.settings.zoomLevel!==a&&(this._viewParameters.settings.zoomLevel=a,this.wpTableDirective.timeline.scrollLeft=0),void(this.wpTableTimeline.appliedZoomLevel=a)}},e}(),fv=function(){function e(e,n,t,l){this.I18n=n,this.wpTimelineService=t,this.workPackageTimelineTableController=l,this.$element=jQuery(e.nativeElement)}return e.prototype.ngOnInit=function(){var e=this;this.workPackageTimelineTableController.onRefreshRequested("header",function(n){return e.refreshView(n)})},e.prototype.refreshView=function(e){this.innerHeader=this.$element.find(".wp-table-timeline--header-inner"),this.renderLabels(e)},e.prototype.renderLabels=function(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.innerHeader.empty(),this.innerHeader.attr("data-current-zoom-level",this.wpTimelineService.zoomLevel),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}},e.prototype.renderLabelsDays=function(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM YYYY"),n.classList.add("wp-timeline--header-top-bold-element"),n.style.height="13px"}),this.renderTimeSlices(e,"week",13,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("-top-border"),n.style.height="32px"}),this.renderTimeSlices(e,"day",23,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("D"),n.classList.add("-top-border"),n.style.height="22px"}),this.renderTimeSlices(e,"day",33,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("dd"),n.classList.add("wp-timeline--header-day-element")})},e.prototype.renderLabelsWeeks=function(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"week",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("-top-border"),n.style.height="22px"}),this.renderTimeSlices(e,"day",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("D"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsMonths=function(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"month",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM"),n.classList.add("-top-border"),n.style.height="30px"}),this.renderTimeSlices(e,"week",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("ww"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsQuarters=function(e){var n=this;this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("wp-timeline--header-top-bold-element"),n.innerHTML=e.format("YYYY")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,t){t.innerHTML=n.I18n.t("js.timelines.quarter_label",{quarter_number:e.format("Q")}),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("MMM"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderLabelsYears=function(e){var n=this;this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("YYYY"),n.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,function(e,t){t.innerHTML=n.I18n.t("js.timelines.quarter_label",{quarter_number:e.format("Q")}),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.innerHTML=e.format("M"),n.classList.add("wp-timeline--header-middle-element")})},e.prototype.renderTimeSlices=function(e,n,t,l,i,r){for(var o=this,u=D(e,n,l,i),a=u.inViewportAndBoundaries,s=u.rest,c=0,d=a;c<d.length;c++){var p=d[c],h=p[0],f=p[1],g=this.addLabelCell();g.style.top=t+"px",g.style.left=E(e,h.diff(l,"days")),g.style.width=E(e,f.diff(h,"days")+1),r(h,g)}setTimeout(function(){for(var n=0,i=s;n<i.length;n++){var u=i[n],a=u[0],c=u[1],d=o.addLabelCell();d.style.top=t+"px",d.style.left=E(e,a.diff(l,"days")),d.style.width=E(e,c.diff(a,"days")+1),r(a,d)}},0)},e.prototype.addLabelCell=function(){var e=document.createElement("div");return e.className="wp-timeline--header-element",this.innerHeader.append(e),e},e}(),gv=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","wp-table-timeline--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"div",[["class","wp-table-timeline--header-inner"]],null,null,null,null,null))],null,null)}l["ɵccf"]("wp-timeline-header",fv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-timeline-header",[],null,null,null,mv,gv)),l["ɵdid"](1,114688,null,0,fv,[l.ElementRef,A.a,N,hv],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var vv=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.finishElement=function(e,n){var t=n.now.diff(n.dateDisplayStart,"days"),l=j().hour()/24;return e.style.left=E(n,t+l),e},Object.defineProperty(n.prototype,"identifier",{get:function(){return"wp-timeline-static-element-today-line"},enumerable:!0,configurable:!0}),n}(function(){function e(){}return e.prototype.render=function(e){var n,t=document.createElement("div");return t.id=this.identifier,(n=t.classList).add.apply(n,this.classNames),this.finishElement(t,e)},Object.defineProperty(e.prototype,"classNames",{get:function(){return["wp-timeline--static-element"]},enumerable:!0,configurable:!0}),e}()),bv=function(){function e(e,n,t){this.states=n,this.workPackageTimelineTableController=t,this.$element=jQuery(e.nativeElement),this.elements=[new vv]}return e.prototype.ngOnInit=function(){var e=this;this.container=this.$element.find(".wp-table-timeline--static-elements"),this.workPackageTimelineTableController.onRefreshRequested("static elements",function(n){return e.update(n)})},e.prototype.update=function(e){this.removeAllVisibleElements(),this.renderElements(e)},e.prototype.removeAllVisibleElements=function(){jQuery(".wp-timeline--static-element").remove()},e.prototype.renderElements=function(e){for(var n=0,t=this.elements;n<t.length;n++){var l=t[n];this.container[0].appendChild(l.render(e))}},e}(),yv=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","wp-table-timeline--static-elements"]],null,null,null,null,null))],null,null)}l["ɵccf"]("wp-timeline-static-elements",bv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-timeline-static-elements",[],null,null,null,wv,yv)),l["ɵdid"](1,114688,null,0,bv,[l.ElementRef,d,hv],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);function Cv(e,n){var t=e.day();0!==t&&6!==t||n.classList.add("grid-weekend")}var kv=function(){function e(e,n){this.elementRef=e,this.wpTimeline=n}return e.prototype.ngAfterViewInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.gridContainer=n.find(".wp-table-timeline--grid"),this.wpTimeline.onRefreshRequested("grid",function(n){return e.refreshView(n)})},e.prototype.refreshView=function(e){this.renderLabels(e)},e.prototype.renderLabels=function(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.gridContainer.empty(),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}},e.prototype.renderLabelsDays=function(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.style.paddingTop="1px",Cv(e,n)}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsWeeks=function(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){Cv(e,n)}),this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsMonths=function(e){this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsQuarters=function(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"quarter",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight"),n.style.zIndex="2"})},e.prototype.renderLabelsYears=function(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,function(e,n){n.classList.add("-grid-highlight")})},e.prototype.renderTimeSlices=function(e,n,t,l,i){for(var r=this,o=D(e,n,t,l),u=o.inViewportAndBoundaries,a=o.rest,s=0,c=u;s<c.length;s++){var d=c[s],p=d[0],h=d[1],f=document.createElement("div");f.classList.add(R,"wp-timeline--grid-element"),f.style.left=E(e,p.diff(t,"days")),f.style.width=E(e,h.diff(p,"days")+1),this.gridContainer[0].appendChild(f),i(p,f)}setTimeout(function(){for(var n=0,l=a;n<l.length;n++){var o=l[n],u=o[0],s=o[1],c=document.createElement("div");c.classList.add(R,"wp-timeline--grid-element"),c.style.left=E(e,u.diff(t,"days")),c.style.width=E(e,s.diff(u,"days")+1),r.gridContainer[0].appendChild(c),i(u,c)}},0)},e}(),Iv=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function jv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","wp-table-timeline--grid"]],null,null,null,null,null))],null,null)}l["ɵccf"]("wp-timeline-grid",kv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-timeline-grid",[],null,null,null,jv,Iv)),l["ɵdid"](1,4243456,null,0,kv,[l.ElementRef,hv],null,null)],null,null)},{},{},[]);function Rv(e){return"__tl-relation-"+e}var Pv=function(){function e(e,n){this.belongsToId=e,this.relation=n}return Object.defineProperty(e.prototype,"classNames",{get:function(){return[Rv(this.relation.ids.from),Rv(this.relation.ids.to)]},enumerable:!0,configurable:!0}),e}(),Sv=!1,_v="relation-line";function xv(e,n,t,l,i,r,o,u){var a,s=document.createElement("div");return(a=s.classList).add.apply(a,[R,_v].concat(n)),s.style.top=40*t+l+"px",s.style.left=i+"px",s.style.width=r+"px",s.style.height=o+"px",Sv&&void 0!==u&&(s.style.zIndex="9999999",s.style.backgroundColor=u),s}var Tv=function(){function e(e,n,t,l,i,r){this.injector=e,this.elementRef=n,this.states=t,this.workPackageTimelineTableController=l,this.wpTableTimeline=i,this.wpRelations=r,this.querySpace=this.injector.get(b),this.workPackagesWithRelations={}}return e.prototype.ngOnInit=function(){var e=this,n=jQuery(this.elementRef.nativeElement);this.container=n.find(".wp-table-timeline--relations"),this.workPackageTimelineTableController.onRefreshRequested("relations",function(n){return e.refreshView()}),this.setupRelationSubscription()},e.prototype.ngOnDestroy=function(){},e.prototype.refreshView=function(){this.update()},Object.defineProperty(e.prototype,"workPackageIdOrder",{get:function(){return this.workPackageTimelineTableController.workPackageIdOrder},enumerable:!0,configurable:!0}),e.prototype.setupRelationSubscription=function(){var e=this;Object(Ac.a)([this.querySpace.renderedWorkPackages.values$(),this.wpTableTimeline.live$()]).pipe(Object(Yn.a)(function(e){e[0];return e[1].visible}),Object(Ye.a)(Object(Gn.a)(this)),Object(v.a)(function(e){var n=e[0];e[1];return n})).subscribe(function(n){var t=_.compact(n.map(function(e){return e.workPackageId}));e.wpRelations.requireAll(t),t.forEach(function(n){var t=e.wpRelations.state(n);e.workPackagesWithRelations[n]=t,t.values$().pipe(Object(y.a)(1)).subscribe(function(){e.renderWorkPackagesRelations([n])})})}),this.states.workPackages.observeChange().pipe(Object(Ye.a)(Object(Gn.a)(this)),Object(Yn.a)(function(){return e.wpTableTimeline.isVisible})).subscribe(function(n){var t=n[0];e.renderWorkPackagesRelations([t])})},e.prototype.renderWorkPackagesRelations=function(e){var n=this;e.forEach(function(e){var t=n.workPackagesWithRelations[e];if(!_.isNil(t)){n.removeRelationElementsForWorkPackage(e);var l=_.values(t.value);_.values(l).forEach(function(e){if("precedes"===e.type||"follows"===e.type){var t=new Pv(e.ids.from,e);n.renderElement(n.workPackageTimelineTableController.viewParameters,t)}})}})},e.prototype.update=function(){this.removeAllVisibleElements(),this.renderElements()},e.prototype.removeRelationElementsForWorkPackage=function(e){var n=Rv(e);this.container.find("."+n).remove()},e.prototype.removeAllVisibleElements=function(){this.container.find("."+_v).remove()},e.prototype.renderElements=function(){var e=_.keys(this.workPackagesWithRelations);this.renderWorkPackagesRelations(e)},e.prototype.renderElement=function(e,n){var t=this,l=n.relation.ids,i=this.workPackageTimelineTableController.workPackageCells(l.to),r=this.workPackageTimelineTableController.workPackageCells(l.from);0!==i.length&&0!==r.length&&i.forEach(function(l){var i=t.workPackageTimelineTableController.workPackageIndex(l.classIdentifier);r.forEach(function(r){var o=t.workPackageTimelineTableController.workPackageIndex(r.classIdentifier);t.renderRelation(e,n,i,o,l,r)})})},e.prototype.renderRelation=function(e,n,t,l,i,r){var o=this.workPackageIdOrder[t],u=this.workPackageIdOrder[l];if(o&&u&&!o.hidden&&!u.hidden&&i.canConnectRelations()&&r.canConnectRelations()){var a=i.getMarginLeftOfRightSide()-i.getPaddingRightForOutgoingRelationLines(),s=r.getMarginLeftOfLeftSide()+r.getPaddingLeftForIncomingRelationLines(),c=t<l?"toDown":"toUp",d=s>a?"toRight":s<a?"toLeft":"beneath";if(i){var p=i.getPaddingRightForOutgoingRelationLines(),h=r.getPaddingLeftForIncomingRelationLines()+(p>0?p:0);this.container.append(xv(0,n.classNames,t,19,a,h,1,"red"));var f=a+h,g=Math.abs(l-t);"toDown"===c?"toRight"===d||"beneath"===d?this.container.append(xv(0,n.classNames,t,19,f,1,40*g,"black")):"toLeft"===d&&this.container.append(xv(0,n.classNames,t,19,f,1,40*g-10,"black")):"toUp"===c&&this.container.append(xv(0,n.classNames,l,30,f,1,40*g-10,"black")),"toRight"===d?"toDown"===c?this.container.append(xv(0,n.classNames,l,19,f,s-f,1,"red")):"toUp"===c&&(this.container.append(xv(0,n.classNames,l,20,f,1,10,"green")),this.container.append(xv(0,n.classNames,l,20,f,s-f,1,"lightsalmon"))):"toLeft"===d&&("toDown"===c?(this.container.append(xv(0,n.classNames,l,0,f,1,8,"red")),this.container.append(xv(0,n.classNames,l,8,s,f-s,1,"green")),this.container.append(xv(0,n.classNames,l,8,s,1,11,"blue"))):"toUp"===c&&(this.container.append(xv(0,n.classNames,l,30,s+1,f-s,1,"red")),this.container.append(xv(0,n.classNames,l,19,s+1,1,11,"blue"))))}}},e}(),Ov=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ev(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","wp-table-timeline--relations"]],null,null,null,null,null))],null,null)}l["ɵccf"]("wp-timeline-relations",Tv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-timeline-relations",[],null,null,null,Ev,Ov)),l["ɵdid"](1,245760,null,0,Tv,[l.Injector,l.ElementRef,d,hv,N,On],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var Dv=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Fv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","wp-table-timeline--outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","wp-table-timeline--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"wp-timeline-header",[],null,null,null,mv,gv)),l["ɵdid"](3,114688,null,0,fv,[l.ElementRef,A.a,N,hv],null,null),(e()(),l["ɵeld"](4,0,null,null,1,"wp-timeline-static-elements",[],null,null,null,wv,yv)),l["ɵdid"](5,114688,null,0,bv,[l.ElementRef,d,hv],null,null),(e()(),l["ɵeld"](6,0,null,null,1,"wp-timeline-grid",[],null,null,null,jv,Iv)),l["ɵdid"](7,4243456,null,0,kv,[l.ElementRef,hv],null,null),(e()(),l["ɵeld"](8,0,null,null,1,"wp-timeline-relations",[],null,null,null,Ev,Ov)),l["ɵdid"](9,245760,null,0,Tv,[l.Injector,l.ElementRef,d,hv,N,On],null,null),(e()(),l["ɵeld"](10,0,null,null,0,"div",[["class","wp-table-timeline--body"]],null,null,null,null,null))],function(e,n){e(n,3,0),e(n,5,0),e(n,9,0)},null)}l["ɵccf"]("wp-timeline-container",hv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-timeline-container",[],null,null,null,Fv,Dv)),l["ɵdid"](1,4374528,null,0,hv,[l.Injector,l.ElementRef,d,pv,Vn,N,qn,On,We,ct,A.a],null,null)],null,null)},{},{},[]);var Nv=[[".wp-table--drag-and-drop-handle:hover{cursor:move}"]],Av=l["ɵcrt"]({encapsulation:2,styles:Nv,data:{}});function Vv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"col",[],null,null,null,null,null))],null,null)}function Mv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](1,245760,null,0,Bl,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)}function qv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-sort-by"]],null,null,null,hl,dl)),l["ɵdid"](1,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,1,0,"icon-sort-by")},null)}function Lv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"th",[["class","wp-table--manual-sort-th -short hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","generic-table--empty-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,qv)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,n.component.manualSortEnabled)},null)}function $v(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"th",[["class","wp-table--table-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"sortHeader",[["opColumnsContextMenu",""]],null,null,null,cm,Zg)),l["ɵdid"](2,4374528,null,0,Yg,[We,rn,Be,$n,l.ElementRef,l.ChangeDetectorRef,A.a],{headerColumn:[0,"headerColumn"],locale:[1,"locale"],table:[2,"table"]},null),l["ɵdid"](3,4210688,null,0,hm,[l.ElementRef,is,$e,rn,Be,We,Wn.b,l.Injector,A.a,pm],{column:[0,"column"],table:[1,"table"]},null)],function(e,n){var t=n.component;e(n,2,0,n.context.$implicit,n.context.$implicit.custom_field&&n.context.$implicit.custom_field.name_locale||t.locale,t.workPackageTable),e(n,3,0,n.context.$implicit,t.workPackageTable)},null)}function Hv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table-config-menu",[],null,null,null,mm,gm)),l["ɵdid"](1,114688,null,0,fm,[A.a,l.Injector,Wn.b,is],null,null)],function(e,n){e(n,1,0)},null)}function Bv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"th",[["class","wp-table--configuration-modal--trigger wp-table--context-menu-th -short hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Hv)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,n.component.configuration.columnMenuEnabled)},null)}function zv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"tbody",[["class","work-package--empty-tbody"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"tr",[["id","empty-row-notification"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,7,"td",[],[[1,"colspan",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](6,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](8,null,["",""])),(e()(),l["ɵted"](9,null,[" "," "]))],function(e,n){e(n,5,0,"icon-info1 icon-context")},function(e,n){var t=n.component;e(n,2,0,t.columns.length+2),e(n,8,0,t.text.noResults.title),e(n,9,0,t.text.noResults.description)})}function Wv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"tbody",[["wpInlineCreate",""]],null,[[null,"keydown.escape"]],function(e,n,t){var i=!0;"keydown.escape"===n&&(i=!1!==l["ɵnov"](e,1).resetRow()&&i);return i},jm,vm)),l["ɵdid"](1,4440064,null,0,Sp,[l.Injector,l.ElementRef,m.a,A.a,b,l.ChangeDetectorRef,ad,Fd,$e,jc,In],{table:[0,"table"],projectIdentifier:[1,"projectIdentifier"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackageTable,t.projectIdentifier)},null)}function Qv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","work-packages--tabletimeline--timeline--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,2).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["ɵnov"](e,2).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["ɵnov"](e,2).handleMouseUp(t)&&i);return i},Wc,zc)),l["ɵdid"](2,245760,null,0,Bc,[$c,l.ElementRef,g.O,Hc],{elementClass:[0,"elementClass"],resizeEvent:[1,"resizeEvent"],localStorageKey:[2,"localStorageKey"]},null)],function(e,n){e(n,2,0,"work-packages-tabletimeline--timeline-side","wp-resize.timeline","openProject-timelineFlexBasis")},null)}function Uv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,34,"div",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,28,"div",[["class","work-packages-tabletimeline--table-side work-package-table--container __hidden_overflow_container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,27,"table",[["class","keyboard-accessible-list generic-table work-package-table"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,4,"colgroup",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vv)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Mv)),l["ɵdid"](7,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](8,0,null,null,5,"caption",[["class","hidden-for-sighted"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](10,null,["",""])),(e()(),l["ɵeld"](11,0,null,null,0,"span",[["id","wp-table-sort-summary"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](13,null,["",""])),(e()(),l["ɵeld"](14,0,null,null,7,"thead",[["class","-sticky"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Lv)),l["ɵdid"](17,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,$v)),l["ɵdid"](19,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Bv)),l["ɵdid"](21,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,zv)),l["ɵdid"](23,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](24,0,null,null,0,"tbody",[["class","results-tbody work-package--results-tbody"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Wv)),l["ɵdid"](26,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](27,0,null,null,2,"tfoot",[],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,1,"tr",[["wpTableSumsRow",""]],null,null,null,null,null)),l["ɵdid"](29,4210688,null,0,Rm,[l.Injector,l.ElementRef,b,d,$a,$e,Qe,A.a],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,Qv)),l["ɵdid"](31,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](32,0,null,null,2,"div",[["class","work-packages-tabletimeline--timeline-side"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,1,"wp-timeline-container",[],null,null,null,Fv,Dv)),l["ɵdid"](34,4374528,null,0,hv,[l.Injector,l.ElementRef,d,pv,Vn,N,qn,On,We,ct,A.a],null,null)],function(e,n){var t=n.component;e(n,5,0,t.configuration.dragAndDropEnabled),e(n,7,0,l["ɵEMPTY_ARRAY"].constructor(t.columns.length+1)),e(n,17,0,t.configuration.dragAndDropEnabled),e(n,19,0,t.columns,t.trackByHref),e(n,21,0,t.configuration.columnMenuEnabled||t.configuration.actionsColumnEnabled),e(n,23,0,!t.isEmbedded&&t.query&&0===t.results.count),e(n,26,0,t.tableElement&&t.configuration.inlineCreateEnabled),e(n,31,0,!t.configuration.isEmbedded)},function(e,n){var t=n.component;e(n,10,0,t.text.tableSummary),e(n,13,0,t.text.tableSummaryHints)})}function Gv(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,Uv)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.query)},null)}var Kv=l["ɵccf"]("wp-table",pv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table",[],null,null,null,Gv,Av)),l["ɵdid"](1,245760,null,0,pv,[l.ElementRef,l.Injector,d,b,A.a,l.ChangeDetectorRef,l.NgZone,Be,N,$e,rn],null,null)],function(e,n){e(n,1,0)},null)},{projectIdentifier:"projectIdentifier",configurationObject:"configuration"},{},[]),Yv=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,t,o)||this;return u.paginationService=n,u.cdRef=t,u.wpTablePagination=l,u.querySpace=i,u.wpTableSortBy=r,u.I18n=o,u}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.paginationService.loadPaginationOptions().then(function(n){e.perPageOptions=n.perPageOptions,e.cdRef.detectChanges()}),this.wpTablePagination.live$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.pagination=n.current,e.update()}),Object(Ac.a)([this.querySpace.query.values$(),this.wpTableSortBy.live$()]).pipe(Object(Gn.b)(this)).subscribe(function(n){var t=n[0];n[1];e.showPerPage=e.showPageSelections=!e.isManualSortingMode,e.infoText=e.paginationInfoText(t.results),e.update()})},n.prototype.ngOnDestroy=function(){},n.prototype.selectPerPage=function(e){this.paginationService.setPerPage(e),this.wpTablePagination.updateFromObject({page:1,perPage:e})},n.prototype.showPage=function(e){this.wpTablePagination.updateFromObject({page:e})},Object.defineProperty(n.prototype,"isManualSortingMode",{get:function(){return this.wpTableSortBy.isManualSortingMode},enumerable:!0,configurable:!0}),n.prototype.paginationInfoText=function(e){return this.isManualSortingMode&&e.count<e.total?I18n.t("js.work_packages.limited_results",{count:e.count}):void 0},n}(ni),Zv=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Jv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","pagination--item"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(e.context.$implicit)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function Xv(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Jv)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["…"]))],function(e,n){e(n,2,0,n.component.prePageNumbers)},null)}function eb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function nb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(e.parent.context.$implicit)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,0,0,n.parent.context.$implicit)})}function tb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-current":0}),(e()(),l["ɵand"](16777216,null,null,1,null,eb)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,nb)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.context.$implicit==t.pagination.page);e(n,2,0,"pagination--item pagination-number",l),e(n,5,0,n.context.$implicit==t.pagination.page),e(n,7,0,n.context.$implicit!=t.pagination.page)},null)}function lb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[["class","pagination--space"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["…"]))],null,null)}function ib(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,tb)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,lb)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.pageNumbers),e(n,4,0,t.postPageNumbers.length)},null)}function rb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","pagination--item pagination-number"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"a",[["href",""],["rel","next"],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(e.context.$implicit)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.context.$implicit)})}function ob(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,rb)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,n.component.postPageNumbers)},null)}function ub(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","hidden-for-sighted"],["id","pagination-empty-text"],["tabindex","0"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.no_other_page)})}function ab(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"li",[["class","pagination--info"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,"icon-info1 icon-context")},function(e,n){e(n,3,0,n.component.infoText)})}function sb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"a",[["href",""],["role","link"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,2).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.selectPerPage(e.parent.context.$implicit)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Cl,[],null,{onClick:"accessibleClick"})],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function cb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function db(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"li",[["class","pagination--item"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-current":0}),(e()(),l["ɵand"](16777216,null,null,1,null,sb)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,cb)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.context.$implicit==t.pagination.perPage);e(n,2,0,"pagination--item",l),e(n,5,0,n.context.$implicit!=t.pagination.perPage),e(n,7,0,n.context.$implicit==t.pagination.perPage)},null)}function pb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","pagination--options"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"li",[["class","pagination--label"]],[[8,"textContent",0],[8,"title",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,db)),l["ɵdid"](4,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,4,0,n.component.perPageOptions)},function(e,n){var t=n.component;e(n,2,0,t.text.per_page,l["ɵinlineInterpolate"](1,"",t.text.per_page,""))})}function hb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,24,"div",[["class","pagination"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,21,"nav",[["class","pagination--pages"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,20,"ul",[["class","pagination--items"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,2,"a",[["href",""],["id","pagination--prev-link"],["rel","prev start"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(r.pagination.page-1)&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵted"](-1,null,["<"])),(e()(),l["ɵand"](16777216,null,null,1,null,Xv)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ib)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ob)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](13,0,null,null,3,"li",[["class","pagination--item"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,2,"a",[["class","pagination--next-link"],["href",""],["id","pagination--next-link"],["rel","next"],["role","link"]],[[1,"aria-label",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,15).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,15).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.showPage(r.pagination.page+1)&&i);return i},null,null)),l["ɵdid"](15,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵted"](-1,null,[">"])),(e()(),l["ɵeld"](17,0,null,null,3,"li",[["class","pagination--range"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ub)),l["ɵdid"](20,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ab)),l["ɵdid"](22,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,pb)),l["ɵdid"](24,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.prePageNumbers.length>0),e(n,10,0,t.pageNumbers.length>1),e(n,12,0,t.postPageNumbers.length),e(n,20,0,1===t.pageNumbers.length),e(n,22,0,t.infoText),e(n,24,0,t.showPerPageOptions())},function(e,n){var t=n.component;e(n,3,0,1==t.pagination.page||!t.showPageSelections),e(n,4,0,t.text.label_previous),e(n,13,0,!(t.pagination.total&&t.pagination.page<t.pageNumbers[t.pageNumbers.length-1])),e(n,14,0,t.text.label_next),e(n,18,0,t.currentRange)})}function fb(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,hb)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.pagination&&t.isVisible&&t.pagination.total)},null)}l["ɵccf"]("wp-table-pagination",Yv,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table-pagination",[],null,null,null,fb,Zv)),l["ɵdid"](1,245760,null,0,Yv,[Ce,l.ChangeDetectorRef,je,b,rn,A.a],null,null)],function(e,n){e(n,1,0)},null)},{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults",showPerPage:"showPerPage",showPageSelections:"showPageSelections",infoText:"infoText"},{updateResults:"updateResults"},[]);var gb=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-container",[],null,null,null,Kg,Wg)),l["ɵdid"](1,245760,null,0,zg,[en,l.ChangeDetectorRef,Ze],{showFilterButton:[0,"showFilterButton"],filterButtonText:[1,"filterButtonText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.configuration.showFilterButton,t.configuration.filterButtonText)},null)}function vb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,mb)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"wp-table",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,Gv,Av)),l["ɵdid"](4,245760,null,0,pv,[l.ElementRef,l.Injector,d,b,A.a,l.ChangeDetectorRef,l.NgZone,Be,N,$e,rn],{projectIdentifier:[0,"projectIdentifier"],configurationObject:[1,"configurationObject"]},null),(e()(),l["ɵeld"](5,0,null,null,2,"div",[["class","work-packages-split-view--tabletimeline-footer hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"wp-table-pagination",[],null,null,null,fb,Zv)),l["ɵdid"](7,245760,null,0,Yv,[Ce,l.ChangeDetectorRef,je,b,rn,A.a],{hideForSinglePageResults:[0,"hideForSinglePageResults"]},null)],function(e,n){var t=n.component;e(n,2,0,t.configuration.withFilters),e(n,4,0,t.projectIdentifier,t.configuration);e(n,7,0,!0)},null)}function bb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.error.message||t.error)})}function yb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","work-packages-embedded-view--container loading-indicator--location"]],[[1,"data-indicator-name",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-hierarchy-disabled":0,"-compact-tables":1,"-external-height":2}),(e()(),l["ɵand"](16777216,null,null,1,null,vb)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,bb)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,!t.configuration.hierarchyToggleEnabled,t.configuration.compactTableStyle,t.externalHeight);e(n,2,0,"work-packages-embedded-view--container loading-indicator--location",l),e(n,5,0,t.renderTable),e(n,7,0,t.error)},function(e,n){e(n,0,0,n.component.uniqueEmbeddedTableName)})}var wb=l["ɵccf"]("wp-embedded-table",gt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-table",[],null,null,null,yb,gb)),l["ɵdid"](1,4964352,null,0,gt,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{providedConfiguration:"configuration",uniqueEmbeddedTableName:"uniqueEmbeddedTableName",initialLoadingIndicator:"initialLoadingIndicator",queryId:"queryId",queryProps:"queryProps",tableActions:"tableActions",externalHeight:"externalHeight"},{onError:"onError",onQueryLoaded:"onQueryLoaded"},[]),Cb=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,t)||this;return u.injector=n,u.workPackage=t,u.identifier=l,u.title=i,u.applicable=r,u.onClick=o,u}return a.d(n,e),n.factoryFor=function(e,t,l,i){return void 0===i&&(i=function(){return!0}),function(r,o){return new n(r,o,e,t,i,l)}},n.prototype.buildElement=function(){var e=this;if(!this.applicable(this.workPackage))return null;var n=document.createElement("a");return n.title=this.title,n.href="#",n.classList.add("wp-table-context-menu-icon","wp-table-action--unlink"),n.dataset.workPackageId=this.workPackage.id,n.appendChild(Pe("icon","icon-close")),jQuery(n).click(function(n){n.preventDefault(),e.onClick(e.workPackage)}),n},n}(Re),kb=function(){function e(e){this.queryUrlParamsHelper=e,this.hidden=!1}return e.prototype.refreshTable=function(){this.embeddedTable.isInitialized&&this.embeddedTable.loadQuery(!0,!1)},e.prototype.handleQueryLoaded=function(e){if(this.query instanceof Hp){var n=this.projectValuesCount(this.query),t=this.projectValuesCount(e);null!==n&&null===t&&(this.hidden=!0),n&&t&&n>0&&0===t&&(this.hidden=!0)}},e.prototype.projectValuesCount=function(e){var n=e.filters.find(function(e){return"project"===e.id});return n?n.values.length:null},e.prototype.buildQueryProps=function(){return this.query instanceof Hp?this.queryUrlParamsHelper.buildV3GetQueryFromQueryResource(this.query,{valid_subset:!0},{id:this.workPackage.id}):this.query},e}(),Ib=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,o)||this;return a.wpRelationsHierarchyService=n,a.PathHelper=t,a.wpInlineCreate=l,a.halEvents=i,a.wpCacheService=r,a.queryUrlParamsHelper=o,a.I18n=u,a.addExistingChildEnabled=!1,a.tableActions=[Cb.factoryFor("remove-child-action",a.I18n.t("js.relation_buttons.remove_child"),function(e){a.embeddedTable.loadingIndicator=a.wpRelationsHierarchyService.removeChild(e)},function(e){return!!e.changeParent})],a}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.wpInlineCreate.referenceTarget=this.workPackage,this.queryProps=this.buildQueryProps(),this.wpInlineCreate.newInlineWorkPackageCreated.pipe(Object(Gn.b)(this)).subscribe(function(n){e.halEvents.push(e.workPackage,{eventType:"association",relatedWorkPackage:n,relationType:"child"})}),this.wpCacheService.observe(this.workPackage.id).pipe(Object(Yn.a)(function(){return e.embeddedTable&&e.embeddedTable.isInitialized}),Object(Gn.b)(this)).subscribe(function(){return e.refreshTable()})},n.prototype.ngOnDestroy=function(){},n}(kb),jb=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Rb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.group.name)})}function Pb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Rb)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,2,"wp-embedded-table",[],null,[[null,"onQueryLoaded"]],function(e,n,t){var l=!0,i=e.component;"onQueryLoaded"===n&&(l=!1!==i.handleQueryLoaded(t)&&l);return l},yb,gb)),l["ɵdid"](4,4964352,[[1,4],["embeddedTable",4]],0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"],tableActions:[3,"tableActions"]},{onQueryLoaded:"onQueryLoaded"}),l["ɵpod"](5,{actionsColumnEnabled:0,hierarchyToggleEnabled:1,inlineCreateEnabled:2,compactTableStyle:3,columnMenuEnabled:4,contextMenuEnabled:5,projectIdentifier:6,projectContext:7})],function(e,n){var t=n.component;e(n,2,0,t.group);var l=e(n,5,0,!0,!1,!0,!0,!1,!1,t.workPackage.project.idFromLink,!1);e(n,4,0,l,!1,t.queryProps,t.tableActions)},null)}function Sb(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{embeddedTable:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Pb)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,!n.component.hidden)},null)}var _b=l["ɵccf"]("wp-children-query",Ib,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"wp-children-query",[],null,null,null,Sb,jb)),l["ɵprd"](512,null,Fd,Tp,[l.Injector,Ws]),l["ɵdid"](2,245760,null,0,Ib,[Ws,ge,Fd,ct,Cn,Ne,A.a],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",query:"query",group:"group",addExistingChildEnabled:"addExistingChildEnabled"},{},[]),xb=function(){function e(e,n,t,l){this.wpRelationsHierarchyService=e,this.wpCacheService=n,this.PathHelper=t,this.I18n=l,this.showEditForm=!1,this.text={parentHeadline:this.I18n.t("js.relations_hierarchy.parent_headline"),childrenHeadline:this.I18n.t("js.relations_hierarchy.children_headline")}}return e.prototype.ngOnInit=function(){var e=this;this.workPackagePath=this.PathHelper.workPackagePath(this.workPackage.id),this.canModifyHierarchy=!!this.workPackage.changeParent,this.canAddRelation=!!this.workPackage.addRelation,this.childrenQueryProps={filters:JSON.stringify([{parent:{operator:"=",values:[this.workPackage.id]}}]),"columns[]":["id","type","subject","status"],showHierarchies:!1},this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n;var t=[];e.workPackage.parent&&(t.push(e.workPackage.parent.id.toString()),e.wpCacheService.loadWorkPackage(e.workPackage.parent.id).values$().pipe(Object(y.a)(1)).subscribe(function(n){e.workPackage.parent=n})),e.wpCacheService.requireAll(t)})},e.prototype.ngOnDestroy=function(){},e}(),Tb=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ob(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,43,"div",[["class","wp-relations-hierarchy-section wp-relations--children"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,39,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](39,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),(e()(),l["ɵeld"](41,0,null,null,2,"wp-children-query",[],null,null,null,Sb,jb)),l["ɵprd"](512,null,Fd,Tp,[l.Injector,Ws]),l["ɵdid"](43,245760,null,0,Ib,[Ws,ge,Fd,ct,Cn,Ne,A.a],{workPackage:[0,"workPackage"],query:[1,"query"],addExistingChildEnabled:[2,"addExistingChildEnabled"]},null)],function(e,n){var t=n.component;e(n,43,0,t.workPackage,t.childrenQueryProps,!0)},function(e,n){e(n,3,0,n.component.text.childrenHeadline)})}var Eb=l["ɵccf"]("wp-relations-hierarchy",xb,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-hierarchy",[],null,null,null,Ob,Tb)),l["ɵdid"](1,245760,null,0,xb,[Ws,Cn,ge,A.a],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage",relationType:"relationType"},{},[]),Db=t("909l"),Fb=function(){function e(e,n,t,l){this.I18n=e,this.wpRelations=n,this.cdRef=t,this.wpCacheService=l,this.relationGroups={},this.relationGroupKeys=[],this.relationsPresent=!1,this.groupByWorkPackageType=!1,this.text={relations_header:this.I18n.t("js.work_packages.tabs.relations")},this.currentRelations=[]}return e.prototype.ngOnInit=function(){var e=this;this.canAddRelation=!!this.workPackage.addRelation,this.wpRelations.state(this.workPackage.id).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.loadedRelations(n)}),this.wpRelations.require(this.workPackage.id),this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n})},e.prototype.ngOnDestroy=function(){},e.prototype.getRelatedWorkPackages=function(e){var n=this,t=e.map(function(e){return n.wpCacheService.loadWorkPackage(e).values$()});return Db.a.apply(void 0,t)},e.prototype.getRelatedWorkPackageId=function(e){var n=e.ids;return e.to.href===this.workPackage.href?n.from:n.to},e.prototype.toggleGroupBy=function(){this.groupByWorkPackageType=!this.groupByWorkPackageType,this.buildRelationGroups()},e.prototype.buildRelationGroups=function(){var e=this;_.isNil(this.currentRelations)||(this.relationGroups=_.groupBy(this.currentRelations,function(n){if(e.groupByWorkPackageType)return n.type.name;var t=n.relatedBy.normalizedType(e.workPackage);return e.I18n.t("js.relation_labels."+t)}),this.relationGroupKeys=_.keys(this.relationGroups),this.relationsPresent=_.size(this.relationGroups)>0,this.cdRef.detectChanges())},e.prototype.loadedRelations=function(e){var n=this,t=[],l=[];if(0===_.size(e))return this.currentRelations=[],this.buildRelationGroups();_.each(e,function(e){var i=n.getRelatedWorkPackageId(e);t.push(i),l[i]=e}),this.getRelatedWorkPackages(t).pipe(Object(y.a)(1)).subscribe(function(e){n.currentRelations=e.map(function(e){return e.relatedBy=l[e.id],e}),n.buildRelationGroups()})},e}(),Nb=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ab(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","wp-relations-hierarchy-section"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,3,0,n.component.text.relations_header)})}function Vb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"wp-relations-group",[],null,[[null,"onToggleGroupBy"]],function(e,n,t){var l=!0,i=e.component;"onToggleGroupBy"===n&&(l=!1!==i.toggleGroupBy()&&l);return l},Ef,_f)),l["ɵdid"](2,49152,null,0,Sf,[A.a],{relatedWorkPackages:[0,"relatedWorkPackages"],workPackage:[1,"workPackage"],header:[2,"header"],firstGroup:[3,"firstGroup"],groupByWorkPackageType:[4,"groupByWorkPackageType"]},{onToggleGroupBy:"onToggleGroupBy"})],function(e,n){var t=n.component;e(n,2,0,t.relationGroups[n.context.$implicit],t.workPackage,n.context.$implicit,n.context.first,t.groupByWorkPackageType)},null)}function Mb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-create",[],null,null,null,qf,Nf)),l["ɵdid"](1,49152,null,0,Ff,[A.a,On,qn,ct,Cn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function qb(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","loading-indicator--location"],["data-indicator-name","relation-groups"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ab)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Vb)),l["ɵdid"](4,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Mb)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](7,0,null,null,1,"wp-relations-hierarchy",[],null,null,null,Ob,Tb)),l["ɵdid"](8,245760,null,0,xb,[Ws,Cn,ge,A.a],{workPackage:[0,"workPackage"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.relationsPresent),e(n,4,0,t.relationGroupKeys),e(n,6,0,t.canAddRelation),e(n,8,0,t.workPackage)},null)}l["ɵccf"]("wp-relations",Fb,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations",[],null,null,null,qb,Nb)),l["ɵdid"](1,245760,null,0,Fb,[A.a,On,l.ChangeDetectorRef,Cn],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var Lb=function(){function e(e,n,t){this.I18n=e,this.$transition=n,this.wpCacheService=t}return e.prototype.ngOnInit=function(){var e=this,n=this.workPackageId||this.$transition.params("to").workPackageId;this.wpCacheService.loadWorkPackage(n).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackageId=n.id,e.workPackage=n})},e.prototype.ngOnDestroy=function(){},e}(),$b=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Hb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["class","detail-panel-description detail-panel--relations detail-panel--autocomplete-target"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","detail-panel-description-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"wp-relations",[],null,null,null,qb,Nb)),l["ɵdid"](3,245760,null,0,Fb,[A.a,On,l.ChangeDetectorRef,Cn],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,3,0,n.component.workPackage)},null)}function Bb(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Hb)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var zb=l["ɵccf"]("wp-relations-tab",Lb,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-relations-tab",[],null,null,null,Bb,$b)),l["ɵdid"](1,245760,null,0,Lb,[A.a,g.J,Cn],null,null)],function(e,n){e(n,1,0)},null)},{workPackageId:"workPackageId"},{},[]),Wb=function(){function e(e,n,t,l,i,r,o,u,a){this.I18n=e,this.elementRef=n,this.wpWatchersService=t,this.$transition=l,this.notificationService=i,this.loadingIndicator=r,this.wpCacheService=o,this.cdRef=u,this.pathHelper=a,this.trackByHref=_r.trackByHref,this.error=!1,this.noResults=!1,this.allowedToView=!1,this.allowedToAdd=!1,this.allowedToRemove=!1,this.watching=[],this.text={loading:this.I18n.t("js.watchers.label_loading"),loadingError:this.I18n.t("js.watchers.label_error_loading"),autocomplete:{placeholder:this.I18n.t("js.watchers.typeahead_placeholder")}}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.workPackageId=this.$transition.params("to").workPackageId,this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(n){e.workPackage=n,e.loadCurrentWatchers()}),this.availableWatchersPath=this.pathHelper.api.v3.work_packages.id(this.workPackageId).available_watchers},e.prototype.loadCurrentWatchers=function(){var e=this;this.error=!1,this.allowedToView=!!this.workPackage.watchers,this.allowedToAdd=!!this.workPackage.addWatcher,this.allowedToRemove=!!this.workPackage.removeWatcher,this.allowedToView?this.wpWatchersService.require(this.workPackage).then(function(n){e.watching=n,e.cdRef.detectChanges()}).catch(function(n){e.notificationService.showError(n,e.workPackage)}):this.error=!0},Object.defineProperty(e.prototype,"loadingPromise",{set:function(e){this.loadingIndicator.wpDetails.promise=e},enumerable:!0,configurable:!0}),e.prototype.addWatcher=function(e){var n=this;this.loadingPromise=this.workPackage.addWatcher.$link.$fetch({user:{href:e.href}}).then(function(){n.wpWatchersService.require(n.workPackage,!0),n.wpCacheService.loadWorkPackage(n.workPackage.id,!0),n.cdRef.detectChanges()}).catch(function(e){return n.notificationService.showError(e,n.workPackage)})},e.prototype.removeWatcher=function(e){var n=this;this.workPackage.removeWatcher.$link.$prepare({user_id:e.id})().then(function(){_.remove(n.watching,function(n){return n.href===e.href}),n.wpWatchersService.require(n.workPackage,!0),n.wpCacheService.loadWorkPackage(n.workPackage.id,!0),n.cdRef.detectChanges()}).catch(function(e){return n.notificationService.showError(e,n.workPackage)})},e.prototype.ngOnDestroy=function(){},e}(),Qb=function(){function e(e,n){this.I18n=e,this.panelCtrl=n,this.deleting=!1}return e.prototype.ngOnInit=function(){this.text={remove:this.I18n.t("js.label_remove_watcher",{name:this.watcher.name})}},e.prototype.remove=function(){this.deleting=!0,this.panelCtrl.removeWatcher(this.watcher)},e}(),Ub=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Gb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,"div",[["class","form--selected-value--container"],["focus-within","accessible-by-keyboard"]],null,null,null,null,null)),l["ɵdid"](1,212992,null,0,ho,[l.ElementRef],null,null),(e()(),l["ɵeld"](2,0,null,null,8,"span",[["class","form--selected-value"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,7,"span",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵpod"](6,{deleting:0}),(e()(),l["ɵeld"](7,0,null,null,3,"a",[],[[1,"href",4]],null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,1,"user-avatar",[["data-class-list","avatar-mini"]],[[1,"data-user-name",0],[1,"data-user-id",0]],null,null,Qi,Bi)),l["ɵdid"](9,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],null,null),(e()(),l["ɵeld"](10,0,null,null,0,"span",[["class","work-package--watcher-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,3,"accessible-by-keyboard",[["linkClass","form--selected-value--remover"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.remove()&&l);return l},jl,Il)),l["ɵdid"](12,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkTitle:[1,"linkTitle"],linkAriaLabel:[2,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](13,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove"]],null,null,null,hl,dl)),l["ɵdid"](14,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,1,0);var l=e(n,6,0,t.deleting);e(n,5,0,l);e(n,12,0,"form--selected-value--remover",t.text.remove,t.text.remove);e(n,14,0,"icon-remove",t.text.remove)},function(e,n){var t=n.component;e(n,7,0,t.watcher.showUser.href),e(n,8,0,t.watcher.name,t.watcher.id),e(n,10,0,t.watcher.name)})}l["ɵccf"]("wp-watcher-entry",Qb,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-watcher-entry",[],null,null,null,Gb,Ub)),l["ɵdid"](1,114688,null,0,Qb,[A.a,Wb],null,null)],function(e,n){e(n,1,0)},null)},{watcher:"watcher"},{},[]);var Kb=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Yb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","notification-box--content"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.text.loadingError)})}function Zb(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-watcher-entry",[],null,null,null,Gb,Ub)),l["ɵdid"](1,114688,null,0,Qb,[A.a,Wb],{watcher:[0,"watcher"]},null)],function(e,n){e(n,1,0,n.context.$implicit)},null)}function Jb(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,17,"div",[["id","detail-panel-watchers"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Yb)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,14,"div",[],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,5,"div",[["class","work-package--watchers form--selected-value--list"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](6,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](7,{"-read-only":0}),(e()(),l["ɵand"](16777216,null,null,1,null,Zb)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵeld"](10,0,null,null,7,"div",[["class","work-package--watchers-lookup hide-when-print"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,6,"form",[["name","watcherForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,13).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,13).onReset()&&i);return i},null,null)),l["ɵdid"](12,16384,null,0,Ht.u,[],null,null),l["ɵdid"](13,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](15,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](16,0,null,null,1,"user-autocompleter",[["class","wp-watcher--autocomplete"]],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.addWatcher(t)&&l);return l},tr,Xi)),l["ɵdid"](17,114688,null,0,Ji,[l.ElementRef,Q,A.a,Mn,ge],{clearAfterSelection:[0,"clearAfterSelection"],url:[1,"url"]},{onChange:"onChange"})],function(e,n){var t=n.component;e(n,2,0,t.error);var l=e(n,7,0,!t.allowedToRemove);e(n,6,0,"work-package--watchers form--selected-value--list",l),e(n,9,0,t.watching,t.trackByHref);e(n,17,0,!0,t.availableWatchersPath)},function(e,n){var t=n.component;e(n,3,0,t.error),e(n,10,0,!t.allowedToAdd),e(n,11,0,l["ɵnov"](n,15).ngClassUntouched,l["ɵnov"](n,15).ngClassTouched,l["ɵnov"](n,15).ngClassPristine,l["ɵnov"](n,15).ngClassDirty,l["ɵnov"](n,15).ngClassValid,l["ɵnov"](n,15).ngClassInvalid,l["ɵnov"](n,15).ngClassPending)})}var Xb=l["ɵccf"]("wp-watchers-tab",Wb,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-watchers-tab",[],null,null,null,Jb,Kb)),l["ɵdid"](1,245760,null,0,Wb,[A.a,l.ElementRef,mc,g.J,qn,Nn,Cn,l.ChangeDetectorRef,ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ey=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.latestActivityInfo=[],n.trackByHref=_r.trackByHref,n}return a.d(n,e),n.prototype.ngOnInit=function(){this.workPackageId=this.workPackage.id,e.prototype.ngOnInit.call(this)},n.prototype.shouldShowToggler=function(){return!1},n.prototype.updateActivities=function(n){e.prototype.updateActivities.call(this,n),this.latestActivityInfo=this.latestActivities()},n.prototype.latestActivities=function(e){var n=this;if(void 0===e&&(e=3),this.reverse)return(t=this.unfilteredActivities.slice(0,e)).map(function(e,t){return n.info(e,t)});var t=this.unfilteredActivities.slice(-e),l=this.unfilteredActivities.length-t.length;return t.map(function(e,t){return n.info(e,l+t)})},n}(tf),ny=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ty(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","work-package-details-activities-activity"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"activity-entry",[],null,null,null,Uh,zh)),l["ɵdid"](2,114688,null,0,Bh,[ge,A.a],{workPackage:[0,"workPackage"],activity:[1,"activity"],activityNo:[2,"activityNo"],isInitial:[3,"isInitial"]},null)],function(e,n){var t=n.component.workPackage,l=n.context.$implicit.activity,i=n.context.$implicit.number(n.context.$implicit.isReversed),r=n.context.$implicit.isInitial();e(n,2,0,t,l,i,r)},null)}function ly(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","work-package-details-activities-list"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,[[1,2]],null,1,null,ty)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.latestActivityInfo,t.trackByHref)},null)}function iy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"work-package-comment",[],null,null,null,nf,Kh)),l["ɵdid"](1,245760,null,1,Gh,[l.ElementRef,l.Injector,Ph,Vs,be,Nn,Cn,qn,Vn,l.ChangeDetectorRef,A.a],{workPackage:[0,"workPackage"]},null),l["ɵqud"](603979776,1,{template:0}),(e()(),l["ɵand"](0,[[1,2]],null,0,null,ly))],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["ɵccf"]("newest-activity-on-overview",ey,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"newest-activity-on-overview",[],null,null,null,iy,ny)),l["ɵdid"](1,245760,null,0,ey,[Cn,A.a,l.ChangeDetectorRef,g.J,Vs],null,null)],function(e,n){e(n,1,0)},null)},{workPackage:"workPackage"},{},[]);var ry=function(){function e(e,n,t){var l=this;this.I18n=e,this.$state=n,this.wpCacheService=t,this.tabName=this.I18n.t("js.label_latest_activity"),this.workPackageId=this.$state.params.workPackageId,t.loadWorkPackage(this.workPackageId).values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(e){return l.workPackage=e})}return e.prototype.ngOnDestroy=function(){},e}(),oy=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function uy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](2,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,2,0,n.component.workPackage)},null)}function ay(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","attributes-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"newest-activity-on-overview",[],null,null,null,iy,ny)),l["ɵdid"](5,245760,null,0,ey,[Cn,A.a,l.ChangeDetectorRef,g.J,Vs],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,5,0,n.component.workPackage)},function(e,n){e(n,3,0,n.component.tabName)})}function sy(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,uy)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ay)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage),e(n,3,0,t.workPackage)},null)}var cy=l["ɵccf"]("wp-overview-tab",ry,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-overview-tab",[],null,null,null,sy,oy)),l["ɵdid"](1,180224,null,0,ry,[A.a,g.G,Cn],null,null)],null,null)},{},{},[]),dy=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isBusy=!1,n.ConfigurationService=n.injector.get(be),n}return a.d(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"comment"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return!0},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rawValue=this.rawValue||""},n}(ga),py=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function hy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-field-controls",[],null,[[null,"onSave"],[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.handleUserSubmit()&&l);"onCancel"===n&&(l=!1!==i.handler.handleUserCancel()&&l);return l},fa,pa)),l["ɵdid"](1,49152,null,0,da,[],{cancelTitle:[0,"cancelTitle"],saveTitle:[1,"saveTitle"],field:[2,"field"]},{onSave:"onSave",onCancel:"onCancel"})],function(e,n){var t=n.component;e(n,1,0,t.text.cancel,t.text.save,t.field)},null)}function fy(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{editor:0}),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","textarea-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-ckeditor--wrapper op-ckeditor-element"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"op-ckeditor",[],null,[[null,"onContentChange"],[null,"onInitializationFailed"],[null,"onInitialized"]],function(e,n,t){var l=!0,i=e.component;"onContentChange"===n&&(l=!1!==i.onContentChange(t)&&l);"onInitializationFailed"===n&&(l=!1!=(i.initializationError=!0)&&l);"onInitialized"===n&&(l=!1!==i.onCkeditorSetup(t)&&l);return l},Yo,Go)),l["ɵdid"](4,245760,[[1,4]],0,Qo,[l.ElementRef,Vn,A.a,be,Wo],{ckEditorType:[0,"ckEditorType"],context:[1,"context"],_content:[2,"_content"]},{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"}),(e()(),l["ɵand"](16777216,null,null,1,null,hy)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.editorType,t.ckEditorContext,t.rawValue),e(n,6,0,!(t.handler.inEditMode||t.initializationError))},null)}var gy=l["ɵccf"]("ng-component",dy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,fy,py)),l["ɵdid"](1,245760,null,0,dy,[A.a,l.ElementRef,Cu,yu,wu,l.ChangeDetectorRef,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),my=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function vy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","loading-indicator--location"],["data-indicator-name","relationAddChild"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"div",[["class","wp-relations-create--form wp-relations--add-form"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","wp-relations-input-section"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"wp-relations-autocomplete",[["hiddenOverflowContainer",".work-packages-full-view--split-left"]],null,[[null,"onSelected"],[null,"keydown.escape"]],function(e,n,t){var i=!0,r=e.component;"keydown.escape"===n&&(i=!1!==l["ɵnov"](e,4).reset()&&i);"onSelected"===n&&(i=!1!==r.onSelected(t)&&i);return i},zs,$s)),l["ɵdid"](4,1097728,null,0,qs,[b,ge,qn,Qn,Q,vn,l.ChangeDetectorRef,A.a],{workPackage:[0,"workPackage"],filterCandidatesFor:[1,"filterCandidatesFor"],additionalFilters:[2,"additionalFilters"],hiddenOverflowContainer:[3,"hiddenOverflowContainer"]},{onSelected:"onSelected"}),(e()(),l["ɵeld"](5,0,null,null,4,"div",[["class","wp-relations-controls-section relation-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,3,"accessible-by-keyboard",[["aria-hidden","false"],["linkClass","wp-create-relation--cancel"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.cancel()&&l);return l},jl,Il)),l["ɵdid"](7,49152,null,0,kl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["ɵeld"](8,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-remove"]],null,null,null,hl,dl)),l["ɵdid"](9,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"],iconTitle:[1,"iconTitle"]},null)],function(e,n){var t=n.component;e(n,4,0,t.workPackage,t.relationType,t.queryFilters,".work-packages-full-view--split-left");e(n,7,0,"wp-create-relation--cancel");e(n,9,0,"icon-remove",t.text.abort)},null)}var by=l["ɵccf"]("ng-component",xp,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,vy,my)),l["ɵdid"](1,49152,null,0,xp,[Sp,Fd,Cn,On,qn,ct,Ne,b,A.a],null,null)],null,null)},{},{},[]),yy=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.blockedTransition=function(e){var n=e.to(),t=e.from(),l=e.params("from"),i=e.params("to");return t.name&&t.name.match(/\.(new|copy)$/)?!(n.data&&n.data.allowMovingInEditMode):void 0===i.workPackageId||i.workPackageId!==l.workPackageId},n}(as),wy=function(){},Cy=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ky(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,38,"div",[["class","work-packages-page--ui-view"],["wp-isolated-query-space",""]],null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](36,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),(e()(),l["ɵeld"](37,16777216,null,null,1,"ui-view",[],null,null,null,Mt.c,Mt.a)),l["ɵdid"](38,245760,null,0,oo.a,[g.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,38,0)},null)}var Iy=l["ɵccf"]("work-packages-base",wy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"work-packages-base",[],null,null,null,ky,Cy)),l["ɵprd"](4608,null,as,yy,[]),l["ɵdid"](2,49152,null,0,wy,[],null,null)],null,null)},{},{},[]),jy=function(){function e(e){this.pathHelper=e}return e.prototype.projectImportIssuePath=function(e){return this.pathHelper.projectPath(e)+"/issues/upload"},e.prototype.projectExportIssuesPath=function(e,n){return n?this.pathHelper.projectPath(e)+"/work_packages.bcf?filters="+n:this.pathHelper.projectPath(e)+"/work_packages.bcf"},e}(),Ry=function(){function e(e,n,t){this.I18n=e,this.currentProject=n,this.bcfPathHelper=t,this.text={import:this.I18n.t("js.bcf.import")}}return e.prototype.handleClick=function(){var e=this.currentProject.identifier;if(e){var n=this.bcfPathHelper.projectImportIssuePath(e);window.location.href=n}},e}();Tt.DynamicBootstrapper.register({selector:"bcf-import-button",cls:Ry});var Py=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Sy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"a",[["class","button import-bcf-button"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.handleClick()&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-import"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["ɵted"](4,null,[" "," "]))],function(e,n){e(n,2,0,"button--icon icon-import")},function(e,n){var t=n.component;e(n,0,0,t.text.import),e(n,4,0,t.text.import)})}l["ɵccf"]("bcf-import-button",Ry,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"bcf-import-button",[],null,null,null,Sy,Py)),l["ɵdid"](1,49152,null,0,Ry,[A.a,Qn,jy],null,null)],null,null)},{},{},[]);var _y=function(){function e(e,n,t,l,i,r){this.I18n=e,this.currentProject=n,this.bcfPathHelper=t,this.querySpace=l,this.queryUrlParamsHelper=i,this.state=r,this.text={export:this.I18n.t("js.bcf.export")}}return e.prototype.ngOnInit=function(){var e=this;this.querySpace.query.values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.query=n;var t=e.currentProject.identifier,l=e.queryUrlParamsHelper.buildV3GetFilters(e.query.filters);e.exportLink=e.bcfPathHelper.projectExportIssuesPath(t,JSON.stringify(l))})},e.prototype.ngOnDestroy=function(){},e}();Tt.DynamicBootstrapper.register({selector:"bcf-export-button",cls:_y});var xy=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ty(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"a",[["class","button export-bcf-button"],["download",""]],[[8,"title",0],[1,"href",4]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-export"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["ɵted"](4,null,[" "," "]))],function(e,n){e(n,2,0,"button--icon icon-export")},function(e,n){var t=n.component;e(n,0,0,t.text.export,t.exportLink),e(n,4,0,t.text.export)})}l["ɵccf"]("bcf-export-button",_y,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"bcf-export-button",[],null,null,null,Ty,xy)),l["ɵdid"](1,245760,null,0,_y,[A.a,Qn,jy,b,Ne,g.G],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var Oy=function(e){function n(n,t,l,i){var r=e.call(this,n)||this;return r.I18n=n,r.cdRef=t,r.wpFiltersService=l,r.wpTableFilters=i,r.initialized=!1,r.buttonId="work-packages-filter-toggle-button",r.iconClass="icon-filter",r}return a.d(n,e),n.prototype.ngOnInit=function(){this.setupObserver()},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"labelKey",{get:function(){return"js.button_filter"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textKey",{get:function(){return"js.toolbar.filter"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.prefix+this.text.label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filterCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),n.prototype.performAction=function(e){this.toggleVisibility()},n.prototype.toggleVisibility=function(){this.wpFiltersService.toggleVisibility()},n.prototype.setupObserver=function(){var e=this;this.wpTableFilters.live$().pipe(Object(Gn.b)(this)).subscribe(function(){e.count=e.wpTableFilters.currentlyVisibleFilters.length,e.initialized=!0,e.cdRef.detectChanges()}),this.wpFiltersService.observeUntil(Object(Gn.a)(this)).subscribe(function(){e.isActive=e.wpFiltersService.visible,e.cdRef.detectChanges()})},n}(Oi),Ey=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Dy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","badge -secondary"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.filterCount)})}function Fy(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,9,"button",[["class","button"]],[[1,"id",0],[1,"accesskey",0],[1,"title",0],[1,"aria-label",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.performAction(t)&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-active":0}),(e()(),l["ɵeld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](6,0,null,null,3,"span",[["class","button--text"]],null,null,null,null,null)),(e()(),l["ɵted"](7,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,Dy)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,i=e(n,3,0,t.isActive);e(n,2,0,"button",i),e(n,5,0,l["ɵinlineInterpolate"](1,"",t.iconClass," button--icon")),e(n,9,0,t.initialized)},function(e,n){var t=n.component;e(n,0,0,t.buttonId,t.accessKey,t.label,t.label,t.disabled),e(n,7,0,t.buttonText)})}l["ɵccf"]("wp-filter-button",Oy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-filter-button",[],null,null,null,Fy,Ey)),l["ɵdid"](1,245760,null,0,Oy,[A.a,l.ChangeDetectorRef,Ze,en],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var Ny=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t)||this;return o.elementRef=n,o.opContextMenu=t,o.I18n=l,o.wpDisplayRepresentationService=i,o.wpTableTimeline=r,o}return a.d(n,e),n.prototype.open=function(e){this.buildItems(),this.opContextMenu.show(this,e)},Object.defineProperty(n.prototype,"locals",{get:function(){return{items:this.items,contextMenuId:"wp-view-context-menu"}},enumerable:!0,configurable:!0}),n.prototype.buildItems=function(){var e=this;this.items=[],"card"!==this.wpDisplayRepresentationService.current&&this.items.push({linkText:this.I18n.t("js.views.card"),icon:"icon-view-card",onClick:function(n){return e.wpDisplayRepresentationService.setDisplayRepresentation("card"),e.wpTableTimeline.isVisible&&e.wpTableTimeline.toggle(),!0}}),(this.wpTableTimeline.isVisible||"card"===this.wpDisplayRepresentationService.current)&&this.items.push({linkText:this.I18n.t("js.views.list"),icon:"icon-view-list",onClick:function(n){return e.wpDisplayRepresentationService.setDisplayRepresentation("list"),e.wpTableTimeline.isVisible&&e.wpTableTimeline.toggle(),!0}}),this.wpTableTimeline.isVisible&&"card"!==this.wpDisplayRepresentationService.current||this.items.push({linkText:this.I18n.t("js.views.timeline"),icon:"icon-view-timeline",onClick:function(n){return e.wpTableTimeline.isVisible||e.wpTableTimeline.toggle(),e.wpDisplayRepresentationService.setDisplayRepresentation("list"),!0}})},n}(xc),Ay=function(){function e(e,n,t,l){this.I18n=e,this.cdRef=n,this.wpDisplayRepresentationService=t,this.wpTableTimeline=l,this.text={card:this.I18n.t("js.views.card"),list:this.I18n.t("js.views.list"),timeline:this.I18n.t("js.views.timeline")}}return e.prototype.ngOnInit=function(){var e=this;Object(Ac.a)([this.wpDisplayRepresentationService.live$(),this.wpTableTimeline.live$()]).pipe(Object(Gn.b)(this)).subscribe(function(n){var t=n[0],l=n[1];e.detectView(t,l.visible),e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e.prototype.detectView=function(e,n){this.view="card"!==e?n?"timeline":"list":"card"},e}();Tt.DynamicBootstrapper.register({selector:"wp-view-toggle-button",cls:Ay});var Vy=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function My(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,6,"button",[["class","button"],["id","wp-view-toggle-button"],["wpViewDropdown",""]],null,null,null,null,null)),l["ɵdid"](1,4210688,null,0,Ny,[l.ElementRef,is,A.a,_n,N],null,null),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](4,0,null,null,0,"span",[["aria-hidden","true"],["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-small icon-pulldown"]],null,null,null,hl,dl)),l["ɵdid"](6,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,3,0,l["ɵinlineInterpolate"](1,"button--icon icon-view-",t.view,""));e(n,6,0,"button--icon icon-small icon-pulldown")},function(e,n){var t=n.component;e(n,4,0,t.text[t.view])})}l["ɵccf"]("wp-view-toggle-button",Ay,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-view-toggle-button",[],null,null,null,My,Vy)),l["ɵdid"](1,245760,null,0,Ay,[A.a,l.ChangeDetectorRef,_n,N],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var qy=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,t)||this;return a.$state=n,a.I18n=t,a.transitions=l,a.cdRef=i,a.states=r,a.wpTableFocus=o,a.keepTab=u,a.accessKey=8,a.activeState="work-packages.list.details",a.listState="work-packages.list",a.buttonId="work-packages-details-view-button",a.buttonClass="toolbar-icon",a.iconClass="icon-info2",a.activateLabel=t.t("js.button_open_details"),a.deactivateLabel=t.t("js.button_close_details"),a.transitionListener=a.transitions.onSuccess({},function(){a.isActive=a.$state.includes(a.activeState),a.cdRef.detectChanges()}),a}return a.d(n,e),n.prototype.ngOnDestroy=function(){this.transitionListener()},Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.performAction=function(e){this.isActive?this.openListView():this.openDetailsView()},n.prototype.openListView=function(){var e={projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.listState,e)},n.prototype.openDetailsView=function(){var e={workPackageId:this.wpTableFocus.focusedWorkPackage,projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.keepTab.currentDetailsState,e)},n}(Oi),Ly=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function $y(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,6,"button",[["type","button"]],[[8,"disabled",0],[1,"id",0],[1,"title",0],[1,"accesskey",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.performAction(t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-active":0}),l["ɵdid"](4,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](6,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component,i=l["ɵinlineInterpolate"](1,"button ",t.buttonClass,""),r=e(n,3,0,t.isActive);e(n,2,0,i,r),e(n,6,0,l["ɵinlineInterpolate"](1,"",t.iconClass," button--icon"))},function(e,n){var t=n.component;e(n,0,0,t.disabled||!t.isToggle()&&t.isActive,t.buttonId,t.label,t.accessKey)})}l["ɵccf"]("wp-details-view-button",qy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-details-view-button",[],null,null,null,$y,Ly)),l["ɵdid"](1,180224,null,0,qy,[g.G,A.a,g.O,l.ChangeDetectorRef,d,jc,_e],null,null)],null,null)},{},{},[]);var Hy=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.I18n=n,i.cdRef=t,i.wpTableTimeline=l,i.buttonId="work-packages-timeline-toggle-button",i.iconClass="icon-view-timeline",i.minZoomLevel="days",i.maxZoomLevel="years",i.isAutoZoom=!1,i.isMaxLevel=!1,i.isMinLevel=!1,i.activateLabel=n.t("js.timelines.button_activate"),i.deactivateLabel=n.t("js.timelines.button_deactivate"),i.text.zoomIn=n.t("js.timelines.zoom.in"),i.text.zoomOut=n.t("js.timelines.zoom.out"),i.text.zoomAuto=n.t("js.timelines.zoom.auto"),i}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.wpTableTimeline.live$().pipe(Object(Gn.b)(this)).subscribe(function(){e.isAutoZoom=e.wpTableTimeline.isAutoZoom(),e.isActive=e.wpTableTimeline.isVisible,e.cdRef.detectChanges()}),this.wpTableTimeline.appliedZoomLevel$.values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.isMaxLevel=n===e.maxZoomLevel,e.isMinLevel=n===e.minZoomLevel,e.cdRef.detectChanges()})},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"label",{get:function(){return this.isActive?this.deactivateLabel:this.activateLabel},enumerable:!0,configurable:!0}),n.prototype.isToggle=function(){return!0},n.prototype.updateZoomWithDelta=function(e){this.wpTableTimeline.updateZoomWithDelta(e)},n.prototype.performAction=function(e){this.toggleTimeline()},n.prototype.toggleTimeline=function(){this.wpTableTimeline.toggle()},n.prototype.enableAutoZoom=function(){this.wpTableTimeline.enableAutozoom()},n.prototype.getAutoZoomToggleClass=function(){return this.isAutoZoom?"-disabled":""},n}(Oi),By=[[".toolbar-button-group[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{margin-right:10px}"]],zy=l["ɵcrt"]({encapsulation:0,styles:By,data:{}});function Wy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-auto-button"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.enableAutoZoom()&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-auto button--icon"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"button timeline-toolbar--button toolbar-icon",n.component.getAutoZoomToggleClass());e(n,5,0,"icon-zoom-auto button--icon")},function(e,n){e(n,1,0,n.component.text.zoomAuto)})}function Qy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-out-button"]],[[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.updateZoomWithDelta(1)&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-out button--icon"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-zoom-out button--icon")},function(e,n){var t=n.component;e(n,1,0,t.text.zoomOut,t.isMaxLevel)})}function Uy(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"button",[["class","button timeline-toolbar--button toolbar-icon"],["id","work-packages-timeline-zoom-in-button"]],[[1,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.updateZoomWithDelta(-1)&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-zoom-in button--icon"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-zoom-in button--icon")},function(e,n){var t=n.component;e(n,1,0,t.text.zoomIn,t.isMinLevel)})}function Gy(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,6,"ul",[["class","toolbar-button-group"],["id","work-packages-timeline-mode-selection"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Wy)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Qy)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Uy)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isActive),e(n,4,0,t.isActive),e(n,6,0,t.isActive)},null)}l["ɵccf"]("wp-timeline-toggle-button",Hy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-timeline-toggle-button",[],null,null,null,Gy,zy)),l["ɵdid"](1,245760,null,0,Hy,[A.a,l.ChangeDetectorRef,N],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var Ky,Yy=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,n,o,l)||this;return a.locals=n,a.I18n=t,a.elementRef=l,a.UrlParamsHelper=i,a.querySpace=r,a.cdRef=o,a.wpTableColumns=u,a.closeOnEscape=!0,a.closeOnOutsideClick=!0,a.text={title:a.I18n.t("js.label_export"),closePopup:a.I18n.t("js.close_popup_title")},a}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.querySpace.results.valuesPromise().then(function(e){return n.exportOptions=n.buildExportOptions(e)})},n.prototype.buildExportOptions=function(e){var n=this;return e.representations.map(function(e){var t=e.$link;return{identifier:t.identifier,label:t.title,url:n.addColumnsToHref(e.href)}})},n.prototype.addColumnsToHref=function(e){var n=this.wpTableColumns.getColumns().map(function(e){return e.id}),t=URI(e);return t.removeSearch("columns[]"),t.addSearch("columns[]",n),t.toString()},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n}(He.a),Zy=function(e){function n(n,t,l,i,r,o,u,a,s){var c=e.call(this,t,a,n)||this;return c.elementRef=n,c.locals=t,c.I18n=l,c.states=i,c.querySpace=r,c.wpListService=o,c.halNotification=u,c.cdRef=a,c.notificationsService=s,c.queryName="",c.isStarred=!1,c.isPublic=!1,c.isBusy=!1,c.text={title:c.I18n.t("js.modals.form_submit.title"),text:c.I18n.t("js.modals.form_submit.text"),save_as:c.I18n.t("js.label_save_as"),label_name:c.I18n.t("js.modals.label_name"),label_visibility_settings:c.I18n.t("js.label_visibility_settings"),button_save:c.I18n.t("js.modals.button_save"),button_cancel:c.I18n.t("js.button_cancel"),close_popup:c.I18n.t("js.close_popup_title")},c}return a.d(n,e),n.prototype.setValues=function(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic},n.prototype.onOpen=function(){this.queryNameField.nativeElement.focus()},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n.prototype.saveQueryAs=function(e){var n=this;if(!this.isBusy&&this.queryName){this.isBusy=!0;var t=this.querySpace.query.value;t.public=this.isPublic,this.wpListService.create(t,this.queryName).then(function(t){return n.isStarred&&!t.starred?n.wpListService.toggleStarred(t).then(function(){return n.closeMe(e)}):(n.closeMe(e),Promise.resolve(!0))}).catch(function(e){return n.halNotification.handleRawError(e)}).then(function(){return n.isBusy=!1})}},n}(He.a),Jy=function(e){function n(n,t,l,i,r,o,u,a,s){var c=e.call(this,t,o,n)||this;return c.elementRef=n,c.locals=t,c.I18n=l,c.states=i,c.querySpace=r,c.cdRef=o,c.wpListService=u,c.halNotification=a,c.notificationsService=s,c.isStarred=!1,c.isPublic=!1,c.isBusy=!1,c.text={title:c.I18n.t("js.modals.form_submit.title"),text:c.I18n.t("js.modals.form_submit.text"),save_as:c.I18n.t("js.label_save_as"),label_name:c.I18n.t("js.modals.label_name"),label_visibility_settings:c.I18n.t("js.label_visibility_settings"),button_save:c.I18n.t("js.modals.button_save"),button_cancel:c.I18n.t("js.button_cancel"),close_popup:c.I18n.t("js.close_popup_title")},c}return a.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.query=this.querySpace.query.value,this.isStarred=this.query.starred,this.isPublic=this.query.public},n.prototype.setValues=function(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return jQuery("#work-packages-settings-button")},enumerable:!0,configurable:!0}),n.prototype.saveQuery=function(e){var n=this;if(!this.isBusy){this.isBusy=!0;var t=[];this.query.public!==this.isPublic&&(this.query.public=this.isPublic,t.push(this.wpListService.save(this.query))),this.query.starred!==this.isStarred&&t.push(this.wpListService.toggleStarred(this.query)),Promise.all(t).then(function(){n.closeMe(e),n.isBusy=!1}).catch(function(){n.notificationsService.addError(n.I18n.t("js.errors.query_saving")),n.isBusy=!1})}},n}(He.a);!function(e){function n(e,n){return e===n||e.contains(n)}e.whenOutside=function(e,t){setTimeout(function(){n(e,document.activeElement)||t()},20)},e.insideOrSelf=n}(Ky||(Ky={}));var Xy="editable-toolbar-title",ew=function(){function e(e){this.injector=e,this.editable=!0,this.inFlight=!1,this.showSaveCondition=!1,this.initialFocus=!1,this.smallHeader=!1,this.onSave=new l.EventEmitter,this.onEmptySubmit=new l.EventEmitter,this.selectableTitleIdentifier=Xy,this.elementRef=this.injector.get(l.ElementRef),this.I18n=this.injector.get(A.a),this.text={click_to_edit:this.I18n.t("js.work_packages.query.click_to_edit_query_name"),press_enter_to_save:this.I18n.t("js.label_press_enter_to_save"),query_has_changed_click_to_save:this.I18n.t("js.label_view_has_changed"),input_title:"",input_placeholder:this.I18n.t("js.work_packages.query.rename_query_placeholder"),search_query_title:this.I18n.t("js.toolbar.search_query_title"),confirm_edit_cancel:this.I18n.t("js.work_packages.query.confirm_edit_cancel"),duplicate_query_title:this.I18n.t("js.work_packages.query.errors.duplicate_query_title")}}return e.prototype.ngOnInit=function(){var e=this;this.text.input_title=this.text.click_to_edit+" "+this.text.press_enter_to_save,jQuery(this.elementRef.nativeElement).on("op:selectableTitle:trigger",function(n,t){void 0===t&&(t=""),e.inputField&&(e.selectedTitle=t,setTimeout(function(){e.inputField.nativeElement.focus()},20),n.stopPropagation())})},e.prototype.ngOnChanges=function(e){if(e.inputTitle&&(this.selectedTitle=e.inputTitle.currentValue),e.initialFocus&&e.initialFocus.firstChange&&this.inputField){var n=this.inputField.nativeElement;this.selectInputOnInitalFocus(n)}},e.prototype.onFocus=function(e){this.selectInputOnInitalFocus(e.target)},e.prototype.selectInputOnInitalFocus=function(e){this.initialFocus&&(e.select(),this.initialFocus=!1)},e.prototype.saveWhenFocusOutside=function(e){var n=this;Ky.whenOutside(this.elementRef.nativeElement,function(){return n.save(e)})},e.prototype.reset=function(){this.resetInputField(),this.selectedTitle=this.inputTitle},Object.defineProperty(e.prototype,"showSave",{get:function(){return this.editable&&this.showSaveCondition},enumerable:!0,configurable:!0}),e.prototype.save=function(e,n){var t=this;void 0===n&&(n=!1),e.preventDefault(),this.resetInputField(),this.selectedTitle=this.selectedTitle.trim(),this.isEmpty?this.onEmptyError():(n||this.inputTitle!==this.selectedTitle)&&(this.inputField&&this.inputField.nativeElement.blur(),this.inFlight||(this.inFlight=!0,this.emitSave(this.selectedTitle),setTimeout(function(){return t.inFlight=!1},100)))},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return""===this.selectedTitle},enumerable:!0,configurable:!0}),e.prototype.emitSave=function(e){this.onSave.emit(e)},e.prototype.onEmptyError=function(){this.onEmptySubmit.emit(),this.focusInputOnError()},e.prototype.focusInputOnError=function(){if(this.inputField){var e=this.inputField.nativeElement;e.classList.add("-error"),e.focus()}},e.prototype.resetInputField=function(){this.inputField&&this.inputField.nativeElement.classList.remove("-error")},e}(),nw=function(e){function n(n,t,l,i,r,o,u,a,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.opContextMenu=t,c.opModalService=l,c.wpListService=i,c.authorisationService=r,c.states=o,c.injector=u,c.querySpace=a,c.I18n=s,c.focusAfterClose=!0,c}return a.d(n,e),n.prototype.ngOnDestroy=function(){},n.prototype.ngAfterViewInit=function(){var n=this;e.prototype.ngAfterViewInit.call(this),this.querySpace.query.values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(e){n.query=e}),this.loadingPromise=this.querySpace.queryForm.valuesPromise(),this.querySpace.queryForm.values$().pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(e){n.form=e})},n.prototype.open=function(e){var n=this;this.loadingPromise.then(function(){n.buildItems(),n.opContextMenu.show(n,e)})},Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"settingsDropdown",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.onClose=function(){this.focusAfterClose&&this.afterFocusOn.focus()},n.prototype.allowQueryAction=function(e,n){return this.allowAction(e,"query",n)},n.prototype.allowWorkPackageAction=function(e,n){return this.allowAction(e,"work_packages",n)},n.prototype.allowFormAction=function(e,n){return!!this.form.$links[n]||(e.stopPropagation(),!1)},n.prototype.allowAction=function(e,n,t){return!!this.authorisationService.can(n,t)||(e.stopPropagation(),!1)},n.prototype.buildItems=function(){var e=this;this.items=[{disabled:!1,linkText:this.I18n.t("js.toolbar.settings.configure_view"),icon:"icon-settings",onClick:function(n){return e.opContextMenu.close(),e.opModalService.show(zn,e.injector),!0}},{linkText:this.I18n.t("js.work_packages.query.insert_columns"),icon:"icon-columns",onClick:function(){return e.opModalService.show(zn,e.injector,{initialTab:"columns"}),!0}},{linkText:this.I18n.t("js.toolbar.settings.sort_by"),icon:"icon-sort-by",onClick:function(){return e.opModalService.show(zn,e.injector,{initialTab:"sort-by"}),!0}},{linkText:this.I18n.t("js.toolbar.settings.group_by"),icon:"icon-group-by",onClick:function(){return e.opModalService.show(zn,e.injector,{initialTab:"display-settings"}),!0}},{disabled:!this.query.id||this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.page_settings"),icon:"icon-edit",onClick:function(n){return e.allowQueryAction(n,"update")&&(e.focusAfterClose=!1,jQuery(""+Xy).trigger("op:selectableTitle:trigger")),!0}},{disabled:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save"),icon:"icon-save",onClick:function(n){var t=e.query;return!t.persisted&&e.allowQueryAction(n,"updateImmediately")?e.opModalService.show(Zy,e.injector):t.id&&e.allowQueryAction(n,"updateImmediately")&&e.wpListService.save(t),!0}},{disabled:this.form?!this.form.$links.create_new:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save_as"),icon:"icon-save",onClick:function(n){return e.allowFormAction(n,"create_new")&&e.opModalService.show(Zy,e.injector),!0}},{disabled:this.authorisationService.cannot("query","delete"),linkText:this.I18n.t("js.toolbar.settings.delete"),icon:"icon-delete",onClick:function(n){return e.allowQueryAction(n,"delete")&&window.confirm(e.I18n.t("js.text_query_destroy_confirmation"))&&e.wpListService.delete(),!0}},{disabled:this.authorisationService.cannot("work_packages","representations"),linkText:this.I18n.t("js.toolbar.settings.export"),icon:"icon-export",onClick:function(n){return e.allowWorkPackageAction(n,"representations")&&e.opModalService.show(Yy,e.injector),!0}},{disabled:this.authorisationService.cannot("query","unstar")&&this.authorisationService.cannot("query","star"),linkText:this.I18n.t("js.toolbar.settings.visibility_settings"),icon:"icon-watched",onClick:function(n){return(e.allowQueryAction(n,"unstar")||e.allowQueryAction(n,"star"))&&e.opModalService.show(Jy,e.injector),!0}},{divider:!0,hidden:!(this.query.results.customFields&&this.form.configureForm)},{hidden:!this.query.results.customFields,href:this.query.results.customFields&&this.query.results.customFields.href,linkText:this.query.results.customFields&&this.query.results.customFields.name,icon:"icon-custom-fields",onClick:function(){return!1}}]},n}(xc),tw=function(){function e(e,n,t,i,r){this.pathHelper=e,this.I18n=n,this.$state=t,this.wpTableSelection=i,this.cardView=r,this.showInfoButton=!1,this.showStatusButton=!0,this.showRemoveButton=!1,this.highlightingMode="inline",this.draggable=!1,this.orientation="vertical",this.onRemove=new l.EventEmitter,this.uiStateLinkClass=xe,this.text={removeCard:this.I18n.t("js.card.remove_from_list"),detailsView:this.I18n.t("js.button_open_details")}}return e.prototype.classIdentifier=function(e){return this.cardView.classIdentifier(e)},e.prototype.openSplitScreen=function(e){var n=this.classIdentifier(e);this.wpTableSelection.setSelection(e.id,this.cardView.findRenderedCard(n)),this.$state.go("work-packages.list.details",{workPackageId:e.id})},e.prototype.cardClasses=function(e){var n=this.isSelected(e)?"-checked":"";return n+=this.draggable?" -draggable":"",n+=e.isNew?" -new":"",n+=" wp-card-"+e.id,n+=" -"+this.orientation},e.prototype.isSelected=function(e){return this.wpTableSelection.isSelected(e.id)},e.prototype.wpTypeAttribute=function(e){return e.type.name},e.prototype.wpSubject=function(e){return e.subject},e.prototype.cardHighlightingClass=function(e){return this.cardHighlighting(e)},e.prototype.typeHighlightingClass=function(e){return this.attributeHighlighting("type",e)},e.prototype.onRemoved=function(e){this.onRemove.emit(e)},e.prototype.bcfSnapshotPath=function(e){var n=_.get(e,"bcf.viewpoints[0]");return n?this.pathHelper.attachmentDownloadPath(n.id,n.file_name):null},e.prototype.cardHighlighting=function(e){return["status","priority","type"].includes(this.highlightingMode)?Ul.backgroundClass(this.highlightingMode,e[this.highlightingMode].id):""},e.prototype.attributeHighlighting=function(e,n){return Ul.inlineClass(e,n.type.id)},e}(),lw=[['.wp-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;border:1px solid var(--widget-box-block-border-color);border-radius:2px;padding:10px;position:relative;box-shadow:1px 1px 3px 0 #d3d3d3;background:var(--body-background);font-size:var(--card-font-size);max-width:400px}.wp-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #d3d3d3}.wp-card.-new[_ngcontent-%COMP%]{padding-right:25px}.wp-card.-checked[_ngcontent-%COMP%]{background-color:var(--table-row-highlighting-color)}.wp-card.-horizontal[_ngcontent-%COMP%]{height:100%}.wp-card.-vertical[_ngcontent-%COMP%]{margin-top:10px}.wp-card.-vertical[_ngcontent-%COMP%]:last-of-type{margin-bottom:3px}.wp-card--content[_ngcontent-%COMP%]:not(.-new){display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:auto 1fr auto;grid-row-gap:10px;grid-template-areas:"type type type" "subject subject subject" "attributeTag avatar idlink";overflow:hidden;flex-grow:1}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--type[_ngcontent-%COMP%]{grid-area:type}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--subject[_ngcontent-%COMP%]{grid-area:subject;max-width:230px;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;white-space:normal}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--assignee[_ngcontent-%COMP%]{grid-area:avatar;place-self:center left}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--id[_ngcontent-%COMP%]{grid-area:idlink;place-self:center right}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--status[_ngcontent-%COMP%]{grid-area:attributeTag;max-width:120px;margin-right:5px;overflow:hidden}.wp-card--highlighting[_ngcontent-%COMP%]{width:5px;height:100%;position:absolute;top:0;left:0;border-radius:2px 0 0 2px}.wp-card--inline-buttons[_ngcontent-%COMP%]{position:absolute;right:0;top:5px;opacity:0}.wp-card--inline-buttons.-show[_ngcontent-%COMP%], .wp-card[_ngcontent-%COMP%]:hover   .wp-card--inline-buttons[_ngcontent-%COMP%]{opacity:1}.wp-card--cover-image[_ngcontent-%COMP%]{display:block;margin:-10px -10px 10px;width:calc(100% + 10px + 10px);max-width:calc(100% + 10px + 10px);flex-basis:200px;object-fit:cover}@media only screen and (max-width:679px){.wp-card[_ngcontent-%COMP%]{max-width:none}}']],iw=l["ɵcrt"]({encapsulation:0,styles:lw,data:{}});function rw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"a",[["class","wp-card--inline-cancel-button -no-decoration"]],[[8,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,4).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.onRemoved(r.workPackage)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-show":0}),l["ɵdid"](4,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-close"]],null,null,null,hl,dl)),l["ɵdid"](6,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=e(n,3,0,n.component.workPackage.isNew);e(n,2,0,"wp-card--inline-cancel-button -no-decoration",t);e(n,6,0,"icon icon-close")},function(e,n){e(n,0,0,n.component.text.removeCard)})}function ow(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"a",[["class","-no-decoration"]],[[8,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.openSplitScreen(r.workPackage)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon icon-info2"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon icon-info2")},function(e,n){e(n,0,0,n.component.text.detailsView)})}function uw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"],initializeEditMode:[1,"initializeEditMode"]},null),(e()(),l["ɵeld"](2,0,null,0,4,"div",[["class","wp-card--content -new"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"editable-attribute-field",[["class","wp-card--type"]],null,null,null,ps,ds)),l["ɵdid"](4,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"]},null),(e()(),l["ɵeld"](5,0,null,null,1,"editable-attribute-field",[["class","wp-card--subject -bold"],["fieldName","subject"]],null,null,null,ps,ds)),l["ɵdid"](6,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){var t=n.component;e(n,1,0,t.workPackage,t.workPackage.isNew);e(n,4,0,"type",t.workPackage,"work-packages--type-selector");e(n,6,0,"subject",t.workPackage)},null)}function aw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"img",[["class","wp-card--cover-image"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.bcfSnapshotPath(t.workPackage))})}function sw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-status-button",[["class","wp-card--status"]],null,null,null,yd,md)),l["ɵdid"](1,245760,null,0,fd,[A.a,l.ChangeDetectorRef,Cn,ns],{workPackage:[0,"workPackage"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}function cw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[["class","wp-card--assignee"],["data-class-list","avatar-mini"]],null,null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],{user:[0,"user"]},null)],function(e,n){e(n,1,0,n.component.workPackage.assignee)},null)}function dw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,15,"div",[["class","wp-card--content"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"span",[["class","wp-card--type"]],[[8,"textContent",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](4,0,null,null,6,"a",[["class","wp-card--id"],["uiSref","work-packages.show"]],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,6).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](6,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](7,{workPackageId:0}),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](9,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵted"](10,null,[" #"," "])),(e()(),l["ɵeld"](11,0,null,null,0,"span",[["class","wp-card--subject"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,sw)),l["ɵdid"](13,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,cw)),l["ɵdid"](15,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,"wp-card--type",t.typeHighlightingClass(t.workPackage));var l=e(n,7,0,t.workPackage.id);e(n,6,0,"work-packages.show",l);e(n,9,0,"wp-card--id",t.uiStateLinkClass),e(n,13,0,t.showStatusButton),e(n,15,0,t.workPackage.assignee)},function(e,n){var t=n.component;e(n,1,0,t.wpTypeAttribute(t.workPackage)),e(n,10,0,t.workPackage.id),e(n,11,0,t.wpSubject(t.workPackage))})}function pw(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,16,"div",[["class","wp-card"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","wp-card--highlighting"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l["ɵeld"](6,0,null,null,4,"div",[["class","wp-card--inline-buttons hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,rw)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ow)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,uw)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,aw)),l["ɵdid"](14,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,dw)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"wp-card",t.cardClasses(t.workPackage));e(n,5,0,"wp-card--highlighting",t.cardHighlightingClass(t.workPackage)),e(n,8,0,t.workPackage.isNew||t.showRemoveButton),e(n,10,0,!t.workPackage.isNew&&t.showInfoButton),e(n,12,0,t.workPackage.isNew),e(n,14,0,t.bcfSnapshotPath(t.workPackage)),e(n,16,0,!t.workPackage.isNew)},null)}var hw=l["ɵccf"]("wp-single-card",tw,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-single-card",[],null,null,null,pw,iw)),l["ɵdid"](1,49152,null,0,tw,[ge,A.a,g.G,Ic,Ep],null,null)],null,null)},{workPackage:"workPackage",showInfoButton:"showInfoButton",showStatusButton:"showStatusButton",showRemoveButton:"showRemoveButton",highlightingMode:"highlightingMode",draggable:"draggable",orientation:"orientation"},{onRemove:"onRemove"},[]),fw=function(){this.setHostClass=!0},gw=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function mw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.description)})}function vw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-info1"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"span",[["class","generic-table--no-results-title"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,mw)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.component.description)},function(e,n){e(n,2,0,n.component.title)})}l["ɵccf"]("no-results",fw,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],null,null)],null,function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})},{title:"title",description:"description"},{},[]);var bw=function(){function e(e,n){this.injector=e,this.deviceService=this.injector.get(dt),this.$state=this.injector.get(g.G),this.wpTableSelection=this.injector.get(Ic),this.wpTableFocus=this.injector.get(jc),this.wpCardView=this.injector.get(Ep)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"click.cardView.card"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-card"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container.nativeElement)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(t.is("a")||t.parent().is("a"))return!0;var l=t.closest("wp-single-card"),i=l.data("workPackageId"),r=l.data("classIdentifier");if(!i)return!0;var o=this.wpCardView.findRenderedCard(r);return n.ctrlKey||n.metaKey||n.shiftKey||this.wpTableSelection.setSelection(i,o),n.shiftKey&&this.wpTableSelection.setMultiSelectionFrom(this.wpCardView.renderedCards,i,o),(n.ctrlKey||n.metaKey)&&this.wpTableSelection.toggleRow(i),this.wpTableFocus.updateFocus(i),this.deviceService.isMobile&&this.$state.go("work-packages.show",{workPackageId:i}),!1},e}(),yw=function(){function e(e,n){this.injector=e,this.$state=this.injector.get(g.G),this.wpTableSelection=this.injector.get(Ic)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"dblclick.cardView.card"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-card"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container.nativeElement)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(t.is("a")||t.parent().is("a"))return!0;var l=t.closest("wp-single-card").data("workPackageId");return!l||(this.$state.go("work-packages.show",{workPackageId:l}),!1)},e}(),ww=function(){function e(e,n){this.injector=e,this.wpTableSelection=this.injector.get(Ic),this.wpCardView=this.injector.get(Ep),this.opContextMenu=this.injector.get(is)}return Object.defineProperty(e.prototype,"EVENT",{get:function(){return"contextmenu.cardView.rightclick"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SELECTOR",{get:function(){return".wp-card"},enumerable:!0,configurable:!0}),e.prototype.eventScope=function(e){return jQuery(e.container.nativeElement)},e.prototype.handleEvent=function(e,n){var t=jQuery(n.target);if(t.closest("."+xe).length)return Object(bn.a)("Allowing original context menu on state link"),!0;n.preventDefault(),n.stopPropagation();var l=t.closest("wp-single-card"),i=l.data("workPackageId");if(!i)return!0;var r=l.data("classIdentifier"),o=this.wpCardView.findRenderedCard(r);this.wpTableSelection.isSelected(i)||this.wpTableSelection.setSelection(i,o);var u=new Nm(this.injector,i,jQuery(n.target),{},e.showInfoButton);return this.opContextMenu.show(u,n),!1},e}(),Cw=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.eventHandlers=[function(e){return new bw(n.injector,e)},function(e){return new yw(n.injector,e)},function(e){return new ww(n.injector,e)}],n}return a.d(n,e),n}(lv),kw=function(){function e(e,n,t,l,i,r,o,u){this.states=e,this.injector=n,this.reorderService=t,this.wpCreate=l,this.notificationService=i,this.wpCacheService=r,this.currentProject=o,this.wpInlineCreate=u,this.dragService=this.injector.get(nv,null)}return e.prototype.init=function(e){this.cardView=e},e.prototype.destroy=function(){null!==this.dragService&&this.dragService.remove(this.cardView.container.nativeElement)},e.prototype.registerDragAndDrop=function(){var e=this;null!==this.dragService&&this.dragService.register({dragContainer:this.cardView.container.nativeElement,scrollContainers:[this.cardView.container.nativeElement],moves:function(n){var t=n.dataset.workPackageId,l=e.states.workPackages.get(t).value;return!!l&&e.cardView.canDragOutOf(l)&&!n.dataset.isNew},accepts:function(){return e.cardView.dragInto},onMoved:function(n){return a.b(e,void 0,void 0,function(){var e,t,l;return a.e(this,function(i){switch(i.label){case 0:return e=n.dataset.workPackageId,t=Sm.findIndex(n),[4,this.reorderService.move(this.currentOrder,e,t)];case 1:return l=i.sent(),this.updateOrder(l),this.cardView.onMoved.emit(),[2]}})})},onRemoved:function(n){var t=n.dataset.workPackageId,l=e.reorderService.remove(e.currentOrder,t);e.updateOrder(l)},onAdded:function(n){return a.b(e,void 0,void 0,function(){var e,t,l,i;return a.e(this,function(r){switch(r.label){case 0:return e=n.dataset.workPackageId,t=Sm.findIndex(n),[4,this.wpCacheService.require(e)];case 1:return l=r.sent(),[4,this.addWorkPackageToQuery(l,t)];case 2:return i=r.sent(),n.parentElement&&n.parentElement.removeChild(n),[2,i]}})})}})},Object.defineProperty(e.prototype,"workPackages",{get:function(){return this._workPackages},set:function(e){if(this.activeInlineCreateWp){var n=this._workPackages.find(function(e){return e.isNew});if(n){var t=this._workPackages.indexOf(n);this._workPackages[t]=this.activeInlineCreateWp}else this._workPackages=[this.activeInlineCreateWp].concat(e)}else this._workPackages=e.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentOrder",{get:function(){return this.workPackages.filter(function(e){return e&&!e.isNew}).map(function(e){return e.id})},enumerable:!0,configurable:!0}),e.prototype.updateOrder=function(e){var n=this;e=_.uniq(e),Promise.all(e.map(function(e){return n.wpCacheService.require(e)})).then(function(e){n.workPackages=e,n.cardView.cdRef.detectChanges()})},e.prototype.addNewCard=function(){var e=this;this.wpCreate.createOrContinueWorkPackage(this.currentProject.identifier).then(function(n){e.activeInlineCreateWp=n.projectedResource,e.workPackages=e.workPackages,e.cardView.cdRef.detectChanges()})},e.prototype.addWorkPackageToQuery=function(e,n){return void 0===n&&(n=-1),a.b(this,void 0,void 0,function(){var t,l;return a.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.cardView.workPackageAddedHandler(e)];case 1:return i.sent(),[4,this.reorderService.add(this.currentOrder,e.id,n)];case 2:return t=i.sent(),this.updateOrder(t),[2,!0];case 3:return l=i.sent(),this.notificationService.handleRawError(l,e),[3,4];case 4:return[2,!1]}})})},e.prototype.removeReferenceWorkPackageForm=function(){this.activeInlineCreateWp&&this.removeCard(this.activeInlineCreateWp)},e.prototype.removeCard=function(e){var n=this.workPackages.indexOf(e);if(this.workPackages.splice(n,1),this.activeInlineCreateWp=void 0,!e.isNew){var t=this.reorderService.remove(this.currentOrder,e.id);this.updateOrder(t)}},e.prototype.onCardSaved=function(e){return a.b(this,void 0,void 0,function(){var n,t;return a.e(this,function(l){switch(l.label){case 0:return-1===(n=this.workPackages.findIndex(function(e){return"new"===e.id}))?[3,2]:(this.activeInlineCreateWp=void 0,[4,this.reorderService.add(this.currentOrder,e.id,n)]);case 1:t=l.sent(),this.updateOrder(t),this.wpInlineCreate.newInlineWorkPackageCreated.next(e.id),l.label=2;case 2:return[2]}})})},e}(),Iw=function(){function e(e,n,t,i,r,o,u,a,s,c,d,p,h,f,g,m,v){var b=this;this.querySpace=e,this.states=n,this.injector=t,this.$state=i,this.I18n=r,this.wpCreate=o,this.wpInlineCreate=u,this.notificationService=a,this.authorisationService=s,this.causedUpdates=c,this.cdRef=d,this.pathHelper=p,this.wpTableSelection=h,this.wpViewOrder=f,this.cardView=g,this.cardDragDrop=m,this.deviceService=v,this.showStatusButton=!0,this.showInfoButton=!1,this.orientation="vertical",this.cardsRemovable=!1,this.showEmptyResultsBox=!1,this.onMoved=new l.EventEmitter,this.trackByHref=_r.trackByHrefAndProperty("lockVersion"),this.isResultEmpty=!1,this.text={removeCard:this.I18n.t("js.card.remove_from_list"),addNewCard:this.I18n.t("js.card.add_new"),noResults:{title:this.I18n.t("js.work_packages.no_results.title"),description:this.I18n.t("js.work_packages.no_results.description")}},this.canAdd=!1,this.canReference=!1,this.inReference=!1,this.referenceClass=this.wpInlineCreate.referenceComponentClass,this.referenceOutputs={onCancel:function(){return b.setReferenceMode(!1)},onReferenced:function(e){return b.cardDragDrop.addWorkPackageToQuery(e,0)}}}return e.prototype.ngOnInit=function(){var e=this;this.registerCreationCallback(),this.authorisationService.observeUntil(Object(Gn.a)(this)).subscribe(function(){e.canAdd=e.wpInlineCreate.canAdd,e.canReference=e.wpInlineCreate.canReference,e.cdRef.detectChanges()}),this.querySpace.results.values$().pipe(Object(Kn.a)(this.querySpace.query.values$()),Object(Gn.b)(this),Object(Yn.a)(function(n){var t=n[0],l=n[1];return t&&!e.causedUpdates.includes(l)})).subscribe(function(n){n[0];var t=n[1];e.query=t,e.workPackages=e.wpViewOrder.orderedWorkPackages(),e.cardView.updateRenderedCardsValues(e.workPackages),e.isResultEmpty=0===e.workPackages.length,e.cdRef.detectChanges()}),this.wpTableSelection.selection$().pipe(Object(Gn.b)(this)).subscribe(function(){e.cdRef.detectChanges()})},e.prototype.ngAfterViewInit=function(){var e=this;this.cardDragDrop.init(this),this.deviceService.isMobile||this.cardDragDrop.registerDragAndDrop(),new Cw(this.injector).attachTo(this),this.wpTableSelection.registerSelectAllListener(function(){return e.cardView.renderedCards}),this.wpTableSelection.registerDeselectAllListener()},e.prototype.ngOnDestroy=function(){this.cardDragDrop.destroy()},Object.defineProperty(e.prototype,"workPackages",{get:function(){return this.cardDragDrop.workPackages},set:function(e){this.cardDragDrop.workPackages=e},enumerable:!0,configurable:!0}),e.prototype.setReferenceMode=function(e){this.inReference=e,this.cdRef.detectChanges()},e.prototype.addNewCard=function(){this.cardDragDrop.addNewCard()},e.prototype.removeCard=function(e){this.cardDragDrop.removeCard(e)},e.prototype.onCardSaved=function(e){return a.b(this,void 0,void 0,function(){return a.e(this,function(n){switch(n.label){case 0:return[4,this.cardDragDrop.onCardSaved(e)];case 1:return n.sent(),[2]}})})},e.prototype.registerCreationCallback=function(){var e=this;this.wpCreate.onNewWorkPackage().pipe(Object(Gn.b)(this)).subscribe(function(n){return a.b(e,void 0,void 0,function(){return a.e(this,function(e){return this.onCardSaved(n),[2]})})})},e}(),jw=[[".wp-inline-create-button[_ngcontent-%COMP%]{font-size:.9rem;padding-top:1rem;text-align:center}.wp-inline-create--reference-container[_ngcontent-%COMP%]{margin-bottom:3rem}"],[".wp-cards-container.-horizontal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-column-gap:10px;grid-row-gap:10px;margin-right:5px}"],[".wp-cards-container.-vertical[_ngcontent-%COMP%]{height:100%;padding:0 15px;border-radius:2px;overflow-y:scroll;scrollbar-color:transparent transparent;scrollbar-width:thin}.wp-cards-container.-vertical[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.wp-cards-container.-vertical[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:0 0}.wp-cards-container.-vertical[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.wp-cards-container.-vertical[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.wp-cards-container.-vertical[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}"]],Rw=l["ɵcrt"]({encapsulation:0,styles:jw,data:{}});function Pw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","wp-inline-create--reference-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,16777216,null,null,3,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](2,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"],ndcDynamicInjector:[1,"ndcDynamicInjector"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](4,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicOutputs:[0,"ndcDynamicOutputs"]},null)],function(e,n){var t=n.component;e(n,2,0,t.referenceClass,t.injector),e(n,4,0,t.referenceOutputs)},null)}function Sw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-single-card",[],[[1,"data-is-new",0],[1,"data-work-package-id",0],[1,"data-class-identifier",0]],[[null,"onRemove"]],function(e,n,t){var l=!0,i=e.component;"onRemove"===n&&(l=!1!==i.removeCard(e.context.$implicit)&&l);return l},pw,iw)),l["ɵdid"](1,49152,null,0,tw,[ge,A.a,g.G,Ic,Ep],{workPackage:[0,"workPackage"],showInfoButton:[1,"showInfoButton"],showStatusButton:[2,"showStatusButton"],showRemoveButton:[3,"showRemoveButton"],highlightingMode:[4,"highlightingMode"],draggable:[5,"draggable"],orientation:[6,"orientation"]},{onRemove:"onRemove"})],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.showInfoButton,t.showStatusButton,t.cardsRemovable,t.highlightingMode,t.canDragOutOf(n.context.$implicit),t.orientation)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.isNew||void 0,n.context.$implicit.id,t.cardView.classIdentifier(n.context.$implicit))})}function _w(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](2,49152,null,0,fw,[],{title:[0,"title"],description:[1,"description"]},null)],function(e,n){var t=n.component;e(n,2,0,t.text.noResults.title,t.text.noResults.description)},function(e,n){e(n,1,0,l["ɵnov"](n,2).setHostClass)})}function xw(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{container:0}),(e()(),l["ɵeld"](1,0,[[1,0],["container",1]],null,6,"div",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Pw)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Sw)),l["ɵdid"](7,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,_w)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,"wp-cards-container -"+t.orientation),e(n,5,0,t.inReference),e(n,7,0,t.workPackages,t.trackByHref),e(n,9,0,t.showEmptyResultsBox&&t.isResultEmpty)},null)}var Tw=l["ɵccf"]("wp-card-view",Iw,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-card-view",[],null,null,null,xw,Rw)),l["ɵdid"](1,4440064,null,0,Iw,[b,d,l.Injector,g.G,A.a,ad,Fd,qn,In,Pn,l.ChangeDetectorRef,ge,Ic,Sn,Ep,kw,dt],null,null)],function(e,n){e(n,1,0)},null)},{canDragOutOf:"dragOutOfHandler",dragInto:"dragInto",highlightingMode:"highlightingMode",workPackageAddedHandler:"workPackageAddedHandler",showStatusButton:"showStatusButton",showInfoButton:"showInfoButton",orientation:"orientation",cardsRemovable:"cardsRemovable",showEmptyResultsBox:"showEmptyResultsBox"},{onMoved:"onMoved"},[]),Ow=function(){function e(e,n,t,l,i){this.wpTableHighlight=e,this.wpTableSortBy=n,this.wpList=t,this.querySpace=l,this.cdRef=i,this.canDragOutOf=function(){return!0},this.gridOrientation="horizontal",this.highlightingMode="none"}return e.prototype.ngOnInit=function(){var e=this;this.wpTableHighlight.updates$().pipe(Object(Ye.a)(this.querySpace.stopAllSubscriptions),Object(ft.a)()).subscribe(function(){e.highlightingMode=e.wpTableHighlight.current.mode,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e.prototype.switchToManualSorting=function(){var e=this.querySpace.query.value;e&&this.wpTableSortBy.switchToManualSorting(e)&&this.wpList.save(e)},e}(),Ew=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Dw(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-card-view",[],null,[[null,"onMoved"]],function(e,n,t){var l=!0,i=e.component;"onMoved"===n&&(l=!1!==i.switchToManualSorting()&&l);return l},xw,Rw)),l["ɵdid"](1,4440064,null,0,Iw,[b,d,l.Injector,g.G,A.a,ad,Fd,qn,In,Pn,l.ChangeDetectorRef,ge,Ic,Sn,Ep,kw,dt],{canDragOutOf:[0,"canDragOutOf"],dragInto:[1,"dragInto"],highlightingMode:[2,"highlightingMode"],showStatusButton:[3,"showStatusButton"],showInfoButton:[4,"showInfoButton"],orientation:[5,"orientation"],cardsRemovable:[6,"cardsRemovable"],showEmptyResultsBox:[7,"showEmptyResultsBox"]},{onMoved:"onMoved"})],function(e,n){var t=n.component;e(n,1,0,t.canDragOutOf,!0,t.highlightingMode,!0,!0,t.gridOrientation,!1,!0)},null)}var Fw=l["ɵccf"]("wp-grid",Ow,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"wp-grid",[],null,null,null,Dw,Ew)),l["ɵprd"](135680,null,nv,nv,[$t.DOCUMENT,l.Injector]),l["ɵprd"](4608,null,kw,kw,[d,l.Injector,Sn,ad,qn,Cn,Qn,Fd]),l["ɵdid"](3,245760,null,0,Ow,[sn,rn,ot,b,l.ChangeDetectorRef],null,null)],function(e,n){e(n,3,0)},null)},{},{},[]),Nw=[[".editable-toolbar-title--container[_ngcontent-%COMP%]{display:flex;align-items:center}.editable-toolbar-title--fixed[_ngcontent-%COMP%]{padding:0;cursor:default}.editable-toolbar-title--save[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{color:#5f5f5f}.editable-toolbar-title--save[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:before{color:#2c2c2c}.editable-toolbar-title--input[_ngcontent-%COMP%]{padding-left:5px;color:#5f5f5f}.editable-toolbar-title--input.-changed[_ngcontent-%COMP%]{font-style:italic}"]],Aw=l["ɵcrt"]({encapsulation:0,styles:Nw,data:{}});function Vw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[["class","editable-toolbar-title--save"],["role","link"]],[[1,"aria-label",0],[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.save(t,!0)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["aria-hidden","true"],["class","icon icon-save"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.text.query_has_changed_click_to_save,t.text.query_has_changed_click_to_save)})}function Mw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"div",[["class","editable-toolbar-title--container"]],null,[[null,"focusout"]],function(e,n,t){var l=!0,i=e.component;"focusout"===n&&(l=!1!==i.saveWhenFocusOutside(t)&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vw)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,[[1,0],["editableTitleInput",1]],null,9,"input",[["aria-required","true"],["class","editable-toolbar-title--input -border-on-hover-only toolbar--editable-toolbar ellipsis"],["type","text"]],[[1,"name",0],[1,"placeholder",0],[1,"title",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"focus"],[null,"keydown.escape"],[null,"keydown.enter"],[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,7)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,7).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,7)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,7)._compositionEnd(t.target.value)&&i);"focus"===n&&(i=!1!==r.onFocus(t)&&i);"keydown.escape"===n&&(i=!1!==r.reset(t)&&i);"keydown.enter"===n&&(i=!1!==r.save(t)&&i);"ngModelChange"===n&&(i=!1!==(r.selectedTitle=t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](6,{"-error":0,"-changed":1}),l["ɵdid"](7,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](9,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](11,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](12,4210688,null,0,Gi,[m.a,l.ElementRef],{condition:[0,"condition"]},null)],function(e,n){var t=n.component;e(n,2,0,t.showSave);var l=e(n,6,0,t.isEmpty,t.showSave);e(n,5,0,"editable-toolbar-title--input -border-on-hover-only toolbar--editable-toolbar ellipsis",l),e(n,9,0,t.inFlight,t.selectedTitle),e(n,12,0,t.initialFocus||void 0)},function(e,n){var t=n.component;e(n,3,0,t.selectableTitleIdentifier,t.text.input_placeholder,t.text.input_title,l["ɵnov"](n,11).ngClassUntouched,l["ɵnov"](n,11).ngClassTouched,l["ɵnov"](n,11).ngClassPristine,l["ɵnov"](n,11).ngClassDirty,l["ɵnov"](n,11).ngClassValid,l["ɵnov"](n,11).ngClassInvalid,l["ɵnov"](n,11).ngClassPending)})}function qw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"h2",[["class","editable-toolbar-title--fixed"]],[[1,"title",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-disabled":0,"-small":1}),(e()(),l["ɵted"](4,null,[" ","\n"])),l["ɵpid"](0,$t.SlicePipe,[])],function(e,n){var t=n.component,l=e(n,3,0,t.disabled,t.smallHeader);e(n,2,0,"editable-toolbar-title--fixed",l)},function(e,n){var t=n.component;e(n,0,0,t.selectedTitle),e(n,4,0,l["ɵunv"](n,4,0,l["ɵnov"](n,5).transform(t.selectedTitle,0,50)))})}function Lw(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{inputField:0}),(e()(),l["ɵand"](16777216,null,null,1,null,Mw)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,qw)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.editable),e(n,4,0,!t.editable)},null)}l["ɵccf"]("editable-toolbar-title",ew,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"editable-toolbar-title",[["class","title-container"]],null,null,null,Lw,Aw)),l["ɵdid"](1,638976,null,0,ew,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{inputTitle:"title",editable:"editable",inFlight:"inFlight",showSaveCondition:"showSaveCondition",initialFocus:"initialFocus",smallHeader:"smallHeader"},{onSave:"onSave",onEmptySubmit:"onEmptySubmit"},[]);var $w=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={jump_to_pagination:n.I18n.t("js.work_packages.jump_marks.pagination"),text_jump_to_pagination:n.I18n.t("js.work_packages.jump_marks.label_pagination"),button_settings:n.I18n.t("js.button_settings")},n.tableInformationLoaded=!1,n.projectIdentifier=n.$state.params.projectPath||null,n.showResultOverlay=!1,n._showListView=!0,n.titleService=n.injector.get(Kc),n.bcfDetectorService=n.injector.get(Jn),n.wpTableConfiguration={dragAndDropEnabled:!0},n}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.hasQueryProps=!!this.$state.params.query_props,this.loadCurrentQuery(),this.updateQueryOnParamsChanges(),this.setupInformationLoadedListener(),this.unRegisterTitleListener=this.$transitions.onSuccess({to:"work-packages.list"},function(){n.selectedTitle&&n.titleService.setFirstPart(n.selectedTitle)}),this.querySpace.query.values$().pipe(Object(Gn.b)(this)).subscribe(function(e){n.updateTitle(e),n.currentQuery=e,n.deviceService.isMobile||"card"===n.wpDisplayRepresentation.valueFromQuery(e)?n.showListView=!1:n.showListView=!0,n.cdRef.detectChanges()})},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.unRegisterTitleListener(),this.removeTransitionSubscription()},n.prototype.setAnchorToNextElement=function(){var e=jQuery("#pagination--next-link, #pagination--prev-link, #pagination-empty-text").not(":hidden").first();e.length&&e.focus()},n.prototype.allowed=function(e,n){return this.authorisationService.can(e,n)},n.prototype.saveQueryFromTitle=function(e){var n=this;this.currentQuery&&this.currentQuery.persisted?this.updateQueryName(e):this.wpListService.create(this.currentQuery,e).then(function(){return n.querySaving=!1}).catch(function(){return n.querySaving=!1})},n.prototype.updateQueryName=function(e){var n=this;this.querySaving=!0,this.currentQuery.name=e,this.wpListService.save(this.currentQuery).then(function(){return n.querySaving=!1}).catch(function(){return n.querySaving=!1})},n.prototype.updateTitle=function(e){e.persisted?this.selectedTitle=e.name:this.selectedTitle=this.wpStaticQueries.getStaticName(e),this.titleEditingEnabled=this.authorisationService.can("query","updateImmediately"),"work-packages.list"===this.$state.current.name&&this.titleService.setFirstPart(this.selectedTitle)},n.prototype.refresh=function(e,n){var t;return void 0===e&&(e=!1),void 0===n&&(n=!1),t=n?this.loadCurrentQuery():this.wpListService.reloadCurrentResultsList(),e&&(this.loadingIndicator=t),t},n.prototype.updateResultVisibility=function(e){this.showResultOverlay=!e},Object.defineProperty(n.prototype,"showListView",{get:function(){return this._showListView},set:function(e){this._showListView=e},enumerable:!0,configurable:!0}),n.prototype.bcfActivated=function(){return this.bcfDetectorService.isBcfActivated},n.prototype.updateQueryOnParamsChanges=function(){var e=this;this.removeTransitionSubscription=this.$transitions.onSuccess({},function(n){var t=n.options(),l=n.params("to");e.hasQueryProps=!!l.query_props;var i=e.wpListService.getCurrentQueryProps(l),r=l.query_id?l.query_id.toString():null;if(e.cdRef.detectChanges(),t.reload||t.custom&&!1===t.custom.notify)return!0;e.wpListChecksumService.executeIfOutdated(r,i,function(){return e.loadCurrentQuery()})})},n.prototype.setupInformationLoadedListener=function(){var e=this;this.querySpace.initialized.values$().pipe(Object(y.a)(1)).subscribe(function(){e.tableInformationLoaded=!0,e.cdRef.detectChanges()})},Object.defineProperty(n.prototype,"loadingIndicator",{set:function(e){this.loadingIndicatorService.table.promise=e},enumerable:!0,configurable:!0}),n.prototype.loadCurrentQuery=function(){var e=this;return this.loadingIndicator=this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier).then(function(){e.querySpace.rendered.valuesPromise()})},n}(pt),Hw=[[".result-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:900;background-color:#fff;opacity:.5}.work-packages--card-view-container[_ngcontent-%COMP%]{width:100%;overflow:auto;padding-bottom:5px;scrollbar-color:transparent transparent;scrollbar-width:thin}.work-packages--card-view-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.work-packages--card-view-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:0 0}.work-packages--card-view-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.work-packages--card-view-container[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.work-packages--card-view-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}"]],Bw=l["ɵcrt"]({encapsulation:0,styles:Hw,data:{}});function zw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"bcf-import-button",[],null,null,null,Sy,Py)),l["ɵdid"](2,49152,null,0,Ry,[A.a,Qn,jy],null,null)],null,null)}function Ww(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"bcf-export-button",[],null,null,null,Ty,xy)),l["ɵdid"](2,245760,null,0,_y,[A.a,Qn,jy,b,Ne,g.G],null,null)],function(e,n){e(n,2,0)},null)}function Qw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,27,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"wp-create-button",[["stateName","work-packages.list.new"]],null,null,null,pd,dd)),l["ɵdid"](3,114688,null,0,cd,[g.G,Qn,A.a],{stateName:[0,"stateName"],allowed:[1,"allowed"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,zw)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ww)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"wp-filter-button",[],null,null,null,Fy,Ey)),l["ɵdid"](10,245760,null,0,Oy,[A.a,l.ChangeDetectorRef,Ze,en],null,null),(e()(),l["ɵeld"](11,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,1,"wp-view-toggle-button",[],null,null,null,My,Vy)),l["ɵdid"](13,245760,null,0,Ay,[A.a,l.ChangeDetectorRef,_n,N],null,null),(e()(),l["ɵeld"](14,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,1,"wp-details-view-button",[],null,null,null,$y,Ly)),l["ɵdid"](16,180224,null,0,qy,[g.G,A.a,g.O,l.ChangeDetectorRef,d,jc,_e],null,null),(e()(),l["ɵeld"](17,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile -no-spacing"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"wp-timeline-toggle-button",[],null,null,null,Gy,zy)),l["ɵdid"](19,245760,null,0,Hy,[A.a,l.ChangeDetectorRef,N],null,null),(e()(),l["ɵeld"](20,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](22,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](23,0,null,null,4,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,3,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","work-packages-settings-button"],["opSettingsContextMenu",""],["opSettingsContextMenu-query","query"]],[[8,"title",0]],null,null,null,null)),l["ɵdid"](25,4341760,null,0,nw,[l.ElementRef,is,Wn.b,ot,In,d,l.Injector,b,A.a],{query:[0,"query"]},null),(e()(),l["ɵeld"](26,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,hl,dl)),l["ɵdid"](27,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,3,0,"work-packages.list.new",t.allowed("work_packages","createWorkPackage")),e(n,5,0,t.bcfActivated()),e(n,7,0,t.bcfActivated()),e(n,10,0),e(n,13,0),e(n,19,0);e(n,25,0,"query");e(n,27,0,"button--icon icon-show-more")},function(e,n){var t=n.component;e(n,24,0,l["ɵinlineInterpolate"](1,"",t.text.button_settings,""))})}function Uw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","result-overlay"]],null,null,null,null,null))],null,null)}function Gw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table",[["class","work-packages-split-view--tabletimeline-content"]],null,null,null,Gv,Av)),l["ɵdid"](1,245760,null,0,pv,[l.ElementRef,l.Injector,d,b,A.a,l.ChangeDetectorRef,l.NgZone,Be,N,$e,rn],{projectIdentifier:[0,"projectIdentifier"],configurationObject:[1,"configurationObject"]},null)],function(e,n){var t=n.component;e(n,1,0,t.projectIdentifier,t.wpTableConfiguration)},null)}function Kw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","work-packages--card-view-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"wp-grid",[],null,null,null,Dw,Ew)),l["ɵprd"](135680,null,nv,nv,[$t.DOCUMENT,l.Injector]),l["ɵprd"](4608,null,kw,kw,[d,l.Injector,Sn,ad,qn,Cn,Qn,Fd]),l["ɵdid"](4,245760,null,0,Ow,[sn,rn,ot,b,l.ChangeDetectorRef],null,null)],function(e,n){e(n,4,0)},null)}function Yw(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","work-packages-split-view--tabletimeline-footer hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"wp-table-pagination",[],null,null,null,fb,Zv)),l["ɵdid"](2,245760,null,0,Yv,[Ce,l.ChangeDetectorRef,je,b,rn,A.a],null,null)],function(e,n){e(n,2,0)},null)}function Zw(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,23,"div",[["class","work-packages-list-view--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"editable-toolbar-title",[["class","title-container"]],null,[[null,"onSave"],[null,"onEmptySubmit"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.saveQueryFromTitle(t)&&l);"onEmptySubmit"===n&&(l=!1!==i.updateQueryName("")&&l);return l},Lw,Aw)),l["ɵdid"](4,638976,null,0,ew,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"],showSaveCondition:[3,"showSaveCondition"]},{onSave:"onSave",onEmptySubmit:"onEmptySubmit"}),(e()(),l["ɵand"](16777216,null,null,1,null,Qw)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](7,0,null,null,1,"filter-container",[],null,[[null,"filtersCompleted"]],function(e,n,t){var l=!0,i=e.component;"filtersCompleted"===n&&(l=!1!==i.updateResultVisibility(t)&&l);return l},Kg,Wg)),l["ɵdid"](8,245760,null,0,zg,[en,l.ChangeDetectorRef,Ze],null,{filtersCompleted:"filtersCompleted"}),(e()(),l["ɵeld"](9,0,null,null,2,"accessible-by-keyboard",[["linkClass","hidden-for-sighted skip-navigation-link"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.setAnchorToNextElement()&&l);return l},jl,Il)),l["ɵdid"](10,49152,null,0,kl,[],{linkClass:[0,"linkClass"],linkAriaLabel:[1,"linkAriaLabel"]},{execute:"execute"}),(e()(),l["ɵeld"](11,0,null,0,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,11,"div",[["class","work-packages-split-view"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,8,"div",[["class","work-packages-split-view--tabletimeline-side loading-indicator--location"],["data-indicator-name","table"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Uw)),l["ɵdid"](15,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Gw)),l["ɵdid"](17,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Kw)),l["ɵdid"](19,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Yw)),l["ɵdid"](21,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](22,16777216,null,null,1,"div",[["class","work-packages-split-view--details-side"],["ui-view",""]],null,null,null,Mt.c,Mt.a)),l["ɵdid"](23,245760,null,0,oo.a,[g.P,"UIView.PARENT_INJECT",l.ViewContainerRef],{_name:[0,"_name"]},null)],function(e,n){var t=n.component;e(n,4,0,t.selectedTitle,t.titleEditingEnabled,t.querySaving,t.hasQueryProps),e(n,6,0,t.tableInformationLoaded),e(n,8,0);e(n,10,0,"hidden-for-sighted skip-navigation-link",t.text.text_jump_to_pagination),e(n,15,0,t.showResultOverlay&&t.showListView),e(n,17,0,t.tableInformationLoaded&&t.showListView),e(n,19,0,!t.showListView),e(n,21,0,t.tableInformationLoaded);e(n,23,0,"")},function(e,n){e(n,11,0,n.component.text.jump_to_pagination)})}var Jw=l["ɵccf"]("wp-list",$w,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"wp-list",[],null,null,null,Zw,Bw)),l["ɵprd"](4608,null,Mn,qn,[l.Injector,g.G,Cn]),l["ɵprd"](135680,null,nv,nv,[$t.DOCUMENT,l.Injector]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵdid"](4,245760,null,0,$w,[l.Injector],null,null)],function(e,n){e(n,4,0)},null)},{},{},[]),Xw=function(){},eC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function nC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","wp-new-top-row"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"div",[["class","work-packages--status-selector wp-new-top-row--element"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](3,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"],displayFieldOptions:[3,"displayFieldOptions"]},null),l["ɵpod"](4,{colorize:0}),(e()(),l["ɵeld"](5,0,null,null,2,"div",[["class","work-packages--type-selector wp-new-top-row--element"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](7,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"]},null)],function(e,n){var t=n.component,l=t.workPackage,i=e(n,4,0,!1);e(n,3,0,"status",l,"wp-new-top-row--status -no-label",i);e(n,7,0,"type",t.workPackage,"wp-new-top-row--type -no-label")},null)}function tC(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,nC)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}l["ɵccf"]("wp-type-status",Xw,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-type-status",[],null,null,null,tC,eC)),l["ɵdid"](1,49152,null,0,Xw,[],null,null)],null,null)},{workPackage:"workPackage"},{},[]);var lC=function(e){function n(n,t,l,i){var r=e.call(this,n,t)||this;return r.elementRef=n,r.opContextMenu=t,r.states=l,r.halEditing=i,r}return a.d(n,e),n.prototype.open=function(e){var n=this,t=this.states.workPackages.get("new").value;t&&this.halEditing.changeFor(t).getForm().then(function(t){n.buildItems(t),n.opContextMenu.show(n,e)})},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.buildItems=function(e){this.items=[];var n=e.configureForm,t=e.customFields;t&&this.items.push({href:t.href,icon:"icon-custom-fields",linkText:t.name,onClick:function(){return!1}}),n&&this.items.push({href:n.href,icon:"icon-settings3",linkText:n.name,onClick:function(){return!1}})},n}(xc),iC=function(){function e(e,n,t){this.I18n=e,this.editForm=n,this.cdRef=t,this.onSave=new l.EventEmitter,this.onCancel=new l.EventEmitter,this._saving=!1,this.text={save:this.I18n.t("js.button_save"),cancel:this.I18n.t("js.button_cancel")}}return Object.defineProperty(e.prototype,"saving",{get:function(){return this._saving},set:function(e){this._saving=e,this.cdRef.detectChanges()},enumerable:!0,configurable:!0}),e.prototype.save=function(){var e=this;this.saving||(this.saving=!0,this.editForm.save().then(function(){e.saving=!1,e.onSave.emit()}).catch(function(){e.saving=!1}))},e.prototype.cancel=function(){this.editForm.stop(),this.onCancel.emit()},e}(),rC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function oC(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","work-packages--edit-actions"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"button",[["accesskey","3"],["class","button -alt-highlight"],["id","work-packages--edit-actions-save"]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.save()&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-checkmark"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](4,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,3,"button",[["accesskey","7"],["class","button"],["id","work-packages--edit-actions-cancel"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.cancel()&&l);return l},null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-close"]],null,null,null,hl,dl)),l["ɵdid"](7,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](8,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"button--icon icon-checkmark");e(n,7,0,"button--icon icon-close")},function(e,n){var t=n.component;e(n,1,0,t.saving),e(n,4,0,t.text.save),e(n,8,0,t.text.cancel)})}l["ɵccf"]("wp-edit-actions-bar",iC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-edit-actions-bar",[],null,null,null,oC,rC)),l["ɵdid"](1,49152,null,0,iC,[A.a,ss,l.ChangeDetectorRef],null,null)],null,null)},{},{onSave:"onSave",onCancel:"onCancel"},[]);var uC=function(){function e(e,n,t,l,i,r,o,u,a,s,c,d,p,h){this.$transition=e,this.$state=n,this.I18n=t,this.titleService=l,this.injector=i,this.notificationService=r,this.states=o,this.wpCreate=u,this.wpViewFocus=a,this.wpTableFilters=s,this.wpCacheService=c,this.pathHelper=d,this.cdRef=p,this.RootDm=h,this.copying=!1,this.stateParams=this.$transition.params("to"),this.text={button_settings:this.I18n.t("js.button_settings")}}return e.prototype.ngOnInit=function(){var e=this;this.closeEditFormWhenNewWorkPackageSaved(),this.createdWorkPackage().then(function(n){e.change=n,e.newWorkPackage=n.projectedResource,e.cdRef.detectChanges(),e.setTitle(),e.stateParams.parent_id&&(e.newWorkPackage.parent={href:e.pathHelper.api.v3.work_packages.id(e.stateParams.parent_id).path}),e.stateParams.parent_id&&e.wpCacheService.loadWorkPackage(e.stateParams.parent_id).values$().pipe(Object(Ye.a)(Object(Gn.a)(e))).subscribe(function(n){e.parentWorkPackage=n,e.cdRef.detectChanges()})}).catch(function(n){"urn:openproject-org:api:v3:errors:MissingPermission"===n.errorIdentifier&&(e.RootDm.load().then(function(n){if(!n.user){var t=URI(e.pathHelper.loginPath());t.search({back_url:t}),window.location.href=t.toString()}}),e.notificationService.handleRawError(n))})},e.prototype.ngOnDestroy=function(){},e.prototype.switchToFullscreen=function(){this.$state.go("work-packages.new",this.$state.params)},e.prototype.onSaved=function(e){var n=this,t=e.savedResource,l=e.isInitial;l&&this.editForm&&this.editForm.editMode&&this.editForm.stop(),this.successState&&this.$state.go(this.successState,{workPackageId:t.id}).then(function(){n.wpViewFocus.updateFocus(t.id),n.notificationService.showSave(t,l)})},e.prototype.setTitle=function(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.create.title"))},e.prototype.cancelAndBackToList=function(){this.wpCreate.cancelCreation(),this.$state.go("work-packages.list",this.$state.params)},e.prototype.createdWorkPackage=function(){var e=this.stateParams.type?parseInt(this.stateParams.type):void 0,n=this.stateParams.projectPath;return this.wpCreate.createOrContinueWorkPackage(n,e)},e.prototype.closeEditFormWhenNewWorkPackageSaved=function(){var e=this;this.wpCreate.onNewWorkPackage().pipe(Object(Gn.b)(this)).subscribe(function(n){e.onSaved({savedResource:n,isInitial:!0})})},e}(),aC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.show",n}return a.d(n,e),n}(uC),sC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function cC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,20,"div",[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,19,"edit-form",[],null,[[null,"onSaved"]],function(e,n,t){var l=!0,i=e.component;"onSaved"===n&&(l=!1!==i.onSaved(t)&&l);return l},cc,sc)),l["ɵdid"](2,245760,[[1,4]],0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"],initializeEditMode:[1,"initializeEditMode"],skippedFields:[2,"skippedFields"]},{onSavedEmitter:"onSaved"}),l["ɵpad"](3,2),(e()(),l["ɵeld"](4,0,null,0,11,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"wp-type-status",[],null,null,null,tC,eC)),l["ɵdid"](7,49152,null,0,Xw,[],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](8,0,null,null,7,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](11,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](12,0,null,null,3,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,2,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","create-wp-menu-button"],["wpCreateSettingsMenu",""]],[[1,"title",0]],null,null,null,null)),l["ɵdid"](14,4210688,null,0,lC,[l.ElementRef,is,d,ns],null,null),(e()(),l["ɵeld"](15,0,null,null,0,"i",[["class","button--icon icon-show-more"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,0,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](18,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["ɵeld"](19,0,null,0,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},oC,rC)),l["ɵdid"](20,49152,null,0,iC,[A.a,ss,l.ChangeDetectorRef],null,{onCancel:"onCancel"})],function(e,n){var t=n.component,l=t.newWorkPackage,i=e(n,3,0,"status","type");e(n,2,0,l,!0,i),e(n,7,0,t.newWorkPackage),e(n,18,0,t.newWorkPackage,t.copying)},function(e,n){e(n,13,0,n.component.text.button_settings)})}function dC(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{editForm:0}),(e()(),l["ɵand"](16777216,null,null,1,null,cC)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.newWorkPackage)},null)}var pC=l["ɵccf"]("wp-new-full-view",aC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-new-full-view",[["class","work-packages-page--ui-view"]],null,null,null,dC,sC)),l["ɵdid"](1,245760,null,0,aC,[g.J,g.G,A.a,Kc,l.Injector,qn,d,ad,jc,en,Cn,ge,l.ChangeDetectorRef,hg],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),hC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.list.details",n}return a.d(n,e),n}(uC),fC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function gC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,19,"div",[["class","work-packages--details work-packages--new"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,18,"edit-form",[],null,[[null,"onSaved"]],function(e,n,t){var l=!0,i=e.component;"onSaved"===n&&(l=!1!==i.onSaved(t)&&l);return l},cc,sc)),l["ɵdid"](2,245760,[[1,4]],0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"],initializeEditMode:[1,"initializeEditMode"],skippedFields:[2,"skippedFields"]},{onSavedEmitter:"onSaved"}),l["ɵpad"](3,2),(e()(),l["ɵeld"](4,0,null,0,9,"div",[["class","work-packages--details-content -create-mode"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,5,"div",[["class","work-packages--new-details-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"wp-type-status",[],null,null,null,tC,eC)),l["ɵdid"](7,49152,null,0,Xw,[],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","wp--details--switch-fullscreen-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"a",[["class","work-packages-show-view-button wp--details--switch-fullscreen "]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"span",[["class","icon-context icon-to-fullscreen"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](13,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["ɵeld"](14,0,null,0,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},oC,rC)),l["ɵdid"](16,49152,null,0,iC,[A.a,ss,l.ChangeDetectorRef],null,{onCancel:"onCancel"}),(e()(),l["ɵeld"](17,0,null,0,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,19).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["ɵnov"](e,19).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["ɵnov"](e,19).handleMouseUp(t)&&i);return i},Wc,zc)),l["ɵdid"](19,245760,null,0,Bc,[$c,l.ElementRef,g.O,Hc],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component,l=t.newWorkPackage,i=e(n,3,0,"status","type");e(n,2,0,l,!0,i),e(n,7,0,t.newWorkPackage),e(n,13,0,t.newWorkPackage,t.copying);e(n,19,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},null)}function mC(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{editForm:0}),(e()(),l["ɵand"](16777216,null,null,1,null,gC)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.newWorkPackage)},null)}var vC=l["ɵccf"]("wp-new-split-view",hC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-new-split-view",[],null,null,null,mC,fC)),l["ɵdid"](1,245760,null,0,hC,[g.J,g.G,A.a,Kc,l.Injector,qn,d,ad,jc,en,Cn,ge,l.ChangeDetectorRef,hg],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),bC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.copying=!0,n.wpRelations=n.injector.get(On),n.halEditing=n.injector.get(ns),n.wpCreate=n.injector.get(ad),n}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.wpCreate.onNewWorkPackage().pipe(Object(Gn.b)(this)).subscribe(function(e){e.__initialized_at===n.__initialized_at&&n.wpRelations.addCommonRelation(e.id,"relates",n.copiedWorkPackageId)})},n.prototype.createdWorkPackage=function(){var e=this;return this.copiedWorkPackageId=this.stateParams.copiedFromWorkPackageId,new Promise(function(n,t){e.wpCacheService.loadWorkPackage(e.copiedWorkPackageId).values$().pipe(Object(y.a)(1)).subscribe(function(l){e.createCopyFrom(l).then(n,t)})})},n.prototype.setTitle=function(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.copy.title"))},n.prototype.createCopyFrom=function(e){var n=this,t=this.halEditing.changeFor(e);return this.wpCreate.copyWorkPackage(t).then(function(e){return n.__initialized_at=e.pristineResource.__initialized_at,n.wpCacheService.updateWorkPackage(e.pristineResource),n.halEditing.updateValue("new",e),e})},n}(uC),yC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.show",n}return a.d(n,e),n}(bC),wC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function CC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,20,"div",[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,19,"edit-form",[],null,[[null,"onSaved"]],function(e,n,t){var l=!0,i=e.component;"onSaved"===n&&(l=!1!==i.onSaved(t)&&l);return l},cc,sc)),l["ɵdid"](2,245760,[[1,4]],0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"],initializeEditMode:[1,"initializeEditMode"],skippedFields:[2,"skippedFields"]},{onSavedEmitter:"onSaved"}),l["ɵpad"](3,2),(e()(),l["ɵeld"](4,0,null,0,11,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"wp-type-status",[],null,null,null,tC,eC)),l["ɵdid"](7,49152,null,0,Xw,[],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](8,0,null,null,7,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](11,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](12,0,null,null,3,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,2,"button",[["class","button last work-packages-settings-button toolbar-icon"],["id","create-wp-menu-button"],["wpCreateSettingsMenu",""]],[[1,"title",0]],null,null,null,null)),l["ɵdid"](14,4210688,null,0,lC,[l.ElementRef,is,d,ns],null,null),(e()(),l["ɵeld"](15,0,null,null,0,"i",[["class","button--icon icon-show-more"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,0,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](18,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["ɵeld"](19,0,null,0,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},oC,rC)),l["ɵdid"](20,49152,null,0,iC,[A.a,ss,l.ChangeDetectorRef],null,{onCancel:"onCancel"})],function(e,n){var t=n.component,l=t.newWorkPackage,i=e(n,3,0,"status","type");e(n,2,0,l,!0,i),e(n,7,0,t.newWorkPackage),e(n,18,0,t.newWorkPackage,t.copying)},function(e,n){e(n,13,0,n.component.text.button_settings)})}function kC(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{editForm:0}),(e()(),l["ɵand"](16777216,null,null,1,null,CC)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.newWorkPackage)},null)}var IC=l["ɵccf"]("wp-copy-full-view",yC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-copy-full-view",[["class","work-packages-page--ui-view"]],null,null,null,kC,wC)),l["ɵdid"](1,245760,null,0,yC,[g.J,g.G,A.a,Kc,l.Injector,qn,d,ad,jc,en,Cn,ge,l.ChangeDetectorRef,hg],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),jC=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.successState="work-packages.list.details",n}return a.d(n,e),n}(bC),RC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function PC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,19,"div",[["class","work-packages--details work-packages--new"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,18,"edit-form",[],null,[[null,"onSaved"]],function(e,n,t){var l=!0,i=e.component;"onSaved"===n&&(l=!1!==i.onSaved(t)&&l);return l},cc,sc)),l["ɵdid"](2,245760,[[1,4]],0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"],initializeEditMode:[1,"initializeEditMode"],skippedFields:[2,"skippedFields"]},{onSavedEmitter:"onSaved"}),l["ɵpad"](3,2),(e()(),l["ɵeld"](4,0,null,0,9,"div",[["class","work-packages--details-content -create-mode"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,5,"div",[["class","work-packages--new-details-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"wp-type-status",[],null,null,null,tC,eC)),l["ɵdid"](7,49152,null,0,Xw,[],{workPackage:[0,"workPackage"]},null),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","wp--details--switch-fullscreen-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"a",[["class","work-packages-show-view-button wp--details--switch-fullscreen "]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchToFullscreen()&&l);return l},null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"span",[["class","icon-context icon-to-fullscreen"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,2,"wp-single-view",[],null,null,null,rh,zp)),l["ɵprd"](512,null,Ua,Ua,[]),l["ɵdid"](13,245760,null,0,Bp,[A.a,Qn,ge,d,ns,Q,$a,Cn,It,l.Injector,l.ChangeDetectorRef,l.ElementRef,Ua,Hc],{workPackage:[0,"workPackage"],showProject:[1,"showProject"]},null),(e()(),l["ɵeld"](14,0,null,0,2,"div",[["class","work-packages--details-toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,1,"wp-edit-actions-bar",[],null,[[null,"onCancel"]],function(e,n,t){var l=!0,i=e.component;"onCancel"===n&&(l=!1!==i.cancelAndBackToList()&&l);return l},oC,rC)),l["ɵdid"](16,49152,null,0,iC,[A.a,ss,l.ChangeDetectorRef],null,{onCancel:"onCancel"}),(e()(),l["ɵeld"](17,0,null,0,2,"div",[["class","work-packages--details--resizer hidden-for-mobile hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,1,"wp-resizer",[],null,[[null,"mousedown"],["window","touchend"],["window","mouseup"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,19).handleMouseDown(t)&&i);"window:touchend"===n&&(i=!1!==l["ɵnov"](e,19).handleTouchEnd(t)&&i);"window:mouseup"===n&&(i=!1!==l["ɵnov"](e,19).handleMouseUp(t)&&i);return i},Wc,zc)),l["ɵdid"](19,245760,null,0,Bc,[$c,l.ElementRef,g.O,Hc],{elementClass:[0,"elementClass"],localStorageKey:[1,"localStorageKey"]},null)],function(e,n){var t=n.component,l=t.newWorkPackage,i=e(n,3,0,"status","type");e(n,2,0,l,!0,i),e(n,7,0,t.newWorkPackage),e(n,13,0,t.newWorkPackage,t.copying);e(n,19,0,"work-packages-split-view--details-side","openProject-splitViewFlexBasis")},null)}function SC(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{editForm:0}),(e()(),l["ɵand"](16777216,null,null,1,null,PC)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.newWorkPackage)},null)}var _C=l["ɵccf"]("wp-copy-split-view",jC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-copy-split-view",[],null,null,null,SC,RC)),l["ɵdid"](1,245760,null,0,jC,[g.J,g.G,A.a,Kc,l.Injector,qn,d,ad,jc,en,Cn,ge,l.ChangeDetectorRef,hg],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),xC=function(){function e(e){this.elementRef=e,this.initialLoadingIndicator=!0}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;e.getAttribute("query-props")&&this.getInputsFromData(e)},e.prototype.getInputsFromData=function(e){this.queryProps=JSON.parse(e.getAttribute("query-props")),this.configuration=JSON.parse(e.getAttribute("configuration"))},e}();Tt.DynamicBootstrapper.register({selector:"wp-embedded-table-entry",cls:xC});var TC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function OC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,38,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](36,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),(e()(),l["ɵeld"](37,0,null,null,1,"wp-embedded-table",[],null,null,null,yb,gb)),l["ɵdid"](38,4964352,null,0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"]},null)],function(e,n){var t=n.component;e(n,38,0,t.configuration,t.initialLoadingIndicator,t.queryProps)},null)}var EC=l["ɵccf"]("wp-embedded-table-entry",xC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-table-entry",[],null,null,null,OC,TC)),l["ɵdid"](1,114688,null,0,xC,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{queryProps:"queryProps",configuration:"configuration",initialLoadingIndicator:"initialLoadingIndicator"},{},[]),DC=function(e){function n(n,t){var l=e.call(this,t)||this;return l.locals=n,l.I18n=t,l}return a.d(n,e),Object.defineProperty(n.prototype,"tabs",{get:function(){var e=this.locals.disabledTabs||{};return this._tabs.map(function(n){var t=e[n.name];return null!=t&&(n.disableBecause=t),n})},enumerable:!0,configurable:!0}),n}(dn),FC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function NC(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{embeddedTable:0}),(e()(),l["ɵeld"](1,0,null,null,39,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](37,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),(e()(),l["ɵeld"](38,0,null,null,2,"wp-embedded-table",[],null,null,null,yb,gb)),l["ɵdid"](39,4964352,[[1,4],["embeddedTableForConfiguration",4]],0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null),l["ɵpod"](40,{tableVisible:0})],function(e,n){var t=n.component,i=e(n,40,0,!1);e(n,39,0,i,t.locals.currentQuery||l["ɵEMPTY_MAP"])},null)}var AC=l["ɵccf"]("ng-component",mt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ng-component",[],null,null,null,NC,FC)),l["ɵprd"](4608,null,dn,DC,[vt,A.a]),l["ɵdid"](2,4243456,null,0,mt,[vt,l.ChangeDetectorRef],null,null)],null,null)},{},{},[]),VC=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function MC(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{embeddedTable:0}),(e()(),l["ɵeld"](1,0,null,null,39,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](37,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),(e()(),l["ɵeld"](38,0,null,null,2,"wp-embedded-table",[],null,null,null,yb,gb)),l["ɵdid"](39,4964352,[[1,4],["embeddedTableForConfiguration",4]],0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null),l["ɵpod"](40,{tableVisible:0})],function(e,n){var t=n.component,i=e(n,40,0,!1);e(n,39,0,i,t.locals.currentQuery||l["ɵEMPTY_MAP"])},null)}var qC=l["ɵccf"]("ng-component",Ct,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"ng-component",[],null,null,null,MC,VC)),l["ɵprd"](4608,null,dn,DC,[vt,A.a]),l["ɵdid"](2,4243456,null,0,Ct,[vt,l.ChangeDetectorRef],null,null),l["ɵprd"](256,null,Bn,wt,[])],null,null)},{},{},[]),LC=function(){function e(e,n,t){this.I18n=e,this.wpeditForm=n,this.injector=t,this.text={date:{startDate:this.I18n.t("js.label_no_start_date"),dueDate:this.I18n.t("js.label_no_due_date")}}}return e.prototype.trackByName=function(e,n){return n.name},e.prototype.shouldHideField=function(e){var n=e.field||e.fields[0];return this.wpeditForm.editMode&&!n.writable},e}(),$C=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function HC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["class","required"]],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" *"]))],null,null)}function BC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"wp-replacement-label",[],null,null,null,Rd,jd)),l["ɵdid"](2,114688,null,0,Id,[ss,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["ɵted"](3,0,[" "," "])),(e()(),l["ɵand"](16777216,null,0,1,null,HC)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,1,"attribute-help-text",[],null,null,null,Wr,Br)),l["ɵdid"](7,114688,null,0,Hr,[l.ElementRef,qr,Lr,Wn.b,l.ChangeDetectorRef,l.Injector,A.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.name),e(n,5,0,n.parent.parent.context.$implicit.field.required&&n.parent.parent.context.$implicit.field.writable);e(n,7,0,n.parent.parent.context.$implicit.name,"WorkPackage")},function(e,n){e(n,3,0,n.parent.parent.context.$implicit.label)})}function zC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"editable-attribute-field",[["class","wp-edit-formattable-field"]],null,null,null,ps,ds)),l["ɵdid"](1,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],isDropTarget:[2,"isDropTarget"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.parent.parent.context.$implicit.name,t.workPackage,!0)},null)}function WC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](1,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.parent.parent.context.$implicit.name,t.workPackage)},null)}function QC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","attributes-key-value--value-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,zC)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,WC)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.field.isFormattable),e(n,4,0,!n.parent.parent.context.$implicit.field.isFormattable)},null)}function UC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","attributes-key-value--key"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"wp-replacement-label",[],null,null,null,Rd,jd)),l["ɵdid"](2,114688,null,0,Id,[ss,l.ElementRef],{fieldName:[0,"fieldName"]},null),(e()(),l["ɵted"](3,0,[" "," "])),(e()(),l["ɵeld"](4,0,null,null,1,"attribute-help-text",[],null,null,null,Wr,Br)),l["ɵdid"](5,114688,null,0,Hr,[l.ElementRef,qr,Lr,Wn.b,l.ChangeDetectorRef,l.Injector,A.a],{attribute:[0,"attribute"],attributeScope:[1,"attributeScope"]},null)],function(e,n){e(n,2,0,n.parent.parent.context.$implicit.name);e(n,5,0,n.parent.parent.context.$implicit.name,"WorkPackage")},function(e,n){e(n,3,0,n.parent.parent.context.$implicit.label)})}function GC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","attributes-key-value--value-container -minimal"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](2,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"]},null),(e()(),l["ɵeld"](3,0,null,null,0,"span",[["class","attributes-key-value--value-separator"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](5,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"],displayPlaceholder:[3,"displayPlaceholder"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.parent.context.$implicit.fields[0].name,t.workPackage,"-small -shrink",t.text[n.parent.parent.context.$implicit.name][n.parent.parent.context.$implicit.fields[0].name]);e(n,5,0,n.parent.parent.context.$implicit.fields[1].name,t.workPackage,"-small -shrink",t.text[n.parent.parent.context.$implicit.name][n.parent.parent.context.$implicit.fields[1].name])},null)}function KC(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,BC)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,QC)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,UC)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,GC)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,1,0,!n.parent.context.$implicit.multiple&&n.parent.context.$implicit.field),e(n,3,0,!n.parent.context.$implicit.multiple&&n.parent.context.$implicit.field),e(n,5,0,n.parent.context.$implicit.multiple),e(n,7,0,n.parent.context.$implicit.multiple)},null)}function YC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","attributes-key-value"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-span-all-columns":0}),(e()(),l["ɵand"](16777216,null,null,1,null,KC)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,n.context.$implicit.spanAll);e(n,2,0,"attributes-key-value",l),e(n,5,0,!t.shouldHideField(n.context.$implicit))},null)}function ZC(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","-columns-2"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,YC)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,2,0,t.group.members,t.trackByName)},null)}var JC=l["ɵccf"]("wp-attribute-group",LC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-attribute-group",[],null,null,null,ZC,$C)),l["ɵdid"](1,49152,null,0,LC,[A.a,ss,l.Injector],null,null)],null,null)},{workPackage:"workPackage",group:"group"},{},[]),XC=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,r)||this;return a.PathHelper=n,a.wpInlineCreate=t,a.wpRelations=l,a.halEvents=i,a.queryUrlParamsHelper=r,a.notificationService=o,a.I18n=u,a.tableActions=[Cb.factoryFor("remove-relation-action",a.I18n.t("js.relation_buttons.remove"),function(e){a.embeddedTable.loadingIndicator=a.wpRelations.require(e.id).then(function(){return a.wpInlineCreate.remove(a.workPackage,e)}).then(function(){return a.refreshTable()}).catch(function(e){return a.notificationService.handleRawError(e,a.workPackage)})},function(e){return!!e.changeParent})],a}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this,n=this.getRelationTypeFromQuery();this.wpInlineCreate.referenceTarget=this.workPackage,this.wpInlineCreate.relationType=n,this.queryProps=this.buildQueryProps(),this.wpInlineCreate.newInlineWorkPackageCreated.pipe(Object(Gn.b)(this)).subscribe(function(n){return e.addRelation(n)}),this.wpRelations.observe(this.workPackage.id).pipe(Object(Yn.a)(function(e){return!_.isEmpty(e)}),Object(Gn.b)(this)).subscribe(function(){return e.refreshTable()})},n.prototype.ngOnDestroy=function(){},n.prototype.addRelation=function(e){var n=this;this.wpInlineCreate.add(this.workPackage,e).then(function(){n.halEvents.push(n.workPackage,{eventType:"association",relatedWorkPackage:e,relationType:n.getRelationTypeFromQuery()})}).catch(function(e){return n.notificationService.handleRawError(e,n.workPackage)})},n.prototype.getRelationTypeFromQuery=function(){return this.group.relationType},n}(kb),ek=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function nk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","attributes-group--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","attributes-group--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"h3",[["class","attributes-group--header-text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.component.group.name)})}function tk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,nk)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,2,"wp-embedded-table",[],null,[[null,"onQueryLoaded"]],function(e,n,t){var l=!0,i=e.component;"onQueryLoaded"===n&&(l=!1!==i.handleQueryLoaded(t)&&l);return l},yb,gb)),l["ɵdid"](4,4964352,[[1,4],["embeddedTable",4]],0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],initialLoadingIndicator:[1,"initialLoadingIndicator"],queryProps:[2,"queryProps"],tableActions:[3,"tableActions"]},{onQueryLoaded:"onQueryLoaded"}),l["ɵpod"](5,{actionsColumnEnabled:0,hierarchyToggleEnabled:1,inlineCreateEnabled:2,compactTableStyle:3,columnMenuEnabled:4,contextMenuEnabled:5,projectIdentifier:6,projectContext:7})],function(e,n){var t=n.component;e(n,2,0,t.group);var l=e(n,5,0,!0,!1,!0,!0,!1,!1,t.workPackage.project.idFromLink,!1);e(n,4,0,l,!1,t.queryProps,t.tableActions)},null)}function lk(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{embeddedTable:0}),(e()(),l["ɵand"](16777216,null,null,1,null,tk)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,!n.component.hidden)},null)}var ik=l["ɵccf"]("wp-relation-query",XC,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"wp-relation-query",[],null,null,null,lk,ek)),l["ɵprd"](512,null,Fd,Op,[l.Injector]),l["ɵdid"](2,245760,null,0,XC,[ge,Fd,On,ct,Ne,qn,A.a],null,null)],function(e,n){e(n,2,0)},null)},{workPackage:"workPackage",query:"query",group:"group"},{},[]),rk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ok(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function uk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,ok)),l["ɵdid"](2,671744,null,0,$t.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["ɵdid"](3,16384,null,0,fu.g,[$t.NgComponentOutlet],null,null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.prependModalComponent,t.injector)},null)}function ak(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[["class","tab-show"],["href",""],["role","button"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchTo(e.context.$implicit.name)&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"-disabled":0,selected:1})],function(e,n){var t=n.component,l=e(n,4,0,null!=n.context.$implicit.disableBecause,t.currentTab&&n.context.$implicit.name===t.currentTab.name);e(n,3,0,"tab-show",l)},function(e,n){e(n,1,0,n.context.$implicit.disableBecause||n.context.$implicit.title,n.context.$implicit.title)})}function sk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","tabs--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ak)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](4,0,null,null,2,"div",[["class","tabs-buttons"],["style","display:none;"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"button",[["class","tab-left icon-context icon-arrow-left4"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"button",[["class","tab-right icon-context icon-arrow-right5"]],null,null,null,null,null))],function(e,n){e(n,3,0,n.component.availableTabs)},null)}function ck(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{tabContentOutlet:0}),(e()(),l["ɵeld"](1,0,null,null,13,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,12,"div",[["class","op-modal--modal-container -wide wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,uk)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,sk)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](11,0,[[1,0],["tabContentOutlet",1]],null,0,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,0,"button",[["class","button -highlight"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveChanges()&&l);return l},null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,8,0,!!t.prependModalComponent),e(n,10,0,!!t.tabPortalHost)},function(e,n){var t=n.component;e(n,5,0,t.text.closePopup),e(n,6,0,t.text.title),e(n,13,0,t.text.applyButton),e(n,14,0,t.text.cancelButton)})}var dk=l["ɵccf"]("ng-component",zn,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,ck,rk)),l["ɵdid"](1,245760,null,0,zn,[Wn.a,[2,Bn],A.a,l.Injector,l.ApplicationRef,l.ComponentFactoryResolver,Nn,b,hn,Hn,qn,$e,l.ChangeDetectorRef,be,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),pk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function hk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.component.text[n.context.$implicit.id])})}function fk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[["class","relation-filter-selector"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,12,"h5",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,7,"select",[["class","form--select form--inline-select"],["id",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,5).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,5).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.selectedRelationFilter=t)&&i);"ngModelChange"===n&&(i=!1!==r.onRelationFilterSelected()&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],{compareWith:[0,"compareWith"]},null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](7,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](9,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,hk)),l["ɵdid"](11,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](13,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.compareRelationFilters),e(n,7,0,t.selectedRelationFilter),e(n,11,0,t.availableRelationFilters)},function(e,n){var t=n.component;e(n,2,0,t.text.first_part),e(n,4,0,l["ɵnov"](n,9).ngClassUntouched,l["ɵnov"](n,9).ngClassTouched,l["ɵnov"](n,9).ngClassPristine,l["ɵnov"](n,9).ngClassDirty,l["ɵnov"](n,9).ngClassValid,l["ɵnov"](n,9).ngClassInvalid,l["ɵnov"](n,9).ngClassPending),e(n,13,0,t.text.second_part)})}var gk=l["ɵccf"]("wp-table-configuration-relation-selector",yt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table-configuration-relation-selector",[],null,null,null,fk,pk)),l["ɵdid"](1,114688,null,0,yt,[l.Injector,A.a,en,be],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),mk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function vk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[["class","ee-relation-columns-upsale"],["opReferrer","wp-list-columns#relations"]],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsaleRelationColumns,t.text.upsaleCheckOutLink,"wp-list-columns#relations")},null)}function bk(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{select2Columns:0}),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","columns-modal--content select2-modal-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"label",[["class","hidden-for-sighted"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](4,0,[[1,0],["select2Columns",1]],null,0,"input",[["type","hidden"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"p",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,vk)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,8,0,n.component.eeShowBanners)},function(e,n){var t=n.component;e(n,2,0,t.text.selectedColumns),e(n,6,0,t.text.columnsHelp)})}var yk=l["ɵccf"]("ng-component",Ke,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,bk,mk)),l["ɵdid"](1,4440064,null,0,Ke,[l.Injector,A.a,$e,be,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),wk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ck(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.display_mode.hierarchy_hint)})}function kk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.href),e(n,2,0,n.context.$implicit.href)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.currentGroup&&t.currentGroup.href===n.context.$implicit.href)})}function Ik(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,65,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,64,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,3).onReset()&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.u,[],null,null),l["ɵdid"](3,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](5,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,15,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,14,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,13,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","default"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,11)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,11).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,11)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,11)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,12).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,12).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.displayMode=t)&&i);return i},null,null)),l["ɵdid"](11,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](12,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](14,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](16,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](17,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-no-hierarchy"]],[[1,"icon-title",0]],null,null,hl,dl)),l["ɵdid"](18,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](20,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](22,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,16,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,15,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,14,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","hierarchy"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,27)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,27).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,27)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,27)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,28).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,28).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.displayMode=t)&&i);return i},null,null)),l["ɵdid"](27,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](28,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](30,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](32,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](33,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-hierarchy"]],[[1,"icon-title",0]],null,null,hl,dl)),l["ɵdid"](34,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](36,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵand"](16777216,null,null,1,null,Ck)),l["ɵdid"](39,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](40,0,null,null,17,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](41,0,null,null,16,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](42,0,null,null,15,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](43,0,null,null,6,"input",[["name","display_mode_switch"],["type","radio"],["value","grouped"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,44)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,44).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,44)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,44)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,45).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,45).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.displayMode=t)&&i);return i},null,null)),l["ɵdid"](44,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](45,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](47,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](49,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](50,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-group-by"]],[[1,"icon-title",0]],null,null,hl,dl)),l["ɵdid"](51,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](53,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](55,0,null,null,2,"select",[["class","form--select form--inline-select"],["id","selected_grouping"],["name","selected_grouping"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateGroup(t.target.value)&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,kk)),l["ɵdid"](57,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](58,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),l["ɵeld"](59,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](60,0,null,null,5,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](61,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](62,0,null,null,3,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](63,0,null,null,0,"input",[["name","display_sums_switch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!=(i.displaySums=!i.displaySums)&&l);return l},null,null)),(e()(),l["ɵted"](64,null,[" "," "])),(e()(),l["ɵeld"](65,0,null,null,0,"span",[["class","form--inline-instructions"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,12,0,"display_mode_switch","default");e(n,14,0,"display_mode_switch",t.displayMode);e(n,18,0,"icon-no-hierarchy");e(n,28,0,"display_mode_switch","hierarchy");e(n,30,0,"display_mode_switch",t.displayMode);e(n,34,0,"icon-hierarchy"),e(n,39,0,"hierarchy"===t.displayMode);e(n,45,0,"display_mode_switch","grouped");e(n,47,0,"display_mode_switch",t.displayMode);e(n,51,0,"icon-group-by"),e(n,57,0,t.availableGroups)},function(e,n){var t=n.component;e(n,1,0,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending),e(n,6,0,t.text.choose_mode),e(n,10,0,l["ɵnov"](n,16).ngClassUntouched,l["ɵnov"](n,16).ngClassTouched,l["ɵnov"](n,16).ngClassPristine,l["ɵnov"](n,16).ngClassDirty,l["ɵnov"](n,16).ngClassValid,l["ɵnov"](n,16).ngClassInvalid,l["ɵnov"](n,16).ngClassPending),e(n,17,0,t.text.display_mode.default),e(n,20,0,t.text.display_mode.default),e(n,22,0,t.text.default),e(n,26,0,l["ɵnov"](n,32).ngClassUntouched,l["ɵnov"](n,32).ngClassTouched,l["ɵnov"](n,32).ngClassPristine,l["ɵnov"](n,32).ngClassDirty,l["ɵnov"](n,32).ngClassValid,l["ɵnov"](n,32).ngClassInvalid,l["ɵnov"](n,32).ngClassPending),e(n,33,0,t.text.display_mode.hierarchy),e(n,36,0,t.text.display_mode.hierarchy),e(n,43,0,l["ɵnov"](n,49).ngClassUntouched,l["ɵnov"](n,49).ngClassTouched,l["ɵnov"](n,49).ngClassPristine,l["ɵnov"](n,49).ngClassDirty,l["ɵnov"](n,49).ngClassValid,l["ɵnov"](n,49).ngClassInvalid,l["ɵnov"](n,49).ngClassPending),e(n,50,0,t.text.label_group_by),e(n,53,0,t.text.label_group_by),e(n,63,0,t.displaySums),e(n,64,0,t.text.display_sums),e(n,65,0,t.text.display_sums_hint)})}var jk=l["ɵccf"]("ng-component",Ue,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Ik,wk)),l["ɵdid"](1,114688,null,0,Ue,[l.Injector,A.a,Be,We,Qe],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Rk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Pk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"query-filters",[],null,[[null,"filtersChanged"]],function(e,n,t){var l=!0,i=e.component;"filtersChanged"===n&&(l=!1!==(i.filters=t)&&l);return l},Bg,Ag)),l["ɵdid"](1,770048,null,0,Ng,[en,Ze,A.a,Ge],{filters:[0,"filters"]},{filtersChanged:"filtersChanged"})],function(e,n){e(n,1,0,n.component.filters)},null)}function Sk(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Pk)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,!!n.component.filters)},null)}var _k=l["ɵccf"]("wp-table-config-filters-tab",nn,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-table-config-filters-tab",[],null,null,null,Sk,Rk)),l["ɵdid"](1,114688,null,0,nn,[l.Injector,A.a,en,Ze,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),xk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Tk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[["selected",""]],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.column.href),e(n,2,0,n.parent.context.$implicit.column.href)},function(e,n){e(n,0,0,n.parent.context.$implicit.column.name)})}function Ok(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.href),e(n,2,0,n.context.$implicit.href)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function Ek(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"input",[["type","radio"]],[[8,"textContent",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["ɵnov"](e,2)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,2).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,2)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,2)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,3).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(e.parent.context.$implicit.direction=t)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](3,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](5,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](7,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](8,null,[" "," "]))],function(e,n){e(n,3,0,l["ɵinlineInterpolate"](1,"modal-sorting-attribute-",n.parent.context.index,"--sort-direction"),n.context.$implicit.$href),e(n,5,0,l["ɵinlineInterpolate"](1,"modal-sorting-attribute-",n.parent.context.index,"--sort-direction"),n.parent.context.$implicit.direction)},function(e,n){e(n,1,0,n.context.$implicit.name,l["ɵnov"](n,7).ngClassUntouched,l["ɵnov"](n,7).ngClassTouched,l["ɵnov"](n,7).ngClassPristine,l["ɵnov"](n,7).ngClassDirty,l["ɵnov"](n,7).ngClassValid,l["ɵnov"](n,7).ngClassInvalid,l["ɵnov"](n,7).ngClassPending),e(n,8,0,n.context.$implicit.name)})}function Dk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,16,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,11,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"label",[["class","form--label hidden-for-sighted"]],[[8,"htmlFor",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,8,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,7,"select",[["class","form--select"]],[[8,"id",0],[8,"name",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateSelection(e.context.$implicit,t.target.value)&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Tk)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](9,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](10,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ok)),l["ɵdid"](12,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](13,0,null,null,3,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ek)),l["ɵdid"](16,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,7,0,!!n.context.$implicit.column.href),e(n,9,0,t.emptyColumn.href),e(n,10,0,t.emptyColumn.href),e(n,12,0,t.availableColumns),e(n,16,0,t.availableDirections)},function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"form--row modal-sorting-row-",n.context.index,"")),e(n,2,0,l["ɵinlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,""),t.text["sort_criteria_"+n.context.index]),e(n,5,0,l["ɵinlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,""),l["ɵinlineInterpolate"](1,"modal-sorting-attribute-",n.context.index,"")),e(n,8,0,t.emptyColumn.name,!n.context.$implicit.column.href)})}function Fk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Dk)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,n.component.sortationObjects)},null)}function Nk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,32,"form",[["name","modalSortingForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,2).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,2).onReset()&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.u,[],null,null),l["ɵdid"](2,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](4,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](5,0,null,null,27,"div",[["class","modal-content-container loading-indicator--location"],["data-indicator-name","sorting-modal"],["id","modal-sorting"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,10,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,6,"input",[["name","sorting_mode_switch"],["type","radio"],["value","manual"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,11)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,11).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,11)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,11)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,12).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,12).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.sortingMode=t)&&i);"change"===n&&(i=!1!==r.updateSortingMode(t.target.value)&&i);return i},null,null)),l["ɵdid"](11,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](12,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](14,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](16,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](17,null,[" "," "])),(e()(),l["ɵeld"](18,0,null,null,12,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,6,"input",[["name","sorting_mode_switch"],["type","radio"],["value","automatic"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,22)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,22).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,22)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,22)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,23).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,23).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.sortingMode=t)&&i);"change"===n&&(i=!1!==r.updateSortingMode(t.target.value)&&i);return i},null,null)),l["ɵdid"](22,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](23,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](25,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](27,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](28,null,[" "," "])),(e()(),l["ɵeld"](29,0,null,null,1,"div",[["class","form--field-instructions"]],null,null,null,null,null)),(e()(),l["ɵted"](30,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,Fk)),l["ɵdid"](32,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,12,0,"sorting_mode_switch","manual");e(n,14,0,"sorting_mode_switch",t.sortingMode);e(n,23,0,"sorting_mode_switch","automatic");e(n,25,0,"sorting_mode_switch",t.sortingMode),e(n,32,0,"automatic"===t.sortingMode)},function(e,n){var t=n.component;e(n,0,0,l["ɵnov"](n,4).ngClassUntouched,l["ɵnov"](n,4).ngClassTouched,l["ɵnov"](n,4).ngClassPristine,l["ɵnov"](n,4).ngClassDirty,l["ɵnov"](n,4).ngClassValid,l["ɵnov"](n,4).ngClassInvalid,l["ɵnov"](n,4).ngClassPending),e(n,6,0,t.text.sorting_mode.description),e(n,10,0,l["ɵnov"](n,16).ngClassUntouched,l["ɵnov"](n,16).ngClassTouched,l["ɵnov"](n,16).ngClassPristine,l["ɵnov"](n,16).ngClassDirty,l["ɵnov"](n,16).ngClassValid,l["ɵnov"](n,16).ngClassInvalid,l["ɵnov"](n,16).ngClassPending),e(n,17,0,t.text.sorting_mode.manually),e(n,21,0,l["ɵnov"](n,27).ngClassUntouched,l["ɵnov"](n,27).ngClassTouched,l["ɵnov"](n,27).ngClassPristine,l["ɵnov"](n,27).ngClassDirty,l["ɵnov"](n,27).ngClassValid,l["ɵnov"](n,27).ngClassInvalid,l["ɵnov"](n,27).ngClassPending),e(n,28,0,t.text.sorting_mode.automatic),e(n,30,0,t.text.sorting_mode.warning)})}var Ak=l["ɵccf"]("ng-component",un,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Nk,xk)),l["ɵdid"](1,114688,null,0,un,[l.Injector,A.a,rn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Vk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Mk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){var t=n.component;e(n,0,0,t.text.zoom[n.context.$implicit],t.zoomLevel===n.context.$implicit)})}function qk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.id),e(n,2,0,n.context.$implicit.id)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.labels[n.parent.context.$implicit]===n.context.$implicit.id)})}function Lk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","form--row"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"label",[["class","form--label"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),l["ɵted"](3,null,[" "," "])),(e()(),l["ɵeld"](4,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,3,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,2,"select",[["class","form--select"]],[[8,"id",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateLabels(e.context.$implicit,t.target.value)&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,qk)),l["ɵdid"](8,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,8,0,n.component.availableAttributes)},function(e,n){var t=n.component;e(n,2,0,l["ɵinlineInterpolate"](1,"modal-timelines-label-",n.context.$implicit,"")),e(n,3,0,t.text.labels[n.context.$implicit]),e(n,6,0,l["ɵinlineInterpolate"](1,"modal-timelines-label-",n.context.$implicit,""))})}function $k(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,14,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"legend",[["class","form--fieldset-legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,5,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,4,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,3,"div",[["class","form--text-select-container -slim"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,2,"select",[["class","form--select"],["id","modal-timelines-zoomlevel"]],[[1,"disabled",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.zoomLevel=t.target.value)&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Mk)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](10,0,null,null,4,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,0,"legend",[["class","form--fieldset-legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Lk)),l["ɵdid"](14,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,9,0,t.availableZoomLevels),e(n,14,0,t.availableLabels)},function(e,n){var t=n.component;e(n,2,0,t.text.zoom.level),e(n,3,0,t.text.zoom.description),e(n,7,0,!0===t.autoZoom?"disabled":void 0),e(n,11,0,t.text.labels.title),e(n,12,0,t.text.labels.description)})}function Hk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,13,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,12,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,3).onReset()&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.u,[],null,null),l["ɵdid"](3,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](5,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](6,0,null,null,5,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"label",[["class","form--label"],["for","display_timelines_switch"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"input",[["id","display_timelines_switch"],["name","display_timelines_switch"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!=(i.timelineVisible=!i.timelineVisible)&&l);return l},null,null)),(e()(),l["ɵeld"](11,0,null,null,0,"p",[["class","form--field-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,$k)),l["ɵdid"](13,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,13,0,n.component.timelineVisible)},function(e,n){var t=n.component;e(n,1,0,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending),e(n,7,0,t.text.display_timelines),e(n,10,0,t.timelineVisible),e(n,11,0,t.text.display_timelines_hint)})}var Bk=l["ɵccf"]("ng-component",an,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Hk,Vk)),l["ɵdid"](1,114688,null,0,an,[l.Injector,A.a,N,$e],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),zk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Wk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[["class","ee-attribute-highlighting-upsale"],["opReferrer","wp-attribute-highlighting#attribute-highlighting"]],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsaleAttributeHighlighting,t.text.upsaleCheckOutLink,"wp-attribute-highlighting#attribute-highlighting")},null)}function Qk(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{highlightedAttributesNgSelect:0}),l["ɵqud"](671088640,2,{rowHighlightNgSelect:0}),(e()(),l["ɵeld"](2,0,null,null,81,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Wk)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](5,0,null,null,78,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,7).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,7).onReset()&&i);return i},null,null)),l["ɵdid"](6,16384,null,0,Ht.u,[],null,null),l["ɵdid"](7,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](9,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](10,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,31,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,9,"label",[["class","form--label"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","inline"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,14)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,14).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,14)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,14)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,15).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,15).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.highlightingMode=t)&&i);"change"===n&&(i=!1!==r.updateMode(t.target.value)&&i);return i},null,null)),l["ɵdid"](14,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](15,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](17,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](19,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](20,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,["  "])),(e()(),l["ɵeld"](22,0,null,null,20,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,19,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,18,"ng-select",[["appendTo","body"],["bindLabel","name"],["class","form--select-field -multi-select ng-select"],["name","highlighting_attributes"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"open"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,26).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.selectedAttributes=t)&&i);"open"===n&&(i=!1!==r.onOpen(l["ɵnov"](e,26))&&i);"change"===n&&(i=!1!==r.updateHighlightingAttributes(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](26,4964352,[[1,4],["highlightedAttributesNgSelect",4]],12,Lt.a,[[8,"form--select-field -multi-select"],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],appendTo:[1,"appendTo"],closeOnSelect:[2,"closeOnSelect"],multiple:[3,"multiple"],clearable:[4,"clearable"],items:[5,"items"]},{changeEvent:"change",openEvent:"open"}),l["ɵqud"](335544320,3,{optionTemplate:0}),l["ɵqud"](335544320,4,{optgroupTemplate:0}),l["ɵqud"](335544320,5,{labelTemplate:0}),l["ɵqud"](335544320,6,{multiLabelTemplate:0}),l["ɵqud"](603979776,7,{headerTemplate:0}),l["ɵqud"](603979776,8,{footerTemplate:0}),l["ɵqud"](335544320,9,{notFoundTemplate:0}),l["ɵqud"](335544320,10,{typeToSearchTemplate:0}),l["ɵqud"](335544320,11,{loadingTextTemplate:0}),l["ɵqud"](335544320,12,{tagTemplate:0}),l["ɵqud"](335544320,13,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,14,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](40,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](42,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](43,0,null,null,30,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](44,0,null,null,8,"label",[["class","form--label"]],null,null,null,null,null)),(e()(),l["ɵeld"](45,0,null,null,6,"input",[["name","entire_row_switch"],["type","radio"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,46)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,46).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,46)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,46)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,47).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,47).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.entireRowMode=t)&&i);"change"===n&&(i=!1!==r.updateMode("entire-row")&&i);return i},null,null)),l["ɵdid"](46,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](47,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](49,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](51,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](52,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](53,0,null,null,20,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](54,0,null,null,19,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](55,0,null,null,18,"ng-select",[["appendTo","body"],["bindLabel","name"],["bindValue","value"],["class","form--select-field ng-select"],["id","selected_attribute"],["name","selected_attribute"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"open"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,57).handleKeyDown(t)&&i);"ngModelChange"===n&&(i=!1!==(r.lastEntireRowAttribute=t)&&i);"open"===n&&(i=!1!==r.onOpen(l["ɵnov"](e,57))&&i);"change"===n&&(i=!1!==r.updateMode(t.value)&&i);return i},qt.b,qt.a)),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵdid"](57,4964352,[[2,4],["rowHighlightNgSelect",4]],12,Lt.a,[[8,"form--select-field"],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{bindLabel:[0,"bindLabel"],bindValue:[1,"bindValue"],appendTo:[2,"appendTo"],clearable:[3,"clearable"],items:[4,"items"]},{changeEvent:"change",openEvent:"open"}),l["ɵqud"](335544320,15,{optionTemplate:0}),l["ɵqud"](335544320,16,{optgroupTemplate:0}),l["ɵqud"](335544320,17,{labelTemplate:0}),l["ɵqud"](335544320,18,{multiLabelTemplate:0}),l["ɵqud"](603979776,19,{headerTemplate:0}),l["ɵqud"](603979776,20,{footerTemplate:0}),l["ɵqud"](335544320,21,{notFoundTemplate:0}),l["ɵqud"](335544320,22,{typeToSearchTemplate:0}),l["ɵqud"](335544320,23,{loadingTextTemplate:0}),l["ɵqud"](335544320,24,{tagTemplate:0}),l["ɵqud"](335544320,25,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,26,{ngOptions:1}),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵdid"](71,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](73,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](74,0,null,null,9,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](75,0,null,null,8,"label",[["class","form--label"]],null,null,null,null,null)),(e()(),l["ɵeld"](76,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","none"]],[[1,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,77)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,77).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,77)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,77)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,78).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,78).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.highlightingMode=t)&&i);"change"===n&&(i=!1!==r.updateMode(t.target.value)&&i);return i},null,null)),l["ɵdid"](77,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](78,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](80,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](82,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](83,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,4,0,t.eeShowBanners);e(n,15,0,"highlighting_mode_switch","inline");e(n,17,0,"highlighting_mode_switch",t.highlightingMode);e(n,26,0,"name","body",!1,!0,!1,t.availableInlineHighlightedAttributes);e(n,40,0,"highlighting_attributes","inline"!==t.highlightingMode,t.selectedAttributes);e(n,47,0,"entire_row_switch",!0);e(n,49,0,"entire_row_switch",t.entireRowMode);e(n,57,0,"name","value","body",!1,t.availableRowHighlightedAttributes);e(n,71,0,"selected_attribute",t.disabledValue(t.eeShowBanners),t.lastEntireRowAttribute);e(n,78,0,"highlighting_mode_switch","none");e(n,80,0,"highlighting_mode_switch",t.highlightingMode)},function(e,n){var t=n.component;e(n,5,0,l["ɵnov"](n,9).ngClassUntouched,l["ɵnov"](n,9).ngClassTouched,l["ɵnov"](n,9).ngClassPristine,l["ɵnov"](n,9).ngClassDirty,l["ɵnov"](n,9).ngClassValid,l["ɵnov"](n,9).ngClassInvalid,l["ɵnov"](n,9).ngClassPending),e(n,10,0,t.text.highlighting_mode.description),e(n,13,0,t.disabledValue(t.eeShowBanners),l["ɵnov"](n,19).ngClassUntouched,l["ɵnov"](n,19).ngClassTouched,l["ɵnov"](n,19).ngClassPristine,l["ɵnov"](n,19).ngClassDirty,l["ɵnov"](n,19).ngClassValid,l["ɵnov"](n,19).ngClassInvalid,l["ɵnov"](n,19).ngClassPending),e(n,20,0,t.text.highlighting_mode.inline),e(n,24,1,[!l["ɵnov"](n,26).multiple,l["ɵnov"](n,26).typeahead,l["ɵnov"](n,26).multiple,l["ɵnov"](n,26).addTag,l["ɵnov"](n,26).searchable,l["ɵnov"](n,26).clearable,l["ɵnov"](n,26).isOpen,l["ɵnov"](n,26).disabled,l["ɵnov"](n,26).filtered,l["ɵnov"](n,42).ngClassUntouched,l["ɵnov"](n,42).ngClassTouched,l["ɵnov"](n,42).ngClassPristine,l["ɵnov"](n,42).ngClassDirty,l["ɵnov"](n,42).ngClassValid,l["ɵnov"](n,42).ngClassInvalid,l["ɵnov"](n,42).ngClassPending]),e(n,45,0,t.disabledValue(t.eeShowBanners),l["ɵnov"](n,51).ngClassUntouched,l["ɵnov"](n,51).ngClassTouched,l["ɵnov"](n,51).ngClassPristine,l["ɵnov"](n,51).ngClassDirty,l["ɵnov"](n,51).ngClassValid,l["ɵnov"](n,51).ngClassInvalid,l["ɵnov"](n,51).ngClassPending),e(n,52,0,t.text.highlighting_mode.entire_row_by),e(n,55,1,[!l["ɵnov"](n,57).multiple,l["ɵnov"](n,57).typeahead,l["ɵnov"](n,57).multiple,l["ɵnov"](n,57).addTag,l["ɵnov"](n,57).searchable,l["ɵnov"](n,57).clearable,l["ɵnov"](n,57).isOpen,l["ɵnov"](n,57).disabled,l["ɵnov"](n,57).filtered,l["ɵnov"](n,73).ngClassUntouched,l["ɵnov"](n,73).ngClassTouched,l["ɵnov"](n,73).ngClassPristine,l["ɵnov"](n,73).ngClassDirty,l["ɵnov"](n,73).ngClassValid,l["ɵnov"](n,73).ngClassInvalid,l["ɵnov"](n,73).ngClassPending]),e(n,76,0,t.disabledValue(t.eeShowBanners),l["ɵnov"](n,82).ngClassUntouched,l["ɵnov"](n,82).ngClassTouched,l["ɵnov"](n,82).ngClassPristine,l["ɵnov"](n,82).ngClassDirty,l["ɵnov"](n,82).ngClassValid,l["ɵnov"](n,82).ngClassInvalid,l["ɵnov"](n,82).ngClassPending),e(n,83,0,t.text.highlighting_mode.none)})}var Uk=l["ɵccf"]("ng-component",cn,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Qk,zk)),l["ɵdid"](1,114688,null,0,cn,[l.Injector,A.a,d,b,Ge,sn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Gk=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Kk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[],[[1,"href",4],[8,"id",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](4,0,null,null,0,"span",[["class","export-label"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,l["ɵinlineInterpolate"](1,"icon-export-",n.context.$implicit.identifier," icon-big"))},function(e,n){e(n,1,0,n.context.$implicit.url,l["ɵinlineInterpolate"](1,"export-",n.context.$implicit.identifier,"")),e(n,4,0,n.context.$implicit.label)})}function Yk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ul",[["class","export-options"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Kk)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,2,0,n.component.exportOptions)},null)}function Zk(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,6,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Yk)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,7,0,n.component.exportOptions)},function(e,n){var t=n.component;e(n,4,0,t.text.closePopup),e(n,5,0,t.text.title)})}var Jk=l["ɵccf"]("ng-component",Yy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Zk,Gk)),l["ɵdid"](1,245760,null,0,Yy,[Wn.a,A.a,l.ElementRef,Ne,b,l.ChangeDetectorRef,$e],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Xk=function(){function e(e,n,t,i){this.states=e,this.querySpace=n,this.authorisationService=t,this.I18n=i,this.onChange=new l.EventEmitter,this.text={showInMenu:this.I18n.t("js.label_star_query"),visibleForOthers:this.I18n.t("js.label_public_query"),showInMenuText:this.I18n.t("js.work_packages.query.star_text"),visibleForOthersText:this.I18n.t("js.work_packages.query.public_text")}}return Object.defineProperty(e.prototype,"canStar",{get:function(){return this.isSave||this.authorisationService.can("query","star")||this.authorisationService.can("query","unstar")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPublish",{get:function(){var e=this.querySpace.queryForm.value;return this.authorisationService.can("query","updateImmediately")&&e.schema.public.writable},enumerable:!0,configurable:!0}),e.prototype.updateStarred=function(e){this.isStarred=e,this.changed()},e.prototype.updatePublic=function(e){this.isPublic=e,this.changed()},e.prototype.changed=function(){this.onChange.emit({isStarred:!!this.isStarred,isPublic:!!this.isPublic})},e}(),eI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function nI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,11,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,10,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,5,"input",[["class","form--check-box"],["id","show-public"],["name","is_public"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,5).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,5).onTouched()&&i);"ngModelChange"===n&&(i=!1!==r.updatePublic(t)&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Ht.b,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.b]),l["ɵdid"](7,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](9,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](10,null,[" "," "])),(e()(),l["ɵeld"](11,0,null,null,0,"div",[["class","form--field-instructions -no-margin"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,11,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,10,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,5,"input",[["class","form--check-box"],["id","show-in-menu"],["name","show_in_menu"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,17).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,17).onTouched()&&i);"ngModelChange"===n&&(i=!1!==r.updateStarred(t)&&i);return i},null,null)),l["ɵdid"](17,16384,null,0,Ht.b,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.b]),l["ɵdid"](19,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](21,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](22,null,[" "," "])),(e()(),l["ɵeld"](23,0,null,null,0,"div",[["class","form--field-instructions -no-margin"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,7,0,"is_public",!t.canPublish,t.isPublic);e(n,19,0,"show_in_menu",!t.canStar,t.isStarred)},function(e,n){var t=n.component;e(n,4,0,l["ɵnov"](n,9).ngClassUntouched,l["ɵnov"](n,9).ngClassTouched,l["ɵnov"](n,9).ngClassPristine,l["ɵnov"](n,9).ngClassDirty,l["ɵnov"](n,9).ngClassValid,l["ɵnov"](n,9).ngClassInvalid,l["ɵnov"](n,9).ngClassPending),e(n,10,0,t.text.visibleForOthers),e(n,11,0,t.text.visibleForOthersText),e(n,16,0,l["ɵnov"](n,21).ngClassUntouched,l["ɵnov"](n,21).ngClassTouched,l["ɵnov"](n,21).ngClassPristine,l["ɵnov"](n,21).ngClassDirty,l["ɵnov"](n,21).ngClassValid,l["ɵnov"](n,21).ngClassInvalid,l["ɵnov"](n,21).ngClassPending),e(n,22,0,t.text.showInMenu),e(n,23,0,t.text.showInMenuText)})}l["ɵccf"]("query-sharing-form",Xk,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"query-sharing-form",[],null,null,null,nI,eI)),l["ɵdid"](1,49152,null,0,Xk,[d,b,In,A.a],null,null)],null,null)},{isSave:"isSave",isStarred:"isStarred",isPublic:"isPublic"},{onChange:"onChange"},[]);var tI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function lI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"query-sharing-form",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.setValues(t)&&l);return l},nI,eI)),l["ɵdid"](7,49152,null,0,Xk,[d,b,In,A.a],{isSave:[0,"isSave"],isStarred:[1,"isStarred"],isPublic:[2,"isPublic"]},{onChange:"onChange"}),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","form--space"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveQuery(t)&&l);return l},null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,7,0,!1,t.isStarred,t.isPublic)},function(e,n){var t=n.component;e(n,4,0,t.text.close_popup),e(n,5,0,t.text.label_visibility_settings),e(n,9,0,t.text.button_save),e(n,10,0,t.text.button_cancel,t.isBusy)})}var iI=l["ɵccf"]("ng-component",Jy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,lI,tI)),l["ɵdid"](1,245760,null,0,Jy,[l.ElementRef,Wn.a,A.a,d,b,l.ChangeDetectorRef,ot,Mn,Vn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),rI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function oI(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{queryNameField:0}),(e()(),l["ɵeld"](1,0,null,null,30,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,29,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,2,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,6).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,6).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.closeMe(t)&&i);return i},null,null)),l["ɵdid"](6,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](7,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,23,"form",[["class","form"],["name","modalSaveForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,10).onReset()&&i);return i},null,null)),l["ɵdid"](9,16384,null,0,Ht.u,[],null,null),l["ɵdid"](10,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](12,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](13,0,null,null,11,"div",[["class","form--field -required"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"label",[["class","form--label"],["for","save-query-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,8,"div",[["class","form--text-field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,[[1,0],["queryNameField",1]],null,7,"input",[["class","form--text-field"],["id","save-query-name"],["name","save-query-name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,18)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,18).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,18)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,18)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.queryName=t)&&i);return i},null,null)),l["ɵdid"](18,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](19,16384,null,0,Ht.p,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,Ht.f,function(e){return[e]},[Ht.p]),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](22,671744,null,0,Ht.l,[[2,Ht.c],[6,Ht.f],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](24,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](25,0,null,null,3,"section",[["class","form--section"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,1,"query-sharing-form",[],null,[[null,"onChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.setValues(t)&&l);return l},nI,eI)),l["ɵdid"](28,49152,null,0,Xk,[d,b,In,A.a],{isSave:[0,"isSave"],isStarred:[1,"isStarred"],isPublic:[2,"isPublic"]},{onChange:"onChange"}),(e()(),l["ɵeld"](29,0,null,null,2,"div",[["class","form--space"]],null,null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"]],[[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveQueryAs(t)&&l);return l},null,null)),(e()(),l["ɵeld"](31,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,19,0,"");e(n,22,0,"save-query-name",t.queryName);e(n,28,0,!0,t.isStarred,t.isPublic)},function(e,n){var t=n.component;e(n,5,0,t.text.close_popup),e(n,7,0,t.text.save_as),e(n,8,0,l["ɵnov"](n,12).ngClassUntouched,l["ɵnov"](n,12).ngClassTouched,l["ɵnov"](n,12).ngClassPristine,l["ɵnov"](n,12).ngClassDirty,l["ɵnov"](n,12).ngClassValid,l["ɵnov"](n,12).ngClassInvalid,l["ɵnov"](n,12).ngClassPending),e(n,14,0,t.text.label_name),e(n,17,0,l["ɵnov"](n,19).required?"":null,l["ɵnov"](n,24).ngClassUntouched,l["ɵnov"](n,24).ngClassTouched,l["ɵnov"](n,24).ngClassPristine,l["ɵnov"](n,24).ngClassDirty,l["ɵnov"](n,24).ngClassValid,l["ɵnov"](n,24).ngClassInvalid,l["ɵnov"](n,24).ngClassPending),e(n,26,0,t.text.label_visibility_settings),e(n,30,0,t.text.button_save,t.isBusy||!t.queryName),e(n,31,0,t.text.button_cancel)})}var uI=l["ɵccf"]("ng-component",Zy,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,oI,rI)),l["ɵdid"](1,245760,null,0,Zy,[l.ElementRef,Wn.a,A.a,d,b,ot,Mn,l.ChangeDetectorRef,Vn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),aI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function sI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"li",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" #"])),(e()(),l["ɵeld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,2,0,n.context.$implicit.id),e(n,3,0,n.context.$implicit.subject||"")})}function cI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"p",[["class","danger-zone--warning"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["class","icon icon-error"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[": "])),(e()(),l["ɵeld"](5,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,sI)),l["ɵdid"](8,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](9,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,8,0,n.component.singleWorkPackageChildren)},function(e,n){var t=n.component;e(n,3,0,t.text.warning),e(n,5,0,t.text.hasChildren(t.singleWorkPackage)),e(n,10,0,t.text.deletesChildren)})}function dI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](5,null,[" "," #"," "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,cI)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,7,0,t.singleWorkPackageChildren&&t.singleWorkPackageChildren.length>0)},function(e,n){var t=n.component;e(n,2,0,t.text.text),e(n,5,0,t.singleWorkPackage.type.name,t.singleWorkPackage.id,t.singleWorkPackage.subject)})}function pI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" (+ ",") "]))],null,function(e,n){e(n,1,0,n.component.text.childCount(n.parent.context.$implicit))})}function hI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"li",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[" #"])),(e()(),l["ɵeld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,pI)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,6,0,n.component.children(n.context.$implicit).length>0)},function(e,n){e(n,2,0,n.context.$implicit.id),e(n,4,0,n.context.$implicit.subject)})}function fI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"p",[["class","danger-zone--warning"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["class","icon icon-error"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,hI)),l["ɵdid"](6,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,6,0,n.component.workPackages)},function(e,n){e(n,3,0,n.component.text.text)})}function gI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,6,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,5,"input",[["class","form--check-box"],["id","confirm-children-deletion"],["name","confirm-children-deletion"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,4).onChange(t.target.checked)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.childrenDeletionConfirmed=t)&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.b,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.b]),l["ɵdid"](6,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](8,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵted"](9,null,[" "," "]))],function(e,n){e(n,6,0,"confirm-children-deletion",n.component.childrenDeletionConfirmed)},function(e,n){var t=n.component;e(n,3,0,l["ɵnov"](n,8).ngClassUntouched,l["ɵnov"](n,8).ngClassTouched,l["ɵnov"](n,8).ngClassPristine,l["ɵnov"](n,8).ngClassDirty,l["ɵnov"](n,8).ngClassValid,l["ɵnov"](n,8).ngClassInvalid,l["ɵnov"](n,8).ngClassPending),e(n,9,0,t.text.label_confirm_children_deletion)})}function mI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,21,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,20,"div",[["class","op-modal--modal-container wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["id","wp_destroy_modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,16,"form",[["class","form danger-zone"],["name","modalWpDestroyForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,7).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,7).onReset()&&i);return i},null,null)),l["ɵdid"](6,16384,null,0,Ht.u,[],null,null),l["ɵdid"](7,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](9,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](10,0,null,null,8,"section",[["class","form--section -inner-scrolling"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,0,"h3",[["class","form--section-title"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,6,"div",[["class","modal-inner-scrolling-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,dI)),l["ɵdid"](14,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,fI)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,gI)),l["ɵdid"](18,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](19,0,null,null,2,"div",[["class","form--space -left-spacing"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,0,"button",[["class","button -danger"]],[[8,"textContent",0],[1,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmDeletion(t)&&l);return l},null,null)),(e()(),l["ɵeld"](21,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,14,0,t.singleWorkPackage),e(n,16,0,t.workPackages.length>1),e(n,18,0,t.mustConfirmChildren)},function(e,n){var t=n.component;e(n,4,0,t.text.close),e(n,5,0,l["ɵnov"](n,9).ngClassUntouched,l["ɵnov"](n,9).ngClassTouched,l["ɵnov"](n,9).ngClassPristine,l["ɵnov"](n,9).ngClassDirty,l["ɵnov"](n,9).ngClassValid,l["ɵnov"](n,9).ngClassInvalid,l["ɵnov"](n,9).ngClassPending),e(n,11,0,t.text.title),e(n,20,0,t.text.confirm,t.busy||t.blockedDueToUnconfirmedChildren||void 0),e(n,21,0,t.text.cancel)})}var vI=l["ɵccf"]("ng-component",Sc,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,mI,aI)),l["ɵdid"](1,245760,null,0,Sc,[l.ElementRef,Rc,Wn.a,A.a,l.ChangeDetectorRef,g.G,d,jc,ot,qn,Pc],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),bI=function(){function e(e,n,t,l,i,r,o,u,a,s,c,d,p,h){this.ref=e,this.element=n,this.QueryDm=t,this.$state=l,this.$transitions=i,this.I18n=r,this.states=o,this.CurrentProject=u,this.loadingIndicator=a,this.pathHelper=s,this.wpStaticQueries=c,this.mainMenuService=d,this.toggleService=p,this.cdRef=h,this.loading=!1,this.noResults=!1,this.text={search:this.I18n.t("js.toolbar.search_query_label"),label:this.I18n.t("js.toolbar.search_query_label"),scope_default:this.I18n.t("js.label_default_queries"),scope_starred:this.I18n.t("js.label_starred_queries"),scope_global:this.I18n.t("js.label_global_queries"),scope_private:this.I18n.t("js.label_custom_queries"),no_results:this.I18n.t("js.work_packages.query.text_no_results")},this.hiddenCategories=[],this.reportsBodySelector=".controller-work_packages\\/reports",this.initialized=!1}return e.prototype.ngOnInit=function(){var e=this;this.queryResultsContainer=jQuery(this._queryResultsContainerElement.nativeElement),this.projectIdentifier=this.element.nativeElement.getAttribute("data-project-identifier"),this.mainMenuService.onActivate("work_packages","work_packages_query_select").subscribe(function(){return e.initializeAutocomplete()}),this.addClickHandler(),this.cdRef.detach()},e.prototype.ngOnDestroy=function(){this.unregisterTransitionListener()},e.prototype.initializeAutocomplete=function(){this.initialized||(this.searchInput=jQuery(this._wpQueryMenuSearchInput.nativeElement),this.buttonArrowLeft=jQuery(".main-menu--arrow-left-to-project",jQuery("#main-menu-work-packages-wrapper").parent()),this.initialized=!0,this.buttonArrowLeft.focus(),this.setupAutoCompletion(this.searchInput),this.updateMenuOnChanges(),this.loadQueries())},e.prototype.transformQueries=function(e){var n=e.elements.map(function(e){return{label:e.name,query:e,query_props:null}}).concat(this.wpStaticQueries.all);return this.sortQueries(n)},e.prototype.sortQueries=function(e){var n=this,t={starred:[],default:[],public:[],private:[]},l=0;return e.forEach(function(e){return e.auto_id=l++,e.query?e.query.starred?(e.category="starred",t.starred.push(e)):!e.query.starred&&e.query.public?(e.category="public",t.public.push(e)):e.query.starred||e.query.public?void 0:(e.category="private",t.private.push(e)):(e.category="default",t.default.push(e))}),_.flatten([t.starred,t.default,t.public,t.private].map(function(e){return n.sortByLabel(e)}))},e.prototype.sortByLabel=function(e){return e.sort(function(e,n){return e.label.toLowerCase().localeCompare(n.label.toLowerCase())})},e.prototype.loadQueries=function(){var e=this;return this.loadingPromise=this.QueryDm.listNonHidden(this.CurrentProject.identifier).then(function(n){e.searchInput.querycomplete("option",{source:e.transformQueries(n)}),e.searchInput.querycomplete("search",e.searchInput.val()),_.each(e.hiddenCategories,function(n){var t=jQuery(n).attr("category");e.expandCollapseCategory(t)}),e.ref.detectChanges()})},Object.defineProperty(e.prototype,"loadingPromise",{set:function(e){var n=this;this.loading=!0,e.then(function(){n.loading=!1,n.cdRef.detectChanges()}).catch(function(){n.loading=!1,n.cdRef.detectChanges()})},enumerable:!0,configurable:!0}),e.prototype.setupAutoCompletion=function(e){var n=this;this.defineJQueryQueryComplete(),e.querycomplete({delay:100,source:[],select:function(e,n){return!1},response:function(e,t){n.noResults=0===t.content.length},close:function(e,t){var l=n.queryResultsContainer.find("ul.ui-autocomplete");l.is(":visible")||n.noResults||l.show()},focus:function(e,t){for(var l=e;l&&l.originalEvent;)l=l.originalEvent;return l&&"keydown"===l.type&&n.queryResultsContainer.find("#wp-query-menu-item-"+t.item.auto_id+" .wp-query-menu--item-link").focus(),!1},appendTo:".wp-query-menu--results-container",classes:{"ui-autocomplete":"wp-query-menu--search-ul -inplace","ui-menu-divider":"wp-query-menu--category-icon"},autoFocus:!1,minLength:0})},e.prototype.defineJQueryQueryComplete=function(){var e=this;jQuery.widget("custom.querycomplete",jQuery.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items",".wp-query-menu--item"),this._search("")},_renderItem:function(n,t){var l=jQuery("<a>").addClass("wp-query-menu--item-link").attr("href",e.buildQueryItemUrl(t)).text(t.label),i=jQuery("<li>").addClass("ui-menu-item wp-query-menu--item").attr("id","wp-query-menu-item-"+t.auto_id).attr("data-category",t.category||"").data("ui-autocomplete-item",t).append(l).appendTo(n);return e.setInitialHighlighting(i,t),i},_renderMenu:function(n,t){var l,i=this;if(_.each(t,function(t){if(t.category!==l){l=t.category;var r=e.labelFunction(l);n.append('<a tabindex="0" class="wp-query-menu--category-icon wp-query-menu--category-toggle" data-category="'+l+'" aria-hidden="true"></a>'),jQuery("<li>").addClass("ui-autocomplete--category wp-query-menu--category-toggle ellipsis").attr("title",r).attr("data-category",l).text(r).appendTo(n)}i._renderItemData(n,t)}),""===e.searchInput.val()){var r=e.queryResultsContainer.find(".wp-query-menu--item.selected");r.length>0&&setTimeout(function(){return r[0].scrollIntoView({behavior:"auto",block:"center"})},20)}}})},e.prototype.setInitialHighlighting=function(e,n){var t=this.getQueryParams(n),l=this.$state.params.query_id,i=this.$state.params.query_props,r=this.$state.includes("work-packages"),o=jQuery("body").hasClass("controller-work_packages/reports"),u=t.query_id&&(l||"").toString()===t.query_id.toString(),a=!n.query&&n.query_props&&n.query_props===i,s=r&&!l&&!i&&"all_open"===n.identifier,c=o&&"summary"===n.identifier;(u||a||s||c)&&e.addClass("selected")},e.prototype.labelFunction=function(e){switch(e){case"starred":return this.text.scope_starred;case"public":return this.text.scope_global;case"private":return this.text.scope_private;case"default":return this.text.scope_default;default:return""}},e.prototype.updateMenuOnChanges=function(){var e=this;this.states.changes.queries.pipe(Object(Gn.b)(this)).subscribe(function(){return e.loadQueries()})},e.prototype.expandCollapseCategory=function(e){jQuery('[data-category="'+e+'"]').not(".ui-autocomplete--category").toggleClass("-hidden"),jQuery('.wp-query-menu--category-icon[data-category="'+e+'"]').toggleClass("-collapsed")},e.prototype.loadQuery=function(e){var n=this.getQueryParams(e),t=_.toString(this.$state.params.query_id),l={reload:!1};n.query_id&&n.query_id===t.toString()&&(l.reload=!0),this.$state.go("work-packages.list",n,l),this.toggleService.closeWhenOnMobile()},e.prototype.getQueryParams=function(e){var n={query_id:e.query?_.toString(e.query.id):null,query_props:e.query?null:e.query_props};return this.projectIdentifier&&(n.projects="projects",n.projectPath=this.projectIdentifier),n},e.prototype.buildQueryItemUrl=function(e){if(e.static_link)return e.static_link;var n=this.getQueryParams(e);return this.$state.href("work-packages.list",n)},e.prototype.highlightSelected=function(e){this.highlightBySelector("#wp-query-menu-item-"+e.auto_id)},e.prototype.highlightBySelector=function(e){this.queryResultsContainer.find(".ui-menu-item").removeClass("selected"),this.queryResultsContainer.find(e).addClass("selected")},e.prototype.addClickHandler=function(){var e=this;this.queryResultsContainer.on("click keydown",".ui-menu-item a",function(n){if("keydown"===n.type&&n.which!==wl.a.ENTER)return!0;var t=jQuery(n.target),l=t.closest(".wp-query-menu--item").data("ui-autocomplete-item"),i="click"===n.type&&kc.isClickedWithModifier(n),r=!!l.static_link;return i||r?(n.stopImmediatePropagation(),"keydown"===n.type&&(window.location.href=t.attr("href")),!0):(n.preventDefault(),e.loadQuery(l),e.highlightSelected(l),!1)}).on("click keydown",".wp-query-menu--category-toggle",function(n){if("keydown"===n.type&&n.which!==wl.a.ENTER)return!0;var t=jQuery(n.target).data("category");return t&&e.expandCollapseCategory(t),e.hiddenCategories=e.queryResultsContainer.find(".ui-autocomplete--category.hidden"),n.preventDefault(),!1})},e}();Tt.DynamicBootstrapper.register({selector:"wp-query-select",cls:bI});var yI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function wI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","loading-indicator -compact"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"div",[["class","block-1"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"div",[["class","block-2"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"div",[["class","block-3"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"div",[["class","block-4"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"div",[["class","block-5"]],null,null,null,null,null))],null,null)}function CI(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{_wpQueryMenuSearchInput:0}),l["ɵqud"](402653184,2,{_queryResultsContainerElement:0}),(e()(),l["ɵeld"](2,0,null,null,9,"div",[["class","wp-query-menu--container"],["id","querySelectDropdown"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,8,"div",[["class","wp-query-menu--search-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,3,"div",[["class","wp-query-menu--search-bar"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","query-title-filter"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,[[1,0],["wpQueryMenuSearchInput",1]],null,0,"input",[["class","wp-query-menu--search-input ui-autocomplete--input ellipsis"],["id","query-title-filter"],["name","query-title-filter"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"i",[["class","icon-search wp-query-menu--search-icon"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,[[2,0],["queryResultsContainer",1]],null,3,"div",[["class","wp-query-menu--results-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"p",[["class","wp-query-menu--no-results-container"]],[[8,"hidden",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,wI)),l["ɵdid"](11,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,11,0,n.component.loading)},function(e,n){var t=n.component;e(n,5,0,t.text.label),e(n,6,0,t.text.search),e(n,9,0,!t.noResults||t.loading,t.text.no_results)})}var kI=l["ɵccf"]("wp-query-select",bI,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-query-select",[],null,null,null,CI,yI)),l["ɵdid"](1,245760,null,0,bI,[l.ChangeDetectorRef,l.ElementRef,Me,g.G,g.O,A.a,d,Qn,Nn,ge,Xn,Et,$c,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),II=function(){function e(e){this.elementRef=e,this.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,contextMenuEnabled:!1}}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.queryProps=JSON.parse(e.dataset.queryProps)},e}();Tt.DynamicBootstrapper.register({selector:"macro.embedded-table",cls:II,embeddable:!0});var jI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function RI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-table-entry",[],null,null,null,OC,TC)),l["ɵdid"](1,114688,null,0,xC,[l.ElementRef],{queryProps:[0,"queryProps"],configuration:[1,"configuration"]},null)],function(e,n){var t=n.component;e(n,1,0,t.queryProps,t.configuration)},null)}var PI=l["ɵccf"]("macro.embedded-table",II,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"macro",[["class","embedded-table"]],null,null,null,RI,jI)),l["ɵdid"](1,114688,null,0,II,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),SI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function _I(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function xI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.name),e(n,2,0,n.context.$implicit.name)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.name,t.selectedType===n.context.$implicit.name)})}function TI(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{typeSelect:0}),(e()(),l["ɵeld"](1,0,null,null,33,"div",[["class","op-modal--portal op-modal--macro-modal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,32,"div",[["class","op-modal--modal-container loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,_I)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,24,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,23,"form",[["class","form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,r=e.component;"submit"===n&&(i=!1!==l["ɵnov"](e,10).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,10).onReset()&&i);"submit"===n&&(i=!1!==r.applyAndClose(t)&&i);return i},null,null)),l["ɵdid"](9,16384,null,0,Ht.u,[],null,null),l["ɵdid"](10,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](12,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](13,0,null,null,11,"fieldset",[["class","form--fieldset"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"legend",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,9,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,0,"label",[["class","form--label hidden-for-sighted"],["for","selected-type"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,[[1,0],["typeSelect",1]],null,5,"select",[["class","form--select"],["id","selected-type"],["name","selected-type"],["tabindex","1"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.selectedType=t.target.value)&&l);return l},null,null)),(e()(),l["ɵeld"](20,0,null,null,2,"option",[],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](21,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],null,null),l["ɵdid"](22,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,xI)),l["ɵdid"](24,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](25,0,null,null,5,"div",[["class","form--field -wide-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,4,"div",[["class","form--field-container -vertical"]],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,3,"label",[["class","form--label-with-check-box"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,1,"div",[["class","form--check-box-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,0,"input",[["id","wp_button_macro_style"],["name","button_style"],["tabindex","2"],["type","checkbox"]],[[8,"checked",0]],[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==(i.buttonStyle=t.target.checked)&&l);return l},null,null)),(e()(),l["ɵted"](30,null,[" "," "])),(e()(),l["ɵeld"](31,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](33,0,null,null,0,"button",[["class","op-modal--cancel-button button"],["tabindex","4"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](34,0,null,null,0,"button",[["class","op-modal--submit-button button -highlight"],["tabindex","3"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.applyAndClose(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose),e(n,24,0,t.availableTypes)},function(e,n){var t=n.component;e(n,6,0,t.text.title),e(n,8,0,l["ɵnov"](n,12).ngClassUntouched,l["ɵnov"](n,12).ngClassTouched,l["ɵnov"](n,12).ngClassPristine,l["ɵnov"](n,12).ngClassDirty,l["ɵnov"](n,12).ngClassValid,l["ɵnov"](n,12).ngClassInvalid,l["ɵnov"](n,12).ngClassPending),e(n,14,0,t.text.selected_type),e(n,16,0,t.text.selected_type),e(n,20,0,t.text.none,!t.selectedType),e(n,29,0,t.buttonStyle),e(n,30,0,t.text.button_style),e(n,31,0,t.text.button_style_hint),e(n,33,0,t.text.button_cancel,t.text.button_cancel),e(n,34,0,t.text.button_save,t.text.button_save)})}var OI=l["ɵccf"]("ng-component",Rt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,TI,SI)),l["ɵdid"](1,4440064,null,0,Rt,[l.ElementRef,Wn.a,Qn,yn,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),EI=function(){function e(e,n,t,l){this.elementRef=e,this.cdRef=n,this.appRef=t,this.I18n=l,this.valueVisible=!1,this.onKey="on",this.currentKey="current",this.currentFieldValue="%CURRENT_DATE%",this.operators=[{key:this.onKey,label:this.I18n.t("js.custom_actions.date.specific")},{key:this.currentKey,label:this.I18n.t("js.custom_actions.date.current_date")}]}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.fieldName=e.dataset.fieldName,this.fieldValue=e.dataset.fieldValue,this.fieldValue===this.currentFieldValue?this.selectedOperator=this.operators[1]:(this.selectedOperator=this.operators[0],this.visibleValue=this.fieldValue),this.toggleValueVisibility()},e.prototype.toggleValueVisibility=function(){this.valueVisible=this.selectedOperator.key===this.onKey,this.fieldValue===this.currentFieldValue&&(this.fieldValue=""),this.updateDbValue()},e.prototype.updateDbValue=function(){this.selectedOperator.key===this.currentKey&&(this.fieldValue=this.currentFieldValue)},Object.defineProperty(e.prototype,"fieldId",{get:function(){return this.fieldName.replace(/\[|\]/g,"_").replace("__","_").replace(/_$/,"")},enumerable:!0,configurable:!0}),e.prototype.updateField=function(e){this.fieldValue=e,this.cdRef.detectChanges()},e}();Tt.DynamicBootstrapper.register({selector:"custom-date-action-admin",cls:EI});var DI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function FI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function NI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"span",[["class","form--text-field-container -slim"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"op-date-picker",[],null,[[null,"onChange"],[null,"onInputChange"]],function(e,n,t){var l=!0,i=e.component;"onChange"===n&&(l=!1!==i.updateField(t)&&l);"onInputChange"===n&&(l=!1!==i.updateField(t)&&l);return l},Gu,Uu)),l["ɵdid"](2,245760,null,0,Qu,[l.ElementRef,be,nl],null,{onChange:"onChange",onInputChange:"onInputChange"}),(e()(),l["ɵeld"](3,0,null,0,5,"input",[["class","form--text-field"],["type","text"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0;"input"===n&&(i=!1!==l["ɵnov"](e,4)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,4).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,4)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,4)._compositionEnd(t.target.value)&&i);return i},null,null)),l["ɵdid"](4,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](6,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},null),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](8,16384,null,0,Ht.i,[[4,Ht.h]],null,null)],function(e,n){var t=n.component;e(n,2,0),e(n,6,0,t.fieldId+"_input",t.fieldValue)},function(e,n){e(n,3,0,n.component.fieldId+"_visible",l["ɵnov"](n,8).ngClassUntouched,l["ɵnov"](n,8).ngClassTouched,l["ɵnov"](n,8).ngClassPristine,l["ɵnov"](n,8).ngClassDirty,l["ɵnov"](n,8).ngClassValid,l["ɵnov"](n,8).ngClassInvalid,l["ɵnov"](n,8).ngClassPending)})}function AI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"span",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,7,"select",[["class","form--select"]],[[1,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.selectedOperator=t)&&i);"change"===n&&(i=!1!==r.toggleValueVisibility()&&i);return i},null,null)),l["ɵdid"](3,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](5,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](7,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,FI)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,NI)),l["ɵdid"](11,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](12,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.selectedOperator),e(n,9,0,t.operators),e(n,11,0,t.valueVisible)},function(e,n){var t=n.component;e(n,2,0,t.fieldId,l["ɵnov"](n,7).ngClassUntouched,l["ɵnov"](n,7).ngClassTouched,l["ɵnov"](n,7).ngClassPristine,l["ɵnov"](n,7).ngClassDirty,l["ɵnov"](n,7).ngClassValid,l["ɵnov"](n,7).ngClassInvalid,l["ɵnov"](n,7).ngClassPending),e(n,12,0,t.fieldName,t.fieldValue)})}var VI=l["ɵccf"]("custom-date-action-admin",EI,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"custom-date-action-admin",[],null,null,null,AI,DI)),l["ɵdid"](1,114688,null,0,EI,[l.ElementRef,l.ChangeDetectorRef,l.ApplicationRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),MI=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.isLocked=function(){return"locked"===this.status},n.prototype.isOpen=function(){return"open"===this.status},n.prototype.isClosed=function(){return"closed"===this.status},n}(L),qI=function(e){this.I18n=e,this.text={isLocked:this.I18n.t("js.boards.version.is_locked"),isClosed:this.I18n.t("js.boards.version.is_closed")}},LI=[[".version-board-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]],$I=l["ɵcrt"]({encapsulation:0,styles:LI,data:{}});function HI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","version-board-header"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-closed":0,"-locked":1}),(e()(),l["ɵeld"](4,0,null,null,0,"h2",[["class","editable-toolbar-title--fixed"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"span",[["class","version-board-header--info-row -italic -small-font"]],null,null,null,null,null)),(e()(),l["ɵted"](6,null,[" "," "]))],function(e,n){var t=n.component,l=e(n,3,0,t.version.isClosed(),t.version.isLocked());e(n,2,0,"version-board-header",l)},function(e,n){var t=n.component;e(n,4,0,t.version.name),e(n,6,0,t.version.endDate)})}function BI(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,HI)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.version)},null)}var zI=l["ɵccf"]("ng-component",qI,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[["class","title-container -small"]],null,null,null,BI,$I)),l["ɵdid"](1,49152,null,0,qI,[A.a],null,null)],null,null)},{version:"resource"},{},[]),WI=function(e){function n(n,t,l){var i=e.call(this,n,t)||this;return i.halResourceService=n,i.pathHelper=t,i.payloadDm=l,i}return a.d(n,e),n.prototype.createForm=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.post(this.pathHelper.api.v3.grids.form().toString(),t).toPromise()},n.prototype.create=function(e,n){void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.post(this.pathHelper.api.v3.grids.path,t).toPromise()},n.prototype.update=function(e,n){void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.patch(this.pathHelper.api.v3.grids.id(e.id).toString(),t).toPromise()},n.prototype.updateForm=function(e,n){void 0===n&&(n=null);var t=this.extractPayload(e,n);return this.halResourceService.post(this.pathHelper.api.v3.grids.id(e.idFromLink).form.toString(),t).toPromise()},n.prototype.extractPayload=function(e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),e&&n){var t=this.payloadDm.extract(e,n);return t.widgets&&(t.widgets=e.widgets.map(function(e){return{id:e.id,startRow:e.startRow,endRow:e.endRow,startColumn:e.startColumn,endColumn:e.endColumn,identifier:e.identifier,options:e.options}})),t}return e instanceof L?{}:e},n.prototype.listUrl=function(){return this.pathHelper.api.v3.grids.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.grids.id(e).toString()},n}(Ve),QI=function(){function e(e){this.grid=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.grid.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.grid.name},set:function(e){this.grid.name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!!this.grid.updateImmediately},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFree",{get:function(){return!this.isAction},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAction",{get:function(){return"action"===this.grid.options.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionAttribute",{get:function(){if(!this.isFree)return this.grid.options.attribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightingMode",{get:function(){return this.grid.options.highlightingMode||"none"},set:function(e){this.grid.options.highlightingMode=e},enumerable:!0,configurable:!0}),e.prototype.addQuery=function(e){e.isNewWidget=!0,this.grid.widgets.push(e)},e.prototype.removeQuery=function(e){this.grid.widgets=this.grid.widgets.filter(function(n){return n.options.queryId!==e.options.queryId})},Object.defineProperty(e.prototype,"queries",{get:function(){return this.grid.widgets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createdAt",{get:function(){return this.grid.createdAt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this.grid.options.filters||[]},set:function(e){this.grid.options.filters=e},enumerable:!0,configurable:!0}),e.prototype.sortWidgets=function(){this.grid.widgets=this.grid.widgets.sort(function(e,n){return e.startColumn-n.startColumn})},e.prototype.showStatusButton=function(){return"status"!==this.actionAttribute},e}(),UI=function(){function e(e,n,t,l,i){this.GridDm=e,this.PathHelper=n,this.authorisationService=t,this.CurrentProject=l,this.halResourceService=i}return e.prototype.allInScope=function(e){var n=this;void 0===e&&(e=this.CurrentProject.identifier);var t=this.boardPath(e);return Object(nt.a)(this.GridDm.list({filters:[["scope","=",[t]]]})).pipe(Object(Dn.a)(function(e){return n.authorisationService.initModelAuth("boards",e.$links)}),Object(v.a)(function(e){return e.elements.map(function(e){return new QI(e)})}))},e.prototype.one=function(e){return Object(nt.a)(this.GridDm.one(e)).pipe(Object(v.a)(function(e){return new QI(e)}))},e.prototype.save=function(e){var n=this;return this.fetchSchema(e).then(function(t){return n.GridDm.update(e.grid,t)}).then(function(n){return e.grid=n,e})},e.prototype.fetchSchema=function(e){return this.GridDm.updateForm(e.grid).then(function(e){return e.schema})},e.prototype.boardPath=function(e){return void 0===e&&(e=this.CurrentProject.identifier),this.PathHelper.projectBoardsPath(e)},e.prototype.create=function(e,n,t){return a.b(this,void 0,void 0,function(){return a.e(this,function(l){return[2,this.createGrid(e,n,t).then(function(e){return new QI(e)})]})})},e.prototype.delete=function(e){return e.grid.delete?e.grid.delete():Promise.reject("Deletion not possible")},e.prototype.createGrid=function(e,n,t){var l=this,i=this.boardPath(),r=_.set({name:n},"_links.scope.href",i);return r.options={type:e},t&&(r.options.attribute=t),this.GridDm.createForm(r).then(function(e){var n=l.halResourceService.createHalResource(e.payload.$source);return l.GridDm.create(n,e.schema)})},e}(),GI=function(e){function n(n){var t=e.call(this)||this;return t.boardDm=n,t._state=Object(s.g)(),t}return a.d(n,e),n.prototype.load=function(e){var n=this;return this.boardDm.one(parseInt(e)).toPromise().then(function(t){return n.updateValue(e,t),t})},n.prototype.loadAll=function(e){var n=this;return void 0===e&&(e=[]),Promise.all(e.map(function(e){return n.load(e)})).then(function(){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this._state},enumerable:!0,configurable:!0}),n.prototype.update=function(e){this.updateValue(e.id,e)},n}(mn),KI=function(){},YI=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ZI(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,1,"ui-view",[],null,null,null,Mt.c,Mt.a)),l["ɵdid"](1,245760,null,0,oo.a,[g.P,"UIView.PARENT_INJECT",l.ViewContainerRef],null,null)],function(e,n){e(n,1,0)},null)}var JI=l["ɵccf"]("boards-entry",KI,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"boards-entry",[],null,null,null,ZI,YI)),l["ɵprd"](4608,null,GI,GI,[UI]),l["ɵdid"](2,49152,null,0,KI,[],null,null)],null,null)},{},{},[]),XI=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"height",{get:function(){return this.endRow-this.startRow},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.endColumn-this.startColumn},enumerable:!0,configurable:!0}),n}(L),ej=function(){function e(e,n,t,l,i,r,o){this.CurrentProject=e,this.pathHelper=n,this.QueryDm=t,this.halResourceService=l,this.QueryFormDm=i,this.notifications=r,this.I18n=o,this.v3=this.pathHelper.api.v3}return e.prototype.create=function(e,n){var t=this,l=JSON.stringify(n);return this.QueryFormDm.loadWithParams({pageSize:0,filters:l},void 0,this.CurrentProject.identifier,this.buildQueryRequest(e)).then(function(e){if(e.schema.public.writable){var n=t.QueryFormDm.buildQueryResource(e);return t.QueryDm.create(n,e)}throw new Error(t.I18n.t("js.boards.error_permission_missing"))})},e.prototype.addFreeQuery=function(e,n){var t=this.freeBoardQueryFilter();return this.addQuery(e,n,[t])},e.prototype.addQuery=function(e,n,t){return a.b(this,void 0,void 0,function(){var l,i,r,o,u;return a.e(this,function(a){switch(a.label){case 0:l=e.queries.length,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.create(n,t)];case 2:return i=a.sent(),r={_type:"GridWidget",identifier:"work_package_query",startRow:1,endRow:2,startColumn:l+1,endColumn:l+2,options:{queryId:i.id,filters:t}},o=this.halResourceService.createHalResourceOfClass(XI,r),e.addQuery(o),[3,4];case 3:return u=a.sent(),this.notifications.addError(u),console.error(u),[3,4];case 4:return[2,e]}})})},e.prototype.buildQueryRequest=function(e){return a.a({hidden:!0,public:!0,_links:{sortBy:[{href:this.v3.resource("/queries/sort_bys/manualSorting-asc")},{href:this.v3.resource("/queries/sort_bys/id-asc")}]}},e)},e.prototype.freeBoardQueryFilter=function(){return{manualSort:{operator:"ow",values:[]}}},e}(),nj=function(){function e(){this.mapping={}}return e.prototype.add=function(e,n){this.mapping[e]=n},e.prototype.available=function(){return _.map(this.mapping,function(e,n){return{attribute:n,text:e.localizedName}})},e.prototype.get=function(e){if(this.mapping[e])return this.mapping[e];throw"No action service exists for "+e},e}(),tj=function(){function e(e,n,t,l,i,r,o,u,a){var s=this;this.boardDm=e,this.PathHelper=n,this.Gon=t,this.CurrentProject=l,this.halResourceService=i,this.boardCache=r,this.boardActions=o,this.I18n=u,this.boardsList=a,this.text={unnamed_board:this.I18n.t("js.boards.label_unnamed_board"),action_board:function(e){return s.I18n.t("js.boards.board_type.action_by_attribute",{attribute:e})},unnamed_list:this.I18n.t("js.boards.label_unnamed_list")}}return e.prototype.loadAllBoards=function(e,n){var t=this;return void 0===e&&(e=this.CurrentProject.identifier),void 0===n&&(n=!1),n||void 0===this.loadAllPromise?this.loadAllPromise=this.boardDm.allInScope().toPromise().then(function(e){return e.forEach(function(e){return t.buildOrderAndUpdate(e)}),e}):this.loadAllPromise},e.prototype.canManage=function(e){return!!e.grid.$links.delete},e.prototype.save=function(e){var n=this;return this.reorderWidgets(e),this.boardDm.save(e).then(function(e){return e.sortWidgets(),n.boardCache.update(e),e})},e.prototype.create=function(e){return a.b(this,void 0,void 0,function(){var n;return a.e(this,function(t){switch(t.label){case 0:return[4,this.boardDm.create(e.type,this.boardName(e),e.attribute)];case 1:return n=t.sent(),"free"!==e.type?[3,3]:[4,this.boardsList.addFreeQuery(n,{name:this.text.unnamed_list})];case 2:return t.sent(),[3,5];case 3:return[4,this.boardActions.get(e.attribute).addActionQueries(n)];case 4:t.sent(),t.label=5;case 5:return[4,this.save(n)];case 6:return t.sent(),[2,n]}})})},e.prototype.delete=function(e){var n=this;return this.boardDm.delete(e).then(function(){return n.boardCache.clearSome(e.id)})},e.prototype.boardName=function(e){return e.boardName?e.boardName:"action"===e.type?this.text.action_board(e.attribute):this.text.unnamed_board},e.prototype.reorderWidgets=function(e){e.grid.columnCount=Math.max(e.grid.widgets.length,1),e.grid.widgets.map(function(e,n){return e.startColumn=n+1,e.endColumn=n+2,e})},e.prototype.buildOrderAndUpdate=function(e){e.sortWidgets(),this.boardCache.update(e)},e}(),lj=function(e){function n(n,t,l,i,r,o,u,a,s,c){var d=e.call(this,t,l,n)||this;return d.elementRef=n,d.locals=t,d.cdRef=l,d.state=i,d.boardService=r,d.boardActions=o,d.boardCache=u,d.halNotification=a,d.loadingIndicatorService=s,d.I18n=c,d.showClose=!0,d.confirmed=!1,d.available=d.boardActions.available(),d.inFlight=!1,d.text={close_popup:d.I18n.t("js.close_popup_title"),free_board:d.I18n.t("js.boards.board_type.free"),free_board_text:d.I18n.t("js.boards.board_type.free_text"),action_board:d.I18n.t("js.boards.board_type.action"),action_board_text:d.I18n.t("js.boards.board_type.action_text"),select_attribute:d.I18n.t("js.boards.board_type.select_attribute"),placeholder:d.I18n.t("js.placeholders.selection")},d}return a.d(n,e),n.prototype.createFree=function(){this.create({type:"free"})},n.prototype.createAction=function(){this.create({type:"action",attribute:this.actionAttributeSelect.nativeElement.value})},n.prototype.create=function(e){var n=this;this.inFlight=!0,this.loadingIndicatorService.modal.promise=this.boardService.create(e).then(function(e){n.inFlight=!1,n.closeMe(),n.boardCache.update(e),n.state.go("boards.show",{board_id:e.id,isNew:!0})}).catch(function(e){n.inFlight=!1,n.halNotification.handleRawError(e)})},n}(He.a),ij=function(){function e(e,n,t,l,i,r,o,u,a,s){var c=this;this.boardService=e,this.boardCache=n,this.I18n=t,this.notifications=l,this.opModalService=i,this.loadingIndicatorService=r,this.authorisationService=o,this.injector=u,this.bannerService=a,this.domSanitizer=s,this.text={name:this.I18n.t("js.modals.label_name"),board:this.I18n.t("js.label_board"),boards:this.I18n.t("js.label_board_plural"),type:this.I18n.t("js.boards.label_board_type"),type_free:this.I18n.t("js.boards.board_type.free"),action_by_attribute:function(e){return c.I18n.t("js.boards.board_type.action_by_attribute",{attribute:e})},createdAt:this.I18n.t("js.label_created_on"),delete:this.I18n.t("js.button_delete"),areYouSure:this.I18n.t("js.text_are_you_sure"),deleteSuccessful:this.I18n.t("js.notice_successful_delete"),noResults:this.I18n.t("js.notice_no_results_to_display"),teaser_text:this.I18n.t("js.boards.upsale.teaser_text"),enterprise:this.I18n.t("js.boards.upsale.upgrade_to_ee_text"),upgrade:this.I18n.t("js.boards.upsale.upgrade"),personal_demo:this.I18n.t("js.boards.upsale.personal_demo")},this.canAdd=!1,this.boards$=this.boardCache.observeAll()}return e.prototype.ngOnInit=function(){var e=this;this.authorisationService.observeUntil(Object(Gn.a)(this)).subscribe(function(){e.canAdd=e.authorisationService.can("boards","create")})},e.prototype.ngOnDestroy=function(){},e.prototype.ngAfterViewInit=function(){this.loadingIndicatorService.indicator("boards-module").promise=this.boardService.loadAllBoards()},e.prototype.newBoard=function(){this.opModalService.show(lj,this.injector)},e.prototype.destroyBoard=function(e){var n=this;window.confirm(this.text.areYouSure)&&this.boardService.delete(e).then(function(){n.boardCache.clearSome(e.id),n.notifications.addSuccess(n.text.deleteSuccessful)}).catch(function(e){return n.notifications.addError("Deletion failed: "+e)})},e.prototype.showBoardIndexView=function(){return!this.bannerService.eeShowBanners},e.prototype.eeLink=function(){return Zr+"&op_referrer=boards"},e.prototype.demoLink=function(){return"https://www.openproject.org/enterprise-demo/"},e.prototype.teaserVideoURL=function(){return this.domSanitizer.bypassSecurityTrustResourceUrl("https://player.vimeo.com/video/337280106")},e}(),rj=[[".boards--listing-group[_ngcontent-%COMP%]{position:relative}.boards--teaser-video-container[_ngcontent-%COMP%]{height:50vh;text-align:center}.boards--teaser-video-container[_ngcontent-%COMP%]   .boards--teaser-video[_ngcontent-%COMP%]{width:100%;height:100%}"]],oj=l["ɵcrt"]({encapsulation:0,styles:rj,data:{}});function uj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[["class","button -alt-highlight"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.newBoard()&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon4"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](4,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-add icon4")},function(e,n){e(n,4,0,n.component.text.board)})}function aj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ul",[["class","toolbar-items"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,uj)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.canAdd)},null)}function sj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"tr",[["id","empty-row-notification"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"td",[["colspan","4"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-info1 icon-context"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,4,0,"icon-info1 icon-context")},function(e,n){e(n,6,0,n.component.text.noResults)})}function cj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.type_free)})}function dj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.action_by_attribute(n.parent.context.$implicit.actionAttribute))})}function pj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"accessible-by-keyboard",[["linkClass","icon icon-delete"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.destroyBoard(e.parent.context.$implicit)&&l);return l},jl,Il)),l["ɵdid"](1,49152,null,0,kl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["ɵted"](2,0,[" "," "]))],function(e,n){e(n,1,0,"icon icon-delete")},function(e,n){e(n,2,0,n.component.text.delete)})}function hj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,16,"tr",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"td",[["class","name"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"a",[["uiSref","boards.show"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,4).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](3,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](4,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"]},null),l["ɵpod"](5,{board_id:0}),(e()(),l["ɵeld"](6,0,null,null,4,"td",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,cj)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,dj)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](11,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,1,"op-date-time",[],null,null,null,il,ll)),l["ɵdid"](13,114688,null,0,tl,[nl],{dateTimeValue:[0,"dateTimeValue"]},null),(e()(),l["ɵeld"](14,0,null,null,2,"td",[["class","buttons"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,pj)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=e(n,5,0,n.context.$implicit.id);e(n,4,0,"boards.show",t),e(n,8,0,n.context.$implicit.isFree),e(n,10,0,n.context.$implicit.isAction),e(n,13,0,n.context.$implicit.createdAt),e(n,16,0,n.context.$implicit.editable)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function fj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,33,"div",[["class","generic-table--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,32,"div",[["class","generic-table--results-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,31,"table",[["class","generic-table"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,9,"colgroup",[],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](5,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](6,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](7,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](8,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](9,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](10,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](11,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](12,0,null,null,0,"col",[],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,15,"thead",[],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,14,"tr",[],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,0,"div",[["class","generic-table--empty-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,sj)),l["ɵdid"](31,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,hj)),l["ɵdid"](33,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0),e(n,7,0),e(n,9,0),e(n,11,0),e(n,31,0,0===n.context.ngIf.length),e(n,33,0,n.context.ngIf)},function(e,n){var t=n.component;e(n,18,0,t.text.name),e(n,22,0,t.text.type),e(n,26,0,t.text.createdAt)})}function gj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","boards--teaser-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](2,null,["",""])),(e()(),l["ɵeld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](4,null,["",""])),(e()(),l["ɵeld"](5,0,null,null,1,"a",[["class","button -alt-highlight -with-icon icon-checkmark"],["target","blank"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](6,null,[" "," "])),(e()(),l["ɵeld"](7,0,null,null,1,"a",[["class","button -highlight-inverted"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵted"](8,null,[" "," "])),(e()(),l["ɵeld"](9,0,null,null,1,"div",[["class","boards--teaser-video-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"iframe",[["allow","autoplay; fullscreen"],["allowfullscreen",""],["class","boards--teaser-video"],["frameborder","0"]],[[8,"src",5]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,2,0,t.text.teaser_text),e(n,4,0,t.text.enterprise),e(n,5,0,t.eeLink()),e(n,6,0,t.text.upgrade),e(n,7,0,t.demoLink()),e(n,8,0,t.text.personal_demo),e(n,10,0,t.teaserVideoURL())})}function mj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"h2",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,aj)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](5,0,null,null,3,"div",[["class","boards--listing-group loading-indicator--location"],["data-indicator-name","boards-module"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,fj)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵand"](16777216,null,null,1,null,gj)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.showBoardIndexView()),e(n,7,0,t.showBoardIndexView()&&l["ɵunv"](n,7,0,l["ɵnov"](n,8).transform(t.boards$))),e(n,10,0,!t.showBoardIndexView())},function(e,n){e(n,2,0,n.component.text.boards)})}var vj=l["ɵccf"]("ng-component",ij,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,mj,oj)),l["ɵdid"](1,4440064,null,0,ij,[tj,GI,A.a,Vn,Wn.b,Nn,In,l.Injector,Ge,rr.DomSanitizer],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),bj=function(){function e(e,n,t){this.injector=e,this.locals=n,this.I18n=t,this.highlightingMode="none",this.entireCardMode=!1,this.lastEntireCardAttribute="type",this.text={highlighting_mode:{description:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.description"),none:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.none"),type:this.I18n.t("js.work_packages.properties.type"),priority:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.priority"),entire_card_by:this.I18n.t("js.card.highlighting.entire_card_by")}}}return e.prototype.onSave=function(){this.updateMode(this.highlightingMode),this.board.highlightingMode=this.highlightingMode},e.prototype.ngOnInit=function(){this.board=this.locals.board,this.highlightingMode=this.board.highlightingMode,this.updateMode(this.highlightingMode)},e.prototype.updateMode=function(e){this.highlightingMode="inline"===e?this.lastEntireCardAttribute:e,-1!==["priority","type"].indexOf(this.highlightingMode)?(this.lastEntireCardAttribute=this.highlightingMode,this.entireCardMode=!0):this.entireCardMode=!1},e}(),yj=function(){function e(e){this.I18n=e,this._tabs=[{name:"highlighting",title:this.I18n.t("js.work_packages.table_configuration.highlighting"),componentClass:bj}]}return Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs},enumerable:!0,configurable:!0}),e}(),wj=function(e){function n(n,t,l,i,r,o,u,a,s,c){var d=e.call(this,n,s,c)||this;return d.locals=n,d.I18n=t,d.boardService=l,d.boardCache=i,d.boardConfigurationService=r,d.injector=o,d.appRef=u,d.componentFactoryResolver=a,d.cdRef=s,d.elementRef=c,d.closeOnEscape=!1,d.closeOnOutsideClick=!1,d.text={title:d.I18n.t("js.boards.configuration_modal.title"),closePopup:d.I18n.t("js.close_popup_title"),applyButton:d.I18n.t("js.modals.button_apply"),cancelButton:d.I18n.t("js.modals.button_cancel")},d}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.tabPortalHost=new pn(this.boardConfigurationService.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),setTimeout(function(){var n=e.availableTabs[0].name;e.switchTo(n)})},n.prototype.ngOnDestroy=function(){this.tabPortalHost.dispose()},Object.defineProperty(n.prototype,"availableTabs",{get:function(){return this.tabPortalHost.availableTabs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTab",{get:function(){return this.tabPortalHost.currentTab},enumerable:!0,configurable:!0}),n.prototype.switchTo=function(e){this.tabPortalHost.switchTo(e)},n.prototype.saveChanges=function(){var e=this;this.tabPortalHost.activeComponents.forEach(function(e){e.onSave()});var n=this.locals.board;this.boardService.save(n).then(function(n){e.boardCache.update(n),e.service.close()})},n.prototype.onClose=function(){return this.afterFocusOn.focus(),!0},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),n}(He.a),Cj=function(e){function n(n,t,l,i,r,o,u,a,s){var c=e.call(this,n,t)||this;return c.elementRef=n,c.opContextMenu=t,c.opModalService=l,c.boardService=i,c.BoardCache=r,c.Notifications=o,c.State=u,c.injector=a,c.I18n=s,c.text={deleteSuccessful:c.I18n.t("js.notice_successful_delete")},c}return a.d(n,e),n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"locals",{get:function(){return{contextMenuId:"boardsToolbarMenu",items:this.items}},enumerable:!0,configurable:!0}),n.prototype.open=function(e){this.buildItems(),this.opContextMenu.show(this,e)},n.prototype.buildItems=function(){var e=this;this.items=[{linkText:this.I18n.t("js.toolbar.settings.configure_view"),icon:"icon-settings",onClick:function(n){return e.opContextMenu.close(),e.opModalService.show(wj,e.injector,{board:e.board}),!0}},{linkText:this.I18n.t("js.toolbar.settings.page_settings"),icon:"icon-edit",onClick:function(n){return e.board.grid.updateImmediately&&jQuery(".board--header-container .editable-toolbar-title--input").trigger("op:selectableTitle:trigger"),!0}},{linkText:this.I18n.t("js.toolbar.settings.delete"),icon:"icon-delete",onClick:function(n){return e.board.grid.delete&&window.confirm(e.I18n.t("js.text_query_destroy_confirmation"))&&e.boardService.delete(e.board).then(function(){e.BoardCache.clearSome(e.board.id),e.State.go("^",{flash_message:{type:"success",message:e.text.deleteSuccessful}})}),!0}}]},n}(xc),kj=t("9Bt9"),Ij=t("Fzqc"),jj=t("CNfY"),Rj=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(bu),Pj=function(){function e(e,n){this.i18n=e,this.injector=n,this.resourceChanged=new l.EventEmitter}return Object.defineProperty(e.prototype,"widgetName",{get:function(){var e=this.resource.options.name,n=this.resource.identifier;return this.isEditable?e:this.i18n.t("js.grid.widgets."+n+".title",{defaultValue:e})},enumerable:!0,configurable:!0}),e.prototype.renameWidget=function(e){var n=this.setChangesetOptions({name:e});this.resourceChanged.emit(n)},Object.defineProperty(e.prototype,"isEditable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.setChangesetOptions=function(e){var n=new Rj(this.resource);return n.setValue("options",Object.assign({},this.resource.options,e)),n},e}(),Sj=function(e){function n(n,t,i,r,o,u,a,s,c,d,p,h,f,g,m,v){var b=e.call(this,t,d)||this;return b.QueryDm=n,b.I18n=t,b.boardCache=i,b.notifications=r,b.querySpace=o,b.halNotification=u,b.wpStatesInitialization=a,b.authorisationService=s,b.wpInlineCreate=c,b.injector=d,b.halEditing=p,b.loadingIndicator=h,b.wpCacheService=f,b.boardService=g,b.boardActionRegistry=m,b.causedUpdates=v,b.onRemove=new l.EventEmitter,b.actionResourceClass="",b.showAddButton=!1,b.text={addCard:b.I18n.t("js.boards.add_card"),updateSuccessful:b.I18n.t("js.notice_successful_update"),areYouSure:b.I18n.t("js.text_are_you_sure"),unnamed_list:b.I18n.t("js.boards.label_unnamed_list"),click_to_remove:b.I18n.t("js.boards.click_to_remove_list")},b.canDragInto=!1,b.initiallyFocused=!1,b.workPackageAddedHandler=function(e){return b.addWorkPackage(e)},b.canDragOutOf=!1,b.canDragOutOfHandler=function(e){return b.canMove(e)},b}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.initiallyFocused=this.resource.isNewWidget,this.resource.isNewWidget=!1,this.authorisationService.observeUntil(Object(Gn.a)(this)).subscribe(function(){e.board.isAction||(e.showAddButton=e.canDragInto&&(e.wpInlineCreate.canAdd||e.canReference))}),this.querySpace.query.values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.query=n,e.canDragOutOf=!!e.query.updateOrderedWorkPackages,e.loadActionAttribute(n)}),this.updateQuery()},n.prototype.ngOnDestroy=function(){},n.prototype.ngOnChanges=function(e){e.filters&&!e.resource&&this.updateQuery()},Object.defineProperty(n.prototype,"errorMessage",{get:function(){return this.I18n.t("js.boards.error_loading_the_list",{error_message:this.loadingError})},enumerable:!0,configurable:!0}),n.prototype.canMove=function(e){if(this.board.isAction){var n=e.schema[this.board.actionAttribute];return this.canDragOutOf&&n.writable}return this.canDragOutOf},Object.defineProperty(n.prototype,"canReference",{get:function(){return this.wpInlineCreate.canReference},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canManage",{get:function(){return this.boardService.canManage(this.board)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canRename",{get:function(){return this.canManage&&!!this.query.updateImmediately&&this.board.isFree},enumerable:!0,configurable:!0}),n.prototype.addReferenceCard=function(){this.cardView.setReferenceMode(!0)},n.prototype.addNewCard=function(){this.cardView.addNewCard()},n.prototype.deleteList=function(e){var n=this;e=e||this.query,window.confirm(this.text.areYouSure)&&this.QueryDm.delete(e).then(function(){return n.onRemove.emit()})},n.prototype.renameQuery=function(e,n){var t=this;this.inFlight=!0,this.query.name=n,this.QueryDm.patch(this.query.id,{name:n}).toPromise().then(function(){t.inFlight=!1,t.notifications.addSuccess(t.text.updateSuccessful)}).catch(function(){return t.inFlight=!1})},n.prototype.boardListActionColorClass=function(e){var n=this.board.actionAttribute;return e&&e.id?Ul.backgroundClass(n,e.id):""},Object.defineProperty(n.prototype,"listName",{get:function(){return this.query&&this.query.name},enumerable:!0,configurable:!0}),n.prototype.showCardStatusButton=function(){return this.board.showStatusButton()},n.prototype.refreshQueryUnlessCaused=function(e,n){void 0===n&&(n=!0),this.causedUpdates.includes(e)||(Object(bn.a)("Refreshing "+e.name+" visibly due to external changes"),this.updateQuery(n))},n.prototype.updateQuery=function(e){void 0===e&&(e=!0),this.setQueryProps(this.filters),this.loadQuery(e)},n.prototype.loadActionAttribute=function(e){var n=this;if(!this.board.isAction)return this.actionResource=void 0,this.headerComponent=void 0,void(this.canDragInto=!!e.updateOrderedWorkPackages);var t=this.actionService.getFilterHref(e);this.actionResource&&t===this.actionResource.href||this.actionService.getLoadedFilterValue(e).then(function(t){return a.b(n,void 0,void 0,function(){var n;return a.e(this,function(l){switch(l.label){case 0:return this.actionResource=t,this.headerComponent=this.actionService.headerComponent(),this.buttonPlaceholder=this.actionService.disabledAddButtonPlaceholder(t),this.actionResourceClass=this.boardListActionColorClass(t),this.canDragInto=this.actionService.dragIntoAllowed(e,t),[4,this.actionService.canAddToQuery(e)];case 1:return n=l.sent(),this.showAddButton=this.canDragInto&&this.wpInlineCreate.canAdd&&n,[2]}})})})},Object.defineProperty(n.prototype,"actionService",{get:function(){return this.boardActionRegistry.get(this.board.actionAttribute)},enumerable:!0,configurable:!0}),n.prototype.addWorkPackage=function(e){var n=this.querySpace.query.value,t=this.halEditing.changeFor(e),l=this.board.actionAttribute;if(l&&!t.isWritable(l))throw this.I18n.t("js.boards.error_attribute_not_writable",{attribute:t.humanName(l)});return new od(this.injector,t,n.filters).applyDefaultsFromFilters(),t.isEmpty()?this.wpCacheService.updateWorkPackage(e):this.halEditing.save(t)},n.prototype.loadQuery=function(e){var n=this;void 0===e&&(e=!0);var t,l,i=this.resource.options.queryId.toString(),r=this.QueryDm.stream(this.columnsQueryProps,i);e&&(r=r.pipe((t=this.indicatorInstance,l=50,function(e){return t.start(),e.pipe(Object(Dn.a)(function(){return t.delayedStop(l)},function(){return t.stop()},function(){return t.stop()}))}))),r.subscribe(function(e){return n.wpStatesInitialization.updateQuerySpace(e,e.results)},function(e){return n.loadingError=n.halNotification.retrieveErrorMessage(e)})},Object.defineProperty(n.prototype,"indicatorInstance",{get:function(){return this.loadingIndicator.indicator(jQuery(this.indicator.nativeElement))},enumerable:!0,configurable:!0}),n.prototype.setQueryProps=function(e){var n=(this.resource.options.filters||[]).concat(e),t={"columns[]":["id","subject"],showHierarchies:!1,pageSize:500,filters:JSON.stringify(n)};this.columnsQueryProps=t},n}(Pj),_j=function(e){function n(n,t,l,i,r,o,u,a,s,c){var d=e.call(this,n,t)||this;return d.elementRef=n,d.opContextMenu=t,d.opModalService=l,d.authorisationService=i,d.wpInlineCreate=r,d.boardList=o,d.injector=u,d.querySpace=a,d.cdRef=s,d.I18n=c,d.focusAfterClose=!0,d}return a.d(n,e),n.prototype.open=function(e){this.items=this.buildItems(),this.opContextMenu.show(this,e)},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"left top",at:"left bottom"}),t},n.prototype.buildItems=function(){var e=this;return[{disabled:!this.wpInlineCreate.canAdd,linkText:this.I18n.t("js.card.add_new"),onClick:function(){return e.boardList.addNewCard(),!0}},{disabled:!this.wpInlineCreate.canReference,linkText:this.I18n.t("js.relation_buttons.add_existing"),onClick:function(){return e.boardList.addReferenceCard(),!0}}]},n}(xc),xj=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,t)||this;return u.elementRef=n,u.opContextMenu=t,u.opModalService=l,u.injector=i,u.cdRef=r,u.I18n=o,u}return a.d(n,e),n.prototype.open=function(e){return a.b(this,void 0,void 0,function(){var n;return a.e(this,function(t){switch(t.label){case 0:return n=this,[4,this.buildItems()];case 1:return n.items=t.sent(),this.opContextMenu.show(this,e),[2]}})})},n.prototype.positionArgs=function(n){var t=e.prototype.positionArgs.call(this,n);return _.assign(t,{my:"right top",at:"right bottom"}),t},n.prototype.buildItems=function(){return a.b(this,void 0,void 0,function(){var e,n;return a.e(this,function(t){switch(t.label){case 0:return e=[],this.menuItems?[4,this.menuItems()]:[3,2];case 1:return n=t.sent(),[2,e.concat(n)];case 2:return[2,e]}})})},n}(xc),Tj=[["a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--light-gray);text-decoration:none}"]],Oj=l["ɵcrt"]({encapsulation:0,styles:Tj,data:{}});function Ej(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[["href","#"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-show-more-horizontal"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-show-more-horizontal")},null)}l["ɵccf"]("icon-triggered-context-menu",xj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"icon-triggered-context-menu",[],null,null,null,Ej,Oj)),l["ɵdid"](1,4243456,null,0,xj,[l.ElementRef,is,Wn.b,l.Injector,l.ChangeDetectorRef,A.a],null,null)],null,null)},{menuItems:"menu-items"},{},[]);var Dj=function(){function e(e,n,t,i,r,o){this.opModalService=e,this.authorisationService=n,this.querySpace=t,this.boardService=i,this.boardActionRegistry=r,this.I18n=o,this.onRemove=new l.EventEmitter}return Object.defineProperty(e.prototype,"menuItems",{get:function(){var e=this;return function(){return a.b(e,void 0,void 0,function(){var e,n,t=this;return a.e(this,function(l){switch(l.label){case 0:return e=[{disabled:!this.canDelete,linkText:this.I18n.t("js.boards.lists.delete"),onClick:function(){return t.onRemove.emit(),!0}}],this.board.isAction?[4,this.actionService.getAdditionalListMenuItems(this.query)]:[3,2];case 1:return n=l.sent(),[2,e.concat(n)];case 2:return[2,e]}})})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionService",{get:function(){return this.boardActionRegistry.get(this.board.actionAttribute)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canManage",{get:function(){return this.boardService.canManage(this.board)},enumerable:!0,configurable:!0}),e.prototype.canDelete=function(){return this.canManage&&!!this.query.delete},Object.defineProperty(e.prototype,"query",{get:function(){return this.querySpace.query.value},enumerable:!0,configurable:!0}),e}(),Fj=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Nj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"icon-triggered-context-menu",[],null,null,null,Ej,Oj)),l["ɵdid"](2,4243456,null,0,xj,[l.ElementRef,is,Wn.b,l.Injector,l.ChangeDetectorRef,A.a],{menuItems:[0,"menuItems"]},null)],function(e,n){e(n,2,0,n.component.menuItems)},null)}function Aj(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,Nj)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.canDelete())},null)}l["ɵccf"]("board-list-menu",Dj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"board-list-menu",[],null,null,null,Aj,Fj)),l["ɵdid"](1,49152,null,0,Dj,[Wn.b,In,b,tj,nj,A.a],null,null)],null,null)},{board:"board"},{onRemove:"onRemove"},[]);var Vj=function(){function e(e,n,t,i,r,o,u,a,s){var d=this;this.querySpace=e,this.pathHelper=n,this.notificationService=t,this.CurrentProject=i,this.halResourceService=r,this.schemaCacheService=o,this.cdRef=u,this.I18n=a,this.wpCardDragDrop=s,this.text={placeholder:this.I18n.t("js.relations_autocomplete.placeholder")},this.appendToContainer=".board--container",this.onCancel=new l.EventEmitter,this.onReferenced=new l.EventEmitter,this.isLoading=!1,this.searchInput$=new c.a,this.results$=this.searchInput$.pipe(Object(at.a)(250),Object(ft.a)(),Object(Dn.a)(function(){return d.isLoading=!0}),Object(lt.a)(function(e){return d.autocompleteWorkPackages(e)}))}return e.prototype.ngAfterViewInit=function(){var e=this;this.ngSelectComponent&&(this.ngSelectComponent.open(),setTimeout(function(){e.ngSelectComponent.focus()},25),this.wpCardDragDrop.removeReferenceWorkPackageForm())},e.prototype.cancel=function(){this.onCancel.emit()},e.prototype.addWorkPackageToQuery=function(e){var n=this;e&&this.schemaCacheService.ensureLoaded(e).then(function(){n.onReferenced.emit(e),n.ngSelectComponent.close()})},e.prototype.autocompleteWorkPackages=function(e){var n=this;if(0===e.length)return this.isLoading=!1,Object(tt.a)([]);var t=this.pathHelper.api.v3.withOptionalProject(this.CurrentProject.id).work_packages,l=new re,i=this.querySpace.results.value;return l.add("subjectOrId","**",[e]),i&&i.elements.length>0&&l.add("id","!",i.elements.map(function(e){return e.id})),this.halResourceService.get(t.filtered(l)).pipe(Object(v.a)(function(e){return e.elements}),Object(q.a)(function(e){return n.notificationService.handleRawError(e),Object(tt.a)([])}),Object(Dn.a)(function(){return n.isLoading=!1}))},e}(),Mj=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n)||this;return u.injector=n,u.querySpace=t,u.halResourceService=l,u.pathHelperService=i,u.Gon=r,u.wpRelationsHierarchyService=o,u.referenceComponentClass=Vj,u.referenceTarget=null,u.buttonTexts={reference:u.I18n.t("js.relation_buttons.add_existing_child"),create:u.I18n.t("js.relation_buttons.add_new_child")},u}return a.d(n,e),Object.defineProperty(n.prototype,"canAdd",{get:function(){return this.authorisationService.can("work_packages","createWorkPackage")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canReference",{get:function(){return this.authorisationService.can("work_packages","editWorkPackage")},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},n}(Fd),qj=[[".board-list--query-container[_ngcontent-%COMP%]{max-width:inherit;overflow:hidden;height:100%}.board-list--query-container.-with-create-button[_ngcontent-%COMP%]{display:grid;grid-template:34px minmax(0,1fr)/1fr}.board-list--button-container[_ngcontent-%COMP%]{background-color:var(--body-background);position:-webkit-sticky;position:sticky;top:0;z-index:1}.board-list--container[_ngcontent-%COMP%]{height:100%;max-width:300px;display:flex;flex-direction:column}.board-list--container[_ngcontent-%COMP%]:hover   .board-list--menu[_ngcontent-%COMP%]{visibility:visible}.board-list--action-bar[_ngcontent-%COMP%]{width:calc(100% - 30px);height:5px;margin:auto}.board-list--header[_ngcontent-%COMP%]{padding:5px 15px;display:flex;align-items:center;max-height:52px}.board-list--header[_ngcontent-%COMP%]   editable-toolbar-title[_ngcontent-%COMP%]{flex:1;margin-bottom:0;margin-right:.25rem}.notification-box[_ngcontent-%COMP%]{margin-top:0;z-index:100}.board-list--add-button[_ngcontent-%COMP%]{background-color:var(--body-background);width:calc(100% - 30px - 10px);margin:0 15px;box-shadow:1px 1px 3px 0 #d3d3d3}.board-list--add-button[_ngcontent-%COMP%]:hover{background-color:#eeeeee50}.board-list--add-button[_ngcontent-%COMP%]:disabled{background-color:#cccccc50}.board-list--menu[_ngcontent-%COMP%]{visibility:hidden}"]],Lj=l["ɵcrt"]({encapsulation:0,styles:qj,data:{}});function $j(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","board-list--action-bar"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(e,n){e(n,2,0,"board-list--action-bar",n.component.actionResourceClass)},null)}function Hj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](1,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](3,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"]},null),l["ɵpod"](4,{resource:0}),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.headerComponent);var l=e(n,4,0,t.actionResource);e(n,3,0,l)},null)}function Bj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"editable-toolbar-title",[["class","-small title-container"]],null,[[null,"onSave"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.renameQuery(i.query,t)&&l);return l},Lw,Aw)),l["ɵdid"](1,638976,null,0,ew,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"],initialFocus:[3,"initialFocus"],smallHeader:[4,"smallHeader"]},{onSave:"onSave"})],function(e,n){var t=n.component;e(n,1,0,t.query.name,t.canRename,t.inFlight,t.initiallyFocused,!0)},null)}function zj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.buttonPlaceholder.text)})}function Wj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"button",[["class","board-list--add-button board-list--card-add-button button"]],[[8,"title",0],[8,"disabled",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.addNewCard()&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,zj)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,l["ɵinlineInterpolate"](1,"icon-",t.buttonPlaceholder?t.buttonPlaceholder.icon:"add","")),e(n,5,0,t.buttonPlaceholder)},function(e,n){var t=n.component;e(n,0,0,t.text.addCard,!t.showAddButton)})}function Qj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"button",[["addCardDropdown",""],["class","board-list--add-button board-list--card-dropdown-button button"]],[[8,"title",0]],null,null,null,null)),l["ɵdid"](1,4210688,null,0,_j,[l.ElementRef,is,Wn.b,In,Fd,Sj,l.Injector,b,l.ChangeDetectorRef,A.a],null,null),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-small icon-add"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,3,0,"icon-small icon-add")},function(e,n){e(n,0,0,n.component.text.addCard)})}function Uj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,20,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,$j)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](3,0,null,null,6,"div",[["class","board-list--header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Hj)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Bj)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](8,0,null,null,1,"board-list-menu",[["class","board-list--menu"]],null,[[null,"onRemove"]],function(e,n,t){var l=!0,i=e.component;"onRemove"===n&&(l=!1!==i.deleteList()&&l);return l},Aj,Fj)),l["ɵdid"](9,49152,null,0,Dj,[Wn.b,In,b,tj,nj,A.a],{board:[0,"board"]},{onRemove:"onRemove"}),(e()(),l["ɵeld"](10,0,null,null,10,"div",[["class","board-list--query-container drop-zone"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](12,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](13,{"-with-create-button":0}),(e()(),l["ɵeld"](14,0,null,null,4,"div",[["class","board-list--button-container"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Wj)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Qj)),l["ɵdid"](18,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](19,0,null,null,1,"wp-card-view",[],null,null,null,xw,Rw)),l["ɵdid"](20,4440064,[[2,4]],0,Iw,[b,d,l.Injector,g.G,A.a,ad,Fd,qn,In,Pn,l.ChangeDetectorRef,ge,Ic,Sn,Ep,kw,dt],{canDragOutOf:[0,"canDragOutOf"],dragInto:[1,"dragInto"],highlightingMode:[2,"highlightingMode"],workPackageAddedHandler:[3,"workPackageAddedHandler"],showStatusButton:[4,"showStatusButton"],cardsRemovable:[5,"cardsRemovable"]},null)],function(e,n){var t=n.component;e(n,2,0,t.board.isAction),e(n,5,0,t.headerComponent),e(n,7,0,!t.headerComponent),e(n,9,0,t.board);var l=e(n,13,0,t.board.isAction||t.showAddButton);e(n,12,0,"board-list--query-container drop-zone",l),e(n,16,0,t.board.isAction),e(n,18,0,!t.board.isAction&&t.showAddButton),e(n,20,0,t.canDragOutOfHandler,t.canDragInto,t.board.highlightingMode,t.workPackageAddedHandler,t.showCardStatusButton(),t.board.isFree&&t.canDragOutOf)},null)}function Gj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](4,0,null,null,2,"a",[["role","button"]],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.onRemove.emit()&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](6,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,2,0,t.errorMessage),e(n,6,0,t.text.click_to_remove)})}function Kj(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{indicator:0}),l["ɵqud"](671088640,2,{cardView:0}),(e()(),l["ɵeld"](2,0,[[1,0],["loadingIndicator",1]],null,7,"div",[["class","board-list--container loading-indicator--location"]],[[1,"data-query-name",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](5,{"-action-list":0}),(e()(),l["ɵand"](16777216,null,null,1,null,Uj)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Gj)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,5,0,t.board.isAction);e(n,4,0,"board-list--container loading-indicator--location",l),e(n,7,0,t.query),e(n,9,0,t.loadingError)},function(e,n){e(n,2,0,n.component.listName)})}l["ɵccf"]("board-list",Sj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"board-list",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,Kj,Lj)),l["ɵprd"](4608,null,Dj,Dj,[Wn.b,In,b,tj,nj,A.a]),l["ɵprd"](4608,null,kw,kw,[d,l.Injector,Sn,ad,qn,Cn,Qn,Fd]),l["ɵprd"](512,null,Fd,Mj,[l.Injector,b,Q,ge,Ir,Ws]),l["ɵdid"](4,770048,null,0,Sj,[Me,A.a,GI,Vn,b,Mn,Hn,In,Fd,l.Injector,ns,Nn,Cn,tj,nj,Pn],null,null)],function(e,n){e(n,4,0)},function(e,n){e(n,0,0,l["ɵnov"](n,4).gridColumnStart,l["ɵnov"](n,4).gridColumnEnd,l["ɵnov"](n,4).gridRowStart,l["ɵnov"](n,4).gridRowEnd)})},{resource:"resource",board:"board",filters:"filters"},{resourceChanged:"resourceChanged",onRemove:"onRemove"},[]);var Yj=t("yrbL"),Zj=function(){function e(e,n,t,l,i,r,o,u){this.currentProjectService=e,this.querySpace=n,this.halResourceService=t,this.wpStatesInitialization=l,this.wpTableFilters=i,this.urlParamsHelper=r,this.$state=o,this.queryFormDm=u,this.onFiltersChanged=new Lf(Object(Gn.a)(this)),this.initialized=!1}return e.prototype.doInitialize=function(){this.initialized||(this.initialized=!0,this.loadQueryForm(),this.updateChecksumOnFilterChanges(),this.board.isAction&&this.wpTableFilters.hidden.push(this.board.actionAttribute))},e.prototype.ngOnDestroy=function(){},e.prototype.updateChecksumOnFilterChanges=function(){var e=this;this.wpTableFilters.live$().pipe(Object(Gn.b)(this),Object(Yj.skip)(1)).subscribe(function(){var n=e.wpTableFilters.current,t=e.urlParamsHelper.buildV3GetFilters(n),l=JSON.stringify(t);e.onFiltersChanged.emit(t),e.$state.go(".",{query_props:l},{custom:{notify:!1}})})},e.prototype.loadQueryForm=function(){var e=this;this.queryFormDm.loadWithParams({filters:JSON.stringify(this.filters)},void 0,this.currentProjectService.id).then(function(n){var t=e.halResourceService.createHalResourceOfClass(Hp,n.payload.$source);e.querySpace.query.putValue(t),e.wpStatesInitialization.updateStatesFromForm(t,n)})},e}(),Jj=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Xj(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filter-container",[],null,null,null,Kg,Wg)),l["ɵdid"](1,245760,null,0,zg,[en,l.ChangeDetectorRef,Ze],null,null)],function(e,n){e(n,1,0)},null)}l["ɵccf"]("board-filter",Zj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"board-filter",[],null,null,null,Xj,Jj)),l["ɵdid"](1,180224,null,0,Zj,[Qn,b,Q,Hn,en,Ne,g.G,hn],null,null)],null,null)},{board:"board",filters:"filters"},{onFiltersChanged:"onFiltersChanged"},[]);var eR=function(e){function n(n,t,l,i,r,o,u,a){var s=e.call(this,t,l,n)||this;return s.elementRef=n,s.locals=t,s.cdRef=l,s.boardActions=i,s.state=r,s.boardService=o,s.boardCache=u,s.I18n=a,s.confirmed=!1,s.availableValues=[],s.inFlight=!1,s.trackByHref=_r.trackByHref,s.closeOnOutsideClick=!1,s.text={title:s.I18n.t("js.boards.add_list"),button_continue:s.I18n.t("js.button_continue"),button_cancel:s.I18n.t("js.button_cancel"),close_popup:s.I18n.t("js.close_popup_title"),free_board:s.I18n.t("js.boards.board_type.free"),free_board_text:s.I18n.t("js.boards.board_type.free_text"),action_board:s.I18n.t("js.boards.board_type.action"),action_board_text:s.I18n.t("js.boards.board_type.action_text"),select_attribute:s.I18n.t("js.boards.board_type.select_attribute"),placeholder:s.I18n.t("js.placeholders.selection")},s.referenceOutputs={onCreate:function(e){return s.onNewActionCreated(e)},onChange:function(e){return s.onModelChange(e)},onAfterViewInit:function(e){return e.focusInputField()}},s}return a.d(n,e),n.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.board=this.locals.board,this.queries=this.locals.queries,this.actionService=this.boardActions.get(this.board.actionAttribute),this.actionService.getAvailableValues(this.board,this.queries).then(function(e){n.availableValues=e})},n.prototype.onModelChange=function(e){this.selectedAttribute=e},n.prototype.create=function(){var e=this;this.inFlight=!0,this.actionService.addActionQuery(this.board,this.selectedAttribute).then(function(n){return e.boardService.save(n)}).then(function(n){e.inFlight=!1,e.closeMe(),e.boardCache.update(n),e.state.go("boards.show",{board_id:n.id,isNew:!0})}).catch(function(){return e.inFlight=!1})},n.prototype.onNewActionCreated=function(e){this.selectedAttribute=e,this.create()},n.prototype.autocompleterComponent=function(){return this.actionService.autocompleterComponent()},n}(He.a),nR=function(){function e(e){this.handler=e,this.requests=new c.a,this.responses$=this.requests.pipe(Object(lt.a)(this.handler))}return e.prototype.request=function(e){this.requests.next(e)},e.prototype.observe=function(e){return this.responses$.pipe(Object(Ye.a)(e))},e}(),tR=t("xXU7"),lR=function(){function e(e){this.queryDm=e}return e.prototype.monitor=function(e){var n=this,t=new Date;return Object(tR.a)(2e3).pipe(Object(fn.a)(0),Object(lt.a)(function(){var l=n.queryForUpdates(e,t);return t=new Date,l}),Object(Yn.a)(function(e){return e.count>0}))},e.prototype.queryForUpdates=function(e,n){return this.queryDm.list({filters:[["id","=",e],["updatedAt","<>d",[n.toISOString()]]]})},e}(),iR=function(){function e(e,n,t,l,i,r,o,u,a,s,c,d){var p=this;this.state=e,this.I18n=n,this.notifications=t,this.halNotification=l,this.BoardList=i,this.opModalService=r,this.injector=o,this.BoardCache=u,this.Boards=a,this.Banner=s,this.Drag=c,this.QueryUpdated=d,this.isNew=!!this.state.params.isNew,this.inFlight=!1,this.text={button_more:this.I18n.t("js.button_more"),delete:this.I18n.t("js.button_delete"),areYouSure:this.I18n.t("js.text_are_you_sure"),deleteSuccessful:this.I18n.t("js.notice_successful_delete"),updateSuccessful:this.I18n.t("js.notice_successful_update"),unnamedBoard:this.I18n.t("js.boards.label_unnamed_board"),loadingError:"No such board found",addList:this.I18n.t("js.boards.add_list"),upsaleBoards:this.I18n.t("js.boards.upsale.teaser_text"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link"),unnamed_list:this.I18n.t("js.boards.label_unnamed_list")},this.boardSaver=new nR(function(e){p.inFlight=!0;var n=p.Boards.save(e).then(function(e){return p.inFlight=!1,e}).catch(function(e){throw p.inFlight=!1,e});return Object(nt.a)(n)}),this.trackByQueryId=function(e,n){return n.options.queryId}}return Object.defineProperty(e.prototype,"container",{set:function(e){var n=this;void 0!==e&&(void 0===this._container&&this.Drag.addScrollContainer(e.nativeElement),setTimeout(function(){return n._container=e.nativeElement}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{set:function(e){void 0!==e&&setTimeout(function(){return e.doInitialize()})},enumerable:!0,configurable:!0}),e.prototype.goBack=function(){this.state.go("^")},e.prototype.ngOnInit=function(){var e=this,n=this.state.params.board_id.toString();this.Boards.loadAllBoards(),this.boardSaver.observe(Object(Gn.a)(this)).subscribe(function(n){e.BoardCache.update(n),e.notifications.addSuccess(e.text.updateSuccessful)},function(n){return e.halNotification.handleRawError(n)}),this.BoardCache.observe(n).pipe(Object(Gn.b)(this)).subscribe(function(n){e.board=n;var t=e.state.params.query_props;e.filters=t?JSON.parse(t):e.board.filters,e.setupQueryUpdatedMonitoring()})},e.prototype.ngOnDestroy=function(){},e.prototype.saveWithNameAndFilters=function(e,n){e.name=n,e.filters=this.filters;this.state.go(".",{isNew:!1,query_props:null},{custom:{notify:!1}}),this.saveBoard(e)},e.prototype.showError=function(e){void 0===e&&(e=this.text.loadingError),this.notifications.addError(e)},e.prototype.saveBoard=function(e){this.boardSaver.request(e)},e.prototype.addList=function(e){var n=this;if(e.isFree)return this.BoardList.addFreeQuery(e,{name:this.text.unnamed_list}).then(function(e){return n.Boards.save(e)}).then(function(e){n.BoardCache.update(e)}).catch(function(e){return n.showError(e)});var t=this.lists.map(function(e){return e.query});this.opModalService.show(eR,this.injector,{board:e,queries:t})},e.prototype.moveList=function(e,n){Object(kj.j)(e.queries,n.previousIndex,n.currentIndex),this.saveBoard(e)},e.prototype.removeList=function(e,n){e.removeQuery(n),this.saveBoard(e)},e.prototype.showBoardListView=function(){return!this.Banner.eeShowBanners},e.prototype.opReferrer=function(e){return e.isFree?"boards#free":"boards#status"},e.prototype.updateFilters=function(e){this.filters=e},e.prototype.setupQueryUpdatedMonitoring=function(){var e=this;this.currentQueryUpdatedMonitoring&&this.currentQueryUpdatedMonitoring.unsubscribe(),this.currentQueryUpdatedMonitoring=this.QueryUpdated.monitor(this.board.queries.map(function(e){return e.options.queryId})).pipe(Object(Gn.b)(this)).subscribe(function(n){return e.requestRefreshOfUpdatedLists(n.elements)})},e.prototype.requestRefreshOfUpdatedLists=function(e){var n=this;e.forEach(function(e){n.lists.filter(function(n){return e.id.toString()===n.resource.options.queryId.toString()}).forEach(function(n){return n.refreshQueryUnlessCaused(e,!1)})})},e}(),rR=[[".router--boards-full-view #content-wrapper{padding-bottom:0;padding-left:0}.router--boards-full-view #content{height:100%}.boards-list--container{display:flex;flex-direction:row;flex-wrap:nowrap;flex-grow:1;padding-bottom:5px;overflow-y:auto}.boards-list--item{flex:0 0 300px;max-width:300px;position:relative}.boards-list--item:first-of-type{margin-left:5px}.board--header-container{display:flex;align-items:flex-start;margin-bottom:0;margin-left:20px}.boards-list-item-handle{position:absolute;font-size:14px;left:0;top:18px;z-index:100;opacity:0;cursor:grab}.board--container.-free .boards-list-item-handle{top:13px}.boards-list-item-handle:before{padding:0;color:var(--light-gray)}.boards-list--item:hover .boards-list-item-handle{opacity:1}.boards-list--add-item{flex:0 0 auto;height:42px;line-height:42px;margin:5px 0 0 15px;font-size:14px;cursor:pointer;color:var(--gray-dark)}.board--container.-free .boards-list--add-item{margin-top:0}.boards-list--add-item:hover{color:var(--body-font-color)}.board--container{position:relative;display:flex;flex-direction:column;height:100%}.boards-filters-container .advanced-filters--container{margin-bottom:1rem;margin-left:20px}"]],oR=l["ɵcrt"]({encapsulation:2,styles:rR,data:{}});function uR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"button",[["boardsToolbarMenu",""],["class","button last board--settings-dropdown toolbar-icon"]],[[8,"title",0]],null,null,null,null)),l["ɵdid"](2,4341760,null,0,Cj,[l.ElementRef,is,Wn.b,tj,GI,Vn,g.G,l.Injector,A.a],{board:[0,"board"]},null),(e()(),l["ɵeld"](3,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-show-more"]],null,null,null,hl,dl)),l["ɵdid"](4,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,n.component.board);e(n,4,0,"button--icon icon-show-more")},function(e,n){var t=n.component;e(n,1,0,l["ɵinlineInterpolate"](1,"",t.text.button_more,""))})}function aR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"ul",[["class","toolbar-items"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"wp-filter-button",[],null,null,null,Fy,Ey)),l["ɵdid"](3,245760,null,0,Oy,[A.a,l.ChangeDetectorRef,Ze,en],null,null),(e()(),l["ɵeld"](4,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](6,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,uR)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0),e(n,8,0,t.board.editable)},null)}function sR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["cdkDragHandle",""],["class","boards-list-item-handle icon icon-drag-handle cdk-drag-handle"]],null,null,null,null,null)),l["ɵdid"](1,147456,[[5,4]],0,kj.d,[l.ElementRef,[2,kj.k]],null,null)],null,null)}function cR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,16777216,null,null,49,"div",[["cdkDrag",""],["class","boards-list--item cdk-drag"],["vsDragScroll",""],["wp-isolated-query-space",""]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),l["ɵprd"](6144,null,kj.k,null,[kj.c]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵdid"](17,4866048,[[4,4]],3,kj.c,[l.ElementRef,[3,kj.b],$t.DOCUMENT,l.NgZone,l.ViewContainerRef,kj.a,[2,Ij.b],kj.g,l.ChangeDetectorRef],{data:[0,"data"]},null),l["ɵqud"](603979776,5,{_handles:1}),l["ɵqud"](603979776,6,{_previewTemplate:0}),l["ɵqud"](603979776,7,{_placeholderTemplate:0}),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](22,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵdid"](23,671744,null,0,jj.b,[kj.c,jj.a,l.NgZone,l.ChangeDetectorRef],{scrollContainer:[0,"scrollContainer"]},null),l["ɵprd"](2048,null,Mn,null,[qn]),l["ɵprd"](512,null,$e,$e,[d,b]),l["ɵprd"](512,null,Be,Be,[d,b]),l["ɵprd"](512,null,rn,rn,[d,b,ge]),l["ɵprd"](512,null,en,en,[d,b]),l["ɵprd"](512,null,Qe,Qe,[b]),l["ɵprd"](512,null,N,N,[b]),l["ɵprd"](512,null,We,We,[b]),l["ɵprd"](512,null,sn,sn,[d,Ge,b]),l["ɵprd"](512,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](512,null,je,je,[b,Ce]),l["ɵprd"](512,null,Pn,Pn,[]),l["ɵprd"](512,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](512,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](512,null,kn,kn,[Ne,g.G]),l["ɵprd"](512,null,_n,_n,[d,b]),l["ɵprd"](512,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](512,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](512,null,ns,ns,[l.Injector,It]),(e()(),l["ɵand"](16777216,null,null,1,null,sR)),l["ɵdid"](44,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](45,0,null,null,4,"board-list",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],[[null,"onRemove"]],function(e,n,t){var l=!0,i=e.component;"onRemove"===n&&(l=!1!==i.removeList(i.board,e.context.$implicit)&&l);return l},Kj,Lj)),l["ɵprd"](4608,null,Dj,Dj,[Wn.b,In,b,tj,nj,A.a]),l["ɵprd"](4608,null,kw,kw,[d,l.Injector,Sn,ad,qn,Cn,Qn,Fd]),l["ɵprd"](512,null,Fd,Mj,[l.Injector,b,Q,ge,Ir,Ws]),l["ɵdid"](49,770048,[[1,4]],0,Sj,[Me,A.a,GI,Vn,b,Mn,Hn,In,Fd,l.Injector,ns,Nn,Cn,tj,nj,Pn],{resource:[0,"resource"],board:[1,"board"],filters:[2,"filters"]},{onRemove:"onRemove"}),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,17,0,n.context.$implicit),e(n,23,0,t._container),e(n,44,0,t.board.editable),e(n,49,0,n.context.$implicit,t.board,t.filters)},function(e,n){e(n,0,0,l["ɵnov"](n,17).disabled,l["ɵnov"](n,17)._dragRef.isDragging()),e(n,45,0,l["ɵnov"](n,49).gridColumnStart,l["ɵnov"](n,49).gridColumnEnd,l["ɵnov"](n,49).gridRowStart,l["ɵnov"](n,49).gridRowEnd)})}function dR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","boards-list--add-item -no-text-select"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.addList(i.board)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"div",[["class","boards-list--add-item-text"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-add icon-context"]],null,null,null,hl,dl)),l["ɵdid"](3,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,3,0,"icon-add icon-context")},function(e,n){e(n,4,0,n.component.text.addList)})}function pR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[2,0],["container",1]],null,8,"div",[["cdkDropList",""],["cdkDropListOrientation","horizontal"],["class","boards-list--container cdk-drop-list"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,n,t){var l=!0,i=e.component;"cdkDropListDropped"===n&&(l=!1!==i.moveList(i.board,t)&&l);return l},null,null)),l["ɵprd"](6144,null,kj.b,null,[kj.e]),l["ɵdid"](2,1196032,null,1,kj.e,[l.ElementRef,kj.g,l.ChangeDetectorRef,[2,Ij.b],[3,kj.f]],{orientation:[0,"orientation"],disabled:[1,"disabled"]},{dropped:"cdkDropListDropped"}),l["ɵqud"](603979776,4,{_draggables:1}),l["ɵprd"](256,null,kj.f,void 0,[]),(e()(),l["ɵand"](16777216,null,null,1,null,cR)),l["ɵdid"](6,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,dR)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,"horizontal",!t.board.editable),e(n,6,0,t.board.queries,t.trackByQueryId),e(n,8,0,t.board.editable)},function(e,n){e(n,0,0,l["ɵnov"](n,2).id,l["ɵnov"](n,2).disabled,l["ɵnov"](n,2)._dropListRef.isDragging(),l["ɵnov"](n,2)._dropListRef.isReceiving())})}function hR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],{leftMargin:[0,"leftMargin"],textMessage:[1,"textMessage"],linkMessage:[2,"linkMessage"],opReferrer:[3,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,!0,t.text.upsaleBoards,t.text.upsaleCheckOutLink,t.opReferrer(t.board))},null)}function fR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,59,"div",[["class","board--container"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-editable":0,"-free":1}),(e()(),l["ɵeld"](4,0,null,null,51,null,null,null,null,null,null,null)),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](25,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,$e,$e,[d,b]),l["ɵprd"](512,null,Be,Be,[d,b]),l["ɵprd"](512,null,rn,rn,[d,b,ge]),l["ɵprd"](512,null,Qe,Qe,[b]),l["ɵprd"](512,null,N,N,[b]),l["ɵprd"](512,null,We,We,[b]),l["ɵprd"](512,null,sn,sn,[d,Ge,b]),l["ɵprd"](512,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](512,null,je,je,[b,Ce]),l["ɵprd"](512,null,Pn,Pn,[]),l["ɵprd"](512,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](512,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](512,null,kn,kn,[Ne,g.G]),l["ɵprd"](512,null,_n,_n,[d,b]),l["ɵprd"](512,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),(e()(),l["ɵeld"](41,0,null,null,11,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["ɵeld"](42,0,null,null,10,"div",[["id","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](43,0,null,null,9,"div",[["class","title-container board--header-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](44,0,null,null,4,"div",[["class","wp-show--back-button hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](45,0,null,null,3,"accessible-by-keyboard",[["linkClass","board--back-button button"]],null,[[null,"execute"]],function(e,n,t){var l=!0,i=e.component;"execute"===n&&(l=!1!==i.goBack()&&l);return l},jl,Il)),l["ɵdid"](46,49152,null,0,kl,[],{linkClass:[0,"linkClass"]},{execute:"execute"}),(e()(),l["ɵeld"](47,0,null,0,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-back-up"]],null,null,null,hl,dl)),l["ɵdid"](48,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](49,0,null,null,1,"editable-toolbar-title",[["class","title-container"]],null,[[null,"onSave"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.saveWithNameAndFilters(i.board,t)&&l);return l},Lw,Aw)),l["ɵdid"](50,638976,null,0,ew,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"],inFlight:[2,"inFlight"],showSaveCondition:[3,"showSaveCondition"],initialFocus:[4,"initialFocus"]},{onSave:"onSave"}),(e()(),l["ɵand"](16777216,null,null,1,null,aR)),l["ɵdid"](52,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](53,0,null,null,2,"div",[["class","boards-filters-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](54,0,null,null,1,"board-filter",[],null,[[null,"onFiltersChanged"]],function(e,n,t){var l=!0,i=e.component;"onFiltersChanged"===n&&(l=!1!==i.updateFilters(t)&&l);return l},Xj,Jj)),l["ɵdid"](55,180224,[[3,4]],0,Zj,[Qn,b,Q,Hn,en,Ne,g.G,hn],{board:[0,"board"],filters:[1,"filters"]},{onFiltersChanged:"onFiltersChanged"}),(e()(),l["ɵand"](16777216,null,null,1,null,pR)),l["ɵdid"](57,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,hR)),l["ɵdid"](59,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.board.editable,t.board.isFree);e(n,2,0,"board--container",l);e(n,46,0,"board--back-button button");e(n,48,0,"button--icon icon-back-up"),e(n,50,0,t.board.name,t.board.editable,t.inFlight,!!t.state.params.query_props,t.isNew),e(n,52,0,t.showBoardListView()),e(n,55,0,t.board,t.filters),e(n,57,0,t.showBoardListView()),e(n,59,0,!t.showBoardListView())},null)}function gR(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{lists:1}),l["ɵqud"](671088640,2,{container:0}),l["ɵqud"](671088640,3,{content:0}),(e()(),l["ɵand"](16777216,null,null,1,null,fR)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,4,0,n.component.board)},null)}var mR=l["ɵccf"]("board",iR,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"board",[],null,null,null,gR,oR)),l["ɵprd"](131584,null,nv,nv,[$t.DOCUMENT,l.Injector]),l["ɵdid"](2,245760,null,0,iR,[g.G,A.a,Vn,Mn,ej,Wn.b,l.Injector,GI,tj,Ge,nv,lR],null,null)],function(e,n){e(n,2,0)},null)},{},{},[]),vR=[["ng-select.wp-inline-create--reference-autocompleter{border:none}ng-select.wp-inline-create--reference-autocompleter .ng-clear-wrapper{display:none}"]],bR=l["ɵcrt"]({encapsulation:2,styles:vR,data:{}});function yR(e){return l["ɵvid"](0,[(e()(),l["ɵted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function wR(e){return l["ɵvid"](0,[(e()(),l["ɵted"](0,null,[" "," #"," "," "]))],null,function(e,n){e(n,0,0,n.context.item.type.name,n.context.item.id,n.context.item.subject)})}function CR(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{ngSelectComponent:0}),(e()(),l["ɵeld"](1,0,null,null,22,"ng-select",[["class","ng-select"],["ngClass","wp-inline-create--reference-autocompleter"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"close"],[null,"change"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,6).handleKeyDown(t)&&i);"close"===n&&(i=!1!==r.cancel()&&i);"change"===n&&(i=!1!==r.addWorkPackageToQuery(t)&&i);return i},qt.b,qt.a)),l["ɵprd"](5120,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](5,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](6,4964352,[[1,4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{appendTo:[0,"appendTo"],loading:[1,"loading"],closeOnSelect:[2,"closeOnSelect"],typeahead:[3,"typeahead"],multiple:[4,"multiple"],items:[5,"items"]},{changeEvent:"change",closeEvent:"close"}),l["ɵqud"](335544320,2,{optionTemplate:0}),l["ɵqud"](335544320,3,{optgroupTemplate:0}),l["ɵqud"](335544320,4,{labelTemplate:0}),l["ɵqud"](335544320,5,{multiLabelTemplate:0}),l["ɵqud"](603979776,6,{headerTemplate:0}),l["ɵqud"](603979776,7,{footerTemplate:0}),l["ɵqud"](335544320,8,{notFoundTemplate:0}),l["ɵqud"](335544320,9,{typeToSearchTemplate:0}),l["ɵqud"](335544320,10,{loadingTextTemplate:0}),l["ɵqud"](335544320,11,{tagTemplate:0}),l["ɵqud"](335544320,12,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,13,{ngOptions:1}),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),(e()(),l["ɵand"](0,[[4,2]],null,1,null,yR)),l["ɵdid"](21,16384,null,0,Lt.i,[l.TemplateRef],null,null),(e()(),l["ɵand"](0,[[2,2]],null,1,null,wR)),l["ɵdid"](23,16384,null,0,Lt.h,[l.TemplateRef],null,null)],function(e,n){var t=n.component;e(n,5,0,"wp-inline-create--reference-autocompleter");e(n,6,0,t.appendToContainer,t.isLoading,!1,t.searchInput$,!1,l["ɵunv"](n,6,5,l["ɵnov"](n,19).transform(t.results$)))},function(e,n){e(n,1,0,!l["ɵnov"](n,6).multiple,l["ɵnov"](n,6).typeahead,l["ɵnov"](n,6).multiple,l["ɵnov"](n,6).addTag,l["ɵnov"](n,6).searchable,l["ɵnov"](n,6).clearable,l["ɵnov"](n,6).isOpen,l["ɵnov"](n,6).disabled,l["ɵnov"](n,6).filtered)})}var kR=l["ɵccf"]("board-inline-add-autocompleter",Vj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"board-inline-add-autocompleter",[],null,null,null,CR,bR)),l["ɵdid"](1,4243456,null,0,Vj,[b,ge,qn,Qn,Q,vn,l.ChangeDetectorRef,A.a,kw],null,null)],null,null)},{appendToContainer:"appendToContainer"},{onCancel:"onCancel",onReferenced:"onReferenced"},[]),IR=function(){function e(e,n,t,l){this.boardService=e,this.boardCache=n,this.currentProject=t,this.mainMenuService=l,this.trackById=_r.compareByAttribute("id"),this.currentProjectIdentifier=this.currentProject.identifier,this.boards$=this.boardCache.observeAll().pipe(Object(v.a)(function(e){return e.sort(function(e,n){return e.name<n.name?-1:e.name>n.name?1:0})}))}return e.prototype.ngOnInit=function(){var e=this;this.mainMenuService.onActivate("board_view").subscribe(function(){e.focusBackArrow(),e.boardService.loadAllBoards()})},e.prototype.focusBackArrow=function(){jQuery('*[data-name="board_view"] .main-menu--arrow-left-to-project').focus()},e}();Tt.DynamicBootstrapper.register({selector:"boards-menu",cls:IR});var jR=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function RR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"a",[["class","main-menu--children-sub-item ellipsis"],["uiSref","boards.show"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,3).go(t.button,t.ctrlKey,t.metaKey)&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,js.a,[l.ElementRef,l.Renderer2],null,null),l["ɵdid"](3,737280,null,0,js.b,[g.P,[2,js.a],"UIView.PARENT_INJECT"],{state:[0,"state"],params:[1,"params"],options:[2,"options"]},null),l["ɵpod"](4,{board_id:0,query_props:1,projects:2,projectPath:3}),l["ɵpod"](5,{reload:0})],function(e,n){var t=n.component,l=e(n,4,0,n.context.$implicit.id,"","projects",t.currentProjectIdentifier),i=e(n,5,0,!0);e(n,3,0,"boards.show",l,i)},function(e,n){e(n,1,0,n.context.$implicit.name)})}function PR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"ul",[["class","main-menu--children boards--menu-items"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,RR)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(e,n){var t=n.component;e(n,3,0,n.context.ngIf,t.trackById)},null)}function SR(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,2,null,PR)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef])],function(e,n){var t=n.component;e(n,1,0,l["ɵunv"](n,1,0,l["ɵnov"](n,2).transform(t.boards$)))},null)}var _R=l["ɵccf"]("boards-menu",IR,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"boards-menu",[],null,null,null,SR,jR)),l["ɵdid"](1,114688,null,0,IR,[tj,GI,Qn,Et],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),xR=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function TR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[["class","tab-show"],["href",""],["role","button"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchTo(e.context.$implicit.name)&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"-disabled":0,selected:1})],function(e,n){var t=n.component,l=e(n,4,0,null!=n.context.$implicit.disableBecause,t.currentTab&&n.context.$implicit.name===t.currentTab.name);e(n,3,0,"tab-show",l)},function(e,n){e(n,1,0,n.context.$implicit.disableBecause||n.context.$implicit.title,n.context.$implicit.title)})}function OR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","tabs--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,TR)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](4,0,null,null,2,"div",[["class","tabs-buttons"],["style","display:none;"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"button",[["class","tab-left icon-context icon-arrow-left4"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"button",[["class","tab-right icon-context icon-arrow-right5"]],null,null,null,null,null))],function(e,n){e(n,3,0,n.component.availableTabs)},null)}function ER(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{tabContentOutlet:0}),(e()(),l["ɵeld"](1,0,null,null,11,"div",[["class","op-modal--portal"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,10,"div",[["class","op-modal--modal-container -wide wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,OR)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](9,0,[[1,0],["tabContentOutlet",1]],null,0,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["ɵeld"](11,0,null,null,0,"button",[["class","button -highlight"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveChanges()&&l);return l},null,null)),(e()(),l["ɵeld"](12,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){e(n,8,0,!!n.component.tabPortalHost)},function(e,n){var t=n.component;e(n,5,0,t.text.closePopup),e(n,6,0,t.text.title),e(n,11,0,t.text.applyButton),e(n,12,0,t.text.cancelButton)})}var DR=l["ɵccf"]("ng-component",wj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,ER,xR)),l["ɵdid"](1,245760,null,0,wj,[Wn.a,A.a,tj,GI,yj,l.Injector,l.ApplicationRef,l.ComponentFactoryResolver,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),FR=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function NR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,36,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,35,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,3).onReset()&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.u,[],null,null),l["ɵdid"](3,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](5,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](6,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,18,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,17,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,16,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,6,"input",[["name","entire_card_switch"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,11)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,11).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,11)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,11)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,12).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,12).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.entireCardMode=t)&&i);"change"===n&&(i=!1!==r.updateMode("inline")&&i);return i},null,null)),l["ɵdid"](11,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](12,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](14,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](16,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](17,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](19,0,null,null,6,"select",[["class","form--select form--inline-select"],["id","selected_attribute"],["name","selected_attribute"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.updateMode(t.target.value)&&l);return l},null,null)),(e()(),l["ɵeld"](20,0,null,null,2,"option",[["value","type"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](21,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](22,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["ɵeld"](23,0,null,null,2,"option",[["value","priority"]],[[8,"textContent",0],[8,"selected",0]],null,null,null,null)),l["ɵdid"](24,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](25,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),(e()(),l["ɵeld"](26,0,null,null,10,"div",[["class","form--field -full-width"]],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,9,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,8,"label",[["class","option-label"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,6,"input",[["name","highlighting_mode_switch"],["type","radio"],["value","none"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,30)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,30).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,30)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,30)._compositionEnd(t.target.value)&&i);"change"===n&&(i=!1!==l["ɵnov"](e,31).onChange()&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,31).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.highlightingMode=t)&&i);"change"===n&&(i=!1!==r.updateMode(t.target.value)&&i);return i},null,null)),l["ɵdid"](30,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵdid"](31,212992,null,0,Ht.o,[l.Renderer2,l.ElementRef,Ht.s,l.Injector],{name:[0,"name"],value:[1,"value"]},null),l["ɵprd"](1024,null,Ht.g,function(e,n){return[e,n]},[Ht.d,Ht.o]),l["ɵdid"](33,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](35,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](36,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,12,0,"entire_card_switch",!0);e(n,14,0,"entire_card_switch",t.entireCardMode);e(n,21,0,"type");e(n,22,0,"type");e(n,24,0,"priority");e(n,25,0,"priority");e(n,31,0,"highlighting_mode_switch","none");e(n,33,0,"highlighting_mode_switch",t.highlightingMode)},function(e,n){var t=n.component;e(n,1,0,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending),e(n,6,0,t.text.highlighting_mode.description),e(n,10,0,l["ɵnov"](n,16).ngClassUntouched,l["ɵnov"](n,16).ngClassTouched,l["ɵnov"](n,16).ngClassPristine,l["ɵnov"](n,16).ngClassDirty,l["ɵnov"](n,16).ngClassValid,l["ɵnov"](n,16).ngClassInvalid,l["ɵnov"](n,16).ngClassPending),e(n,17,0,t.text.highlighting_mode.entire_card_by),e(n,20,0,t.text.highlighting_mode.type,"type"===t.lastEntireCardAttribute),e(n,23,0,t.text.highlighting_mode.priority,"priority"===t.lastEntireCardAttribute),e(n,29,0,l["ɵnov"](n,35).ngClassUntouched,l["ɵnov"](n,35).ngClassTouched,l["ɵnov"](n,35).ngClassPristine,l["ɵnov"](n,35).ngClassDirty,l["ɵnov"](n,35).ngClassValid,l["ɵnov"](n,35).ngClassInvalid,l["ɵnov"](n,35).ngClassPending),e(n,36,0,t.text.highlighting_mode.none)})}var AR=l["ɵccf"]("ng-component",bj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,NR,FR)),l["ɵdid"](1,114688,null,0,bj,[l.Injector,Wn.a,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),VR=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function MR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function qR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{value:[0,"value"]},null)],function(e,n){e(n,1,0,n.context.$implicit.attribute),e(n,2,0,n.context.$implicit.attribute)},function(e,n){e(n,0,0,n.context.$implicit.text)})}function LR(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{actionAttributeSelect:0}),(e()(),l["ɵeld"](1,0,null,null,28,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,27,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,MR)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,23,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,7,"section",[["class","new-board--section"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,4,"button",[["class","button"]],[[8,"disabled",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,11).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,11).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.createFree()&&i);return i},null,null)),l["ɵdid"](11,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](12,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon4 icon-add"]],null,null,null,hl,dl)),l["ɵdid"](13,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](14,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,14,"section",[["class","new-board--section"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,6,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,5,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,4,"div",[["class","form--select-container -slim"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,0,"label",[["class","form--label"],["for","new_board_action_select"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](22,0,[[1,0],["actionAttributeSelect",1]],null,2,"select",[["class","new-board--action-select"],["id","new_board_action_select"],["name","new_board_action_select"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,qR)),l["ɵdid"](24,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](25,0,null,null,4,"button",[["class","button"]],[[8,"disabled",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,26).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,26).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.createAction()&&i);return i},null,null)),l["ɵdid"](26,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](27,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon4 icon-add"]],null,null,null,hl,dl)),l["ɵdid"](28,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](29,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],function(e,n){var t=n.component;e(n,5,0,t.showClose);e(n,13,0,"icon4 icon-add"),e(n,24,0,t.available);e(n,28,0,"icon4 icon-add")},function(e,n){var t=n.component;e(n,8,0,t.text.free_board),e(n,9,0,t.text.free_board_text),e(n,10,0,t.inFlight),e(n,14,0,t.text.free_board),e(n,16,0,t.text.action_board),e(n,17,0,t.text.action_board_text),e(n,21,0,t.text.select_attribute),e(n,25,0,t.inFlight),e(n,29,0,t.text.action_board)})}var $R=l["ɵccf"]("ng-component",lj,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,LR,VR)),l["ɵdid"](1,245760,null,0,lj,[l.ElementRef,Wn.a,l.ChangeDetectorRef,g.G,tj,nj,GI,Mn,Nn,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),HR=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function BR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function zR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,18,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,17,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location -slim"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,BR)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](5,0,null,null,0,"h3",[["class","icon-context icon-add"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,9,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,8,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,6,"div",[["class","form--select-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"label",[["class","form--label"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](11,16777216,null,null,4,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](12,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](14,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),l["ɵpod"](15,{availableValues:0,appendTo:1,model:2,classes:3,finishedLoading:4}),(e()(),l["ɵeld"](16,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,0,"button",[["class","button -highlight"]],[[8,"disabled",0],[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.create()&&l);return l},null,null)),(e()(),l["ɵeld"](18,0,null,null,0,"button",[["class","confirm-form-submit--cancel button"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,4,0,t.showClose),e(n,12,0,t.autocompleterComponent());var l=e(n,15,0,t.availableValues,"body","","new-list--action-select",!0);e(n,14,0,l,t.referenceOutputs)},function(e,n){var t=n.component;e(n,5,0,t.text.title),e(n,10,0,t.actionService.localizedName),e(n,17,0,!t.selectedAttribute||t.inFlight,t.text.button_continue,t.text.button_continue),e(n,18,0,t.text.button_cancel,t.text.button_cancel)})}var WR=l["ɵccf"]("ng-component",eR,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,zR,HR)),l["ɵdid"](1,245760,null,0,eR,[l.ElementRef,Wn.a,l.ChangeDetectorRef,nj,g.G,tj,GI,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),QR=function(){function e(){}return e.prototype.onSave=function(){this.tabInner.onSave()},e}(),UR=function(){function e(){}return e.prototype.onSave=function(){this.tabInner.onSave()},e}(),GR=function(){function e(e,n,t){this.queryParams=e,this.chartOptions=n,this.chartType=t,this.queries=[],this.chartType=this.chartType||"horizontalBar"}return e.queryCreationParams=function(e,n){return{hidden:!0,public:n,name:e.t("js.grid.widgets.work_packages_graph.title"),showHierarchies:!1,_links:{groupBy:{href:"/api/v3/queries/group_bys/status"}}}},e}(),KR=function(){function e(e,n,t,l,i){this.I18n=e,this.queryFormDm=n,this.queryDm=t,this.notificationService=l,this.currentProject=i,this._forms={}}return e.prototype.persistAndReload=function(){var e=this;return new Promise(function(n,t){e.persistChanges().then(function(){e.reloadQueries().then(function(){return n()})})})},e.prototype.persistChanges=function(){var e=this,n=this.queries.map(function(n){return e.saveQuery(n)});return Promise.all(n)},Object.defineProperty(e.prototype,"datasets",{get:function(){return this.queries.map(function(e){return{groups:e.results.groups,queryProps:"",label:e.name}})},enumerable:!0,configurable:!0}),e.prototype.reloadQueries=function(){return this.configuration.queries.length=0,this.loadQueries()},e.prototype.ensureQueryAndLoad=function(){var e=this;return 0===this.queryParams.length?this.createInitial().then(function(n){return e.queryParams.push({id:n.id}),e.loadQueries()}):this.loadQueries()},e.prototype.createInitial=function(){var e=this;return this.queryFormDm.loadWithParams({pageSize:0},void 0,this.currentProject.identifier,GR.queryCreationParams(this.I18n,!!this.currentProject.identifier)).then(function(n){var t=e.queryFormDm.buildQueryResource(n);return e.queryDm.create(t,n)})},e.prototype.loadQueries=function(){var e=this,n=this.queryParams.map(function(n){return e.loadQuery(n)});return Promise.all(n)},e.prototype.loadQuery=function(e){var n=this;return this.queryDm.find(Object.assign({pageSize:0},e.props),e.id,this.currentProject.identifier).then(function(t){e.name&&(t.name=e.name),n.configuration.queries.push(t)})},e.prototype.saveQuery=function(e){return a.b(this,void 0,void 0,function(){var n=this;return a.e(this,function(t){return[2,this.formFor(e).then(function(t){return n.queryDm.update(e,t).toPromise()})]})})},Object.defineProperty(e.prototype,"configuration",{get:function(){return this._configuration},set:function(e){this._configuration=e,this._formsPromise=null},enumerable:!0,configurable:!0}),e.prototype.formFor=function(e){return a.b(this,void 0,void 0,function(){var n=this;return a.e(this,function(t){return[2,this.loadForms().then(function(){return n._forms[e.id]})]})})},Object.defineProperty(e.prototype,"tabs",{get:function(){var e=this,n=[{name:"graph-settings",title:this.I18n.t("js.chart.tabs.graph_settings"),componentClass:QR}],t=this.configuration.queries.map(function(n){return{name:n.id,title:e.I18n.t("js.work_packages.query.filters"),componentClass:UR}});return n.concat(t)},enumerable:!0,configurable:!0}),e.prototype.loadForms=function(){var e=this;if(!this._formsPromise){var n=this.configuration.queries.map(function(n){return e.queryFormDm.load(n).then(function(t){e._forms[n.id]=t}).catch(function(n){return e.notificationService.handleRawError(n)})});this._formsPromise=Promise.all(n)}return this._formsPromise},Object.defineProperty(e.prototype,"chartType",{get:function(){return this._configuration.chartType},set:function(e){this._configuration.chartType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queries",{get:function(){return this._configuration.queries},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartOptions",{get:function(){return this._configuration.chartOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryParams",{get:function(){return this._configuration.queryParams},enumerable:!0,configurable:!0}),e}(),YR=new l.InjectionToken("WpTableConfigurationModalPrependComponent"),ZR=function(e){function n(n,t,l,i,r,o,u,a,s,c,d,p){var h=e.call(this,n,s,d)||this;return h.locals=n,h.prependModalComponent=t,h.I18n=l,h.injector=i,h.appRef=r,h.componentFactoryResolver=o,h.loadingIndicator=u,h.notificationService=a,h.cdRef=s,h.ConfigurationService=c,h.elementRef=d,h.graphConfiguration=p,h.closeOnEscape=!1,h.closeOnOutsideClick=!1,h.text={title:h.I18n.t("js.chart.modal_title"),closePopup:h.I18n.t("js.close_popup_title"),applyButton:h.I18n.t("js.modals.button_apply"),cancelButton:h.I18n.t("js.modals.button_cancel")},h}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.loadingIndicator.indicator("modal").promise=this.graphConfiguration.loadForms().then(function(){e.tabPortalHost=new pn(e.graphConfiguration.tabs,e.tabContentOutlet.nativeElement,e.componentFactoryResolver,e.appRef,e.injector);var n=e.locals.initialTab||e.availableTabs[0].name;e.switchTo(n)})},n.prototype.ngOnDestroy=function(){this.tabPortalHost.dispose()},Object.defineProperty(n.prototype,"availableTabs",{get:function(){return this.tabPortalHost.availableTabs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTab",{get:function(){return this.tabPortalHost.currentTab},enumerable:!0,configurable:!0}),n.prototype.switchTo=function(e){this.tabPortalHost.switchTo(e)},n.prototype.saveChanges=function(){this.tabPortalHost.activeComponents.forEach(function(e){e.onSave()}),this.configuration=this.graphConfiguration.configuration,this.service.close()},n.prototype.onClose=function(){return this.afterFocusOn.focus(),!0},Object.defineProperty(n.prototype,"afterFocusOn",{get:function(){return this.$element},enumerable:!0,configurable:!0}),n}(He.a),JR=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function XR(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function eP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,XR)),l["ɵdid"](2,671744,null,0,$t.NgComponentOutlet,[l.ViewContainerRef],{ngComponentOutlet:[0,"ngComponentOutlet"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"]},null),l["ɵdid"](3,16384,null,0,fu.g,[$t.NgComponentOutlet],null,null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){var t=n.component;e(n,2,0,t.prependModalComponent,t.injector)},null)}function nP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"a",[["class","tab-show"],["href",""],["role","button"]],[[1,"title",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.switchTo(e.context.$implicit.name)&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"-disabled":0,selected:1})],function(e,n){var t=n.component,l=e(n,4,0,null!=n.context.$implicit.disableBecause,t.currentTab&&n.context.$implicit.name===t.currentTab.name);e(n,3,0,"tab-show",l)},function(e,n){e(n,1,0,n.context.$implicit.disableBecause||n.context.$implicit.title,n.context.$implicit.title)})}function tP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","tabs--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,2,"ul",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,nP)),l["ɵdid"](3,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](4,0,null,null,2,"div",[["class","tabs-buttons"],["style","display:none;"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"button",[["class","tab-left icon-context icon-arrow-left4"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"button",[["class","tab-right icon-context icon-arrow-right5"]],null,null,null,null,null))],function(e,n){e(n,3,0,n.component.availableTabs)},null)}function lP(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{tabContentOutlet:0}),(e()(),l["ɵeld"](1,0,null,null,13,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,12,"div",[["class","op-modal--modal-container -wide wp-table--configuration-modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"h3",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,eP)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,tP)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](11,0,[[1,0],["tabContentOutlet",1]],null,0,"div",[["class","tab-content"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,0,"button",[["class","button -highlight"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.saveChanges()&&l);return l},null,null)),(e()(),l["ɵeld"](14,0,null,null,0,"button",[["class","button"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],function(e,n){var t=n.component;e(n,8,0,!!t.prependModalComponent),e(n,10,0,!!t.tabPortalHost)},function(e,n){var t=n.component;e(n,5,0,t.text.closePopup),e(n,6,0,t.text.title),e(n,13,0,t.text.applyButton),e(n,14,0,t.text.cancelButton)})}var iP=l["ɵccf"]("ng-component",ZR,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,lP,JR)),l["ɵdid"](1,245760,null,0,ZR,[Wn.a,[2,YR],A.a,l.Injector,l.ApplicationRef,l.ComponentFactoryResolver,Nn,qn,l.ChangeDetectorRef,be,l.ElementRef,KR],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),rP=function(){function e(e,n,t){this.I18n=e,this.wpStatesInitialization=n,this.wpGraphConfiguration=t}return e.prototype.initializeQuerySpace=function(){var e=this;return this.wpGraphConfiguration.formFor(this.query).then(function(n){e.wpStatesInitialization.initialize(e.query,e.query.results),e.wpStatesInitialization.updateStatesFromForm(e.query,n)})},e}(),oP=function(e){function n(n,t,l,i,r){var o=e.call(this,n,i,r)||this;return o.I18n=n,o.wpTableFilters=t,o.wpFiltersService=l,o.wpStatesInitialization=i,o.wpGraphConfiguration=r,o.filters=[],o.text={multiSelectLabel:o.I18n.t("js.work_packages.label_column_multiselect")},o}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.initializeQuerySpace().then(function(){e.wpTableFilters.onReady().then(function(){e.filters=e.wpTableFilters.current})})},n.prototype.onSave=function(){this.filters&&(this.wpTableFilters.replaceIfComplete(this.filters),this.wpTableFilters.applyToQuery(this.wpGraphConfiguration.queries[0]))},Object.defineProperty(n.prototype,"query",{get:function(){return this.wpGraphConfiguration.queries[0]},enumerable:!0,configurable:!0}),n}(rP),uP=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function aP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"query-filters",[],null,[[null,"filtersChanged"]],function(e,n,t){var l=!0,i=e.component;"filtersChanged"===n&&(l=!1!==(i.filters=t)&&l);return l},Bg,Ag)),l["ɵdid"](1,770048,null,0,Ng,[en,Ze,A.a,Ge],{filters:[0,"filters"]},{filtersChanged:"filtersChanged"})],function(e,n){e(n,1,0,n.component.filters)},null)}function sP(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,aP)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,!!n.component.filters)},null)}l["ɵccf"]("filters-tab-inner",oP,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"filters-tab-inner",[],null,null,null,sP,uP)),l["ɵdid"](1,114688,null,0,oP,[A.a,en,Ze,Hn,KR],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var cP=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function dP(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{tabInner:0}),(e()(),l["ɵeld"](1,0,null,null,38,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](20,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,en,en,[d,b]),l["ɵprd"](512,null,Ze,Ze,[]),l["ɵprd"](512,null,$e,$e,[d,b]),l["ɵprd"](512,null,Be,Be,[d,b]),l["ɵprd"](512,null,rn,rn,[d,b,ge]),l["ɵprd"](512,null,Qe,Qe,[b]),l["ɵprd"](512,null,N,N,[b]),l["ɵprd"](512,null,We,We,[b]),l["ɵprd"](512,null,sn,sn,[d,Ge,b]),l["ɵprd"](512,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](512,null,je,je,[b,Ce]),l["ɵprd"](512,null,Pn,Pn,[]),l["ɵprd"](512,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](512,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](512,null,kn,kn,[Ne,g.G]),l["ɵprd"](512,null,_n,_n,[d,b]),l["ɵprd"](512,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),(e()(),l["ɵeld"](38,0,null,null,1,"filters-tab-inner",[],null,null,null,sP,uP)),l["ɵdid"](39,114688,[[1,4],["tabInner",4]],0,oP,[A.a,en,Ze,Hn,KR],null,null)],function(e,n){e(n,39,0)},null)}var pP=l["ɵccf"]("ng-component",UR,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,dP,cP)),l["ɵdid"](1,49152,null,0,UR,[],null,null)],null,null)},{},{},[]),hP=function(e){function n(n,t,l,i){var r=e.call(this,n,l,i)||this;return r.I18n=n,r.wpTableGroupBy=t,r.wpStatesInitialization=l,r.wpGraphConfiguration=i,r.availableGroups=[],r.text={group_by:r.I18n.t("js.chart.axis_criteria"),chart_type:r.I18n.t("js.chart.type")},r}return a.d(n,e),n.prototype.onSave=function(){var e=this;this.wpGraphConfiguration.chartType=this.currentChartType.identifier,this.wpGraphConfiguration.queries.forEach(function(n){e.wpTableGroupBy.applyToQuery(n)})},Object.defineProperty(n.prototype,"currentGroup",{get:function(){return this.wpTableGroupBy.current},set:function(e){this.wpTableGroupBy.update(e)},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var e=this;this.initializeQuerySpace().then(function(){e.wpTableGroupBy.onReady().then(function(){e.initializeAvailableGroups(),e.initializeAvailableChartType()})})},n.prototype.initializeAvailableGroups=function(){var e=this.wpTableGroupBy.available,n=this.wpTableGroupBy.current;n&&(e=(e=e.filter(function(e){return e.id!==n.id})).concat(n)),this.availableGroups=_.sortBy(e,"name")},n.prototype.initializeAvailableChartType=function(){var e=this;this.availableChartTypes=_.sortBy([{identifier:"horizontalBar",label:this.I18n.t("js.chart.types.horizontal_bar")},{identifier:"bar",label:this.I18n.t("js.chart.types.bar")},{identifier:"line",label:this.I18n.t("js.chart.types.line")},{identifier:"pie",label:this.I18n.t("js.chart.types.pie")},{identifier:"doughnut",label:this.I18n.t("js.chart.types.doughnut")},{identifier:"radar",label:this.I18n.t("js.chart.types.radar")},{identifier:"polarArea",label:this.I18n.t("js.chart.types.polar_area")}],"label"),this.currentChartType=this.availableChartTypes.find(function(n){return n.identifier===e.wpGraphConfiguration.configuration.chartType})||this.availableChartTypes[0]},Object.defineProperty(n.prototype,"query",{get:function(){return this.wpGraphConfiguration.queries[0]},enumerable:!0,configurable:!0}),n}(rP),fP=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function gP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.name)})}function mP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"option",[],[[8,"textContent",0]],null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null)],function(e,n){e(n,1,0,n.context.$implicit),e(n,2,0,n.context.$implicit)},function(e,n){e(n,0,0,n.context.$implicit.label)})}function vP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,31,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,30,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0;"submit"===n&&(i=!1!==l["ɵnov"](e,3).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,3).onReset()&&i);return i},null,null)),l["ɵdid"](2,16384,null,0,Ht.u,[],null,null),l["ɵdid"](3,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](5,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](6,0,null,null,12,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"label",[["class","form--label"],["for","selected_grouping"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,10,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,9,"div",[["class","form--select-container -middle"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,8,"select",[["class","form--select"],["id","selected_grouping"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,11).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,11).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.currentGroup=t)&&i);return i},null,null)),l["ɵdid"](11,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](13,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),l["ɵpod"](14,{standalone:0}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](16,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,gP)),l["ɵdid"](18,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](19,0,null,null,12,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,0,"label",[["class","form--label"],["for","selected_chart_type"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,10,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,9,"div",[["class","form--select-container -middle"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,8,"select",[["id","selected_chart_type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,24).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,24).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.currentChartType=t)&&i);return i},null,null)),l["ɵdid"](24,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](26,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),l["ɵpod"](27,{standalone:0}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](29,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,mP)),l["ɵdid"](31,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component,l=t.currentGroup,i=e(n,14,0,!0);e(n,13,0,l,i),e(n,18,0,t.availableGroups);var r=t.currentChartType,o=e(n,27,0,!0);e(n,26,0,r,o),e(n,31,0,t.availableChartTypes)},function(e,n){var t=n.component;e(n,1,0,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending),e(n,7,0,t.text.group_by),e(n,10,0,l["ɵnov"](n,16).ngClassUntouched,l["ɵnov"](n,16).ngClassTouched,l["ɵnov"](n,16).ngClassPristine,l["ɵnov"](n,16).ngClassDirty,l["ɵnov"](n,16).ngClassValid,l["ɵnov"](n,16).ngClassInvalid,l["ɵnov"](n,16).ngClassPending),e(n,20,0,t.text.chart_type),e(n,23,0,l["ɵnov"](n,29).ngClassUntouched,l["ɵnov"](n,29).ngClassTouched,l["ɵnov"](n,29).ngClassPristine,l["ɵnov"](n,29).ngClassDirty,l["ɵnov"](n,29).ngClassValid,l["ɵnov"](n,29).ngClassInvalid,l["ɵnov"](n,29).ngClassPending)})}l["ɵccf"]("settings-tab-inner",hP,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"settings-tab-inner",[],null,null,null,vP,fP)),l["ɵdid"](1,114688,null,0,hP,[A.a,Be,Hn,KR],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var bP=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function yP(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{tabInner:0}),(e()(),l["ɵeld"](1,0,null,null,38,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](21,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,Be,Be,[d,b]),l["ɵprd"](512,null,$e,$e,[d,b]),l["ɵprd"](512,null,rn,rn,[d,b,ge]),l["ɵprd"](512,null,en,en,[d,b]),l["ɵprd"](512,null,Qe,Qe,[b]),l["ɵprd"](512,null,N,N,[b]),l["ɵprd"](512,null,We,We,[b]),l["ɵprd"](512,null,sn,sn,[d,Ge,b]),l["ɵprd"](512,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](512,null,je,je,[b,Ce]),l["ɵprd"](512,null,Pn,Pn,[]),l["ɵprd"](512,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](512,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](512,null,kn,kn,[Ne,g.G]),l["ɵprd"](512,null,_n,_n,[d,b]),l["ɵprd"](512,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),(e()(),l["ɵeld"](38,0,null,null,1,"settings-tab-inner",[],null,null,null,vP,fP)),l["ɵdid"](39,114688,[[1,4],["tabInner",4]],0,hP,[A.a,Be,Hn,KR],null,null)],function(e,n){e(n,39,0)},null)}var wP=l["ɵccf"]("ng-component",QR,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,yP,bP)),l["ɵdid"](1,49152,null,0,QR,[],null,null)],null,null)},{},{},[]),CP=t("Zseb"),kP=(t("MO+k"),function(){function e(e){this.i18n=e,this.chartType="horizontalBar",this.error=null,this.chartHeight="100%",this.chartLabels=[],this.chartData=[],this.initialized=!1,this.text={noResults:this.i18n.t("js.work_packages.no_results.title")}}return e.prototype.ngOnChanges=function(e){e.datasets?(this.setChartOptions(),this.updateChartData(),e.datasets.firstChange||(this.initialized=!0)):e.chartType&&this.setChartOptions()},e.prototype.updateChartData=function(){var e,n,t=this,l=_.uniq(this.datasets.reduce(function(e,n){var t=(n.groups||[]).map(function(e){return e.value});return e.concat(t)},[])),i=this.datasets.map(function(e){var n=(e.groups||[]).reduce(function(e,n){return e[n.value]=n.count,e},{});return{label:e.label,data:l.map(function(e){return n[e]||0})}});l=l.map(function(e){return e||t.i18n.t("js.placeholders.default")}),this.setHeight(),this.chartLabels.length=0,(e=this.chartLabels).push.apply(e,l),this.chartData.length=0,(n=this.chartData).push.apply(n,i)},e.prototype.setChartOptions=function(){var e={responsive:!0,maintainAspectRatio:!1,legend:{display:this.datasets.length>1}},n={};"horizontalBar"===this.chartType&&(n={scales:{xAxes:[{stacked:!0,ticks:{callback:function(e){return Math.floor(e)===e?e:0}}}],yAxes:[{stacked:!0}]}}),this.chartOptions=Object.assign({},e,n,this.inputChartOptions)},Object.defineProperty(e.prototype,"hasDataToDisplay",{get:function(){return this.chartData.length>0&&this.chartData.some(function(e){return e.data.length>0})},enumerable:!0,configurable:!0}),e.prototype.setHeight=function(){if("horizontalBar"===this.chartType&&this.datasets&&this.datasets[0]){var e=[];this.datasets.forEach(function(n){return n.groups.forEach(function(n){e.includes(n.value)||e.push(n.value)})});var n=40*e.length;this.datasets.length>1&&(n+=40),n+=40,this.chartHeight=n+"px"}else this.chartHeight="100%"},e}()),IP=[[".work-packages-embedded-view--container[_ngcontent-%COMP%]{height:100%;max-height:500px;position:relative}"]],jP=l["ɵcrt"]({encapsulation:0,styles:IP,data:{}});function RP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"canvas",[["baseChart",""]],null,null,null,null,null)),l["ɵdid"](1,999424,null,0,CP.a,[l.ElementRef,CP.c],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"]},null)],function(e,n){var t=n.component;e(n,1,0,t.chartData,t.chartLabels,t.chartOptions,t.chartType)},null)}function PP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function SP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[["graphContainer",1]],null,7,"div",[["class","work-packages-embedded-view--container loading-indicator--location"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgStyleImpl"],$t["ɵNgStyleR2Impl"],[l.ElementRef,l.KeyValueDiffers,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgStyle,[$t["ɵNgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),l["ɵpod"](3,{height:0}),(e()(),l["ɵand"](16777216,null,null,1,null,RP)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,PP)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.chartHeight);e(n,2,0,l),e(n,5,0,t.hasDataToDisplay),e(n,7,0,!t.hasDataToDisplay&&t.initialized)},null)}l["ɵccf"]("wp-embedded-graph",kP,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-graph",[],null,null,null,SP,jP)),l["ɵdid"](1,573440,null,0,kP,[A.a],null,null)],null,null)},{datasets:"datasets",inputChartOptions:"chartOptions",chartType:"chartType"},{},[]);var _P=function(){function e(e,n,t,l){this.elementRef=e,this.I18n=n,this.graphConfigurationService=t,this.cdr=l,this.groupBy="status",this.chartOptions={maintainAspectRatio:!1},this.datasets=[],this.displayModeSingle=!0,this.error=null,this.availableGroupBy=[{label:n.t("js.work_packages.properties.category"),key:"category"},{label:n.t("js.work_packages.properties.type"),key:"type"},{label:n.t("js.work_packages.properties.status"),key:"status"},{label:n.t("js.work_packages.properties.priority"),key:"priority"},{label:n.t("js.work_packages.properties.author"),key:"author"},{label:n.t("js.work_packages.properties.assignee"),key:"assignee"}]}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.additionalFilter=JSON.parse(e.getAttribute("additional-filter")),this.setQueryProps()},e.prototype.setQueryProps=function(){var e=this;this.datasets=[];var n=this.graphParams;this.graphConfigurationService.configuration=new GR(n,{},"horizontalBar"),this.graphConfigurationService.reloadQueries().then(function(){e.datasets=e.sortedDatasets(e.graphConfigurationService.datasets,n),e.cdr.detectChanges()}).catch(function(){e.error=e.I18n.t("js.chart.errors.could_not_load"),e.cdr.detectChanges()})},Object.defineProperty(e.prototype,"graphParams",{get:function(){var e=[];return"status"===this.groupBy?(this.displayModeSingle=!0,e.push({name:this.I18n.t("js.label_all"),props:this.propsBoth})):(this.displayModeSingle=!1,e.push({name:this.I18n.t("js.label_open_work_packages"),props:this.propsOpen}),e.push({name:this.I18n.t("js.label_closed_work_packages"),props:this.propsClosed})),e},enumerable:!0,configurable:!0}),e.prototype.sortedDatasets=function(e,n){var t=n.map(function(e){return e.name});return e.slice().sort(function(e,n){return t.indexOf(e.label)-t.indexOf(n.label)})},Object.defineProperty(e.prototype,"propsBoth",{get:function(){return this.baseProps()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propsOpen",{get:function(){return this.baseProps({status:{operator:"o",values:[]}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propsClosed",{get:function(){return this.baseProps({status:{operator:"c",values:[]}})},enumerable:!0,configurable:!0}),e.prototype.baseProps=function(e){var n=[{subprojectId:{operator:"*",values:[]}}];return e&&n.push(e),this.additionalFilter&&n.push(this.additionalFilter),{"columns[]":[],filters:JSON.stringify(n),group_by:this.groupBy,pageSize:0}},Object.defineProperty(e.prototype,"displaySingle",{get:function(){return this.displayModeSingle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMulti",{get:function(){return!this.displayModeSingle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentGraph",{get:function(){return this.displaySingle?this.embeddedGraphSingle:this.embeddedGraphMulti},enumerable:!0,configurable:!0}),e}();Tt.DynamicBootstrapper.register({selector:"wp-overview-graph",cls:_P});var xP=[["wp-embedded-graph[_ngcontent-%COMP%]{margin-top:20px;display:block}"]],TP=l["ɵcrt"]({encapsulation:0,styles:xP,data:{}});function OP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"option",[],null,null,null,null,null)),l["ɵdid"](1,147456,null,0,Ht.m,[l.ElementRef,l.Renderer2,[2,Ht.q]],{ngValue:[0,"ngValue"]},null),l["ɵdid"](2,147456,null,0,Ht.t,[l.ElementRef,l.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(e()(),l["ɵted"](3,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.key),e(n,2,0,n.context.$implicit.key)},function(e,n){e(n,3,0,n.context.$implicit.label)})}function EP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","notification-box -error"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"div",[["class","notification-box--content"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.component.error)})}function DP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-graph",[],null,null,null,SP,jP)),l["ɵdid"](1,573440,[[1,4],["wpEmbeddedGraphMulti",4]],0,kP,[A.a],{datasets:[0,"datasets"],inputChartOptions:[1,"inputChartOptions"]},null)],function(e,n){var t=n.component;e(n,1,0,t.datasets,t.chartOptions)},null)}function FP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-graph",[],null,null,null,SP,jP)),l["ɵdid"](1,573440,[[2,4],["wpEmbeddedGraphSingle",4]],0,kP,[A.a],{datasets:[0,"datasets"],inputChartOptions:[1,"inputChartOptions"]},null)],function(e,n){var t=n.component;e(n,1,0,t.datasets,t.chartOptions)},null)}function NP(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{embeddedGraphMulti:0}),l["ɵqud"](671088640,2,{embeddedGraphSingle:0}),(e()(),l["ɵeld"](2,0,null,null,7,"select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,n,t){var i=!0,r=e.component;"change"===n&&(i=!1!==l["ɵnov"](e,3).onChange(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,3).onTouched()&&i);"ngModelChange"===n&&(i=!1!==(r.groupBy=t)&&i);"ngModelChange"===n&&(i=!1!==r.setQueryProps()&&i);return i},null,null)),l["ɵdid"](3,16384,null,0,Ht.q,[l.Renderer2,l.ElementRef],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.q]),l["ɵdid"](5,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](7,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵand"](16777216,null,null,1,null,OP)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,EP)),l["ɵdid"](11,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,DP)),l["ɵdid"](13,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,FP)),l["ɵdid"](15,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,t.groupBy),e(n,9,0,t.availableGroupBy),e(n,11,0,t.error),e(n,13,0,t.displayMulti),e(n,15,0,t.displaySingle)},function(e,n){e(n,2,0,l["ɵnov"](n,7).ngClassUntouched,l["ɵnov"](n,7).ngClassTouched,l["ɵnov"](n,7).ngClassPristine,l["ɵnov"](n,7).ngClassDirty,l["ɵnov"](n,7).ngClassValid,l["ɵnov"](n,7).ngClassInvalid,l["ɵnov"](n,7).ngClassPending)})}var AP=l["ɵccf"]("wp-overview-graph",_P,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"wp-overview-graph",[],null,null,null,NP,TP)),l["ɵprd"](512,null,KR,KR,[A.a,hn,Me,qn,Qn]),l["ɵdid"](2,114688,null,0,_P,[l.ElementRef,A.a,KR,l.ChangeDetectorRef],null,null)],function(e,n){e(n,2,0)},null)},{additionalFilter:"additionalFilter",groupBy:"groupBy",chartOptions:"chartOptions"},{},[]),VP=t("XFe1"),MP=t("qfZ4"),qP=function(){function e(e,n,t,l,i,r,o,u,a,s,c,d){this.states=e,this.$state=n,this.wpTableFilters=t,this.wpListService=l,this.querySpace=i,this.wpListChecksumService=r,this.titleService=o,this.urlParamsHelper=u,this.element=a,this.i18n=s,this.notificationsService=c,this.sanitizer=d,this.static=!1}return e.prototype.ngOnInit=function(){this.querySpace.stopAllSubscriptions.next(),this.setCalendarOptions()},e.prototype.ngOnDestroy=function(){},e.prototype.onCalendarInitialized=function(){this.setupWorkPackagesListener()},e.prototype.updateTimeframe=function(e){var n=this.calendarElement.fullCalendar("getView"),t=n.start.format("YYYY-MM-DD"),l=n.end.format("YYYY-MM-DD"),i=this.wpTableFilters.isEmpty;if(i&&this.querySpace.query.value);else if(i){var r=this.defaultQueryProps(t,l);this.$state.params.query_props&&(r=decodeURIComponent(this.$state.params.query_props||"")),this.wpListService.fromQueryParams({query_props:r},this.projectIdentifier).toPromise()}else{this.$state.params;this.wpTableFilters.modify("datesInterval",function(e){e.values[0]=t,e.values[1]=l})}},e.prototype.addTooltip=function(e){var n=e.detail.event,t=e.detail.element,l=n.workPackage;jQuery(t).tooltip({content:this.contentString(l),items:".fc-content",close:function(){jQuery(".ui-helper-hidden-accessible").remove()},track:!0})},e.prototype.toWPFullView=function(e){var n=e.detail.event.workPackage;this.removeTooltip(e.detail.jsEvent.currentTarget),this.wpListChecksumService.clear(),window.history.pushState({},this.titleService.current,window.location.href),this.$state.go("work-packages.show",{workPackageId:n.id},{inherit:!1})},Object.defineProperty(e.prototype,"calendarElement",{get:function(){return jQuery(this.element.nativeElement).find("ng-fullcalendar")},enumerable:!0,configurable:!0}),e.prototype.setCalendarsDate=function(){var e=this.querySpace.query.value;if(e){var n=_.find(e.filters||[],{id:"datesInterval"}),t=null,l="month";if(n){var i=j(n.values[0]),r=j(n.values[1]).diff(i,"days");t=i.add(r/2,"days"),7===r&&(l="basicWeek")}t?this.calendarElement.fullCalendar("changeView",l,t):this.calendarElement.fullCalendar("changeView",l)}},e.prototype.setupWorkPackagesListener=function(){var e=this;this.querySpace.results.values$().pipe(Object(Gn.b)(this)).subscribe(function(n){e.warnOnTooManyResults(n),e.mapToCalendarEvents(n.elements),e.setCalendarsDate()})},e.prototype.mapToCalendarEvents=function(e){var n=this,t=e.map(function(e){var t=n.eventDate(e,"start"),l=n.eventDate(e,"due"),i=j(l).add(1,"days");return{title:e.subject,start:t,end:i,allDay:!0,className:"__hl_background_type_"+e.type.id,workPackage:e}});this.ucCalendar.renderEvents(t)},e.prototype.warnOnTooManyResults=function(n){n.count<n.total?this.tooManyResultsText=this.i18n.t("js.calendar.too_many",{count:n.total,max:e.MAX_DISPLAYED}):this.tooManyResultsText=null,this.tooManyResultsText&&!this.static&&this.notificationsService.addNotice(this.tooManyResultsText)},e.prototype.setCalendarOptions=function(){this.static?this.calendarOptions=this.staticOptions:this.calendarOptions=this.dynamicOptions},Object.defineProperty(e.prototype,"dynamicOptions",{get:function(){var e=this;return{editable:!1,eventLimit:!1,locale:this.i18n.locale,height:function(){return jQuery(window).height()-e.calendarElement.offset().top-12},header:{left:"prev,next today",center:"title",right:"month,basicWeek"},views:{month:{fixedWeekCount:!1}}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"staticOptions",{get:function(){var e=this;return{editable:!1,eventLimit:!1,locale:this.i18n.locale,height:function(){for(var n=jQuery(e.element.nativeElement);!n.height()&&n.parent();)n=n.parent();var t=jQuery(e.element.nativeElement).position().top,l=n.position().top;return n.height()-(t-l)},header:!1,defaultView:"basicWeek"}},enumerable:!0,configurable:!0}),e.prototype.defaultQueryProps=function(n,t){var l={c:["id"],t:"id:asc",f:[{n:"status",o:"o",v:[]},{n:"datesInterval",o:"<>d",v:[n,t]}],pp:e.MAX_DISPLAYED};return JSON.stringify(l)},e.prototype.eventDate=function(e,n){return e.isMilestone?e.date:e[n+"Date"]},e.prototype.contentString=function(e){return"\n        "+this.sanitizedValue(e,"type")+" #"+e.id+": "+this.sanitizedValue(e,"subject",null)+'\n        <ul class="tooltip--map">\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.projectName")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"project")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.status")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"status")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.startDate")+':</span>\n            <span class="tooltip--map--value">'+this.eventDate(e,"start")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.dueDate")+':</span>\n            <span class="tooltip--map--value">'+this.eventDate(e,"due")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.assignee")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"assignee")+'</span>\n          </li>\n          <li class="tooltip--map--item">\n            <span class="tooltip--map--key">'+this.i18n.t("js.work_packages.properties.priority")+':</span>\n            <span class="tooltip--map--value">'+this.sanitizedValue(e,"priority")+"</span>\n          </li>\n        </ul>\n        "},e.prototype.sanitizedValue=function(e,n,t){void 0===t&&(t="name");var i=e[n];return i=(i=t&&i?i[t]:i)||this.i18n.t("js.placeholders.default"),this.sanitizer.sanitize(l.SecurityContext.HTML,i)},e.prototype.removeTooltip=function(e){jQuery(e).tooltip({close:function(){jQuery(".ui-helper-hidden-accessible").remove()},disabled:!0})},e.MAX_DISPLAYED=100,e}(),LP=[[".wp-calendar--container[_ngcontent-%COMP%]{min-height:200px}.wp-calendar--notification[_ngcontent-%COMP%]{font-style:italic;margin-top:.5rem}.work-packages-list-view--container[_ngcontent-%COMP%]   .wp-calendar--notification[_ngcontent-%COMP%]{margin-bottom:1rem}"]],$P=l["ɵcrt"]({encapsulation:0,styles:LP,data:{}});function HP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","wp-calendar--notification"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.tooManyResultsText)})}function BP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","wp-calendar--container loading-indicator--location"],["style","position: relative"]],[[1,"data-indicator-name",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"ng-fullcalendar",[],null,[[null,"initialized"],[null,"viewRender"],[null,"eventRender"],[null,"eventClick"]],function(e,n,t){var l=!0,i=e.component;"initialized"===n&&(l=!1!==i.onCalendarInitialized()&&l);"viewRender"===n&&(l=!1!==i.updateTimeframe(t)&&l);"eventRender"===n&&(l=!1!==i.addTooltip(t)&&l);"eventClick"===n&&(l=!1!==i.toWPFullView(t)&&l);return l},VP.b,VP.a)),l["ɵdid"](2,14794752,[[1,4],["ucCalendar",4]],0,MP.a,[l.ElementRef,l.NgZone],{options:[0,"options"]},{eventClick:"eventClick",viewRender:"viewRender",eventRender:"eventRender",initialized:"initialized"}),(e()(),l["ɵand"](16777216,null,null,1,null,HP)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.calendarOptions),e(n,4,0,t.static)},function(e,n){e(n,0,0,"table")})}function zP(e){return l["ɵvid"](0,[l["ɵqud"](671088640,1,{ucCalendar:0}),(e()(),l["ɵand"](16777216,null,null,1,null,BP)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.component.calendarOptions)},null)}var WP=l["ɵccf"]("wp-calendar",qP,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-calendar",[],null,null,null,zP,$P)),l["ɵdid"](1,245760,null,0,qP,[d,g.G,en,ot,b,kn,Kc,Ne,l.ElementRef,A.a,Vn,rr.DomSanitizer],null,null)],function(e,n){e(n,1,0)},null)},{projectIdentifier:"projectIdentifier",static:"static"},{},[]),QP=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.projectIdentifier=n.$state.params.projectPath||null,n}return a.d(n,e),Object.defineProperty(n.prototype,"loadingIndicator",{set:function(e){this.loadingIndicatorService.indicator("calendar-entry").promise=e},enumerable:!0,configurable:!0}),n.prototype.refresh=function(e,n){return this.loadingIndicator=this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier)},n}(pt),UP=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function GP(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{calendarElement:0}),(e()(),l["ɵeld"](1,0,null,null,16,"div",[["class","work-packages-list-view--container loading-indicator--location"],["data-indicator-name","calendar-entry"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,11,"div",[["class","toolbar-container -editable"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,10,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,2,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),l["ɵted"](6,null,[" "," "])),(e()(),l["ɵeld"](7,0,null,null,6,"ul",[["class","toolbar-items hide-when-print"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,1,"wp-filter-button",[],null,null,null,Fy,Ey)),l["ɵdid"](10,245760,null,0,Oy,[A.a,l.ChangeDetectorRef,Ze,en],null,null),(e()(),l["ɵeld"](11,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](13,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](14,0,null,null,1,"filter-container",[],null,null,null,Kg,Wg)),l["ɵdid"](15,245760,null,0,zg,[en,l.ChangeDetectorRef,Ze],null,null),(e()(),l["ɵeld"](16,0,null,null,1,"wp-calendar",[],null,null,null,zP,$P)),l["ɵdid"](17,245760,[[1,4]],0,qP,[d,g.G,en,ot,b,kn,Kc,Ne,l.ElementRef,A.a,Vn,rr.DomSanitizer],{projectIdentifier:[0,"projectIdentifier"]},null)],function(e,n){var t=n.component;e(n,10,0),e(n,15,0),e(n,17,0,t.projectIdentifier)},function(e,n){e(n,6,0,n.component.I18n.t("js.calendar.title"))})}var KP=l["ɵccf"]("ng-component",QP,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,GP,UP)),l["ɵdid"](1,245760,null,0,QP,[l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),YP=function(){function e(e){this.elementRef=e}return e.prototype.ngOnInit=function(){this.elementRef.nativeElement},e}();Tt.DynamicBootstrapper.register({selector:"wp-embedded-calendar",cls:YP});var ZP=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function JP(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,75,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](19,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,en,en,[d,b]),l["ɵprd"](512,null,je,je,[b,Ce]),l["ɵprd"](512,null,$e,$e,[d,b]),l["ɵprd"](512,null,Be,Be,[d,b]),l["ɵprd"](512,null,rn,rn,[d,b,ge]),l["ɵprd"](512,null,Qe,Qe,[b]),l["ɵprd"](512,null,N,N,[b]),l["ɵprd"](512,null,We,We,[b]),l["ɵprd"](512,null,sn,sn,[d,Ge,b]),l["ɵprd"](512,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](512,null,Pn,Pn,[]),l["ɵprd"](512,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](512,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](512,null,kn,kn,[Ne,g.G]),l["ɵprd"](512,null,_n,_n,[d,b]),l["ɵprd"](512,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](512,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),(e()(),l["ɵeld"](37,0,null,null,1,"wp-calendar",[],null,null,null,zP,$P)),l["ɵdid"](38,245760,null,0,qP,[d,g.G,en,ot,b,kn,Kc,Ne,l.ElementRef,A.a,Vn,rr.DomSanitizer],{static:[0,"static"]},null),(e()(),l["ɵeld"](39,0,null,null,36,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](75,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null)],function(e,n){e(n,38,0,!0)},null)}var XP=l["ɵccf"]("wp-embedded-calendar",YP,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-calendar",[],null,null,null,JP,ZP)),l["ɵdid"](1,114688,null,0,YP,[l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),eS=function(){function e(e,n,t,l){this.startRow=e,this.endRow=n,this.startColumn=t,this.endColumn=l}return Object.defineProperty(e.prototype,"gridStartRow",{get:function(){return 2*this.startRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridEndRow",{get:function(){return 2*this.endRow-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridStartColumn",{get:function(){return 2*this.startColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridEndColumn",{get:function(){return 2*this.endColumn-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guid",{get:function(){return this.storedGuid||(this.storedGuid=this.newGuid()),this.storedGuid},enumerable:!0,configurable:!0}),e.prototype.newGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e}(),nS=function(e){function n(n){var t=e.call(this,n.startRow,n.endRow,n.startColumn,n.endColumn)||this;return t.widget=n,t}return a.d(n,e),n.prototype.reset=function(){this.startRow=this.widget.startRow,this.endRow=this.widget.endRow,this.startColumn=this.widget.startColumn,this.endColumn=this.widget.endColumn},n.prototype.moveRight=function(){this.startColumn++,this.endColumn++},n.prototype.moveLeft=function(){this.startColumn--,this.endColumn--},n.prototype.growColumn=function(){this.endColumn++},n.prototype.overlaps=function(e){return this.rowOverlaps(e)&&this.columnOverlaps(e)},n.prototype.rowOverlaps=function(e){return this.startRow<e.endRow&&this.endRow>=e.endRow||this.startRow<=e.startRow&&this.endRow>e.startRow||this.startRow>e.startRow&&this.endRow<e.endRow},n.prototype.columnOverlaps=function(e){return this.startColumn<e.endColumn&&this.endColumn>=e.endColumn||this.startColumn<=e.startColumn&&this.endColumn>e.startColumn||this.startColumn>e.startColumn&&this.endColumn<e.endColumn},n.prototype.startColumnOverlaps=function(e){return this.startColumn<e.startColumn&&this.endColumn>e.startColumn&&this.rowOverlaps(e)},Object.defineProperty(n.prototype,"unchangedSize",{get:function(){return this.startColumn===this.widget.startColumn&&this.endColumn===this.widget.endColumn&&this.startRow===this.widget.startRow&&this.endRow===this.widget.endRow},enumerable:!0,configurable:!0}),n.prototype.writeAreaChangeToWidget=function(){this.widget.startRow=this.startRow,this.widget.endRow=this.endRow,this.widget.startColumn=this.startColumn,this.widget.endColumn=this.endColumn},n.prototype.copyDimensionsTo=function(e){e.startRow=this.startRow,e.startColumn=this.startColumn,e.endRow=this.endRow,e.endColumn=this.endColumn},n}(eS),tS=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t,l,i)||this;return o.type=r,o}return a.d(n,e),Object.defineProperty(n.prototype,"gridStartRow",{get:function(){return this.isRow?2*this.startRow-1:2*this.startRow},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gridEndRow",{get:function(){return this.isRow?2*this.endRow-2:2*this.endRow-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gridStartColumn",{get:function(){return this.isRow?2*this.startColumn:2*this.startColumn-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gridEndColumn",{get:function(){return this.isRow?2*this.endColumn-1:2*this.endColumn-2},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRow",{get:function(){return"row"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isColumn",{get:function(){return"column"===this.type},enumerable:!0,configurable:!0}),n}(eS),lS=function(){function e(e,n,t){this.gridDm=e,this.notification=n,this.i18n=t,this.numColumns=0,this.numRows=0,this.mousedOverArea=null,this.$mousedOverArea=new Ot.a(this.mousedOverArea),this.helpMode=!1}return Object.defineProperty(e.prototype,"gridResource",{get:function(){return this.resource},set:function(e){this.resource=e,this.fetchSchema(),this.numRows=this.resource.rowCount,this.numColumns=this.resource.columnCount,this.buildAreas(!0)},enumerable:!0,configurable:!0}),e.prototype.setMousedOverArea=function(e){this.mousedOverArea=e,this.$mousedOverArea.next(e)},e.prototype.cleanupUnusedAreas=function(){var e=this,n=_.range(this.numRows,0,-1);this.widgetAreas.forEach(function(e){n=n.filter(function(n){return n!==e.startRow})}),n.forEach(function(n){e.numRows>1&&e.removeRow(n)});var t=_.range(this.numColumns,0,-1);this.widgetAreas.forEach(function(e){t=t.filter(function(n){return n!==e.startColumn})}),t.forEach(function(n){e.numColumns>1&&e.removeColumn(n)})},e.prototype.buildAreas=function(e){void 0===e&&(e=!1),this.gridAreas=this.buildGridAreas(),this.gridGaps=this.buildGridGaps(),this.gridAreaIds=this.buildGridAreaIds(),e&&(this.widgetAreas=this.buildGridWidgetAreas())},e.prototype.rebuildAndPersist=function(){this.persist(),this.buildAreas(!1)},e.prototype.persist=function(){this.resource.rowCount=this.numRows=(this.widgetAreas.map(function(e){return e.endRow}).sort().pop()||2)-1,this.resource.columnCount=this.numColumns,this.writeAreaChangesToWidgets(),this.saveGrid(this.resource,this.schema)},e.prototype.saveWidgetChangeset=function(e){var n=this.gridDm.extractPayload(this.resource,this.schema),t=n.widgets.find(function(n){return n.id===e.pristineResource.id});Object.assign(t,e.changes),n.id=this.resource.id,this.saveGrid(n)},e.prototype.isGap=function(e){return e instanceof tS},Object.defineProperty(e.prototype,"isSingleCell",{get:function(){return 1===this.numRows&&1===this.numColumns&&0===this.widgetResources.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inHelpMode",{get:function(){return this.helpMode||this.isSingleCell},enumerable:!0,configurable:!0}),e.prototype.toggleHelpMode=function(){this.helpMode=!this.helpMode},e.prototype.scrollPlaceholderIntoView=function(){var e=jQuery(".grid--area.-placeholder");e[0].scrollIntoViewIfNeeded&&setTimeout(function(){return e[0].scrollIntoViewIfNeeded()})},e.prototype.saveGrid=function(e,n){var t=this;this.gridDm.update(e,n).then(function(e){t.assignAreasWidget(e),t.notification.addSuccess(t.i18n.t("js.notice_successful_update"))})},e.prototype.assignAreasWidget=function(e){this.resource.widgets=e.widgets;var n=this.widgetAreas.map(function(e){return e.widget.id});this.widgetAreas.forEach(function(t){var l;l=t.widget.id?e.widgets.find(function(e){return e.id===t.widget.id}):e.widgets.find(function(e){return!n.includes(e.id)&&e.identifier===t.widget.identifier&&e.startRow===t.widget.startRow&&e.startColumn===t.widget.startColumn}),t.widget=l})},e.prototype.buildGridAreas=function(){for(var e=[],n=1;n<=this.numRows+1;n++)e.push.apply(e,this.buildGridAreasRow(n));return e},e.prototype.buildGridGaps=function(){var e=[];if(this.isSingleCell)return e;for(var n=1;n<=this.numRows+1;n++)e.push.apply(e,this.buildGridGapRow(n));return e},e.prototype.buildGridAreasRow=function(e){for(var n=[],t=1;t<=this.numColumns;t++){var l=new eS(e,e+1,t,t+1);n.push(l)}return n},e.prototype.buildGridGapRow=function(e){for(var n=[],t=1;t<=this.numColumns;t++)n.push(new tS(e,e+1,t,t+1,"row"));if(e<=this.numRows)for(t=1;t<=this.numColumns+1;t++)n.push(new tS(e,e+1,t,t+1,"column"));return n},e.prototype.buildGridWidgetAreas=function(){return this.widgetResources.map(function(e){return new nS(e)})},e.prototype.writeAreaChangesToWidgets=function(){this.widgetAreas.forEach(function(e){e.writeAreaChangeToWidget()})},e.prototype.addColumn=function(e,n){this.numColumns++;for(var t=[],l=1;l<=this.numRows;l++)if(l!==n){var i=this.rowWidgets(l).sort(function(e,n){return e.startColumn-n.startColumn}).find(function(t){return!(t.startRow<n&&t.endRow>n)&&(t.startColumn===e+1||t.endColumn===e+1||t.startColumn<=e&&t.endColumn>e)});i&&(t.push(i),i.endColumn++)}this.moveSubsequentRowWidgets(this.widgetAreas.filter(function(e){return!t.includes(e)}),e)},e.prototype.addRow=function(e,n){this.numRows++;for(var t=[],l=1;l<=this.numColumns;l++)if(l!==n){var i=this.columnWidgets(l).sort(function(e,n){return e.startRow-n.startRow}).find(function(t){return!(t.startColumn<n&&t.endColumn>n)&&(t.startRow===e+1||t.endRow===e+1||t.startRow<=e&&t.endRow>e)});i&&(t.push(i),i.endRow++)}this.moveSubsequentColumnWidgets(this.widgetAreas.filter(function(e){return!t.includes(e)}),e)},e.prototype.removeColumn=function(e){this.numColumns--,this.widgetAreas.forEach(function(n){n.startColumn<=e&&n.endColumn>=e+1&&n.endColumn--}),this.widgetAreas.filter(function(n){return n.startColumn>e}).forEach(function(e){e.startColumn--,e.endColumn--})},e.prototype.removeRow=function(e){this.numRows--,this.widgetAreas.forEach(function(n){n.startRow<=e&&n.endRow>=e+1&&n.endRow--}),this.widgetAreas.filter(function(n){return n.startRow>e}).forEach(function(e){e.startRow--,e.endRow--})},e.prototype.resetAreas=function(e){void 0===e&&(e=null),this.widgetAreas.filter(function(n){return!e||n.guid!==e.guid}).forEach(function(e){return e.reset()}),this.numRows=this.resource.rowCount,this.numColumns=this.resource.columnCount},Object.defineProperty(e.prototype,"isEditable",{get:function(){return void 0!==this.gridResource.updateImmediately},enumerable:!0,configurable:!0}),e.prototype.buildGridAreaIds=function(){var e=this;return this.gridAreas.filter(function(n){return!e.isGap(n)}).map(function(e){return e.guid})},e.prototype.fetchSchema=function(){var e=this;this.gridDm.updateForm(this.resource).then(function(n){e.schema=n.schema})},e.prototype.removeWidget=function(e){var n=this.resource.widgets.findIndex(function(n){return n.id===e.id});this.resource.widgets.splice(n,1),n=this.widgetAreas.findIndex(function(n){return n.widget.id===e.id}),this.widgetAreas.splice(n,1),this.cleanupUnusedAreas(),this.rebuildAndPersist()},Object.defineProperty(e.prototype,"widgetResources",{get:function(){return this.resource&&this.resource.widgets||[]},enumerable:!0,configurable:!0}),e.prototype.rowWidgets=function(e){return this.widgetAreas.filter(function(n){return n.startRow===e})},e.prototype.moveSubsequentRowWidgets=function(e,n){e.forEach(function(e){e.startColumn>n&&(e.startColumn++,e.endColumn++)})},e.prototype.columnWidgets=function(e){return this.widgetAreas.filter(function(n){return n.startColumn===e})},e.prototype.moveSubsequentColumnWidgets=function(e,n){e.forEach(function(e){e.startRow>n&&(e.startRow++,e.endRow++)})},e}(),iS=function(){function e(e){this.layout=e,this.editable=!0,this.onRenamed=new l.EventEmitter}return e.prototype.renamed=function(e){this.onRenamed.emit(e)},Object.defineProperty(e.prototype,"isRenameable",{get:function(){return this.editable&&this.layout.isEditable},enumerable:!0,configurable:!0}),e}(),rS=[[".widget-box--header.-editable[_ngcontent-%COMP%]{margin-top:0}.widget-box--header-title[_ngcontent-%COMP%]{padding-right:5px}"]],oS=l["ɵcrt"]({encapsulation:0,styles:rS,data:{}});function uS(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,6,"h3",[["class","widget-box--header"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-editable":0}),(e()(),l["ɵeld"](4,0,null,null,1,"editable-toolbar-title",[["class","widget-box--header-title title-container"]],null,[[null,"onSave"]],function(e,n,t){var l=!0,i=e.component;"onSave"===n&&(l=!1!==i.renamed(t)&&l);return l},Lw,Aw)),l["ɵdid"](5,638976,null,0,ew,[l.Injector],{inputTitle:[0,"inputTitle"],editable:[1,"editable"]},{onSave:"onSave"}),l["ɵncd"](null,0)],function(e,n){var t=n.component,l=e(n,3,0,t.isRenameable);e(n,2,0,"widget-box--header",l),e(n,5,0,t.name,t.isRenameable)},null)}l["ɵccf"]("widget-header",iS,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],null,null)],null,null)},{name:"name",editable:"editable"},{onRenamed:"onRenamed"},["*"]);var aS=function(){function e(e,n,t){this.i18n=e,this.remove=n,this.layout=t,this.menuItemList=[this.removeItem]}return Object.defineProperty(e.prototype,"menuItems",{get:function(){var e=this;return function(){return a.b(e,void 0,void 0,function(){return a.e(this,function(e){return[2,this.menuItemList]})})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeItem",{get:function(){var e=this;return{linkText:this.i18n.t("js.grid.remove"),onClick:function(){return e.remove.widget(e.resource),!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMenu",{get:function(){return this.layout.isEditable},enumerable:!0,configurable:!0}),e}(),sS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(aS),cS=function(){function e(e){this.layout=e}return e.prototype.area=function(e){this.widget(e.widget)},e.prototype.widget=function(e){this.layout.removeWidget(e)},e}(),dS=[["[_nghost-%COMP%]{align-self:center}\n/*# sourceMappingURL=widget-menu.component.css.map*/"]],pS=l["ɵcrt"]({encapsulation:0,styles:dS,data:{}});function hS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"icon-triggered-context-menu",[],null,null,null,Ej,Oj)),l["ɵdid"](1,4243456,null,0,xj,[l.ElementRef,is,Wn.b,l.Injector,l.ChangeDetectorRef,A.a],{menuItems:[0,"menuItems"]},null)],function(e,n){e(n,1,0,n.component.menuItems)},null)}function fS(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,hS)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.hasMenu)},null)}l["ɵccf"]("widget-menu",sS,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](1,49152,null,0,sS,[A.a,cS,lS],null,null)],null,null)},{resource:"resource"},{},[]);var gS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(bu),mS=function(e){function n(n,t){var l=e.call(this)||this;return l.elementRef=n,l.injector=t,l.fieldName="text",l.inEdit=!1,l.inEditMode=!1,l.inFlight=!1,l}return a.d(n,e),n.prototype.onFocusOut=function(){},n.prototype.initialize=function(e){this.changeset=new gS(this.newEditResource(e)),this.valueChanged$=new Ot.a(e.options.text)},n.prototype.reinitialize=function(e){this.changeset=new gS(this.newEditResource(e))},n.prototype.handleUserSubmit=function(){return this.update()},n.prototype.reset=function(e){void 0===e&&(e=""),e.length>0&&(e+="\n"),this.changeset.setValue("text",{raw:e})},Object.defineProperty(n.prototype,"schema",{get:function(){return{name:I18n.t("js.grid.widgets.custom_text.title"),writable:!0,required:!1,type:"Formattable",hasDefault:!1}},enumerable:!0,configurable:!0}),n.prototype.update=function(){return a.b(this,void 0,void 0,function(){var e=this;return a.e(this,function(n){return[2,this.onSubmit().then(function(){e.valueChanged$.next(e.rawText),e.deactivate()})]})})},Object.defineProperty(n.prototype,"rawText",{get:function(){return _.get(this.textValue,"raw","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"htmlText",{get:function(){return _.get(this.textValue,"html","")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textValue",{get:function(){return this.changeset.value("text")},enumerable:!0,configurable:!0}),n.prototype.handleUserCancel=function(){this.deactivate()},Object.defineProperty(n.prototype,"active",{get:function(){return this.inEdit},enumerable:!0,configurable:!0}),n.prototype.activate=function(e){this.inEdit=!0},n.prototype.deactivate=function(){this.changeset.clear(),this.inEdit=!1},n.prototype.focus=function(){var e=this.elementRef.nativeElement.querySelector(".inplace-editing--trigger-container");e&&e.focus()},n.prototype.setErrors=function(e){},n.prototype.handleUserKeydown=function(e,n){},n.prototype.isChanged=function(){return!this.changeset.isEmpty()},n.prototype.stopPropagation=function(e){return!1},n.prototype.newEditResource=function(e){return{text:e.options.text,getEditorTypeFor:function(){return"full"},canAddAttachments:e.grid.canAddAttachments,uploadAttachments:function(n){return e.grid.uploadAttachments(n)}}},n}(gu),vS=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,t)||this;return u.i18n=n,u.injector=t,u.handler=l,u.cdr=i,u.sanitization=r,u.layout=o,u}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.setupVariables(!0),this.handler.valueChanged$.pipe(Object(Gn.b)(this),Object(Yn.a)(function(n){return n!==e.resource.options.text})).subscribe(function(n){var t=e.setChangesetOptions({text:{raw:n}});e.resourceChanged.emit(t)})},n.prototype.ngOnDestroy=function(){},n.prototype.ngOnChanges=function(e){e.resource.currentValue.options.text.raw!==this.currentRawText&&(this.setupVariables(),this.cdr.detectChanges())},n.prototype.activate=function(e){var n=this;this.clickedElementIsLinkWithinDisplayContainer(e)||this.resource.grid.updateAttachments().then(function(){n.handler.activate()})},Object.defineProperty(n.prototype,"placeholderText",{get:function(){return this.i18n.t("js.grid.widgets.work_packages_overview.placeholder")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inplaceEditClasses",{get:function(){var e="inplace-editing--container inline-edit--display-field inline-edit--display-field -editable";return this.textEmpty&&(e+=" -placeholder"),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"schema",{get:function(){return this.handler.schema},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"changeset",{get:function(){return this.handler.changeset},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.handler.active},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textEmpty",{get:function(){return!this.currentRawText.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isTextEditable",{get:function(){return this.layout.isEditable},enumerable:!0,configurable:!0}),n.prototype.setupVariables=function(e){void 0===e&&(e=!1),this.memorizeRawText(),e?this.handler.initialize(this.resource):this.handler.reinitialize(this.resource),this.memorizeCustomText()},n.prototype.memorizeRawText=function(){this.currentRawText=this.resource.options.text.raw},n.prototype.memorizeCustomText=function(){this.customText=this.sanitization.bypassSecurityTrustHtml(this.handler.htmlText)},n.prototype.clickedElementIsLinkWithinDisplayContainer=function(e){return this.displayContainer.nativeElement.contains(e.target.closest("a,macro"))},n}(Pj),bS=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function yS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.customText)})}function wS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.placeholderText)})}function CS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[[1,0],["displayContainer",1]],null,4,"span",[["class","inline-edit--formattable-display-text -default"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,yS)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,wS)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.textEmpty),e(n,4,0,t.textEmpty)},null)}function kS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"edit-form-portal",[],null,null,null,Tu,Su)),l["ɵdid"](1,4440064,null,0,Pu,[l.Injector,Ru,l.ElementRef],{schemaInput:[0,"schemaInput"],changeInput:[1,"changeInput"],editFieldHandler:[2,"editFieldHandler"]},null)],function(e,n){var t=n.component;e(n,1,0,t.schema,t.changeset,t.handler)},null)}function IS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"attachments",[["data-allow-uploading","true"]],null,null,null,Bo,qo)),l["ɵdid"](1,245760,null,0,Mo,[l.ElementRef,A.a,d,Q],{resource:[0,"resource"]},null)],function(e,n){e(n,1,0,n.component.resource.grid)},null)}function jS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function RS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[],null,[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.activate(t)&&i);return i},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](3,16384,null,0,Cl,[],{stopEventPropagation:[0,"stopEventPropagation"]},{onClick:"accessibleClick"}),(e()(),l["ɵand"](16777216,null,null,1,null,jS)),l["ɵdid"](5,540672,null,0,$t.NgTemplateOutlet,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(e,n){e(n,2,0,n.component.inplaceEditClasses);e(n,3,0,!1),e(n,5,0,l["ɵnov"](n.parent.parent,5))},null)}function PS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function SS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,PS)),l["ɵdid"](2,540672,null,0,$t.NgTemplateOutlet,[l.ViewContainerRef],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,l["ɵnov"](n.parent.parent,5))},null)}function _S(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"div",[["class","inplace-edit--read wiki -no-label"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"inline-edit--container":0}),(e()(),l["ɵand"](16777216,null,null,1,null,RS)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,SS)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.isTextEditable);e(n,2,0,"inplace-edit--read wiki -no-label",l),e(n,5,0,t.isTextEditable),e(n,7,0,!t.isTextEditable)},null)}function xS(e){return l["ɵvid"](2,[l["ɵqud"](671088640,1,{displayContainer:0}),(e()(),l["ɵeld"](1,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](2,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](3,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](4,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵand"](0,[["text",2]],null,0,null,CS)),(e()(),l["ɵeld"](6,0,null,null,7,"div",[["class","grid--widget-content -custom-text -allow-inner-overflow"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,6,"div",[["class","inline-edit--container inplace-edit"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,kS)),l["ɵdid"](9,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,IS)),l["ɵdid"](11,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,_S)),l["ɵdid"](13,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.widgetName),e(n,4,0,t.resource),e(n,9,0,t.active),e(n,11,0,t.active),e(n,13,0,!t.active)},null)}var TS=l["ɵccf"]("ng-component",vS,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,xS,bS)),l["ɵprd"](512,null,mS,mS,[l.ElementRef,l.Injector]),l["ɵdid"](2,770048,null,0,vS,[A.a,l.Injector,mS,l.ChangeDetectorRef,rr.DomSanitizer,lS],null,null)],function(e,n){e(n,2,0)},function(e,n){e(n,0,0,l["ɵnov"](n,2).gridColumnStart,l["ɵnov"](n,2).gridColumnEnd,l["ɵnov"](n,2).gridRowStart,l["ɵnov"](n,2).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),OS=function(e){function n(n,t,l,i,r,o,u,a){var s=e.call(this,l,o)||this;return s.halResource=n,s.pathHelper=t,s.i18n=l,s.timezone=i,s.domSanitizer=r,s.injector=o,s.currentProject=u,s.cdr=a,s.text={noResults:s.i18n.t("js.grid.widgets.documents.no_results")},s.entries=[],s.entriesLoaded=!1,s}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.halResource.get(this.documentsUrl).toPromise().then(function(n){e.entries=n.elements,e.entriesLoaded=!0,e.cdr.detectChanges()})},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.documentPath=function(e){return this.pathHelper.appBasePath+"/documents/"+e.id},n.prototype.documentCreated=function(e){return this.timezone.formattedDatetime(e.createdAt)},n.prototype.documentDescription=function(e){return this.domSanitizer.sanitize(l.SecurityContext.HTML,e.description.html)},Object.defineProperty(n.prototype,"noEntries",{get:function(){return!this.entries.length&&this.entriesLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"documentsUrl",{get:function(){var e=JSON.stringify([["created_on","desc"]]),n=this.pathHelper.api.v3.apiV3Base+"/documents?sortBy="+e+"&pageSize=10";this.currentProject.id&&(n=n+"&filters="+JSON.stringify([{project_id:{operator:"=",values:[this.currentProject.id.toString()]}}]));return n},enumerable:!0,configurable:!0}),n}(Pj),ES=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function DS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function FS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"h4",[["class","document-category-elements--header"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"p",[["class","document-category-elements--date"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"em",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"div",[["class","wiki grid--widget-limited-text"]],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,2,0,t.documentPath(n.context.$implicit),n.context.$implicit.title),e(n,4,0,t.documentCreated(n.context.$implicit)),e(n,5,0,t.documentDescription(n.context.$implicit))})}function NS(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,4,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,DS)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,FS)),l["ɵdid"](8,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName,t.isEditable),e(n,3,0,t.resource),e(n,6,0,t.noEntries),e(n,8,0,t.entries)},null)}var AS=l["ɵccf"]("ng-component",OS,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,NS,ES)),l["ɵdid"](1,114688,null,0,OS,[Q,ge,A.a,nl,rr.DomSanitizer,l.Injector,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),VS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.listAvailableProjects=function(e){return this.listRequest(this.availableProjectsUrl(),e)},n.prototype.listUrl=function(){return this.pathHelper.api.v3.memberships.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.memberships.id(e).toString()},n.prototype.availableProjectsUrl=function(){return this.pathHelper.api.v3.memberships.available_projects.toString()},n}(Ve),MS=function(e){function n(n,t,l,i,r,o){var u=e.call(this,t,l)||this;return u.pathHelper=n,u.i18n=t,u.injector=l,u.membershipDm=i,u.currentProject=r,u.cdr=o,u.text={add:u.i18n.t("js.grid.widgets.members.add"),noResults:u.i18n.t("js.grid.widgets.members.no_results"),viewAll:u.i18n.t("js.grid.widgets.members.view_all_members")},u.entriesByRoles={},u.entriesLoaded=!1,u.membersAddable=!1,u}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.membershipDm.list(this.listMembersParams).then(function(n){e.partitionEntriesByRole(n.elements),e.sortUsersByName(),e.totalMembers=n.total,e.entriesLoaded=!0,e.cdr.detectChanges()}),this.membershipDm.listAvailableProjects(this.listAvailableProjectsParams).then(function(n){e.membersAddable=n.total>0}).catch(function(){})},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.userPath=function(e){return this.pathHelper.userPath(e.id)},n.prototype.userName=function(e){return e.name},Object.defineProperty(n.prototype,"noMembers",{get:function(){return this.entriesLoaded&&!Object.keys(this.entriesByRoles).length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"moreMembers",{get:function(){return this.entriesLoaded&&this.totalMembers>100},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"moreMembersText",{get:function(){return I18n.t("js.grid.widgets.members.too_many",{count:100,total:this.totalMembers})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"projectMembershipsPath",{get:function(){return this.pathHelper.projectMembershipsPath(this.currentProject.identifier)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"usersByRole",{get:function(){return Object.values(this.entriesByRoles)},enumerable:!0,configurable:!0}),n.prototype.isGroup=function(e){return this.pathHelper.api.v3.groups.id(e.id).toString()===e.href},n.prototype.partitionEntriesByRole=function(e){var n=this;e.forEach(function(e){e.roles.forEach(function(t){n.entriesByRoles[t.id]||(n.entriesByRoles[t.id]={role:t,users:[]}),n.entriesByRoles[t.id].users.push(e.principal)})})},n.prototype.sortUsersByName=function(){var e=this;Object.values(this.entriesByRoles).forEach(function(n){n.users.sort(function(n,t){return e.userName(n).localeCompare(e.userName(t))})})},Object.defineProperty(n.prototype,"listMembersParams",{get:function(){var e={sortBy:[["created_on","desc"]],pageSize:100};return this.currentProject.id&&(e.filters=[["project_id","=",[this.currentProject.id]]]),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"listAvailableProjectsParams",{get:function(){var e={};return this.currentProject.id&&(e.filters=[["id","=",[this.currentProject.id]]]),e},enumerable:!0,configurable:!0}),n}(Pj),qS=[[".members-widget--notification[_ngcontent-%COMP%]{font-style:italic;margin-top:.5rem}.grid--widget-footer[_ngcontent-%COMP%]{margin-top:.5rem}.grid--widget-footer[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-bottom:0}.attributes-map[_ngcontent-%COMP%]{padding-bottom:.875rem;line-height:1.5rem}"]],LS=l["ɵcrt"]({encapsulation:0,styles:qS,data:{}});function $S(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function HS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.userName(n.parent.context.$implicit))})}function BS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"user-avatar",[["data-class-list","avatar avatar-mini -spaced"]],null,null,null,Qi,Bi)),l["ɵdid"](2,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],{user:[0,"user"]},null),(e()(),l["ɵeld"](3,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,n.parent.context.$implicit)},function(e,n){var t=n.component;e(n,3,0,t.userPath(n.parent.context.$implicit),t.userName(n.parent.context.$implicit))})}function zS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[", "]))],null,null)}function WS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,HS)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,BS)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,zS)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.isGroup(n.context.$implicit)),e(n,4,0,!t.isGroup(n.context.$implicit)),e(n,6,0,!n.context.last)},null)}function QS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","attributes-map--key"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","attributes-map--value"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,WS)),l["ɵdid"](5,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){e(n,5,0,n.context.$implicit.users)},function(e,n){e(n,2,0,n.context.$implicit.role.name)})}function US(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","members-widget--notification"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "]))],null,function(e,n){e(n,1,0,n.component.moreMembersText)})}function GS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[["class","button -alt-highlight"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","button--icon icon-add"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.projectMembershipsPath+"?show_add_members=true"),e(n,2,0,t.text.add)})}function KS(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[["class","button -highlight-inverted"]],[[8,"href",4]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","button--icon icon-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.projectMembershipsPath),e(n,2,0,t.text.viewAll)})}function YS(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,7,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,$S)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](7,0,null,null,2,"div",[["class","attributes-map -minimal-keys"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,QS)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,US)),l["ɵdid"](11,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](12,0,null,null,4,"div",[["class","grid--widget-footer"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,GS)),l["ɵdid"](14,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,KS)),l["ɵdid"](16,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName,t.isEditable),e(n,3,0,t.resource),e(n,6,0,t.noMembers),e(n,9,0,t.usersByRole),e(n,11,0,t.moreMembers),e(n,14,0,t.membersAddable),e(n,16,0,!t.noMembers)},null)}var ZS=l["ɵccf"]("ng-component",MS,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,YS,LS)),l["ɵdid"](1,114688,null,0,MS,[ge,A.a,l.Injector,VS,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),JS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.listUrl=function(){return this.pathHelper.api.v3.news.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.news.id(e).toString()},n}(Ve),XS=function(e){function n(n,t,l,i,r,o,u,a,s){var c=e.call(this,l,i)||this;return c.halResource=n,c.pathHelper=t,c.i18n=l,c.injector=i,c.timezone=r,c.userCache=o,c.newsDm=u,c.currentProject=a,c.cdr=s,c.text={createdBy:c.i18n.t("js.label_created_by"),at:c.i18n.t("js.grid.widgets.news.at"),noResults:c.i18n.t("js.grid.widgets.news.no_results")},c.entries=[],c.entriesLoaded=!1,c}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.newsDm.list(this.newsDmParams).then(function(n){e.entries=n.elements,e.entriesLoaded=!0;var t=e.setAuthors();Promise.all(t).then(function(){return e.cdr.detectChanges()})})},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.newsPath=function(e){return this.pathHelper.newsPath(e.id)},n.prototype.newsProjectPath=function(e){return this.pathHelper.projectPath(e.project.idFromLink)},n.prototype.newsProjectName=function(e){return e.project.name},n.prototype.newsAuthorName=function(e){return e.author.name},n.prototype.newsAuthorPath=function(e){return this.pathHelper.userPath(e.author.id)},n.prototype.newsCreated=function(e){return this.timezone.formattedDatetime(e.createdAt)},Object.defineProperty(n.prototype,"noEntries",{get:function(){return!this.entries.length&&this.entriesLoaded},enumerable:!0,configurable:!0}),n.prototype.setAuthors=function(){var e=this;return this.entries.map(function(n){return n.author?e.userCache.require(n.author.idFromLink).then(function(e){n.author=e}):Promise.resolve()})},Object.defineProperty(n.prototype,"newsDmParams",{get:function(){var e={sortBy:[["created_on","desc"]],pageSize:3};return this.currentProject.id&&(e.filters=[["project_id","=",[this.currentProject.id]]]),e},enumerable:!0,configurable:!0}),n}(Pj),e_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function n_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function t_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"user-avatar",[["data-class-list","avatar avatar-medium -spaced"]],null,null,null,Qi,Bi)),l["ɵdid"](1,4243456,null,0,Hi,[l.ElementRef,l.ChangeDetectorRef,ge],{user:[0,"user"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.author)},null)}function l_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"p",[["class","widget-box--additional-info"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," "])),(e()(),l["ɵeld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](3,null,[" "," "," "]))],null,function(e,n){var t=n.component;e(n,1,0,t.text.createdBy),e(n,2,0,t.newsAuthorPath(n.parent.context.$implicit),t.newsAuthorName(n.parent.context.$implicit)),e(n,3,0,t.text.at,t.newsCreated(n.parent.context.$implicit))})}function i_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"li",[["class","-widget-box--arrow-multiline"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,t_)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](4,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[": "])),(e()(),l["ɵeld"](6,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,l_)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,n.context.$implicit.author),e(n,8,0,n.context.$implicit.author)},function(e,n){var t=n.component;e(n,4,0,t.newsProjectPath(n.context.$implicit),t.newsProjectName(n.context.$implicit)),e(n,6,0,t.newsPath(n.context.$implicit),n.context.$implicit.title)})}function r_(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,5,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,n_)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](7,0,null,null,2,"ul",[["class","widget-box--arrow-links"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,i_)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName,t.isEditable),e(n,3,0,t.resource),e(n,6,0,t.noEntries),e(n,9,0,t.entries)},null)}var o_=l["ɵccf"]("ng-component",XS,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,r_,e_)),l["ɵdid"](1,114688,null,0,XS,[Q,ge,A.a,l.Injector,nl,vh,JS,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),u_=["wp-embedded-table[_ngcontent-%COMP%]{overflow:auto}"],a_=function(e){function n(n,t,i,r,o){var u=e.call(this,i,r,o)||this;return u.injector=n,u.opModalService=t,u.i18n=i,u.remove=r,u.layout=o,u.onConfigured=new l.EventEmitter,u.menuItemList=[u.removeItem,u.configureItem],u}return a.d(n,e),Object.defineProperty(n.prototype,"configureItem",{get:function(){var e=this;return{linkText:this.i18n.t("js.toolbar.settings.configure_view"),onClick:function(){return e.opModalService.show(e.configurationComponent,e.injector,e.locals).closingEvent.subscribe(function(n){e.onConfigured.emit(n.configuration)}),!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"locals",{get:function(){return{}},enumerable:!0,configurable:!0}),n}(aS),s_=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.configurationComponent=zn,n}return a.d(n,e),n}(a_),c_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function d_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"icon-triggered-context-menu",[],null,null,null,Ej,Oj)),l["ɵdid"](1,4243456,null,0,xj,[l.ElementRef,is,Wn.b,l.Injector,l.ChangeDetectorRef,A.a],{menuItems:[0,"menuItems"]},null)],function(e,n){e(n,1,0,n.component.menuItems)},null)}function p_(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,d_)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.hasMenu)},null)}l["ɵccf"]("widget-wp-table-menu",s_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"widget-wp-table-menu",[],null,null,null,p_,c_)),l["ɵdid"](1,49152,null,0,s_,[l.Injector,Wn.b,A.a,cS,lS],null,null)],null,null)},{resource:"resource"},{onConfigured:"onConfigured"},[]);var h_=t("0mNj"),f_=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,n,t)||this;return a.i18n=n,a.injector=t,a.urlParamsHelper=l,a.state=i,a.queryDm=r,a.querySpace=o,a.queryFormDm=u,a.inFlight=!1,a.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,hierarchyToggleEnabled:!0,contextMenuEnabled:!1},a}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.resource.options.queryId?this.queryId=this.resource.options.queryId:this.createInitial().then(function(n){var t=e.setChangesetOptions({queryId:n.id});e.resourceChanged.emit(t),e.queryId=n.id}),this.query$=this.querySpace.query.values$(),this.query$.pipe(Object(h_.a)(2),Object(Gn.b)(this)).subscribe(function(n){e.ensureFormAndSaveQuery(n)})},Object.defineProperty(n.prototype,"widgetName",{get:function(){return this.resource.options.name},enumerable:!0,configurable:!0}),Object.defineProperty(n,"identifier",{get:function(){return"work_packages_table"},enumerable:!0,configurable:!0}),n.prototype.ngOnDestroy=function(){},n.prototype.ensureFormAndSaveQuery=function(e){var n=this;this.queryForm?this.saveQuery(e):this.queryFormDm.load(e).then(function(t){n.queryForm=t,n.saveQuery(e)})},n.prototype.saveQuery=function(e){var n=this;this.inFlight=!0,this.queryDm.update(e,this.queryForm).toPromise().then(function(e){return n.inFlight=!1,e}).catch(function(){return n.inFlight=!1})},n.prototype.createInitial=function(){var e=this,n=this.state.params.projectPath,t=this.resource.options.queryProps,l=Object.assign({pageSize:0},t);return this.queryFormDm.loadWithParams(l,void 0,n,this.queryCreationParams()).then(function(n){var t=e.queryFormDm.buildQueryResource(n);return e.queryDm.create(t,n).then(function(n){return delete e.resource.options.queryProps,n})})},n.prototype.queryCreationParams=function(){return{hidden:!0,public:!!this.state.params.projectPath}},n}(Pj),g_=[u_],m_=l["ɵcrt"]({encapsulation:0,styles:g_,data:{}});function v_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-table",[],null,null,null,yb,gb)),l["ɵdid"](1,4964352,null,0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryId:[1,"queryId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.configuration,t.queryId)},null)}function b_(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](2,0,null,0,1,"widget-wp-table-menu",[],null,null,null,p_,c_)),l["ɵdid"](3,49152,null,0,s_,[l.Injector,Wn.b,A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,v_)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName),e(n,3,0,t.resource),e(n,5,0,t.queryId)},null)}l["ɵccf"]("widget-wp-table",f_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"widget-wp-table",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,b_,m_)),l["ɵdid"](1,245760,null,0,f_,[A.a,l.Injector,Ne,g.G,Me,b,hn],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]);var y_=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.onResourceChanged=function(e){this.resourceChanged.emit(e)},n}(Pj),w_=[["widget-wp-table[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}"]],C_=l["ɵcrt"]({encapsulation:0,styles:w_,data:{}});function k_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,38,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](36,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),(e()(),l["ɵeld"](37,0,null,null,1,"widget-wp-table",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],[[null,"resourceChanged"]],function(e,n,t){var l=!0,i=e.component;"resourceChanged"===n&&(l=!1!==i.onResourceChanged(t)&&l);return l},b_,m_)),l["ɵdid"](38,245760,null,0,f_,[A.a,l.Injector,Ne,g.G,Me,b,hn],{resource:[0,"resource"]},{resourceChanged:"resourceChanged"})],function(e,n){e(n,38,0,n.component.resource)},function(e,n){e(n,37,0,l["ɵnov"](n,38).gridColumnStart,l["ɵnov"](n,38).gridColumnEnd,l["ɵnov"](n,38).gridRowStart,l["ɵnov"](n,38).gridRowEnd)})}var I_=l["ɵccf"]("ng-component",y_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,k_,C_)),l["ɵdid"](1,49152,null,0,y_,[A.a,l.Injector],null,null)],null,function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),j_=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.configurationComponent=ZR,n}return a.d(n,e),n}(a_),R_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function P_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"icon-triggered-context-menu",[],null,null,null,Ej,Oj)),l["ɵdid"](1,4243456,null,0,xj,[l.ElementRef,is,Wn.b,l.Injector,l.ChangeDetectorRef,A.a],{menuItems:[0,"menuItems"]},null)],function(e,n){e(n,1,0,n.component.menuItems)},null)}function S_(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,P_)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.hasMenu)},null)}l["ɵccf"]("widget-wp-graph-menu",j_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"widget-wp-graph-menu",[],null,null,null,S_,R_)),l["ɵdid"](1,49152,null,0,j_,[l.Injector,Wn.b,A.a,cS,lS],null,null)],null,null)},{resource:"resource"},{onConfigured:"onConfigured"},[]);var __=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t)||this;return o.i18n=n,o.injector=t,o.cdr=l,o.urlParamsHelper=i,o.graphConfiguration=r,o.datasets=[],o}return a.d(n,e),n.prototype.ngOnInit=function(){this.initializeConfiguration(),this.loadQueriesInitially()},n.prototype.ngOnDestroy=function(){},Object.defineProperty(n.prototype,"chartType",{get:function(){return this.graphConfiguration.chartType},set:function(e){this.resource.options.chartType=e},enumerable:!0,configurable:!0}),n.prototype.updateGraph=function(e){var n=this;this.graphConfiguration.persistAndReload().then(function(){if(n.repaint(),n.resource.options.chartType!==n.graphConfiguration.chartType){var e=n.setChangesetOptions({chartType:n.graphConfiguration.chartType});n.resourceChanged.emit(e)}})},n.prototype.repaint=function(){this.datasets=this.graphConfiguration.datasets,this.cdr.detectChanges()},n.prototype.initializeConfiguration=function(){var e=[];this.resource.options.queryId&&e.push({id:this.resource.options.queryId}),this.graphConfiguration.configuration=new GR(e,this.resource.options.chartOptions,this.resource.options.chartType)},n.prototype.loadQueriesInitially=function(){var e=this;this.graphConfiguration.ensureQueryAndLoad().then(function(){if(!e.resource.options.queryId){var n=e.setChangesetOptions({queryId:e.graphConfiguration.queryParams[0].id});e.resourceChanged.emit(n)}e.repaint()})},Object.defineProperty(n.prototype,"chartOptions",{get:function(){return this.graphConfiguration.chartOptions},enumerable:!0,configurable:!0}),n}(Pj),x_=[u_],T_=l["ɵcrt"]({encapsulation:0,styles:x_,data:{}});function O_(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](2,0,null,0,1,"widget-wp-graph-menu",[],null,[[null,"onConfigured"]],function(e,n,t){var l=!0,i=e.component;"onConfigured"===n&&(l=!1!==i.updateGraph(t)&&l);return l},S_,R_)),l["ɵdid"](3,49152,null,0,j_,[l.Injector,Wn.b,A.a,cS,lS],{resource:[0,"resource"]},{onConfigured:"onConfigured"}),(e()(),l["ɵeld"](4,0,null,null,1,"wp-embedded-graph",[["class","grid--widget-content"]],null,null,null,SP,jP)),l["ɵdid"](5,573440,null,0,kP,[A.a],{datasets:[0,"datasets"],chartType:[1,"chartType"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName),e(n,3,0,t.resource),e(n,5,0,t.datasets,t.chartType)},null)}var E_=l["ɵccf"]("widget-wp-graph",__,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"widget-wp-graph",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,O_,T_)),l["ɵprd"](512,null,KR,KR,[A.a,hn,Me,qn,Qn]),l["ɵdid"](2,245760,null,0,__,[A.a,l.Injector,l.ChangeDetectorRef,Ne,KR],null,null)],function(e,n){e(n,2,0)},function(e,n){e(n,0,0,l["ɵnov"](n,2).gridColumnStart,l["ɵnov"](n,2).gridColumnEnd,l["ɵnov"](n,2).gridRowStart,l["ɵnov"](n,2).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),D_=function(e){function n(n,t,l){var i=e.call(this,n,t)||this;return i.i18n=n,i.injector=t,i.currentProject=l,i}return a.d(n,e),Object.defineProperty(n.prototype,"projectIdentifier",{get:function(){return this.currentProject.identifier},enumerable:!0,configurable:!0}),n}(Pj),F_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function N_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,38,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](23,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,en,en,[d,b]),l["ɵprd"](512,null,je,je,[b,Ce]),l["ɵprd"](512,null,$e,$e,[d,b]),l["ɵprd"](512,null,Be,Be,[d,b]),l["ɵprd"](512,null,rn,rn,[d,b,ge]),l["ɵprd"](512,null,Qe,Qe,[b]),l["ɵprd"](512,null,N,N,[b]),l["ɵprd"](512,null,We,We,[b]),l["ɵprd"](512,null,sn,sn,[d,Ge,b]),l["ɵprd"](512,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](512,null,Pn,Pn,[]),l["ɵprd"](512,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](512,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](512,null,kn,kn,[Ne,g.G]),l["ɵprd"](512,null,_n,_n,[d,b]),l["ɵprd"](512,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](512,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),(e()(),l["ɵeld"](41,0,null,null,1,"wp-calendar",[],null,null,null,zP,$P)),l["ɵdid"](42,245760,null,0,qP,[d,g.G,en,ot,b,kn,Kc,Ne,l.ElementRef,A.a,Vn,rr.DomSanitizer],{projectIdentifier:[0,"projectIdentifier"],static:[1,"static"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName),e(n,3,0,t.resource);e(n,42,0,t.projectIdentifier,!0)},null)}var A_=l["ɵccf"]("ng-component",D_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,N_,F_)),l["ɵdid"](1,49152,null,0,D_,[A.a,l.Injector,Qn],null,null)],null,function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),V_=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(Pj),M_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function q_(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,2,"wp-overview-graph",[["class","grid--widget-content"]],null,null,null,NP,TP)),l["ɵprd"](512,null,KR,KR,[A.a,hn,Me,qn,Qn]),l["ɵdid"](6,114688,null,0,_P,[l.ElementRef,A.a,KR,l.ChangeDetectorRef],{groupBy:[0,"groupBy"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName),e(n,3,0,t.resource);e(n,6,0,"type")},null)}var L_=l["ɵccf"]("ng-component",V_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,q_,M_)),l["ɵdid"](1,49152,null,0,V_,[A.a,l.Injector],null,null)],null,function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),$_=function(e){function n(n,t,l,i,r){var o=e.call(this,n,t)||this;return o.i18n=n,o.injector=t,o.projectCache=l,o.currentProject=i,o.cdRef=r,o}return a.d(n,e),n.prototype.ngOnInit=function(){this.project$=this.projectCache.requireAndStream(this.currentProject.id),this.cdRef.detectChanges()},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n}(Pj),H_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function B_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](3,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){e(n,1,0,n.context.ngIf);e(n,3,0,"description",n.context.ngIf)},null)}function z_(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,3,"div",[["class","grid--widget-content -allow-inner-overflow"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,B_)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef])],function(e,n){var t=n.component;e(n,1,0,t.widgetName,t.isEditable),e(n,3,0,t.resource),e(n,6,0,l["ɵunv"](n,6,0,l["ɵnov"](n,7).transform(t.project$)))},null)}var W_=l["ɵccf"]("ng-component",$_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,z_,H_)),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵdid"](2,114688,null,0,$_,[A.a,l.Injector,Gc,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,2,0)},function(e,n){e(n,0,0,l["ɵnov"](n,2).gridColumnStart,l["ɵnov"](n,2).gridColumnEnd,l["ɵnov"](n,2).gridRowStart,l["ɵnov"](n,2).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),Q_=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,t)||this;return u.i18n=n,u.injector=t,u.projectDm=l,u.projectCache=i,u.currentProject=r,u.cdRef=o,u.customFields=[],u}return a.d(n,e),n.prototype.ngOnInit=function(){this.loadAndRender(),this.project$=this.projectCache.requireAndStream(this.currentProject.id)},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.loadAndRender=function(){var e=this;Promise.all([this.loadProjectSchema()]).then(function(n){var t=n[0];e.setCustomFields(t)})},n.prototype.loadProjectSchema=function(){return this.projectDm.schema()},n.prototype.setCustomFields=function(e){var n=this;Object.entries(e).forEach(function(e){var t=e[0],l=e[1];t.match(/customField\d+/)&&n.customFields.push({key:t,label:l.name})}),this.cdRef.detectChanges()},n}(Pj),U_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function G_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"div",[["class","attributes-map--key"]],null,null,null,null,null)),(e()(),l["ɵted"](2,null,[" "," "])),(e()(),l["ɵeld"](3,0,null,null,2,"div",[["class","attributes-map--value"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"editable-attribute-field",[],null,null,null,ps,ds)),l["ɵdid"](5,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){e(n,5,0,n.context.$implicit.key,n.parent.context.ngIf)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function K_(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](2,0,null,0,2,"div",[["class","attributes-map"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,G_)),l["ɵdid"](4,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.ngIf),e(n,4,0,t.customFields)},null)}function Y_(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{contentContainer:0}),(e()(),l["ɵeld"](1,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](2,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](3,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](4,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](5,0,null,null,3,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,K_)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef])],function(e,n){var t=n.component;e(n,2,0,t.widgetName,t.isEditable),e(n,4,0,t.resource),e(n,7,0,l["ɵunv"](n,7,0,l["ɵnov"](n,8).transform(t.project$)))},null)}var Z_=l["ɵccf"]("ng-component",Q_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,Y_,U_)),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵdid"](2,114688,null,0,Q_,[A.a,l.Injector,Uc,Gc,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,2,0)},function(e,n){e(n,0,0,l["ɵnov"](n,2).gridColumnStart,l["ɵnov"](n,2).gridColumnEnd,l["ɵnov"](n,2).gridRowStart,l["ɵnov"](n,2).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),J_=function(e){function n(n,t,l,i,r,o){var u=e.call(this,n,t)||this;return u.i18n=n,u.injector=t,u.projectDm=l,u.projectCache=i,u.currentProject=r,u.cdRef=o,u.currentStatusCode="not set",u.explanation="",u}return a.d(n,e),n.prototype.ngOnInit=function(){this.project$=this.projectCache.requireAndStream(this.currentProject.id),this.cdRef.detectChanges()},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n}(Pj),X_=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ex(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"edit-form",[],null,null,null,cc,sc)),l["ɵdid"](1,245760,null,0,ss,[l.Injector,l.ElementRef,ns,Mn,g.O,be,us,g.G,A.a,[2,as]],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](2,0,null,0,2,"div",[["class","project-status--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"editable-attribute-field",[["fieldName","status"],["wrapperClasses","project-status--display-field"]],null,null,null,ps,ds)),l["ɵdid"](4,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"],wrapperClasses:[2,"wrapperClasses"]},null),(e()(),l["ɵeld"](5,0,null,0,2,"div",[["class","project-status-explanation--container"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"editable-attribute-field",[["fieldName","statusExplanation"]],null,null,null,ps,ds)),l["ɵdid"](7,245760,null,0,cs,[d,l.Injector,l.ElementRef,Mn,be,is,ns,Cn,ss,Vn,l.ChangeDetectorRef,A.a],{fieldName:[0,"fieldName"],resource:[1,"resource"]},null)],function(e,n){e(n,1,0,n.context.ngIf);e(n,4,0,"status",n.context.ngIf,"project-status--display-field");e(n,7,0,"statusExplanation",n.context.ngIf)},null)}function nx(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{contentContainer:0}),(e()(),l["ɵeld"](1,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](2,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](3,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](4,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](5,0,null,null,3,"div",[["class","grid--widget-content -allow-inner-overflow"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,2,null,ex)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef])],function(e,n){var t=n.component;e(n,2,0,t.widgetName,t.isEditable),e(n,4,0,t.resource),e(n,7,0,l["ɵunv"](n,7,0,l["ɵnov"](n,8).transform(t.project$)))},null)}var tx=l["ɵccf"]("ng-component",J_,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,nx,X_)),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,b,b,[]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵdid"](5,114688,null,0,J_,[A.a,l.Injector,Uc,Gc,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,5,0)},function(e,n){e(n,0,0,l["ɵnov"](n,5).gridColumnStart,l["ɵnov"](n,5).gridColumnEnd,l["ɵnov"](n,5).gridRowStart,l["ɵnov"](n,5).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),lx=function(e){function n(n,t,l,i,r,o,u,a){var s=e.call(this,l,i)||this;return s.halResource=n,s.pathHelper=t,s.i18n=l,s.injector=i,s.timezone=r,s.projectDm=o,s.currentProject=u,s.cdr=a,s.text={noResults:s.i18n.t("js.grid.widgets.subprojects.no_results")},s}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.projectDm.list(this.projectDmParams).then(function(n){e.projects=n.elements,e.cdr.detectChanges()})},Object.defineProperty(n.prototype,"isEditable",{get:function(){return!1},enumerable:!0,configurable:!0}),n.prototype.projectPath=function(e){return this.pathHelper.projectPath(e.identifier)},n.prototype.projectName=function(e){return e.name},Object.defineProperty(n.prototype,"noEntries",{get:function(){return this.projects&&!this.projects.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"projectDmParams",{get:function(){return{sortBy:[["name","asc"]],filters:[["parent_id","=",[this.currentProject.id]]]}},enumerable:!0,configurable:!0}),n}(Pj),ix=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function rx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function ox(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,[", "]))],null,null)}function ux(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,ox)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,3,0,!n.context.last)},function(e,n){var t=n.component;e(n,1,0,t.projectPath(n.context.$implicit),t.projectName(n.context.$implicit))})}function ax(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,null,null,uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"],editable:[1,"editable"]},null),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵeld"](4,0,null,null,4,"div",[["class","grid--widget-content"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,rx)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,ux)),l["ɵdid"](8,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName,t.isEditable),e(n,3,0,t.resource),e(n,6,0,t.noEntries),e(n,8,0,t.projects)},null)}var sx=l["ɵccf"]("ng-component",lx,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,ax,ix)),l["ɵdid"](1,114688,null,0,lx,[Q,ge,A.a,l.Injector,nl,Uc,Qn,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),cx=function(e){function n(n,t,l,i,r,o,u){var a=e.call(this,i,t)||this;return a.timeEntryDm=n,a.injector=t,a.timezone=l,a.i18n=i,a.pathHelper=r,a.confirmDialog=o,a.cdr=u,a.text={activity:a.i18n.t("js.time_entry.activity"),comment:a.i18n.t("js.time_entry.comment"),hour:a.i18n.t("js.time_entry.hours"),workPackage:a.i18n.t("js.label_work_package"),edit:a.i18n.t("js.button_edit"),delete:a.i18n.t("js.button_delete"),confirmDelete:{text:a.i18n.t("js.text_are_you_sure"),title:a.i18n.t("js.modals.form_submit.title")},noResults:a.i18n.t("js.grid.widgets.time_entries_list.no_results")},a.entries=[],a.entriesLoaded=!1,a.rows=[],a}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.timeEntryDm.list({filters:this.dmFilters()}).then(function(n){e.buildEntries(n.elements),e.entriesLoaded=!0,e.cdr.detectChanges()})},Object.defineProperty(n.prototype,"total",{get:function(){var e=this,n=this.entries.reduce(function(n,t){return n+e.timezone.toHours(t.hours)},0);return this.i18n.t("js.units.hour",{count:this.formatNumber(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anyEntries",{get:function(){return!!this.entries.length},enumerable:!0,configurable:!0}),n.prototype.activityName=function(e){return e.activity.name},n.prototype.projectName=function(e){return e.project.name},n.prototype.workPackageName=function(e){return"#"+e.workPackage.id+": "+e.workPackage.name},n.prototype.workPackageId=function(e){return e.workPackage.id},n.prototype.comment=function(e){return e.comment&&e.comment.raw},n.prototype.hours=function(e){return this.formatNumber(this.timezone.toHours(e.hours))},n.prototype.editPath=function(e){return this.pathHelper.timeEntryEditPath(e.id)},n.prototype.deletePath=function(e){return this.pathHelper.timeEntryPath(e.id)},n.prototype.workPackagePath=function(e){return this.pathHelper.workPackagePath(e.workPackage.idFromLink)},n.prototype.deleteIfConfirmed=function(e,n){var t=this;e.preventDefault(),this.confirmDialog.confirm({text:this.text.confirmDelete,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(function(){n.delete().then(function(){var e=t.entries.filter(function(e){return n.id!==e.id});t.buildEntries(e)})}).catch(function(){})},n.prototype.buildEntries=function(e){var n=this;this.entries=e;var t={};e.forEach(function(e){var l=e.spentOn;t[l]||(t[l]=0),t[l]=t[l]+n.timezone.toHours(e.hours)});var l=e.sort(function(e,n){return n.spentOn.localeCompare(e.spentOn)});this.rows=[];var i=null;l.forEach(function(e){e.spentOn!==i&&(i=e.spentOn,n.rows.push({date:n.timezone.formattedDate(i),sum:n.formatNumber(t[i])})),n.rows.push({date:i,entry:e})})},n.prototype.formatNumber=function(e){return this.i18n.toNumber(e,{precision:2})},Object.defineProperty(n.prototype,"noEntries",{get:function(){return!this.entries.length&&this.entriesLoaded},enumerable:!0,configurable:!0}),n}(Pj),dx=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.dmFilters=function(){return[["spentOn",">t-",["7"]],["user_id","=",["me"]]]},n}(cx),px=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.listUrl=function(){return this.pathHelper.api.v3.time_entries.toString()},n.prototype.oneUrl=function(e){return this.pathHelper.api.v3.time_entries.id(e).toString()},n}(Ve),hx=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function fx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function gx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"td",[["class","activity"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.activityName(n.parent.context.$implicit.entry))})}function mx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"td",[["colspan","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.date)})}function vx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"td",[["class","subject"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," - "])),(e()(),l["ɵeld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.projectName(n.parent.context.$implicit.entry)),e(n,2,0,t.workPackagePath(n.parent.context.$implicit.entry),t.workPackageName(n.parent.context.$implicit.entry))})}function bx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"td",[["class","comments"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.comment(n.parent.context.$implicit.entry))})}function yx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"td",[["class","hours"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.hours(n.parent.context.$implicit.entry))})}function wx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"td",[["class","hours"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"em",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.sum)})}function Cx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-edit"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-context icon-edit")},function(e,n){var t=n.component;e(n,0,0,t.editPath(n.parent.context.$implicit.entry),t.text.edit)})}function kx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.deleteIfConfirmed(t,e.parent.context.$implicit.entry)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-delete"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-context icon-delete")},function(e,n){var t=n.component;e(n,0,0,t.deletePath(n.parent.context.$implicit.entry),t.text.delete)})}function Ix(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,17,"tr",[["class","time-entry"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,gx)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,mx)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,vx)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,bx)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,yx)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,wx)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](13,0,null,null,4,"td",[["class","buttons"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Cx)),l["ɵdid"](15,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,kx)),l["ɵdid"](17,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.entry),e(n,4,0,n.context.$implicit.sum),e(n,6,0,n.context.$implicit.entry),e(n,8,0,n.context.$implicit.entry),e(n,10,0,n.context.$implicit.entry),e(n,12,0,n.context.$implicit.sum),e(n,15,0,n.context.$implicit.entry&&n.context.$implicit.entry.updateImmediately),e(n,17,0,n.context.$implicit.entry&&n.context.$implicit.entry.delete)},null)}function jx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,34,"div",[["class","generic-table--results-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,33,"table",[["class","generic-table time-entries"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,9,"colgroup",[],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](4,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](5,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](6,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](7,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](8,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](9,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](10,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](11,0,null,null,0,"col",[],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,19,"thead",[["class","-sticky"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,18,"tr",[],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,0,"div",[["class","generic-table--empty-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ix)),l["ɵdid"](34,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0),e(n,6,0),e(n,8,0),e(n,10,0),e(n,34,0,t.rows)},function(e,n){var t=n.component;e(n,17,0,t.text.activity),e(n,21,0,t.text.workPackage),e(n,25,0,t.text.comment),e(n,29,0,t.text.hour)})}function Rx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"div",[["class","total-hours"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Total: "])),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,jx)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,6,0,n.component.anyEntries)},function(e,n){e(n,4,0,n.component.total)})}function Px(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,fx)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Rx)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName),e(n,3,0,t.resource),e(n,5,0,t.noEntries),e(n,7,0,!t.noEntries)},null)}var Sx=l["ɵccf"]("ng-component",dx,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,Px,hx)),l["ɵdid"](1,114688,null,0,dx,[px,l.Injector,nl,A.a,ge,pm,l.ChangeDetectorRef],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),_x=function(e){function n(n,t,l,i,r,o,u,a){var s=e.call(this,n,t,l,i,r,o,u)||this;return s.timeEntryDm=n,s.injector=t,s.timezone=l,s.i18n=i,s.pathHelper=r,s.confirmDialog=o,s.cdr=u,s.currentProject=a,s}return a.d(n,e),n.prototype.dmFilters=function(){return[["spentOn",">t-",["7"]],["project_id","=",[this.currentProject.id]]]},n}(cx),xx=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Tx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"no-results",[],[[2,"generic-table--no-results-container",null]],null,null,vw,gw)),l["ɵdid"](1,49152,null,0,fw,[],{title:[0,"title"]},null)],function(e,n){e(n,1,0,n.component.text.noResults)},function(e,n){e(n,0,0,l["ɵnov"](n,1).setHostClass)})}function Ox(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"td",[["class","activity"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.activityName(n.parent.context.$implicit.entry))})}function Ex(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"td",[["colspan","3"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"strong",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.date)})}function Dx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"td",[["class","subject"]],null,null,null,null,null)),(e()(),l["ɵted"](1,null,[" "," - "])),(e()(),l["ɵeld"](2,0,null,null,0,"a",[],[[8,"href",4],[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.projectName(n.parent.context.$implicit.entry)),e(n,2,0,t.workPackagePath(n.parent.context.$implicit.entry),t.workPackageName(n.parent.context.$implicit.entry))})}function Fx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"td",[["class","comments"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.comment(n.parent.context.$implicit.entry))})}function Nx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"td",[["class","hours"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.hours(n.parent.context.$implicit.entry))})}function Ax(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"td",[["class","hours"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"em",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.sum)})}function Vx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-edit"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-context icon-edit")},function(e,n){var t=n.component;e(n,0,0,t.editPath(n.parent.context.$implicit.entry),t.text.edit)})}function Mx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"a",[],[[8,"href",4],[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.deleteIfConfirmed(t,e.parent.context.$implicit.entry)&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon-context icon-delete"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){e(n,2,0,"icon-context icon-delete")},function(e,n){var t=n.component;e(n,0,0,t.deletePath(n.parent.context.$implicit.entry),t.text.delete)})}function qx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,17,"tr",[["class","time-entry"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ox)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ex)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Dx)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Fx)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Nx)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Ax)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](13,0,null,null,4,"td",[["class","buttons"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Vx)),l["ɵdid"](15,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Mx)),l["ɵdid"](17,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,2,0,n.context.$implicit.entry),e(n,4,0,n.context.$implicit.sum),e(n,6,0,n.context.$implicit.entry),e(n,8,0,n.context.$implicit.entry),e(n,10,0,n.context.$implicit.entry),e(n,12,0,n.context.$implicit.sum),e(n,15,0,n.context.$implicit.entry&&n.context.$implicit.entry.updateImmediately),e(n,17,0,n.context.$implicit.entry&&n.context.$implicit.entry.delete)},null)}function Lx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,34,"div",[["class","generic-table--results-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,33,"table",[["class","generic-table time-entries"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,9,"colgroup",[],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](4,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](5,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](6,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](7,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](8,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](9,0,null,null,1,"col",[["highlight-col",""]],null,null,null,Ql,Wl)),l["ɵdid"](10,245760,null,0,Bl,[l.ElementRef],null,null),(e()(),l["ɵeld"](11,0,null,null,0,"col",[],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,19,"thead",[["class","-sticky"]],null,null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,18,"tr",[],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](18,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](19,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](21,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](25,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](26,0,null,null,3,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](27,0,null,null,2,"div",[["class","generic-table--sort-header-outer"]],null,null,null,null,null)),(e()(),l["ɵeld"](28,0,null,null,1,"div",[["class","generic-table--sort-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,1,"th",[],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,0,"div",[["class","generic-table--empty-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](32,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,qx)),l["ɵdid"](34,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0),e(n,6,0),e(n,8,0),e(n,10,0),e(n,34,0,t.rows)},function(e,n){var t=n.component;e(n,17,0,t.text.activity),e(n,21,0,t.text.workPackage),e(n,25,0,t.text.comment),e(n,29,0,t.text.hour)})}function $x(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,3,"div",[["class","total-hours"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l["ɵted"](-1,null,["Total: "])),(e()(),l["ɵeld"](4,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Lx)),l["ɵdid"](6,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,6,0,n.component.anyEntries)},function(e,n){e(n,4,0,n.component.total)})}function Hx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"widget-header",[],null,[[null,"onRenamed"]],function(e,n,t){var l=!0,i=e.component;"onRenamed"===n&&(l=!1!==i.renameWidget(t)&&l);return l},uS,oS)),l["ɵdid"](1,49152,null,0,iS,[lS],{name:[0,"name"]},{onRenamed:"onRenamed"}),(e()(),l["ɵeld"](2,0,null,0,1,"widget-menu",[],null,null,null,fS,pS)),l["ɵdid"](3,49152,null,0,sS,[A.a,cS,lS],{resource:[0,"resource"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Tx)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,$x)),l["ɵdid"](7,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.widgetName),e(n,3,0,t.resource),e(n,5,0,t.noEntries),e(n,7,0,!t.noEntries)},null)}var Bx=l["ɵccf"]("ng-component",_x,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],[[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"grid-row-start",null],[4,"grid-row-end",null]],null,null,Hx,xx)),l["ɵdid"](1,114688,null,0,_x,[px,l.Injector,nl,A.a,ge,pm,l.ChangeDetectorRef,Qn],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,l["ɵnov"](n,1).gridColumnStart,l["ɵnov"](n,1).gridColumnEnd,l["ɵnov"](n,1).gridRowStart,l["ɵnov"](n,1).gridRowEnd)})},{resource:"resource"},{resourceChanged:"resourceChanged"},[]),zx=function(){function e(e){this.Hook=e}return Object.defineProperty(e.prototype,"registered",{get:function(){var e=[];return _.each(this.Hook.call("gridWidgets"),function(n){e=e.concat(n)}),e},enumerable:!0,configurable:!0}),e}(),Wx=function(e){function n(n,t,l,i,r,o){var u=e.call(this,t,l,n)||this;return u.elementRef=n,u.locals=t,u.cdRef=l,u.widgetsService=i,u.i18n=r,u.bannerService=o,u.text={title:u.i18n.t("js.grid.add_widget"),close_popup:u.i18n.t("js.button_close"),upsale_link:u.i18n.t("js.grid.upsale.link"),upsale_text:u.i18n.t("js.grid.upsale.text")},u.eeShowBanners=!1,u}return a.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.eeShowBanners=this.bannerService.eeShowBanners},Object.defineProperty(n.prototype,"selectable",{get:function(){return this.eligibleWidgets.sort(function(e,n){return e.title.localeCompare(n.title)})},enumerable:!0,configurable:!0}),n.prototype.select=function(e,n){this.chosenWidget=n,this.closeMe(e)},n.prototype.trackWidgetBy=function(e){return e.identifier},Object.defineProperty(n.prototype,"eligibleWidgets",{get:function(){var e=this.locals.schema.widgets.allowedValues.map(function(e){return e.identifier});return this.widgetsService.registered.filter(function(n){return e.includes(n.identifier)})},enumerable:!0,configurable:!0}),n}(He.a),Qx=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function Ux(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","grid--addable-widget"]],[[8,"id",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.select(t,e.context.$implicit)&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.context.$implicit.identifier,n.context.$implicit.title)})}function Gx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"enterprise-banner",[["class","grid--add-widget-ee"],["opReferrer","grids#add-widget"]],null,null,null,no,eo)),l["ɵdid"](1,49152,null,0,Jr,[A.a],{textMessage:[0,"textMessage"],linkMessage:[1,"linkMessage"],opReferrer:[2,"opReferrer"]},null)],function(e,n){var t=n.component;e(n,1,0,t.text.upsale_text,t.text.upsale_link,"grids#add-widget")},null)}function Kx(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","op-modal--portal ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,4,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,Ux)),l["ɵdid"](8,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,Gx)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,8,0,t.selectable,t.trackWidgetBy),e(n,10,0,t.eeShowBanners)},function(e,n){var t=n.component;e(n,4,0,t.text.close_popup),e(n,5,0,t.text.title)})}var Yx=l["ɵccf"]("ng-component",Wx,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,Kx,Qx)),l["ɵdid"](1,245760,null,0,Wx,[l.ElementRef,Wn.a,l.ChangeDetectorRef,zx,A.a,Ge],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),Zx=[".title-container[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:-5px}.toolbar-container[_ngcontent-%COMP%]{margin-bottom:0}.toolbar-items[_ngcontent-%COMP%]{padding-right:20px}"],Jx=function(){function e(){this.resizing=!1,this.end=new l.EventEmitter,this.start=new l.EventEmitter,this.move=new l.EventEmitter,this.customHandler=!1,this.cursorClass="nwse-resize",this.resizerClass="resizer"}return e.prototype.ngOnDestroy=function(){this.removeEventListener()},e.prototype.startResize=function(e){e.preventDefault(),e.stopPropagation(),1!==e.buttons&&1!==e.which||(this.oldX=e.clientX,this.oldY=e.clientY,this.newX=e.clientX,this.newY=e.clientY,this.resizing=!0,this.setResizeCursor(),this.bindEventListener(e)),this.start.emit()},e.prototype.onMouseUp=function(e,n){this.setAutoCursor(),this.removeEventListener();var t={x:this.newX-this.oldX,y:this.newY-this.oldY};this.end.emit(t)},e.prototype.onMouseMove=function(e,n){n.preventDefault(),n.stopPropagation(),this.newX=n.clientX,this.newY=n.clientY;var t={x:this.newX-this.oldX,y:this.newY-this.oldY};this.move.emit(t)},e.prototype.bindEventListener=function(e){this.mouseMoveHandler=this.onMouseMove.bind(this,e.currentTarget),this.mouseUpHandler=this.onMouseUp.bind(this,e.currentTarget),window.addEventListener("mousemove",this.mouseMoveHandler),window.addEventListener("mouseup",this.mouseUpHandler)},e.prototype.removeEventListener=function(){window.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler)},e.prototype.setResizeCursor=function(){this.setCursor(this.cursorClass+" !important")},e.prototype.setAutoCursor=function(){this.setCursor("auto")},e.prototype.setCursor=function(e){document.getElementsByTagName("body")[0].setAttribute("style","cursor: "+e)},e}(),Xx=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function eT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"div",[["class","resizer"]],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(e,n){e(n,2,0,"resizer",n.component.resizerClass)},null)}function nT(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,eT)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),l["ɵncd"](null,0)],function(e,n){e(n,1,0,!n.component.customHandler)},null)}l["ɵccf"]("resizer",Jx,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"resizer",[],null,[[null,"mousedown"]],function(e,n,t){var i=!0;"mousedown"===n&&(i=!1!==l["ɵnov"](e,1).startResize(t)&&i);return i},nT,Xx)),l["ɵdid"](1,180224,null,0,Jx,[],null,null)],null,null)},{customHandler:"customHandler",cursorClass:"cursorClass",resizerClass:"resizerClass"},{end:"end",start:"start",move:"move"},["*"]);var tT=Fs(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!0,n}return a.d(n,e),n.prototype.$initialize=function(n){var t=this;e.prototype.$initialize.call(this,n),this.widgets=this.widgets.map(function(e){var n=new XI(t.injector,e,!0,t.halInitializer,"GridWidget");return n.grid=t,n})},n.prototype.updateAttachments=function(){return a.b(this,void 0,void 0,function(){var e=this;return a.e(this,function(n){return[2,this.attachments.$update().then(function(){return e.states.forResource(e).putValue(e),e.attachments})]})})},n}(L)),lT=function(){function e(e){this.layout=e}return e.prototype.down=function(e,n){var t=[],l=this.layout.widgetAreas.slice(0);for(n&&(l=l.filter(function(e){return e.guid!==n.guid})),l.sort(function(e,n){return n.startRow-e.startRow});null!==e;)t.push(e),l=l.filter(function(n){return n.guid!==e.guid}),e=this.moveOneDown(t,l)},e.prototype.moveOneDown=function(e,n){var t=this.firstAreaToMove(e,n);if(t){var l=t[0],i=t[1],r=l.widget.height;return l.startRow=i.endRow,l.endRow=l.startRow+r,this.layout.numRows<l.endRow-1&&(this.layout.numRows=l.endRow-1),l}return null},e.prototype.firstAreaToMove=function(e,n){var t=null,l=null;if(n.forEach(function(n){e.forEach(function(e){if(e.overlaps(n))return t=e,void(l=n)})}),null!==l){var i=t;return e.forEach(function(e){e.endRow>i.endRow&&l.columnOverlaps(e)&&(i=e)}),[l,i]}return null},e}(),iT=t("AJqF"),rT=function(){function e(e,n){this.layout=e,this.move=n,this.setupMousedOverAreaSubscription()}return e.prototype.ngOnDestroy=function(){this.mousedOverAreaObserver.unsubscribe()},e.prototype.setupMousedOverAreaSubscription=function(){var e=this;this.mousedOverAreaObserver=this.layout.$mousedOverArea.pipe(Object(iT.a)(10),Object(ft.a)(),Object(Yn.a)(function(n){return e.currentlyDragging&&!!n&&!e.layout.isGap(n)&&(e.placeholderArea.startRow!==n.startRow||e.placeholderArea.startColumn!==n.startColumn)})).subscribe(function(n){e.updateArea(n),e.layout.scrollPlaceholderIntoView()})},e.prototype.updateArea=function(e){this.layout.resetAreas(this.draggedArea),this.moveAreasOnDragging(e)},e.prototype.moveAreasOnDragging=function(e){if(this.placeholderArea){var n=this.draggedArea;this.copyPositionButRestrict(e,this.placeholderArea),this.move.down(this.placeholderArea,n)}},Object.defineProperty(e.prototype,"currentlyDragging",{get:function(){return!!this.draggedArea},enumerable:!0,configurable:!0}),e.prototype.isDropOnlyArea=function(e){return!this.currentlyDragging&&e.endRow===this.layout.numRows+2},e.prototype.isDragged=function(e){return this.currentlyDragging&&this.draggedArea.guid===e.guid},e.prototype.isPassive=function(e){return this.currentlyDragging&&!this.isDragged(e)},Object.defineProperty(e.prototype,"isDraggable",{get:function(){return this.layout.isEditable},enumerable:!0,configurable:!0}),e.prototype.start=function(e){this.placeholderArea=new nS(e.widget),this.draggedHeight=document.getElementById(e.guid).offsetHeight-2,this.draggedArea=e},e.prototype.abort=function(){document.dispatchEvent(new Event("mouseup")),this.draggedArea=null,this.placeholderArea=null,this.layout.resetAreas()},e.prototype.drop=function(){this.draggedArea&&(this.placeholderArea.copyDimensionsTo(this.draggedArea),this.draggedArea.unchangedSize||(this.layout.writeAreaChangesToWidgets(),this.layout.cleanupUnusedAreas(),this.layout.rebuildAndPersist()),this.draggedArea=null,this.placeholderArea=null)},e.prototype.copyPositionButRestrict=function(e,n){n.startRow=e.startRow,e.startRow===this.layout.numRows+1?n.endRow=this.layout.numRows+2:e.startRow+n.widget.height>this.layout.numRows+1?n.endRow=this.layout.numRows+1:n.endRow=e.startRow+n.widget.height,n.startColumn=e.startColumn,e.startColumn+n.widget.width>this.layout.numColumns+1?n.endColumn=this.layout.numColumns+1:n.endColumn=e.startColumn+n.widget.width},e}(),oT=function(){function e(e,n,t){this.layout=e,this.move=n,this.drag=t}return e.prototype.end=function(e){this.resizedArea&&(this.resizedArea=null,e.unchangedSize||(this.layout.writeAreaChangesToWidgets(),this.layout.cleanupUnusedAreas(),this.layout.rebuildAndPersist()))},e.prototype.abort=function(){this.resizedArea&&(this.layout.resetAreas(),this.resizedArea=null)},e.prototype.start=function(e){var n=this;this.resizedArea=e;var t=this.layout.gridAreas.filter(function(e){var t=e.startRow===n.resizedArea.startRow&&e.startColumn>=n.resizedArea.startColumn,l=e.startRow>n.resizedArea.startRow&&e.startColumn>=n.resizedArea.startColumn&&n.layout.widgetAreas.some(function(t){return t.startRow===e.startRow&&(t.endColumn<=n.resizedArea.startColumn||t.startColumn>=e.endColumn)});return t||l});this.targetIds=t.map(function(e){return e.guid})},e.prototype.moving=function(e){this.resizedArea&&this.layout.mousedOverArea&&this.targetIds.includes(this.layout.mousedOverArea.guid)&&(this.layout.resetAreas(),this.resizedArea.endRow=this.layout.mousedOverArea.endRow,this.resizedArea.endColumn=this.layout.mousedOverArea.endColumn,this.move.down(this.resizedArea,this.resizedArea))},e.prototype.isTarget=function(e){var n=e.guid;return this.resizedArea&&this.targetIds.includes(n)},e.prototype.isResized=function(e){return this.resizedArea&&this.resizedArea.guid===e.guid},e.prototype.isPassive=function(e){return this.currentlyResizing&&!this.isResized(e)},Object.defineProperty(e.prototype,"currentlyResizing",{get:function(){return!!this.resizedArea},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResizable",{get:function(){return!this.drag.currentlyDragging&&this.isAllowed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAllowed",{get:function(){return this.layout.gridResource.updateImmediately},enumerable:!0,configurable:!0}),e}(),uT=function(){function e(e,n,t,l,i,r,o,u){this.opModalService=e,this.injector=n,this.halResource=t,this.layout=l,this.drag=i,this.move=r,this.resize=o,this.i18n=u,this.text={add:this.i18n.t("js.grid.add_widget")}}return e.prototype.isAddable=function(e){return!this.drag.currentlyDragging&&!this.resize.currentlyResizing&&(this.layout.mousedOverArea===e||this.layout.isSingleCell||this.layout.inHelpMode)&&this.isAllowed},e.prototype.widget=function(e){var n=this;this.select(e).then(function(t){n.layout.isGap(e)&&n.addLine(e);var l=new nS(t);n.setMaxWidth(l),n.persist(l)}).catch(function(){})},Object.defineProperty(e.prototype,"addText",{get:function(){return this.text.add},enumerable:!0,configurable:!0}),e.prototype.select=function(e){var n=this;return new Promise(function(t,l){n.opModalService.show(Wx,n.injector,{schema:n.layout.schema}).closingEvent.subscribe(function(i){var r=i.chosenWidget;if(r){var o={_type:"GridWidget",identifier:r.identifier,startRow:e.startRow,endRow:e.endRow,startColumn:e.startColumn,endColumn:e.endColumn,options:r.properties||{}},u=n.halResource.createHalResource(o);u.grid=n.layout.gridResource,t(u)}else l()})})},e.prototype.addLine=function(e){e.isRow?this.layout.addRow(e.startRow-1,e.startColumn):e.isColumn&&this.layout.addColumn(e.startColumn-1,e.startRow)},e.prototype.setMaxWidth=function(e){e.endColumn=this.layout.numColumns+1,this.layout.widgetAreas.forEach(function(n){e.startColumnOverlaps(n)&&(e.endColumn=n.startColumn)})},e.prototype.persist=function(e){e.writeAreaChangeToWidget(),this.layout.widgetAreas.push(e),this.layout.widgetResources.push(e.widget),this.layout.rebuildAndPersist()},Object.defineProperty(e.prototype,"isAllowed",{get:function(){return this.layout.gridResource&&this.layout.gridResource.updateImmediately},enumerable:!0,configurable:!0}),e}(),aT=function(){function e(e,n,t,l,i,r,o){this.sanitization=e,this.widgetsService=n,this.drag=t,this.resize=l,this.layout=i,this.add=r,this.remove=o,this.uiWidgets=[],this.GRID_AREA_HEIGHT="auto",this.GRID_GAP_DIMENSION="20px",this.component=__}return e.prototype.ngOnInit=function(){this.layout.gridResource=this.grid},e.prototype.ngOnDestroy=function(){this.uiWidgets.forEach(function(e){return e.destroy()})},e.prototype.handleKeyboardEvent=function(e){"Escape"===e.key&&(this.drag.currentlyDragging?this.drag.abort():this.resize.currentlyResizing&&this.resize.abort())},e.prototype.widgetComponent=function(e){var n=e.widget;if(!n)return null;var t=this.widgetsService.registered.find(function(e){return e.identifier===n.identifier});return t?t.component:null},e.prototype.widgetComponentInput=function(e){return{resource:e.widget}},e.prototype.widgetComponentOutput=function(e){return{resourceChanged:this.layout.saveWidgetChangeset.bind(this.layout)}},Object.defineProperty(e.prototype,"gridColumnStyle",{get:function(){return this.gridStyle(this.layout.numColumns,"calc((100% - "+this.GRID_GAP_DIMENSION+" * "+(this.layout.numColumns+1)+") / "+this.layout.numColumns+")")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridRowStyle",{get:function(){return this.gridStyle(this.layout.numRows,this.GRID_AREA_HEIGHT)},enumerable:!0,configurable:!0}),e.prototype.identifyGridArea=function(e,n){return n.guid},Object.defineProperty(e.prototype,"isHeadersDisplayed",{get:function(){return this.layout.isEditable},enumerable:!0,configurable:!0}),e.prototype.gridStyle=function(e,n){for(var t="",l=0;l<e;l++)t+=this.GRID_GAP_DIMENSION+" "+n+" ";return t+=""+this.GRID_GAP_DIMENSION,this.sanitization.bypassSecurityTrustStyle(t)},e}(),sT=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function cT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"span",[["cdkDragHandle",""],["class","grid--area-drag-handle\n                   icon\n                   icon-drag-handle cdk-drag-handle"]],null,null,null,null,null)),l["ɵdid"](1,147456,[[2,4]],0,kj.d,[l.ElementRef,[2,kj.k]],null,null)],null,null)}function dT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"resizer",[],null,[[null,"end"],[null,"start"],[null,"move"],[null,"mousedown"]],function(e,n,t){var i=!0,r=e.component;"mousedown"===n&&(i=!1!==l["ɵnov"](e,1).startResize(t)&&i);"end"===n&&(i=!1!==r.resize.end(e.parent.context.$implicit)&&i);"start"===n&&(i=!1!==r.resize.start(e.parent.context.$implicit)&&i);"move"===n&&(i=!1!==r.resize.moving(t)&&i);return i},nT,Xx)),l["ɵdid"](1,180224,null,0,Jx,[],{customHandler:[0,"customHandler"]},{end:"end",start:"start",move:"move"}),(e()(),l["ɵeld"](2,0,null,0,1,"div",[["class","grid--resizer"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-resizer-bottom-right hidden-for-mobile"]],null,null,null,null,null))],function(e,n){e(n,1,0,!0)},null)}function pT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,21,"div",[["cdkDropList",""],["class","grid--area -widgeted cdk-drop-list"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null],[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-dragged":0,"-passive":1,"-resizing":2}),l["ɵdid"](4,1196032,null,1,kj.e,[l.ElementRef,kj.g,l.ChangeDetectorRef,[2,Ij.b],[3,kj.f]],{connectedTo:[0,"connectedTo"],data:[1,"data"],id:[2,"id"]},null),l["ɵqud"](603979776,1,{_draggables:1}),l["ɵprd"](256,null,kj.f,void 0,[]),l["ɵprd"](2048,null,kj.b,null,[kj.e]),(e()(),l["ɵeld"](8,16777216,null,null,11,"div",[["cdkDrag",""],["class","grid--area-content widget-box cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],[[null,"cdkDragStarted"],[null,"cdkDragDropped"]],function(e,n,t){var l=!0,i=e.component;"cdkDragStarted"===n&&(l=!1!==i.drag.start(e.context.$implicit)&&l);"cdkDragDropped"===n&&(l=!1!==i.drag.drop()&&l);return l},null,null)),l["ɵprd"](6144,null,kj.k,null,[kj.c]),l["ɵdid"](10,4866048,[[1,4]],3,kj.c,[l.ElementRef,[3,kj.b],$t.DOCUMENT,l.NgZone,l.ViewContainerRef,kj.a,[2,Ij.b],kj.g,l.ChangeDetectorRef],null,{started:"cdkDragStarted",dropped:"cdkDragDropped"}),l["ɵqud"](603979776,2,{_handles:1}),l["ɵqud"](603979776,3,{_previewTemplate:0}),l["ɵqud"](603979776,4,{_placeholderTemplate:0}),(e()(),l["ɵand"](16777216,null,null,1,null,cT)),l["ɵdid"](15,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](16,16777216,null,null,3,"ndc-dynamic",[],null,null,null,Ra.b,Ra.a)),l["ɵdid"](17,573440,null,0,fu.a,[l.ViewContainerRef,l.ComponentFactoryResolver],{ndcDynamicComponent:[0,"ndcDynamicComponent"]},null),l["ɵprd"](131584,null,fu.f,fu.f,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵdid"](19,802816,null,0,fu.b,[l.Injector,fu.f,fu.e,[8,null]],{ndcDynamicInputs:[0,"ndcDynamicInputs"],ndcDynamicOutputs:[1,"ndcDynamicOutputs"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,dT)),l["ɵdid"](21,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component,l=e(n,3,0,t.drag.isDragged(n.context.$implicit),t.drag.isPassive(n.context.$implicit)||t.resize.isPassive(n.context.$implicit),t.resize.isResized(n.context.$implicit));e(n,2,0,"grid--area -widgeted",l),e(n,4,0,t.layout.gridAreaIds,n.context.$implicit,n.context.$implicit.guid),e(n,15,0,t.drag.isDraggable),e(n,17,0,t.widgetComponent(n.context.$implicit)),e(n,19,0,t.widgetComponentInput(n.context.$implicit),t.widgetComponentOutput(n.context.$implicit)),e(n,21,0,t.resize.isResizable)},function(e,n){e(n,0,0,n.context.$implicit.gridStartRow,n.context.$implicit.gridEndRow,n.context.$implicit.gridStartColumn,n.context.$implicit.gridEndColumn,l["ɵnov"](n,4).id,l["ɵnov"](n,4).disabled,l["ɵnov"](n,4)._dropListRef.isDragging(),l["ɵnov"](n,4)._dropListRef.isReceiving()),e(n,8,0,l["ɵnov"](n,10).disabled,l["ɵnov"](n,10)._dragRef.isDragging())})}function hT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["cdkDropList",""],["class","grid--area cdk-drop-list"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null],[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"mouseover"]],function(e,n,t){var l=!0,i=e.component;"mouseover"===n&&(l=!1!==i.layout.setMousedOverArea(e.context.$implicit)&&l);return l},null,null)),l["ɵprd"](6144,null,kj.b,null,[kj.e]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](3,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](4,{"-drop-target":0,"-drop-only":1,"-resize-target":2,"-addable":3,"-help-mode":4}),l["ɵdid"](5,1196032,null,1,kj.e,[l.ElementRef,kj.g,l.ChangeDetectorRef,[2,Ij.b],[3,kj.f]],{connectedTo:[0,"connectedTo"],data:[1,"data"],id:[2,"id"]},null),l["ɵqud"](603979776,5,{_draggables:1}),l["ɵprd"](256,null,kj.f,void 0,[]),(e()(),l["ɵeld"](8,0,null,null,0,"div",[["class","grid--widget-add hidden-for-mobile"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.add.widget(e.context.$implicit)&&l);return l},null,null))],function(e,n){var t=n.component,l=e(n,4,0,t.drag.currentlyDragging,t.drag.isDropOnlyArea(n.context.$implicit),t.resize.isTarget(n.context.$implicit),t.add.isAddable(n.context.$implicit),t.layout.inHelpMode);e(n,3,0,"grid--area",l),e(n,5,0,t.layout.gridAreaIds,n.context.$implicit,n.context.$implicit.guid)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.gridStartRow,n.context.$implicit.gridEndRow,n.context.$implicit.gridStartColumn,n.context.$implicit.gridEndColumn,l["ɵnov"](n,5).id,l["ɵnov"](n,5).disabled,l["ɵnov"](n,5)._dropListRef.isDragging(),l["ɵnov"](n,5)._dropListRef.isReceiving()),e(n,8,0,t.add.addText)})}function fT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"div",[["class","grid--area -gap"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null],[8,"id",0]],[[null,"mouseover"]],function(e,n,t){var l=!0,i=e.component;"mouseover"===n&&(l=!1!==i.layout.setMousedOverArea(e.context.$implicit)&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-addable":0,"-help-mode":1,"-row":2,"-column":3}),(e()(),l["ɵeld"](4,0,null,null,0,"div",[["class","grid--widget-add -gap hidden-for-mobile"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.add.widget(e.context.$implicit)&&l);return l},null,null))],function(e,n){var t=n.component,l=e(n,3,0,t.add.isAddable(n.context.$implicit),t.layout.inHelpMode,n.context.$implicit.isRow,n.context.$implicit.isColumn);e(n,2,0,"grid--area -gap",l)},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.gridStartRow,n.context.$implicit.gridEndRow,n.context.$implicit.gridStartColumn,n.context.$implicit.gridEndColumn,n.context.$implicit.guid),e(n,4,0,t.add.addText)})}function gT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","grid--area -widgeted -placeholder"]],[[4,"grid-row-start",null],[4,"grid-row-end",null],[4,"grid-column-start",null],[4,"grid-column-end",null],[4,"min-height","px"]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"div",[["class","widget-box"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.drag.placeholderArea.gridStartRow,t.drag.placeholderArea.gridEndRow,t.drag.placeholderArea.gridStartColumn,t.drag.placeholderArea.gridEndColumn,t.drag.draggedHeight)})}function mT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,8,"div",[["class","grid--container"]],[[4,"grid-template-columns",null],[4,"grid-template-rows",null]],null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,pT)),l["ɵdid"](2,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,hT)),l["ɵdid"](4,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,fT)),l["ɵdid"](6,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,gT)),l["ɵdid"](8,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.layout.widgetAreas,t.identifyGridArea),e(n,4,0,t.layout.gridAreas,t.identifyGridArea),e(n,6,0,t.layout.gridGaps,t.identifyGridArea),e(n,8,0,t.drag.placeholderArea)},function(e,n){var t=n.component;e(n,0,0,t.gridColumnStyle,t.gridRowStyle)})}l["ɵccf"]("grid",aT,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"grid",[],null,[["window","keyup"]],function(e,n,t){var i=!0;"window:keyup"===n&&(i=!1!==l["ɵnov"](e,1).handleKeyboardEvent(t)&&i);return i},mT,sT)),l["ɵdid"](1,245760,null,0,aT,[rr.DomSanitizer,zx,rT,oT,lS,uT,cS],null,null)],function(e,n){e(n,1,0)},null)},{grid:"grid"},{},[]);var vT=function(){function e(e,n,t,l,i,r,o,u,a){this.gridInitialization=e,this.pathHelper=n,this.currentProject=t,this.i18n=l,this.cdRef=i,this.title=r,this.addWidget=o,this.renderer=u,this.areas=a,this.text={title:this.i18n.t("js."+this.i18nNamespace()+".label"),html_title:this.i18n.t("js."+this.i18nNamespace()+".label")}}return e.prototype.ngOnInit=function(){var e=this;this.renderer.addClass(document.body,"widget-grid-layout"),this.gridInitialization.initialize(this.gridScopePath()).then(function(n){e.grid=n,e.cdRef.detectChanges()}),this.setHtmlTitle()},e.prototype.ngOnDestroy=function(){this.renderer.removeClass(document.body,"widget-grid-layout")},e.prototype.setHtmlTitle=function(){this.title.setTitle(this.text.html_title)},e}(),bT=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.i18nNamespace=function(){return"dashboards"},n.prototype.gridScopePath=function(){return this.pathHelper.projectDashboardsPath(this.currentProject.identifier)},n}(vT),yT=function(){function e(e,n){this.gridDm=e,this.halResourceService=n}return e.prototype.initialize=function(e){var n=this;return this.gridDm.list({filters:[["scope","=",[e]]]}).then(function(t){return 0===t.total?n.myPageForm(e):t.elements[0]})},e.prototype.myPageForm=function(e){var n=this;return new Promise(function(t,l){var i={_links:{scope:{href:e}}};n.gridDm.createForm(i).then(function(e){var i=e.payload.$source,r=n.halResourceService.createHalResource(i);0===r.widgets.length&&(r.rowCount=1,r.columnCount=1),n.gridDm.create(r,e.schema).then(function(e){t(e)}).catch(function(){l()})})})},e}(),wT=[Zx],CT=l["ɵcrt"]({encapsulation:0,styles:wT,data:{}});function kT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"button",[["class","button"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.areas.toggleHelpMode()&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-active":0}),(e()(),l["ɵeld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=e(n,3,0,n.component.areas.inHelpMode);e(n,2,0,"button",t);e(n,5,0,"button--icon icon-add")},function(e,n){e(n,0,0,n.component.addWidget.addText)})}function IT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"grid",[],null,[["window","keyup"]],function(e,n,t){var i=!0;"window:keyup"===n&&(i=!1!==l["ɵnov"](e,1).handleKeyboardEvent(t)&&i);return i},mT,sT)),l["ɵdid"](1,245760,null,0,aT,[rr.DomSanitizer,zx,rT,oT,lS,uT,cS],{grid:[0,"grid"]},null)],function(e,n){e(n,1,0,n.component.grid)},null)}function jT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h2",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,6,"ul",[["class","toolbar-items hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](7,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](8,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,kT)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,IT)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,10,0,t.addWidget.isAllowed),e(n,12,0,t.grid)},function(e,n){e(n,3,0,n.component.text.title)})}var RT=l["ɵccf"]("dashboard",bT,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"dashboard",[],null,null,null,jT,CT)),l["ɵprd"](4608,null,cS,cS,[lS]),l["ɵprd"](512,null,lS,lS,[WI,Vn,A.a]),l["ɵprd"](512,null,lT,lT,[lS]),l["ɵprd"](131584,null,rT,rT,[lS,lT]),l["ɵprd"](512,null,oT,oT,[lS,lT,rT]),l["ɵprd"](512,null,uT,uT,[Wn.b,l.Injector,Q,lS,rT,lT,oT,A.a]),l["ɵdid"](7,245760,null,0,bT,[yT,ge,Qn,A.a,l.ChangeDetectorRef,rr.Title,uT,l.Renderer2,lS],null,null)],function(e,n){e(n,7,0)},null)},{},{},[]),PT=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.i18nNamespace=function(){return"overviews"},n.prototype.gridScopePath=function(){return this.pathHelper.projectPath(this.currentProject.identifier)},n}(vT),ST=[Zx],_T=l["ɵcrt"]({encapsulation:0,styles:ST,data:{}});function xT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"button",[["class","button"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.areas.toggleHelpMode()&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-active":0}),(e()(),l["ɵeld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=e(n,3,0,n.component.areas.inHelpMode);e(n,2,0,"button",t);e(n,5,0,"button--icon icon-add")},function(e,n){e(n,0,0,n.component.addWidget.addText)})}function TT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"grid",[],null,[["window","keyup"]],function(e,n,t){var i=!0;"window:keyup"===n&&(i=!1!==l["ɵnov"](e,1).handleKeyboardEvent(t)&&i);return i},mT,sT)),l["ɵdid"](1,245760,null,0,aT,[rr.DomSanitizer,zx,rT,oT,lS,uT,cS],{grid:[0,"grid"]},null)],function(e,n){e(n,1,0,n.component.grid)},null)}function OT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h2",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,6,"ul",[["class","toolbar-items hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](7,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](8,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,xT)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,TT)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,10,0,t.addWidget.isAllowed),e(n,12,0,t.grid)},function(e,n){e(n,3,0,n.component.text.title)})}var ET=l["ɵccf"]("overview",PT,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"overview",[],null,null,null,OT,_T)),l["ɵprd"](4608,null,cS,cS,[lS]),l["ɵprd"](512,null,lS,lS,[WI,Vn,A.a]),l["ɵprd"](512,null,lT,lT,[lS]),l["ɵprd"](131584,null,rT,rT,[lS,lT]),l["ɵprd"](512,null,oT,oT,[lS,lT,rT]),l["ɵprd"](512,null,uT,uT,[Wn.b,l.Injector,Q,lS,rT,lT,oT,A.a]),l["ɵdid"](7,245760,null,0,PT,[yT,ge,Qn,A.a,l.ChangeDetectorRef,rr.Title,uT,l.Renderer2,lS],null,null)],function(e,n){e(n,7,0)},null)},{},{},[]),DT=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.i18nNamespace=function(){return"my_page"},n.prototype.gridScopePath=function(){return this.pathHelper.myPagePath()},n}(vT),FT=[Zx],NT=l["ɵcrt"]({encapsulation:0,styles:FT,data:{}});function AT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"button",[["class","button"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.areas.toggleHelpMode()&&l);return l},null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](2,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](3,{"-active":0}),(e()(),l["ɵeld"](4,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](5,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=e(n,3,0,n.component.areas.inHelpMode);e(n,2,0,"button",t);e(n,5,0,"button--icon icon-add")},function(e,n){e(n,0,0,n.component.addWidget.addText)})}function VT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"grid",[],null,[["window","keyup"]],function(e,n,t){var i=!0;"window:keyup"===n&&(i=!1!==l["ɵnov"](e,1).handleKeyboardEvent(t)&&i);return i},mT,sT)),l["ɵdid"](1,245760,null,0,aT,[rr.DomSanitizer,zx,rT,oT,lS,uT,cS],{grid:[0,"grid"]},null)],function(e,n){e(n,1,0,n.component.grid)},null)}function MT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,1,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"h2",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,6,"ul",[["class","toolbar-items hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,2,"li",[["class","toolbar-item hidden-for-mobile"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"zen-mode-toggle-button",[],null,null,null,Ni,Fi)),l["ɵdid"](7,49152,null,0,Di,[A.a,l.ChangeDetectorRef],null,null),(e()(),l["ɵeld"](8,0,null,null,2,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,AT)),l["ɵdid"](10,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,VT)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,10,0,t.addWidget.isAllowed),e(n,12,0,t.grid)},function(e,n){e(n,3,0,n.component.text.title)})}var qT=l["ɵccf"]("ng-component",DT,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,7,"ng-component",[],null,null,null,MT,NT)),l["ɵprd"](4608,null,cS,cS,[lS]),l["ɵprd"](512,null,lS,lS,[WI,Vn,A.a]),l["ɵprd"](512,null,lT,lT,[lS]),l["ɵprd"](131584,null,rT,rT,[lS,lT]),l["ɵprd"](512,null,oT,oT,[lS,lT,rT]),l["ɵprd"](512,null,uT,uT,[Wn.b,l.Injector,Q,lS,rT,lT,oT,A.a]),l["ɵdid"](7,245760,null,0,DT,[yT,ge,Qn,A.a,l.ChangeDetectorRef,rr.Title,uT,l.Renderer2,lS],null,null)],function(e,n){e(n,7,0)},null)},{},{},[]),LT=t("/avT"),$T=function(){function e(e,n,t,l){this.I18n=e,this.injector=n,this.PathHelper=t,this.currentProjectService=l,this._searchTerm=new Ot.a(""),this.searchTerm$=this._searchTerm.asObservable(),this._currentTab=new Ot.a("work_packages"),this.currentTab$=this._currentTab.asObservable(),this._projectScope=new Ot.a(""),this.projectScope$=this._projectScope.asObservable(),this._tabs=new Ot.a([]),this.tabs$=this._tabs.asObservable(),this._resultsHidden=new Ot.a(!1),this.resultsHidden$=this._resultsHidden.asObservable(),this.initialize()}return e.prototype.initialize=function(){var e=this.loadGonData();e&&(e.available_search_types&&this._tabs.next(e.available_search_types),e.search_term&&this._searchTerm.next(e.search_term),e.current_tab&&this._currentTab.next(e.current_tab),e.project_scope?this._projectScope.next(e.project_scope):this.currentProjectService.path||this._projectScope.next("all"))},e.prototype.loadGonData=function(){try{return window.gon.global_search}catch(e){return null}},e.prototype.submitSearch=function(){window.location.href=this.searchPath()},e.prototype.searchPath=function(){var e=this.PathHelper.staticBase;return this.currentProjectService.path&&"all"!==this.projectScope&&(e=this.currentProjectService.path),e=e+"/search?"+this.searchQueryParams()},Object.defineProperty(e.prototype,"searchTerm",{get:function(){return this._searchTerm.value},set:function(e){this._searchTerm.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabs",{get:function(){return this._tabs.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTab",{get:function(){return this._currentTab.value},set:function(e){this._currentTab.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectScope",{get:function(){return this._projectScope.value},set:function(e){this._projectScope.next(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsHidden",{get:function(){return this._resultsHidden.value},set:function(e){this._resultsHidden.next(e)},enumerable:!0,configurable:!0}),e.prototype.searchQueryParams=function(){var e;return e="q="+encodeURIComponent(this.searchTerm),this.currentTab.length>0&&"all"!==this.currentTab&&(e=e+"&"+this.currentTab+"=1"),this.projectScope.length>0&&(e=e+"&scope="+this.projectScope),e},e.prototype.isAfterSearch=function(){return jQuery("body.controller-search").length>0},e}(),HT=function(){function e(e,n,t,l,i,r,o,u,a){var s=this;this.elementRef=e,this.I18n=n,this.PathHelperService=t,this.halResourceService=l,this.globalSearchService=i,this.currentProjectService=r,this.deviceService=o,this.cdRef=u,this.halNotification=a,this.expanded=!1,this.requests=new Zi(function(e){return s.autocompleteWorkPackages(e)},Yi(this.halNotification)),this.currentValue="",this.text={all_projects:this.I18n.t("js.global_search.all_projects"),current_project:this.I18n.t("js.global_search.current_project"),current_project_and_all_descendants:this.I18n.t("js.global_search.current_project_and_all_descendants"),search:this.I18n.t("js.global_search.search"),search_dots:this.I18n.t("js.global_search.search")+" ...",close_search:this.I18n.t("js.global_search.close_search")}}return e.prototype.ngOnInit=function(){this.ngSelectComponent.searchTerm=this.currentValue=this.globalSearchService.searchTerm,this.expanded=this.ngSelectComponent.searchTerm.length>0,jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded)},e.prototype.ngOnDestroy=function(){this.unregister()},e.prototype.handleClick=function(e){e.stopPropagation(),e.preventDefault(),Ky.insideOrSelf(this.btn.nativeElement,e.target)&&(this.deviceService.isMobile?(this.toggleMobileSearch(),jQuery(".ng-input input").focus()):0===this.ngSelectComponent.searchTerm.length?this.ngSelectComponent.focus():this.submitNonEmptySearch())},e.prototype.toggleMobileSearch=function(){this.expanded=!this.expanded,jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded)},e.prototype.onChange=function(e){var n=e;n.id?window.location.href=this.wpPath(n.id):(this.globalSearchService.searchTerm=this.currentValue,this.searchInScope(n.projectScope))},e.prototype.redirectToWp=function(e,n){return n.stopImmediatePropagation(),!!kc.isClickedWithModifier(n)||(window.location.href=this.wpPath(e),n.preventDefault(),!1)},e.prototype.wpPath=function(e){return this.PathHelperService.workPackagePath(e)},e.prototype.search=function(e){this.currentValue=this.ngSelectComponent.searchTerm,this.openCloseMenu(e.term)},e.prototype.openCloseMenu=function(e){this.ngSelectComponent.isOpen=e.trim().length>0},e.prototype.onFocus=function(){this.expanded=!0,jQuery("#top-menu").addClass("-global-search-expanded"),this.openCloseMenu(this.currentValue)},e.prototype.onFocusOut=function(){this.deviceService.isMobile||(this.expanded=this.ngSelectComponent.searchTerm.length>0,this.ngSelectComponent.isOpen=!1,jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded))},e.prototype.clearSearch=function(){this.currentValue=this.ngSelectComponent.searchTerm="",this.openCloseMenu(this.currentValue)},e.prototype.onEnterBeforeResultsLoaded=function(){this.requests.hasResults||this.searchInScope(this.currentScope)},e.prototype.statusHighlighting=function(e){return Ul.inlineClass("status",e)},e.prototype.customSearchFn=function(e,n){return void 0===n.id||-1!==n.subject.toLowerCase().indexOf(e.toLowerCase())},e.prototype.autocompleteWorkPackages=function(e){var n=this;if(!e)return Object(tt.a)([]);var t=!1;e.match(/^#\d+$/)&&(e=e.replace(/^#/,""),t=!0);var l=this.PathHelperService.api.v3.wpBySubjectOrId(e,t);return this.addSuggestions(),this.halResourceService.get(l).pipe(Object(Yj.map)(function(e){return n.suggestions.concat(e.elements.map(function(e){return{id:e.id,subject:e.subject,status:e.status.name,statusId:e.status.idFromLink,$href:e.$href}}))}))},e.prototype.addSuggestions=function(){var e=this;this.suggestions=[],this.currentProjectService.path&&(this.suggestions.push("current_project_and_all_descendants"),this.suggestions.push("current_project")),"current_project"===this.globalSearchService.projectScope&&this.suggestions.reverse(),this.suggestions.push("all_projects"),this.suggestions=this.suggestions.map(function(n){return{projectScope:n,text:e.text[n]}})},e.prototype.searchInScope=function(e){switch(e){case"all_projects":var n=!1;"all"!==this.globalSearchService.projectScope&&(n=!0,this.globalSearchService.resultsHidden=!0),this.globalSearchService.projectScope="all",this.submitNonEmptySearch(n);break;case"current_project":this.globalSearchService.projectScope="current_project",this.submitNonEmptySearch();break;case"current_project_and_all_descendants":this.globalSearchService.projectScope="",this.submitNonEmptySearch()}},e.prototype.submitNonEmptySearch=function(e){if(void 0===e&&(e=!1),this.globalSearchService.searchTerm=this.currentValue,this.currentValue.length>0){if(this.ngSelectComponent.close(),!e&&this.globalSearchService.isAfterSearch()&&"work_packages"===this.globalSearchService.currentTab)return void window.history.replaceState({},I18n.t("global_search.search")+": "+this.ngSelectComponent.searchTerm,this.globalSearchService.searchPath());this.globalSearchService.submitSearch()}},e.prototype.blur=function(){this.ngSelectComponent.searchTerm="",document.activeElement.blur()},Object.defineProperty(e.prototype,"currentScope",{get:function(){var e=this.globalSearchService.projectScope;return""===e?"current_project_and_all_descendants":e},enumerable:!0,configurable:!0}),e.prototype.unregister=function(){this.unregisterGlobalListener&&(this.unregisterGlobalListener(),this.unregisterGlobalListener=void 0)},e}();Tt.DynamicBootstrapper.register({selector:"global-search-input",cls:HT});var BT=[[".top-menu-search{display:flex;align-items:center;position:relative;height:var(--header-height);line-height:var(--header-height);margin:0 15px}.top-menu-search .top-menu-search--back-button{display:none}.top-menu-search .top-menu-search--button{position:absolute;right:2px;font-size:var(--header-item-font-size);color:var(--header-item-font-color)}.top-menu-search .top-menu-search--button:hover{text-decoration:none}.top-menu-search .top-menu-search--button.-input-focused{color:var(--header-search-field-font-color)}.top-menu-search .top-menu-search--loading{top:var(--header-height) -11px;height:46px;z-index:1051}.top-menu-search #global-search-input{width:calc(160px + 3vw);font-size:.9rem;transition:width .2s ease-in-out}.top-menu-search #global-search-input::-ms-clear{margin-right:5px;width:20px}.top-menu-search #global-search-input .ng-select-container{background:0 0;border-color:var(--header-item-font-color)}.top-menu-search #global-search-input .ng-arrow-wrapper{display:none}.top-menu-search #global-search-input .ng-clear-wrapper{color:var(--header-item-font-color);top:1px;width:30px;right:25px;text-align:center}.top-menu-search #global-search-input .ng-input{top:0}.top-menu-search #global-search-input .ng-input input{color:var(--header-item-font-color);height:30px;cursor:text}.top-menu-search #global-search-input .ng-placeholder{color:var(--header-item-font-color)}.top-menu-search #global-search-input.-expanded{width:calc(160px + 13vw);background:#fff;border-radius:4px;color:var(--header-search-field-font-color)}.top-menu-search #global-search-input.-expanded .ng-clear-wrapper,.top-menu-search #global-search-input.-expanded .ng-placeholder,.top-menu-search #global-search-input.-expanded input{color:var(--header-search-field-font-color)}.top-menu-search #global-search-input.-expanded .scroll-host{scrollbar-color:transparent transparent;scrollbar-width:thin;max-height:80vh;height:auto}.top-menu-search #global-search-input.-expanded .scroll-host::-webkit-scrollbar{height:10px;width:10px}.top-menu-search #global-search-input.-expanded .scroll-host::-webkit-scrollbar-track{background:0 0}.top-menu-search #global-search-input.-expanded .scroll-host::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.top-menu-search #global-search-input.-expanded .scroll-host:hover{scrollbar-color:#ddd transparent}.top-menu-search #global-search-input.-expanded .scroll-host:hover::-webkit-scrollbar-thumb{visibility:visible}.top-menu-search #global-search-input.-expanded .scroll-host .ng-option{border-bottom:1px solid #eaeaea;white-space:normal;padding:5px 10px}.top-menu-search #global-search-input.-expanded .scroll-host .ng-option:last-child{border-bottom:none}.top-menu-search #global-search-input.-expanded .scroll-host .ng-option.ng-option-marked{background-color:var(--drop-down-hover-bg-color);color:var(--header-drop-down-item-font-hover-color)}.top-menu-search #global-search-input.-expanded .scroll-host .ng-option.ng-option-disabled{display:none}.top-menu-search #global-search-input.-expanded .scroll-host .ng-option.ng-option-selected{background-color:var(--drop-down-selected-bg-color);color:var(--header-drop-down-item-font-hover-color)}.global-search--wp-id{color:var(--gray-dark);font-size:13px;white-space:nowrap}.top-menu-search--input .ng-spinner-loader{position:relative;right:14px}.global-search--option-wrapper{padding:5px;line-height:25px;min-height:35px;word-break:break-word}.global-search--project-scope{position:absolute;right:7px;border:1px solid var(--button--border-color);font-size:13px;background:var(--button--background-color);border-radius:2px;padding:0 4px;color:var(--body-font-color)}"],["@media only screen and (max-width:679px){#top-menu.-global-search-expanded #account-nav-left,#top-menu.-global-search-expanded #account-nav-right,#top-menu.-global-search-expanded #main-menu-toggle{display:none}#top-menu.-global-search-expanded .top-menu-search{width:100vw;margin:0;padding-right:15px}#top-menu.-global-search-expanded .top-menu-search .top-menu-search--button{display:none;color:var(--header-item-font-color)}#top-menu #global-search-input{display:none}#top-menu #global-search-input.-expanded{display:block;width:calc(100vw - 50px);min-width:unset;position:unset}#top-menu #global-search-input.-expanded .scroll-host{max-height:calc(100vh - var(--header-height))}#top-menu #global-search-input.-expanded .ng-clear-wrapper{width:40px;right:0}#top-menu #global-search-input.-expanded .ng-select-bottom{height:calc(100vh - var(--header-height));overflow-y:auto;margin:0}#top-menu #global-search-input.-expanded .ng-select-container{height:36px!important;border-radius:4px}#top-menu #global-search-input.-expanded .ng-input input{height:36px;font-size:16px}#top-menu .top-menu-search--back-button{display:initial;width:50px;text-align:center;color:var(--header-item-font-color)}#top-menu .top-menu-search--back-button:active,#top-menu .top-menu-search--back-button:focus,#top-menu .top-menu-search--back-button:hover{text-decoration:none}#top-menu .top-menu-search--loading{top:var(--header-height) 1px}#top-menu .top-menu-search--button.-input-focused{color:var(--header-item-font-color)}}"]],zT=l["ɵcrt"]({encapsulation:2,styles:BT,data:{}});function WT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","top-menu-search--back-button"],["href","#"]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.toggleMobileSearch()&&l);return l},null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-arrow-left1"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,l["ɵinlineInterpolate"](1,"",t.text.close_search,""))})}function QT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","global-search--option"],["tabindex","-1"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"div",[["class","global-search--option-wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"span",[["class","global-search--search-term"]],null,null,null,null,null)),(e()(),l["ɵted"](4,null,[" "," "])),(e()(),l["ɵeld"](5,0,null,null,1,"span",[["class","global-search--project-scope"]],[[8,"title",0]],null,null,null,null)),(e()(),l["ɵted"](6,null,[" "," ↵ "]))],null,function(e,n){e(n,4,0,n.component.currentValue),e(n,5,0,l["ɵinlineInterpolate"](1,"",n.parent.context.item.projectScope,"")),e(n,6,0,n.parent.context.item.text)})}function UT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","global-search--option"],["tabindex","-1"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,8,"a",[["class","global-search--option-wrapper"]],[[8,"href",4]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.redirectToWp(e.parent.context.item.id,t)&&l);return l},null,null)),(e()(),l["ɵeld"](2,0,null,null,4,"span",[["class","global-search--wp-id"]],[[8,"title",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵdid"](5,4734976,null,0,LT.a,[l.ElementRef,l.Renderer2],{term:[0,"term"]},null),(e()(),l["ɵted"](6,null,[" #"," "])),(e()(),l["ɵeld"](7,0,null,null,2,"span",[["class","global-search--wp-subject"]],null,null,null,null,null)),l["ɵdid"](8,4734976,null,0,LT.a,[l.ElementRef,l.Renderer2],{term:[0,"term"]},null),(e()(),l["ɵted"](9,null,[" "," "]))],function(e,n){var t=n.component;e(n,4,0,"global-search--wp-id",t.statusHighlighting(n.parent.context.item.statusId)),e(n,5,0,t.currentValue),e(n,8,0,t.currentValue)},function(e,n){e(n,1,0,n.component.wpPath(n.parent.context.item.id)),e(n,2,0,l["ɵinlineInterpolate"](1,"",n.parent.context.item.status,"")),e(n,6,0,n.parent.context.item.id),e(n,9,0,n.parent.context.item.subject)})}function GT(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,QT)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l["ɵand"](0,[["workPackageItemTemplate",2]],null,0,null,UT))],function(e,n){e(n,1,0,!n.context.item.id,l["ɵnov"](n,2))},null)}function KT(e){return l["ɵvid"](2,[l["ɵqud"](402653184,1,{btn:0}),l["ɵqud"](402653184,2,{ngSelectComponent:0}),(e()(),l["ɵeld"](2,0,null,null,29,"div",[["class","top-menu-search"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,WT)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](5,0,null,null,22,"ng-select",[["accesskey","4"],["class","ng-select"],["id","global-search-input"],["name","global-search-input"],["role","listbox"]],[[2,"-expanded",null],[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null]],[[null,"focus"],[null,"blur"],[null,"search"],[null,"open"],[null,"close"],[null,"change"],[null,"keydown.enter"],[null,"keydown.escape"],[null,"clear"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"keydown"===n&&(i=!1!==l["ɵnov"](e,10).handleKeyDown(t)&&i);"focus"===n&&(i=!1!==r.onFocus()&&i);"blur"===n&&(i=!1!==r.onFocusOut()&&i);"search"===n&&(i=!1!==r.search(t)&&i);"open"===n&&(i=!1!==r.openCloseMenu(r.currentValue)&&i);"close"===n&&(i=!1!==(l["ɵnov"](e,10).searchTerm=r.currentValue)&&i);"change"===n&&(i=!1!==r.onChange(t)&&i);"keydown.enter"===n&&(i=!1!==r.onEnterBeforeResultsLoaded()&&i);"keydown.escape"===n&&(i=!1!==r.blur()&&i);"clear"===n&&(i=!1!==r.clearSearch()&&i);return i},qt.b,qt.a)),l["ɵprd"](5120,null,Ht.g,function(e){return[e]},[Lt.a]),l["ɵprd"](4608,null,Lt.f,Lt.f,[]),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](9,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),l["ɵdid"](10,4964352,[[2,4],["select",4]],12,Lt.a,[[8,null],[8,null],Lt.b,Lt.d,l.ElementRef,l.ChangeDetectorRef,Lt.m],{placeholder:[0,"placeholder"],loading:[1,"loading"],openOnEnter:[2,"openOnEnter"],searchFn:[3,"searchFn"],typeahead:[4,"typeahead"],items:[5,"items"]},{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear"}),l["ɵqud"](335544320,3,{optionTemplate:0}),l["ɵqud"](335544320,4,{optgroupTemplate:0}),l["ɵqud"](335544320,5,{labelTemplate:0}),l["ɵqud"](335544320,6,{multiLabelTemplate:0}),l["ɵqud"](603979776,7,{headerTemplate:0}),l["ɵqud"](603979776,8,{footerTemplate:0}),l["ɵqud"](335544320,9,{notFoundTemplate:0}),l["ɵqud"](335544320,10,{typeToSearchTemplate:0}),l["ɵqud"](335544320,11,{loadingTextTemplate:0}),l["ɵqud"](335544320,12,{tagTemplate:0}),l["ɵqud"](335544320,13,{loadingSpinnerTemplate:0}),l["ɵqud"](603979776,14,{ngOptions:1}),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),l["ɵpid"](131072,$t.AsyncPipe,[l.ChangeDetectorRef]),l["ɵdid"](25,4210688,null,0,Gi,[m.a,l.ElementRef],null,null),(e()(),l["ɵand"](0,[[3,2]],null,1,null,GT)),l["ɵdid"](27,16384,null,0,Lt.h,[l.TemplateRef],null,null),(e()(),l["ɵeld"](28,0,[[1,0],["btn",1]],null,3,"a",[["class","top-menu-search--button search-form-normal"],["id","top-menu-search-button"],["role","button"],["tabindex","0"]],[[8,"title",0],[2,"-input-focused",null]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,29).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,29).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.handleClick(t)&&i);return i},null,null)),l["ɵdid"](29,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](30,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","icon5 icon-search ellipsis"]],null,null,null,hl,dl)),l["ɵdid"](31,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null)],function(e,n){var t=n.component;e(n,4,0,t.expanded);e(n,9,0,"top-menu-search--input");e(n,10,0,l["ɵinlineInterpolate"](1,"",t.text.search_dots,""),l["ɵunv"](n,10,1,l["ɵnov"](n,23).transform(t.requests.loading$)),!1,t.customSearchFn,t.requests.input$,l["ɵunv"](n,10,5,l["ɵnov"](n,24).transform(t.requests.output$)));e(n,31,0,"icon5 icon-search ellipsis")},function(e,n){var t=n.component;e(n,5,0,t.expanded,!l["ɵnov"](n,10).multiple,l["ɵnov"](n,10).typeahead,l["ɵnov"](n,10).multiple,l["ɵnov"](n,10).addTag,l["ɵnov"](n,10).searchable,l["ɵnov"](n,10).clearable,l["ɵnov"](n,10).isOpen,l["ɵnov"](n,10).disabled,l["ɵnov"](n,10).filtered),e(n,28,0,l["ɵinlineInterpolate"](1,"",t.text.search,""),t.expanded)})}var YT=l["ɵccf"]("global-search-input",HT,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"global-search-input",[],null,[[null,"click"]],function(e,n,t){var i=!0;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);return i},KT,zT)),l["ɵdid"](1,245760,null,0,HT,[l.ElementRef,A.a,ge,Q,$T,Qn,dt,l.ChangeDetectorRef,Mn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ZT=function(){function e(e,n,t,l,i,r,o,u,a,s,c){this.FocusHelper=e,this.elementRef=n,this.renderer=t,this.I18n=l,this.halResourceService=i,this.globalSearchService=r,this.wpTableFilters=o,this.querySpace=u,this.wpFilters=a,this.cdRef=s,this.UrlParamsHelper=c,this.resultsHidden=!1,this.tableConfiguration={actionsColumnEnabled:!1,columnMenuEnabled:!0,contextMenuEnabled:!1,inlineCreateEnabled:!1,withFilters:!0,showFilterButton:!0,filterButtonText:this.I18n.t("js.button_advanced_filter")}}return e.prototype.ngAfterViewInit=function(){var e=this;Object(Ac.a)(this.globalSearchService.searchTerm$,this.globalSearchService.projectScope$).pipe(Object(h_.a)(1),Object(ft.a)(),Object(at.a)(10),Object(Gn.b)(this)).subscribe(function(n){n[0],n[1];e.wpFilters.visible=!1,e.setQueryProps()}),this.globalSearchService.resultsHidden$.pipe(Object(Gn.b)(this)).subscribe(function(n){return e.resultsHidden=n})},e.prototype.ngOnInit=function(){this.setQueryProps()},e.prototype.ngOnDestroy=function(){},e.prototype.setQueryProps=function(){var e=[],n=["id","project","subject","type","status","updatedAt"];this.globalSearchService.searchTerm.length>0&&e.push({search:{operator:"**",values:[this.globalSearchService.searchTerm]}}),"current_project"===this.globalSearchService.projectScope&&(e.push({subprojectId:{operator:"!*",values:[]}}),n=["id","subject","type","status","updatedAt"]),""===this.globalSearchService.projectScope&&e.push({subprojectId:{operator:"*",values:[]}}),this.queryProps={"columns[]":n,filters:JSON.stringify(e),sortBy:JSON.stringify([["updatedAt","desc"]]),showHierarchies:!1}},e}();Tt.DynamicBootstrapper.register({selector:"global-search-work-packages",cls:ZT});var JT=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function XT(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"wp-embedded-table",[],null,null,null,yb,gb)),l["ɵdid"](1,4964352,null,0,gt,[l.Injector],{providedConfiguration:[0,"providedConfiguration"],queryProps:[1,"queryProps"]},null)],function(e,n){var t=n.component;e(n,1,0,t.tableConfiguration,t.queryProps)},null)}function eO(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,XT)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,!n.component.resultsHidden)},null)}l["ɵccf"]("global-search-work-packages",ZT,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"global-search-work-packages",[],null,null,null,eO,JT)),l["ɵdid"](1,4440064,null,0,ZT,[m.a,l.ElementRef,l.Renderer2,A.a,Q,$T,en,b,Ze,l.ChangeDetectorRef,Ne],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]);var nO=function(){};Tt.DynamicBootstrapper.register({selector:"global-search-work-packages-entry",cls:nO});var tO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function lO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,38,null,null,null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](135680,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,Ep,Ep,[b]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](34,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](512,null,en,en,[d,b]),l["ɵprd"](512,null,Ze,Ze,[]),(e()(),l["ɵeld"](37,0,null,null,1,"global-search-work-packages",[],null,null,null,eO,JT)),l["ɵdid"](38,4440064,null,0,ZT,[m.a,l.ElementRef,l.Renderer2,A.a,Q,$T,en,b,Ze,l.ChangeDetectorRef,Ne],null,null)],function(e,n){e(n,38,0)},null)}var iO=l["ɵccf"]("global-search-work-packages-entry",nO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"global-search-work-packages-entry",[],null,null,null,lO,tO)),l["ɵdid"](1,49152,null,0,nO,[],null,null)],null,null)},{},{},[]),rO=function(e){function n(n){var t=e.call(this)||this;return t.globalSearchService=n,t.classes=["global-search--tabs","scrollable-tabs"],t}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.currentTabSub=this.globalSearchService.currentTab$.subscribe(function(n){e.currentTabId=n}),this.tabsSub=this.globalSearchService.tabs$.subscribe(function(n){e.tabs=n})},n.prototype.clickTab=function(n){e.prototype.clickTab.call(this,n),this.globalSearchService.currentTab=n,this.globalSearchService.submitSearch()},n.prototype.ngOnDestroy=function(){this.currentTabSub.unsubscribe(),this.tabsSub.unsubscribe()},n}(function(){function e(){this.currentTabId="",this.tabs=[],this.classes=["scrollable-tabs"],this.hideLeftButton=!0,this.hideRightButton=!0}return e.prototype.ngAfterViewInit=function(){this.container=this.scrollContainer.nativeElement,this.pane=this.scrollPane.nativeElement,this.determineScrollButtonVisibility(),this.scrollIntoVisibleArea(this.currentTabId)},e.prototype.clickTab=function(e){this.currentTabId=e},e.prototype.onScroll=function(e){this.determineScrollButtonVisibility()},e.prototype.determineScrollButtonVisibility=function(){this.hideLeftButton=this.pane.scrollLeft<=0,this.hideRightButton=this.pane.scrollWidth-this.pane.scrollLeft<=this.container.clientWidth},e.prototype.scrollRight=function(){this.pane.scrollLeft+=this.container.clientWidth},e.prototype.scrollLeft=function(){this.pane.scrollLeft-=this.container.clientWidth},e.prototype.scrollIntoVisibleArea=function(e){var n=jQuery(this.pane).find("[tab-id="+e+"]"),t=n.position().left+Number(n.outerWidth());this.pane.scrollLeft+this.container.clientWidth<t&&(this.pane.scrollLeft=t-this.container.clientWidth+40)},e}());Tt.DynamicBootstrapper.register({selector:"global-search-tabs",cls:rO});var oO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function uO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"li",[],[[2,"selected",null],[1,"tab-id",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"a",[["href","#"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.clickTab(e.context.$implicit.id)&&l);return l},null,null))],null,function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.id===t.currentTabId,n.context.$implicit.id),e(n,1,0,n.context.$implicit.name)})}function aO(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{scrollContainer:0}),l["ɵqud"](402653184,2,{scrollPane:0}),l["ɵqud"](402653184,3,{scrollRightBtn:0}),l["ɵqud"](402653184,4,{scrollLeftBtn:0}),(e()(),l["ɵeld"](4,0,[[1,0],["scrollContainer",1]],null,9,"div",[],null,null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](6,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),(e()(),l["ɵeld"](7,0,[[2,0],["scrollPane",1]],null,2,"ul",[["class","tabrow"]],null,[[null,"scroll"]],function(e,n,t){var l=!0,i=e.component;"scroll"===n&&(l=!1!==i.onScroll(t)&&l);return l},null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,uO)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](10,0,[[4,0],["scrollLeftBtn",1]],null,1,"div",[["class","scrollable-tabs--button -left"]],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.scrollLeft()&&l);return l},null,null)),(e()(),l["ɵeld"](11,0,null,null,0,"span",[["class","icon-arrow-left2"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,[[3,0],["scrollRightBtn",1]],null,1,"div",[["class","scrollable-tabs--button -right"]],[[8,"hidden",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.scrollRight()&&l);return l},null,null)),(e()(),l["ɵeld"](13,0,null,null,0,"span",[["class","icon-arrow-right2"]],null,null,null,null,null))],function(e,n){var t=n.component;e(n,6,0,t.classes),e(n,9,0,t.tabs)},function(e,n){var t=n.component;e(n,10,0,t.hideLeftButton),e(n,12,0,t.hideRightButton)})}var sO=l["ɵccf"]("global-search-tabs",rO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"global-search-tabs",[],null,null,null,aO,oO)),l["ɵdid"](1,4440064,null,0,rO,[$T],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cO=function(){function e(e,n,t,l,i){this.elementRef=e,this.cdRef=n,this.globalSearchService=t,this.I18n=l,this.injector=i,this.currentProjectService=this.injector.get(Qn),this.text={all_projects:this.I18n.t("js.global_search.title.all_projects"),project_and_subprojects:this.I18n.t("js.global_search.title.project_and_subprojects"),search_for:this.I18n.t("js.global_search.title.search_for"),in:this.I18n.t("js.label_in")}}return e.prototype.ngOnInit=function(){var e=this;Object(Ac.a)(this.globalSearchService.searchTerm$,this.globalSearchService.projectScope$).pipe(Object(ft.a)(),Object(Gn.b)(this)).subscribe(function(n){var t=n[0],l=n[1];e.searchTerm=t,e.project=e.projectText(l),e.searchTitle=e.text.search_for+" "+e.searchTerm+" "+(""===e.project?"":e.text.in)+" "+e.project,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e.prototype.projectText=function(e){var n=this.currentProjectService.name?this.currentProjectService.name:"";switch(e){case"all":return this.text.all_projects;case"current_project":return n;case"":return n+" "+this.text.project_and_subprojects;default:return""}},e}();Tt.DynamicBootstrapper.register({selector:"global-search-title",cls:cO});var dO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function pO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","toolbar-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,8,"div",[["class","title-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,6,"h2",[],[[1,"title",0]],null,null,null,null)),(e()(),l["ɵted"](4,null,[" "," "])),(e()(),l["ɵeld"](5,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),l["ɵted"](6,null,['"','"'])),(e()(),l["ɵted"](7,null,[" "," "])),(e()(),l["ɵeld"](8,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),l["ɵted"](9,null,["",""])),(e()(),l["ɵeld"](10,0,null,null,0,"ul",[["class","toolbar-items"]],null,null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.searchTitle),e(n,4,0,t.text.search_for),e(n,6,0,t.searchTerm),e(n,7,0,""===t.project?"":t.text.in),e(n,9,0,t.project)})}var hO=l["ɵccf"]("global-search-title",cO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"global-search-title",[],null,null,null,pO,dO)),l["ɵdid"](1,245760,null,0,cO,[l.ElementRef,l.ChangeDetectorRef,$T,A.a,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{searchTerm:"searchTerm",project:"project",projectScope:"projectScope",searchTitle:"searchTitle"},{},[]),fO=function(e){function n(n,t,l){var i=e.call(this,n)||this;return i.documentElement=n,i.confirmDialog=t,i.I18n=l,i}return a.d(n,e),n.prototype.showEEOnlyHint=function(){this.confirmDialog.confirm({text:{title:this.I18n.t("js.types.attribute_groups.upgrade_to_ee"),text:this.I18n.t("js.types.attribute_groups.upgrade_to_ee_text"),button_continue:this.I18n.t("js.types.attribute_groups.more_information"),button_cancel:this.I18n.t("js.types.attribute_groups.nevermind")}}).then(function(){window.location.href="https://www.openproject.org/enterprise-edition/?utm_source=unknown&utm_medium=community-edition&utm_campaign=form-configuration"})},n}(Ge),gO=function(){function e(e){this.bannerService=e,this.placeholder="",this.onValueChange=new l.EventEmitter,this.editing=!1}return e.prototype.ngOnInit=function(){this.editedName=this.name,this.name&&0!==this.name.length||this.startEditing()},e.prototype.startEditing=function(){var e=this;this.bannerService.conditional(function(){return e.bannerService.showEEOnlyHint()},function(){e.editing=!0})},e.prototype.saveEdition=function(e){return this.leaveEditingMode(),this.name=this.editedName.trim(),""!==this.name&&this.onValueChange.emit(this.name),e.preventDefault(),e.stopPropagation(),!1},e.prototype.reset=function(){this.editing=!1,this.editedName=this.name},e.prototype.leaveEditingMode=function(){null!=this.editedName&&this.editedName.trim().length>0&&(this.editing=!1)},e}(),mO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function vO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"div",[["class","group-edit-handler"]],[[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.startEditing()&&l);return l},null,null))],null,function(e,n){e(n,0,0,n.component.name)})}function bO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,[["nameInput",1]],null,6,"input",[["autoFocus",""],["class","group-edit-in-place--input"],["type","text"]],[[1,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown.escape"],[null,"keydown.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,1)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,1).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,1)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,1)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.editedName=t)&&i);"keydown.escape"===n&&(i=!1!==r.reset()&&i);"keydown.enter"===n&&(i=!1!==r.saveEdition(t)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](3,671744,null,0,Ht.l,[[8,null],[8,null],[8,null],[6,Ht.g]],{model:[0,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](5,16384,null,0,Ht.i,[[4,Ht.h]],null,null),l["ɵdid"](6,1064960,null,0,Df,[l.ElementRef,m.a],null,null)],function(e,n){e(n,3,0,n.component.editedName)},function(e,n){e(n,0,0,n.component.placeholder,l["ɵnov"](n,5).ngClassUntouched,l["ɵnov"](n,5).ngClassTouched,l["ɵnov"](n,5).ngClassPristine,l["ɵnov"](n,5).ngClassDirty,l["ɵnov"](n,5).ngClassValid,l["ɵnov"](n,5).ngClassInvalid,l["ɵnov"](n,5).ngClassPending)})}function yO(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,vO)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,bO)),l["ɵdid"](3,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.editing),e(n,3,0,t.editing)},null)}l["ɵccf"]("group-edit-in-place",gO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"group-edit-in-place",[],null,null,null,yO,mO)),l["ɵdid"](1,114688,null,0,gO,[fO],null,null)],function(e,n){e(n,1,0)},null)},{placeholder:"placeholder",name:"name"},{onValueChange:"onValueChange"},[]);var wO=t("s/lM"),CO=function(){function e(e,n){this.I18n=e,this.cdRef=n,this.deleteGroup=new l.EventEmitter,this.removeAttribute=new l.EventEmitter,this.text={custom_field:this.I18n.t("js.admin.type_form.custom_field")}}return e.prototype.rename=function(e){this.group.name=e,delete this.group.key,this.cdRef.detectChanges()},e.prototype.removeFromGroup=function(e){this.group.attributes=this.group.attributes.filter(function(n){return n!==e}),this.removeAttribute.emit(e)},e}(),kO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function IO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","attribute-cf-label"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.custom_field)})}function jO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","type-form-conf-attribute"]],[[1,"data-key",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[["class","attribute-handle icon-drag-handle"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"span",[["class","attribute-name"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,IO)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](6,0,null,null,0,"span",[["class","delete-attribute icon-small icon-close"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.removeFromGroup(e.context.$implicit)&&l);return l},null,null))],function(e,n){e(n,5,0,n.context.$implicit.is_cf)},function(e,n){e(n,0,0,n.context.$implicit.key),e(n,3,0,n.context.$implicit.translation)})}function RO(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,9,"div",[["class","type-form-conf-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[["class","group-head"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["class","group-handle icon-drag-handle"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"group-edit-in-place",[["class","group-name"]],null,[[null,"onValueChange"]],function(e,n,t){var l=!0,i=e.component;"onValueChange"===n&&(l=!1!==i.rename(t)&&l);return l},yO,mO)),l["ɵdid"](4,114688,null,0,gO,[fO],{name:[0,"name"]},{onValueChange:"onValueChange"}),(e()(),l["ɵeld"](5,0,null,null,0,"span",[["class","delete-group icon-small icon-close"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.deleteGroup.emit()&&l);return l},null,null)),(e()(),l["ɵeld"](6,0,null,null,3,"div",[["class","attributes"],["dragula","attributes"]],null,[[null,"dragulaModelChange"]],function(e,n,t){var l=!0,i=e.component;"dragulaModelChange"===n&&(l=!1!==(i.group.attributes=t)&&l);return l},null,null)),l["ɵdid"](7,671744,null,0,wO.a,[l.ElementRef,wO.c],{dragula:[0,"dragula"],dragulaModel:[1,"dragulaModel"]},{dragulaModelChange:"dragulaModelChange"}),(e()(),l["ɵand"](16777216,null,null,1,null,jO)),l["ɵdid"](9,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,4,0,t.group.name);e(n,7,0,"attributes",t.group.attributes),e(n,9,0,t.group.attributes)},null)}l["ɵccf"]("type-form-attribute-group",CO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"type-form-attribute-group",[],null,null,null,RO,kO)),l["ɵdid"](1,49152,null,0,CO,[A.a,l.ChangeDetectorRef],null,null)],null,null)},{group:"group"},{deleteGroup:"deleteGroup",removeAttribute:"removeAttribute"},[]);var PO=function(){function e(e,n){this.I18n=e,this.cdRef=n,this.text={edit_query:this.I18n.t("js.admin.type_form.edit_query")},this.editQuery=new l.EventEmitter,this.deleteGroup=new l.EventEmitter}return e.prototype.rename=function(e){this.group.name=e,this.cdRef.detectChanges()},e}(),SO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function _O(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","type-form-conf-group type-form-query-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,4,"div",[["class","group-head"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"span",[["class","group-handle icon-drag-handle"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"group-edit-in-place",[["class","group-name"]],null,[[null,"onValueChange"]],function(e,n,t){var l=!0,i=e.component;"onValueChange"===n&&(l=!1!==i.rename(t)&&l);return l},yO,mO)),l["ɵdid"](4,114688,null,0,gO,[fO],{name:[0,"name"]},{onValueChange:"onValueChange"}),(e()(),l["ɵeld"](5,0,null,null,0,"span",[["class","delete-group icon-small icon-close"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.deleteGroup.emit()&&l);return l},null,null)),(e()(),l["ɵeld"](6,0,null,null,4,"div",[["class","type-form-query"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,3,"span",[["class","type-form-query-group--edit-button"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.editQuery.emit()&&l);return l},null,null)),(e()(),l["ɵeld"](8,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-edit"]],null,null,null,hl,dl)),l["ɵdid"](9,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵted"](10,null,[" "," "]))],function(e,n){e(n,4,0,n.component.group.name);e(n,9,0,"button--icon icon-edit")},function(e,n){e(n,10,0,n.component.text.edit_query)})}l["ɵccf"]("type-form-query-group",PO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"type-form-query-group",[],null,null,null,_O,SO)),l["ɵdid"](1,49152,null,0,PO,[A.a,l.ChangeDetectorRef],null,null)],null,null)},{group:"group"},{editQuery:"editQuery",deleteGroup:"deleteGroup"},[]);var xO=function(){function e(e,n,t,l,i,r,o){this.elementRef=e,this.I18n=n,this.Gon=t,this.dragula=l,this.confirmDialog=i,this.notificationsService=r,this.externalRelationQuery=o,this.text={drag_to_activate:this.I18n.t("js.admin.type_form.drag_to_activate"),reset:this.I18n.t("js.admin.type_form.reset_to_defaults"),label_group:this.I18n.t("js.label_group"),new_group:this.I18n.t("js.admin.type_form.new_group"),label_inactive:this.I18n.t("js.admin.type_form.inactive"),custom_field:this.I18n.t("js.admin.type_form.custom_field"),add_group:this.I18n.t("js.admin.type_form.add_group"),add_table:this.I18n.t("js.admin.type_form.add_table")},this.groups=[],this.inactives=[]}return e.prototype.ngOnInit=function(){var e=this;this.element=this.elementRef.nativeElement,this.no_filter_query=this.element.dataset.noFilterQuery,this.form=jQuery(this.element).closest("form"),this.form.on("submit.typeformupdater",function(){return e.updateHiddenFields(),!0}),this.dragula.createGroup("groups",{moves:function(e,n,t){return t.classList.contains("group-handle")}}),this.dragula.createGroup("attributes",{moves:function(e,n,t){return t.classList.contains("attribute-handle")}}),this.dragula.dropModel("attributes").pipe(Object(Ye.a)(Object(Gn.a)(this))).subscribe(function(e){console.log(e)}),this.groups=JSON.parse(this.element.dataset.activeGroups),this.inactives=JSON.parse(this.element.dataset.inactiveAttributes);var n=this;this.autoscroll=new ev([document.getElementById("content-wrapper")],{margin:25,maxSpeed:10,scrollWhenOutside:!0,autoScroll:function(){var e=n.groupsDrake&&n.groupsDrake.dragging,t=n.attributeDrake&&n.attributeDrake.dragging;return this.down&&(e||t)}})},e.prototype.ngOnDestroy=function(){},e.prototype.deactivateAttribute=function(e){this.updateInactives(this.inactives.concat(e))},e.prototype.addGroupAndOpenQuery=function(){var e=this.createGroup("query");this.editQuery(e)},e.prototype.editQuery=function(e){var n={"display-settings":I18n.t("js.work_packages.table_configuration.embedded_tab_disabled"),timelines:I18n.t("js.work_packages.table_configuration.embedded_tab_disabled")};this.externalRelationQuery.show(JSON.parse(e.query),function(n){return e.query=JSON.stringify(n)},n)},e.prototype.deleteGroup=function(e){return"attribute"===e.type&&this.updateInactives(this.inactives.concat(e.attributes)),this.groups=this.groups.filter(function(n){return n!==e}),e},e.prototype.createGroup=function(e,n){void 0===n&&(n="");var t={type:e,name:"",key:null,query:this.no_filter_query,attributes:[]};return this.groups.unshift(t),t},e.prototype.resetToDefault=function(e){var n=this;return this.confirmDialog.confirm({text:{title:this.I18n.t("js.types.attribute_groups.reset_title"),text:this.I18n.t("js.types.attribute_groups.confirm_reset"),button_continue:this.I18n.t("js.label_reset")}}).then(function(){n.form.find("input#type_attribute_groups").val(JSON.stringify([])),n.form.off("submit.typeformupdater"),n.form.trigger("submit")}),e.preventDefault(),!1},e.prototype.updateInactives=function(e){this.inactives=e.slice().sort(function(e,n){return e.translation.localeCompare(n.translation)})},e.prototype.updateHiddenFields=function(){this.form.find(".admin-type-form--hidden-field").val(JSON.stringify(this.groups))},e}();Tt.DynamicBootstrapper.register({cls:xO,selector:"admin-type-form-configuration"});var TO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function OO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"type-form-attribute-group",[],null,[[null,"removeAttribute"],[null,"deleteGroup"]],function(e,n,t){var l=!0,i=e.component;"removeAttribute"===n&&(l=!1!==i.deactivateAttribute(t)&&l);"deleteGroup"===n&&(l=!1!==i.deleteGroup(e.parent.context.$implicit)&&l);return l},RO,kO)),l["ɵdid"](1,49152,null,0,CO,[A.a,l.ChangeDetectorRef],{group:[0,"group"]},{deleteGroup:"deleteGroup",removeAttribute:"removeAttribute"})],function(e,n){e(n,1,0,n.parent.context.$implicit)},null)}function EO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"type-form-query-group",[],null,[[null,"editQuery"],[null,"deleteGroup"]],function(e,n,t){var l=!0,i=e.component;"editQuery"===n&&(l=!1!==i.editQuery(e.parent.context.$implicit)&&l);"deleteGroup"===n&&(l=!1!==i.deleteGroup(e.parent.context.$implicit)&&l);return l},_O,SO)),l["ɵdid"](1,49152,null,0,PO,[A.a,l.ChangeDetectorRef],{group:[0,"group"]},{editQuery:"editQuery",deleteGroup:"deleteGroup"})],function(e,n){e(n,1,0,n.parent.context.$implicit)},null)}function DO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,OO)),l["ɵdid"](2,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,EO)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](0,null,null,0))],function(e,n){e(n,2,0,"attribute"===n.context.$implicit.type),e(n,4,0,"query"===n.context.$implicit.type)},null)}function FO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[["class","attribute-cf-label"]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.custom_field)})}function NO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,5,"div",[["class","type-form-conf-attribute"]],[[1,"data-key",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"span",[["class","attribute-handle icon-drag-handle"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"span",[["class","attribute-name"]],null,null,null,null,null)),(e()(),l["ɵted"](3,null,[" "," "])),(e()(),l["ɵand"](16777216,null,null,1,null,FO)),l["ɵdid"](5,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,5,0,n.context.$implicit.is_cf)},function(e,n){e(n,0,0,n.context.$implicit.key),e(n,3,0,n.context.$implicit.translation)})}function AO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,21,"div",[["class","toolbar-container -with-dropdown"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,20,"div",[["class","toolbar"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,19,"ul",[["class","toolbar-items"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,4,"li",[["class","toolbar-item"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,3,"button",[["class","form-configuration--reset button"],["type","button -alt-highlight"]],null,[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.resetToDefault(t)&&l);return l},null,null)),(e()(),l["ɵeld"](5,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-undo"]],null,null,null,hl,dl)),l["ɵdid"](6,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](7,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,13,"li",[["class","toolbar-item drop-down"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,5,"a",[["aria-haspopup","true"],["class","form-configuration--add-group button -alt-highlight"],["ng-click","showGroupsContextMenu($event)"]],null,null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-add"]],null,null,null,hl,dl)),l["ɵdid"](11,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](12,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--dropdown-indicator"]],null,null,null,hl,dl)),l["ɵdid"](14,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](15,0,null,null,6,"ul",[["class","menu-drop-down-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](16,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](17,0,null,null,1,"a",[["class","form-configuration--add-group"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,18).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,18).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.createGroup("attribute","")&&i);return i},null,null)),l["ɵdid"](18,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](19,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),l["ɵeld"](20,0,null,null,1,"a",[["class","form-configuration--add-group"]],[[8,"textContent",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,21).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,21).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.addGroupAndOpenQuery()&&i);return i},null,null)),l["ɵdid"](21,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](22,0,null,null,15,"div",[["class","grid-block wrap"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,4,"div",[["class","grid-content small-12 medium-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](24,0,null,null,3,"div",[["dragula","groups"],["id","draggable-groups"]],null,[[null,"dragulaModelChange"]],function(e,n,t){var l=!0,i=e.component;"dragulaModelChange"===n&&(l=!1!==(i.groups=t)&&l);return l},null,null)),l["ɵdid"](25,671744,null,0,wO.a,[l.ElementRef,wO.c],{dragula:[0,"dragula"],dragulaModel:[1,"dragulaModel"]},{dragulaModelChange:"dragulaModelChange"}),(e()(),l["ɵand"](16777216,null,null,1,null,DO)),l["ɵdid"](27,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["ɵeld"](28,0,null,null,9,"div",[["class","grid-content small-12 medium-6"]],null,null,null,null,null)),(e()(),l["ɵeld"](29,0,null,null,8,"div",[["id","type-form-conf-inactive-group"]],null,null,null,null,null)),(e()(),l["ɵeld"](30,0,null,null,3,"div",[["class","group-head"]],null,null,null,null,null)),(e()(),l["ɵeld"](31,0,null,null,0,"span",[["class","group-name"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵted"](-1,null,[" "])),(e()(),l["ɵeld"](33,0,null,null,0,"span",[["class","advice"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](34,0,null,null,3,"div",[["class","attributes"],["dragula","attributes"]],null,[[null,"dragulaModelChange"]],function(e,n,t){var l=!0,i=e.component;"dragulaModelChange"===n&&(l=!1!==(i.inactives=t)&&l);return l},null,null)),l["ɵdid"](35,671744,null,0,wO.a,[l.ElementRef,wO.c],{dragula:[0,"dragula"],dragulaModel:[1,"dragulaModel"]},{dragulaModelChange:"dragulaModelChange"}),(e()(),l["ɵand"](16777216,null,null,1,null,NO)),l["ɵdid"](37,278528,null,0,$t.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,6,0,"button--icon icon-undo");e(n,11,0,"button--icon icon-add");e(n,14,0,"button--dropdown-indicator");e(n,25,0,"groups",t.groups),e(n,27,0,t.groups);e(n,35,0,"attributes",t.inactives),e(n,37,0,t.inactives)},function(e,n){var t=n.component;e(n,7,0,t.text.reset),e(n,12,0,t.text.label_group),e(n,17,0,t.text.add_group),e(n,20,0,t.text.add_table),e(n,31,0,t.text.label_inactive),e(n,33,0,t.text.drag_to_activate)})}var VO,MO=l["ɵccf"]("admin-type-form-configuration",xO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"admin-type-form-configuration",[],null,null,null,AO,TO)),l["ɵprd"](4608,null,fO,fO,[$t.DOCUMENT,pm,A.a]),l["ɵdid"](2,245760,null,0,xO,[l.ElementRef,A.a,Ir,wO.c,pm,Vn,kt],null,null)],function(e,n){e(n,2,0)},null)},{},{},[]);!function(e){function n(e,n){var l=document.createElement("canvas"),i=l.getContext("2d"),r=n.width,o=n.height;r>o?r>e&&(o*=e/r,r=e):o>e&&(r*=e/o,o=e),l.width=r,l.height=o,i.drawImage(n,0,0,r,o);var u=l.toDataURL("image/jpeg");return[u,t(u)]}function t(e){for(var n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],l=n.length,i=new Uint8Array(l),r=0;r<l;r++)i[r]=n.charCodeAt(r);return new Blob([i],{type:t})}e.resizeFile=function(e,t){return new Promise(function(l,i){var r=new FileReader;r.onload=function(t){var i=new Image;i.onload=function(){return l(n(e,i))},i.src=t.target.result},r.readAsDataURL(t)})},e.resizeImage=n}(VO||(VO={}));var qO=function(){function e(e,n,t,l){this.I18n=e,this.elementRef=n,this.notificationsService=t,this.opFileUpload=l,this.busy=!1,this.fileInvalid=!1,this.text={label_choose_avatar:this.I18n.t("js.avatars.label_choose_avatar"),upload_instructions:this.I18n.t("js.avatars.text_upload_instructions"),error_too_large:this.I18n.t("js.avatars.error_image_too_large"),wrong_file_format:this.I18n.t("js.avatars.wrong_file_format"),button_update:this.I18n.t("js.button_update"),uploading:this.I18n.t("js.avatars.uploading_avatar"),preview:this.I18n.t("js.label_preview")}}return e.prototype.ngOnInit=function(){var e=this.elementRef.nativeElement;this.target=e.getAttribute("target"),this.method=e.getAttribute("method")},e.prototype.onFilePickerChanged=function(e){var n=this,t=Array.from(this.avatarFilePicker.nativeElement.files);if(0!==t.length){var l=t[0];-1!==["image/jpeg","image/png","image/gif"].indexOf(l.type)?VO.resizeFile(128,l).then(function(e){var t=e[0],i=e[1];i.name=l.name,n.avatarFile=i,n.avatarPreviewUrl=t}):this.fileInvalid=!0}},e.prototype.uploadAvatar=function(e){var n=this;e.preventDefault(),this.busy=!0;var t=this.opFileUpload.uploadSingle(this.target,this.avatarFile,this.method,"text");this.notificationsService.addAttachmentUpload(this.text.uploading,[t]),t[1].subscribe(function(e){switch(e.type){case 0:return;case 4:return n.avatarFile.progress=100,n.busy=!1,void window.location.reload();default:return}},function(e){n.notificationsService.addError(e.error),n.busy=!1})},e}(),LO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function $O(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.text.wrong_file_format)})}function HO(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,2,"fieldset",[["class","preview"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"legend",[["class","preview--legend"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,0,"img",[["class","avatars--local-avatar-preview"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,1,0,t.text.preview),e(n,2,0,t.avatarPreviewUrl)})}function BO(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{avatarFilePicker:0}),(e()(),l["ɵeld"](1,0,null,null,11,"div",[["class","form--field"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"label",[["class","form--label"],["for","avatar_file_input"]],[[8,"textContent",0]],null,null,null,null)),l["ɵprd"](512,null,$t["ɵNgClassImpl"],$t["ɵNgClassR2Impl"],[l.IterableDiffers,l.KeyValueDiffers,l.ElementRef,l.Renderer2]),l["ɵdid"](4,278528,null,0,$t.NgClass,[$t["ɵNgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l["ɵpod"](5,{"-error":0}),(e()(),l["ɵeld"](6,0,null,null,1,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,[[1,0],["avatarFilePicker",1]],null,0,"input",[["accept","image/jpeg,image/png,image/gif"],["id","avatar_file_input"],["name","avatar_file_input"],["type","file"]],null,[[null,"change"]],function(e,n,t){var l=!0,i=e.component;"change"===n&&(l=!1!==i.onFilePickerChanged(t)&&l);return l},null,null)),(e()(),l["ɵeld"](8,0,null,null,4,"div",[["class","form--field-instructions"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"span",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,2,"div",[["class","avatars--error-pane"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,$O)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵand"](16777216,null,null,1,null,HO)),l["ɵdid"](14,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](15,0,null,null,0,"button",[["class","button -highlight -with-icon icon-checkmark"],["type","submit"]],[[1,"disabled",0],[8,"textContent",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.uploadAvatar(t)&&l);return l},null,null))],function(e,n){var t=n.component,l=e(n,5,0,t.fileInvalid);e(n,4,0,"form--label",l),e(n,12,0,t.fileInvalid),e(n,14,0,t.avatarPreviewUrl)},function(e,n){var t=n.component;e(n,2,0,t.text.label_choose_avatar),e(n,9,0,t.text.upload_instructions),e(n,15,0,!t.avatarFile||t.busy||void 0,t.text.button_update)})}var zO,WO=l["ɵccf"]("avatar-upload-form",qO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"avatar-upload-form",[],null,null,null,BO,LO)),l["ɵdid"](1,114688,null,0,qO,[A.a,l.ElementRef,Vn,Ds],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),QO=t("/+cc"),UO=function(){function e(e){this.widgetName=e,zO.register(e,this)}return e.prototype.renderItem=function(e,n){n.text(e.label)},e.prototype.fuzzySearch=function(e,n){if(""===n)return e;if(n.length>=3){var t=this.literalSearch(e,n);if(t.length>0)return t}return this.fuseInstance.search(n)},e.prototype.literalSearch=function(e,n){var t=[],l=n.toLowerCase();return e.forEach(function(e){-1!==e.label.toLowerCase().indexOf(l)&&t.push(e)}),t},e.prototype.augmentedResultSet=function(e,n){var t=[];return n.forEach(function(e){t.push({label:e.label,object:e.object,render:"match"})}),t},e.prototype.setup=function(e,n){this.currentPage=0,this.input=e,this.input[this.widgetName].call(this.input,this.setupParams(n));this.fuseInstance=new QO(n,{shouldSort:!0,tokenize:!1,threshold:.2,location:0,distance:1e4,maxPatternLength:16,minMatchCharLength:2,keys:["label"]})},e.prototype.setupParams=function(e){var n=this;return{delay:50,source:function(t,l){var i=n.fuzzySearch(e,t.term);l(n.augmentedResultSet(e,i))},select:function(e,t){"match"===t.item.render&&n.onItemSelected(t.item.object)},create:function(){return n.input.focus()},response:function(e,t){n.onNoResultsFound(e,t)},autoFocus:!0,minLength:0}},e}();!function(e){e.register=function(e,n){jQuery.widget("custom."+e,jQuery.ui.autocomplete,{_create:function(){n.currentPage=0,this._super(),this.widget().menu("option","items","> .ui-matched-item"),this._search("")},_renderMenu:function(e,n){jQuery(e).unbind("scroll"),this._renderLazyMenu(e,n)},_renderMenuPage:function(e,t,l){void 0===l&&(l=null);var i=this,r=t.length,o=t,u=n.maxItemsPerPage;if(null!==l&&(o=t.slice(l*u,l*u+u),r=Math.min(t.length,l*u+u)),jQuery.each(o,function(n,t){i._renderItemData(e,t)}),e.css("height","auto"),r<t.length){var a=32*r;a<.55*document.body.offsetHeight&&e.css("height",a-50)}},_pages:function(e){return Math.ceil(e.length/n.maxItemsPerPage)},_repositionMenu:function(e){var n=this.menu;n.refresh(),this._resizeMenu(),e.position(jQuery.extend({of:this.element},this.options.position)),this.options.autoFocus&&n.next(new jQuery.Event("mouseover"))},_resizeMenu:function(){this.menu.element.outerWidth(this.element.outerWidth())},_renderItem:function(e,t){var l=this.element.val(),i="disabled"===t.render,r=jQuery("<div>").addClass("ui-menu-item-wrapper");n.renderItem(t,r);var o=jQuery("<li>").toggleClass("ui-state-disabled",i).toggleClass("ui-matched-item",!i).append(r).appendTo(e);return""!==l&&o.mark(l,{className:"ui-autocomplete-match"}),o},_renderLazyMenu:function(e,t){var l=this,i=jQuery(e),r=this._pages(t);if(r<=1)return l._renderMenuPage(e,t);l._renderMenuPage(e,t,0),i.scroll(function(){if(function(e){var n=e.outerHeight(),t=e[0].scrollHeight;return e.scrollTop()>=t-n}(i)){if(++n.currentPage>=r)return;l._renderMenuPage(e,t,n.currentPage),l._repositionMenu(e)}})}})}}(zO||(zO={}));var GO=function(e){function n(n,t,l,i,r,o){var u=e.call(this,"projectMenuAutocomplete")||this;return u.PathHelper=n,u.elementRef=t,u.http=l,u.cdRef=i,u.I18n=r,u.currentProject=o,u.results=null,u.loaded=!1,u.text={label:r.t("js.projects.autocompleter.label"),no_results:r.t("js.select2.no_matches"),loading:r.t("js.ajax.loading")},u}return a.d(n,e),n.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.elementRef.nativeElement),this.dropdownMenu=this.$element.parents("li.drop-down"),this.input=this.$element.find(".project-menu-autocomplete--input"),this.noResults=this.$element.find(".project-menu-autocomplete--no-results"),this.dropdownMenu.on("opened",function(){return e.open()}),this.dropdownMenu.on("closed",function(){return e.close()})},n.prototype.close=function(){try{this.input.projectMenuAutocomplete("destroy")}catch(e){console.warn("Failed to destroy autocomplete: %O",e)}this.$element.find(".project-search-results").css("visibility","hidden")},n.prototype.open=function(){var e=this;this.$element.find(".project-search-results").css("visibility","visible"),this.loadProjects().then(function(n){var t=_.map(n,function(e){return{label:e.name,render:"match",object:e}});e.setup(e.input,t),e.addInputHandlers(),e.addClickHandler(),e.loaded=!0,e.cdRef.detectChanges(),e.scrollCurrentProjectIntoView()})},Object.defineProperty(n.prototype,"maxItemsPerPage",{get:function(){return 250},enumerable:!0,configurable:!0}),n.prototype.onItemSelected=function(e){window.location.href=this.projectLink(e.identifier)},n.prototype.onNoResultsFound=function(e,n){this.noResults.toggle(0===n.content.length)},n.prototype.renderItem=function(e,n){var t=jQuery("<a>").attr("href",this.projectLink(e.object.identifier)).text(e.label).appendTo(n);e.object.level>0&&t.text("» "+e.label).css("padding-left",4+16*e.object.level+"px"),e.object.identifier===this.currentProject.identifier&&n.addClass("selected")},n.prototype.projectLink=function(e){var n=jQuery('meta[name="current_menu_item"]').attr("content"),t=this.PathHelper.projectPath(e);return n&&(t+="?jump="+encodeURIComponent(n)),t},Object.defineProperty(n.prototype,"loadingText",{get:function(){return this.loaded?"":this.text.loading},enumerable:!0,configurable:!0}),n.prototype.loadProjects=function(){var e=this;if(null!==this.results)return Promise.resolve(this.results);var n=this.PathHelper.projectLevelListPath();return this.http.get(n).toPromise().then(function(n){return e.results=e.augmentWithParents(n.projects)})},n.prototype.augmentWithParents=function(e){var n=[],t=-1;return e.map(function(e){for(;t>=e.level;)n.pop(),t--;return n.push(e),t=e.level,e.parents=n.slice(0,-1),e})},n.prototype.augmentedResultSet=function(e,n){var t=n.map(function(e){return e.object.identifier}),l=_.flatten(n.map(function(e){return e.object.parents})),i=[];return e.forEach(function(e){var n,r=e.object.identifier;if(t.indexOf(r)>=0)n="match";else{if(!_.find(l,function(e){return e.identifier===r}))return;n="disabled"}i.push({label:e.label,object:e.object,render:n})}),i},n.prototype.addInputHandlers=function(){var e=this;this.input.off("blur"),this.input.keydown(function(n){return n.which!==wl.a.ESCAPE||(e.input.val(""),e.input[e.widgetName].call(e.input,"search",""),!1)})},n.prototype.addClickHandler=function(){var e=!1;this.$element.find(".project-menu-autocomplete--results").on("click",".ui-menu-item a",function(e){return kc.isClickedWithModifier(e)&&e.stopImmediatePropagation(),!0}).on("touchend",".ui-menu-item a",function(n){e||(window.location.href=n.target.href)}).on("touchmove",".ui-menu-item a",function(){e=!0}).on("touchstart",".ui-menu-item a",function(){e=!1})},n.prototype.setupParams=function(n){var t=e.prototype.setupParams.call(this,n);return t.appendTo=".project-menu-autocomplete--wrapper",t.classes={"ui-autocomplete":"-inplace project-menu-autocomplete--results"},t.position={of:".project-menu-autocomplete--input-container"},t},n.prototype.scrollCurrentProjectIntoView=function(){var e=document.querySelector(".ui-menu-item-wrapper.selected");if(e){var n=e.offsetHeight,t=document.getElementsByClassName("project-menu-autocomplete--results")[0],l=e.offsetTop-t.offsetHeight/2+n/2;t.scrollTop=l%n==0?l:l-l%n}},n}(UO);Tt.DynamicBootstrapper.register({selector:"project-menu-autocomplete",cls:GO});var KO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function YO(e){return l["ɵvid"](2,[(e()(),l["ɵeld"](0,0,null,null,6,"div",[["class","dropdown dropdown-relative project-search-results"],["id","project_autocompletion_wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,5,"div",[["class","project-menu-autocomplete--wrapper"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","project-menu-autocomplete--input-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"label",[["class","hidden-for-sighted"],["for","project_autocompletion_input"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"input",[["class","ui-autocomplete--input project-menu-autocomplete--input"],["id","project_autocompletion_input"],["name","project_autocompletion_input"],["type","text"]],[[1,"placeholder",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,0,"i",[["class","project-menu-autocomplete--search-icon icon-search"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,0,"p",[["class","project-menu-autocomplete--no-results"],["hidden",""]],[[8,"textContent",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,3,0,t.text.label),e(n,4,0,t.loadingText),e(n,6,0,t.text.no_results)})}var ZO=l["ɵccf"]("project-menu-autocomplete",GO,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"project-menu-autocomplete",[],null,null,null,YO,KO)),l["ɵdid"](1,114688,null,0,GO,[ge,l.ElementRef,V.c,l.ChangeDetectorRef,A.a,Qn],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),JO=t("5Lfy"),XO=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function eE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"div",[["class","op-modal--portal "]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"div",[["class","op-modal--modal-container dynamic-content-modal--wrapper loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null))],null,null)}var nE=l["ɵccf"]("ng-component",JO.a,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,eE,XO)),l["ɵdid"](1,245760,null,0,JO.a,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),tE=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function lE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,0,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null))],null,function(e,n){e(n,1,0,n.component.text.close_popup)})}function iE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,10,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,9,"div",[["class","op-modal--modal-container confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,lE)),l["ɵdid"](4,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵeld"](5,0,null,null,0,"h3",[["class","icon-context icon-attention"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,1,"div",[["class","ngdialog-body op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"p",[],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"button",[["class","confirm-form-submit--cancel button"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.closeMe(t)&&l);return l},null,null)),(e()(),l["ɵeld"](10,0,null,null,0,"button",[["class","confirm-form-submit--continue button -highlight"]],[[8,"textContent",0],[1,"title",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmAndClose(t)&&l);return l},null,null))],function(e,n){e(n,4,0,n.component.showClose)},function(e,n){var t=n.component;e(n,5,0,t.text.title),e(n,7,0,t.text.text),e(n,9,0,t.text.button_cancel,t.text.button_cancel),e(n,10,0,t.text.button_continue,t.text.button_continue)})}var rE=l["ɵccf"]("ng-component",dm,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,iE,tE)),l["ɵdid"](1,245760,null,0,dm,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),oE=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.password_confirmation=null,n}return a.d(n,e),n.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.text.title=I18n.t("js.password_confirmation.title"),this.text.field_description=I18n.t("js.password_confirmation.field_description"),this.text.confirm_button=I18n.t("js.button_confirm"),this.text.password=I18n.t("js.label_password"),this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.showClose=!1},n.prototype.confirmAndClose=function(n){this.passwordValuePresent()&&e.prototype.confirmAndClose.call(this,n)},n.prototype.onOpen=function(n){e.prototype.onOpen.call(this,n),this.passwordConfirmationField.nativeElement.focus()},n.prototype.passwordValuePresent=function(){return null!==this.password_confirmation&&this.password_confirmation.length>0},n}(dm),uE=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function aE(e){return l["ɵvid"](0,[l["ɵqud"](402653184,1,{passwordConfirmationField:0}),(e()(),l["ɵeld"](1,0,null,null,23,"div",[["class","op-modal--portal confirm-form-submit--modal  ngdialog-theme-openproject"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,22,"div",[["class","op-modal--modal-container password-confirm-dialog--modal loading-indicator--location"],["data-indicator-name","modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,1,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,0,"h3",[["class","icon-context icon-locked"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](5,0,null,null,16,"div",[["class","op-modal--modal-body"]],null,null,null,null,null)),(e()(),l["ɵeld"](6,0,null,null,15,"form",[["class","request-for-confirmation--form form -vertical"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var i=!0,r=e.component;"submit"===n&&(i=!1!==l["ɵnov"](e,8).onSubmit(t)&&i);"reset"===n&&(i=!1!==l["ɵnov"](e,8).onReset()&&i);"submit"===n&&(i=!1!==r.confirmAndClose(t)&&i);return i},null,null)),l["ɵdid"](7,16384,null,0,Ht.u,[],null,null),l["ɵdid"](8,4210688,null,0,Ht.k,[[8,null],[8,null]],null,null),l["ɵprd"](2048,null,Ht.c,null,[Ht.k]),l["ɵdid"](10,16384,null,0,Ht.j,[[4,Ht.c]],null,null),(e()(),l["ɵeld"](11,0,null,null,10,"div",[["class","form--field -required"]],null,null,null,null,null)),(e()(),l["ɵeld"](12,0,null,null,0,"label",[["class","form--label"],["for","request_for_confirmation_password"]],[[1,"aria-label",0],[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](13,0,null,null,7,"div",[["class","form--field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](14,0,null,null,6,"div",[["class","form--text-field-container"]],null,null,null,null,null)),(e()(),l["ɵeld"](15,0,[[1,0],["passwordConfirmationField",1]],null,5,"input",[["class","form--text-field"],["id","request_for_confirmation_password"],["name","request_for_confirmation_password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var i=!0,r=e.component;"input"===n&&(i=!1!==l["ɵnov"](e,16)._handleInput(t.target.value)&&i);"blur"===n&&(i=!1!==l["ɵnov"](e,16).onTouched()&&i);"compositionstart"===n&&(i=!1!==l["ɵnov"](e,16)._compositionStart()&&i);"compositionend"===n&&(i=!1!==l["ɵnov"](e,16)._compositionEnd(t.target.value)&&i);"ngModelChange"===n&&(i=!1!==(r.password_confirmation=t)&&i);return i},null,null)),l["ɵdid"](16,16384,null,0,Ht.d,[l.Renderer2,l.ElementRef,[2,Ht.a]],null,null),l["ɵprd"](1024,null,Ht.g,function(e){return[e]},[Ht.d]),l["ɵdid"](18,671744,null,0,Ht.l,[[2,Ht.c],[8,null],[8,null],[6,Ht.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,Ht.h,null,[Ht.l]),l["ɵdid"](20,16384,null,0,Ht.i,[[4,Ht.h]],null,null),(e()(),l["ɵeld"](21,0,null,null,0,"div",[["class","form--field-instructions"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](22,0,null,null,2,"div",[["class","op-modal--modal-footer"]],null,null,null,null,null)),(e()(),l["ɵeld"](23,0,null,null,1,"button",[["class","confirm-form-submit--continue button"]],[[1,"title",0],[8,"textContent",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var l=!0,i=e.component;"click"===n&&(l=!1!==i.confirmAndClose(t)&&l);return l},null,null)),(e()(),l["ɵted"](-1,null,[' [attr.title]="text.button_cancel"> ']))],function(e,n){e(n,18,0,"request_for_confirmation_password",n.component.password_confirmation)},function(e,n){var t=n.component;e(n,4,0,t.text.title),e(n,6,0,l["ɵnov"](n,10).ngClassUntouched,l["ɵnov"](n,10).ngClassTouched,l["ɵnov"](n,10).ngClassPristine,l["ɵnov"](n,10).ngClassDirty,l["ɵnov"](n,10).ngClassValid,l["ɵnov"](n,10).ngClassInvalid,l["ɵnov"](n,10).ngClassPending),e(n,12,0,t.text.field_description,t.text.password),e(n,15,0,l["ɵnov"](n,20).ngClassUntouched,l["ɵnov"](n,20).ngClassTouched,l["ɵnov"](n,20).ngClassPristine,l["ɵnov"](n,20).ngClassDirty,l["ɵnov"](n,20).ngClassValid,l["ɵnov"](n,20).ngClassInvalid,l["ɵnov"](n,20).ngClassPending),e(n,21,0,t.text.field_description),e(n,23,0,t.text.confirm_button,t.text.confirm_button,!t.passwordValuePresent())})}var sE=l["ɵccf"]("ng-component",oE,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,aE,uE)),l["ɵdid"](1,245760,null,0,oE,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),cE=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function dE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"a",[["class","help-text--edit-button button"]],[[1,"href",4],[1,"title",0]],null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,1,"op-icon",[["class","op-icon--wrapper"],["icon-classes","button--icon icon-edit"]],null,null,null,hl,dl)),l["ɵdid"](2,49152,null,0,cl,[],{iconClasses:[0,"iconClasses"]},null),(e()(),l["ɵeld"](3,0,null,null,0,"span",[["class","button--text"]],[[8,"textContent",0]],null,null,null,null))],function(e,n){e(n,2,0,"button--icon icon-edit")},function(e,n){var t=n.component;e(n,0,0,t.helpTextLink,t.text.edit),e(n,3,0,t.text.edit)})}function pE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,12,"div",[["class","op-modal--portal  loading-indicator--location"],["data-indicator-name","modal"]],null,null,null,null,null)),(e()(),l["ɵeld"](1,0,null,null,11,"div",[["class","op-modal--modal-container attribute-help-text--modal"],["tabindex","0"]],null,null,null,null,null)),(e()(),l["ɵeld"](2,0,null,null,3,"div",[["class","op-modal--modal-header"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,2,"a",[["class","op-modal--modal-close-button"]],null,null,null,null,null)),(e()(),l["ɵeld"](4,0,null,null,1,"i",[["class","icon-close"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,5).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.closeMe(t)&&i);return i},null,null)),l["ɵdid"](5,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](6,0,null,null,2,"h3",[],null,null,null,null,null)),(e()(),l["ɵeld"](7,0,null,null,0,"span",[["class","icon-context icon-help1"]],null,null,null,null,null)),(e()(),l["ɵeld"](8,0,null,null,0,"span",[["class","ellipsis"]],[[8,"textContent",0]],null,null,null,null)),(e()(),l["ɵeld"](9,0,null,null,0,"div",[["class","op-modal--modal-body -formattable"],["tabindex","0"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l["ɵeld"](10,0,null,null,2,"div",[["class","modal--form-actions"]],null,null,null,null,null)),(e()(),l["ɵand"](16777216,null,null,1,null,dE)),l["ɵdid"](12,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,12,0,n.component.helpText.editText)},function(e,n){var t=n.component;e(n,4,0,t.text.close),e(n,8,0,t.helpText.attributeCaption),e(n,9,0,t.helpText.helpText.html)})}var hE=l["ɵccf"]("ng-component",$r,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,pE,cE)),l["ɵdid"](1,245760,null,0,$r,[Wn.a,A.a,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),fE=[[".preview-modal--container[_ngcontent-%COMP%]{position:absolute;z-index:5000;min-width:350px;padding:0;box-shadow:0 0 5px 2px rgba(0,0,0,.25)}"]],gE=l["ɵcrt"]({encapsulation:0,styles:fE,data:{}});function mE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,38,"div",[["class","preview-modal--container"],["wp-isolated-query-space",""]],null,null,null,null,null)),l["ɵprd"](6144,null,Mn,null,[qn]),l["ɵprd"](4608,null,De,De,[l.Injector]),l["ɵprd"](4608,null,kn,kn,[Ne,g.G]),l["ɵprd"](4608,null,je,je,[b,Ce]),l["ɵprd"](4608,null,$e,$e,[d,b]),l["ɵprd"](4608,null,Be,Be,[d,b]),l["ɵprd"](4608,null,rn,rn,[d,b,ge]),l["ɵprd"](4608,null,en,en,[d,b]),l["ɵprd"](4608,null,Qe,Qe,[b]),l["ɵprd"](4608,null,N,N,[b]),l["ɵprd"](4608,null,We,We,[b]),l["ɵprd"](4608,null,sn,sn,[d,Ge,b]),l["ɵprd"](4608,null,$n,$n,[b,$e,Q,Cn,On]),l["ɵprd"](4608,null,Pn,Pn,[]),l["ɵprd"](4608,null,Sn,Sn,[b,Rn,d,Pn,rn,ge]),l["ɵprd"](4608,null,Ln,Ln,[b,We,$e,qn,Q,Cn,On]),l["ɵprd"](4608,null,_n,_n,[d,b]),l["ɵprd"](4608,null,Hn,Hn,[d,b,$e,Be,rn,en,Qe,N,We,sn,$n,je,Sn,Ln,Cn,kn,In,_n]),l["ɵprd"](4608,null,ot,ot,[Vn,A.a,Ne,In,g.G,Me,hn,d,b,Ce,be,je,Hn,et]),l["ɵprd"](4608,null,jc,jc,[b,Ic]),l["ɵprd"](4608,null,Ws,Ws,[g.G,d,ct,qn,ge,Cn]),l["ɵprd"](4608,null,Ed,Ed,[We,d,Ws,Cn,b]),l["ɵprd"](4608,null,Rc,Rc,[V.c,g.G,ge,Ne,Vn,A.a,ct]),l["ɵprd"](4608,null,Ze,Ze,[]),l["ɵprd"](4608,null,Dd,Dd,[It,Ne,_n,N,Ed,ge]),l["ɵprd"](135680,null,Fd,Fd,[l.Injector]),l["ɵprd"](135680,null,Tp,Tp,[l.Injector,Ws]),l["ɵprd"](135680,null,Op,Op,[l.Injector]),l["ɵprd"](4608,null,ns,ns,[l.Injector,It]),l["ɵprd"](135680,null,ad,ad,[l.Injector,It,Cn,Q,b,ns,yn,ct]),l["ɵprd"](4608,null,Ua,Ua,[]),l["ɵprd"](4608,null,dp,dp,[]),l["ɵprd"](512,null,b,b,[]),l["ɵdid"](34,16384,null,0,Dp,[l.ElementRef,b,l.Injector],null,null),l["ɵprd"](131584,null,Ic,Ic,[b,d,Cn,is]),l["ɵprd"](512,null,Ep,Ep,[b]),(e()(),l["ɵeld"](37,0,null,null,1,"wp-single-card",[["orientation","horizontal"]],null,null,null,pw,iw)),l["ɵdid"](38,49152,null,0,tw,[ge,A.a,g.G,Ic,Ep],{workPackage:[0,"workPackage"],orientation:[1,"orientation"]},null)],function(e,n){e(n,38,0,n.component.workPackage,"horizontal")},null)}function vE(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,mE)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.workPackage)},null)}var bE=l["ɵccf"]("ng-component",Dt,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,vE,gE)),l["ɵdid"](1,245760,null,0,Dt,[l.ElementRef,Wn.a,l.ChangeDetectorRef,A.a,Cn,Wn.b],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),yE=function(){function e(e,n,t){this.toggleService=e,this.cdRef=n,this.elementRef=t,this.mainMenu=jQuery("#main-menu")[0],this.moving=!1}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.toggleService.titleData$.pipe(Object(ft.a)(),Object(Gn.b)(this)).subscribe(function(n){e.toggleTitle=n,e.cdRef.detectChanges()}),this.resizeEvent="main-menu-resize",this.localStorageKey="openProject-mainMenuWidth"},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.resizeStart=function(){this.elementWidth=this.mainMenu.clientWidth},e.prototype.resizeMove=function(e){this.toggleService.saveWidth(this.elementWidth+e.x)},e.prototype.resizeEnd=function(){var e=new Event(this.resizeEvent);window.dispatchEvent(e)},e}();Tt.DynamicBootstrapper.register({selector:"main-menu-resizer",cls:yE});var wE=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function CE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,4,"resizer",[["class","main-menu--resizer"]],null,[[null,"end"],[null,"start"],[null,"move"],[null,"mousedown"]],function(e,n,t){var i=!0,r=e.component;"mousedown"===n&&(i=!1!==l["ɵnov"](e,1).startResize(t)&&i);"end"===n&&(i=!1!==r.resizeEnd()&&i);"start"===n&&(i=!1!==r.resizeStart()&&i);"move"===n&&(i=!1!==r.resizeMove(t)&&i);return i},nT,Xx)),l["ɵdid"](1,180224,null,0,Jx,[],{customHandler:[0,"customHandler"],cursorClass:[1,"cursorClass"]},{end:"end",start:"start",move:"move"}),(e()(),l["ɵeld"](2,0,null,0,2,"a",[["class","main-menu--navigation-toggler"],["href","#"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,3).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,3).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.toggleService.toggleNavigation(t)&&i);return i},null,null)),l["ɵdid"](3,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](4,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-resizer-vertical-lines"]],null,null,null,null,null))],function(e,n){e(n,1,0,!0,"col-resize")},function(e,n){e(n,2,0,n.component.toggleTitle)})}var kE=l["ɵccf"]("main-menu-resizer",yE,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"main-menu-resizer",[],null,null,null,CE,wE)),l["ɵdid"](1,245760,null,0,yE,[$c,l.ChangeDetectorRef,l.ElementRef],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),IE=function(){function e(e,n,t,l){this.toggleService=e,this.cdRef=n,this.deviceService=t,this.injector=l,this.toggleTitle="",this.currentProject=this.injector.get(Qn)}return e.prototype.ngOnInit=function(){var e=this;this.toggleService.initializeMenu(),this.toggleService.titleData$.pipe(Object(ft.a)(),Object(Gn.b)(this)).subscribe(function(n){e.toggleTitle=n,e.cdRef.detectChanges()})},e.prototype.ngOnDestroy=function(){},e}();Tt.DynamicBootstrapper.register({selector:"main-menu-toggle",cls:IE});var jE=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function RE(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,3,"div",[["aria-haspopup","true"],["id","main-menu-toggle"],["tabindex","0"]],[[1,"title",0]],[[null,"accessibleClick"],[null,"click"],[null,"keydown"]],function(e,n,t){var i=!0,r=e.component;"click"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"keydown"===n&&(i=!1!==l["ɵnov"](e,1).handleClick(t)&&i);"accessibleClick"===n&&(i=!1!==r.toggleService.toggleNavigation(t)&&i);return i},null,null)),l["ɵdid"](1,16384,null,0,Cl,[],null,{onClick:"accessibleClick"}),(e()(),l["ɵeld"](2,0,null,null,1,"a",[["icon","icon-hamburger"]],null,null,null,null,null)),(e()(),l["ɵeld"](3,0,null,null,0,"i",[["aria-hidden","true"],["class","icon-hamburger"]],null,null,null,null,null))],null,function(e,n){e(n,0,0,n.component.toggleTitle)})}function PE(e){return l["ɵvid"](2,[(e()(),l["ɵand"](16777216,null,null,1,null,RE)),l["ɵdid"](1,16384,null,0,$t.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,null!==t.currentProject.id||t.deviceService.isMobile)},null)}var SE=l["ɵccf"]("main-menu-toggle",IE,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"main-menu-toggle",[],null,null,null,PE,jE)),l["ɵdid"](1,245760,null,0,IE,[$c,l.ChangeDetectorRef,dt,l.Injector],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),_E=function(){function e(e,n,t){this.element=e,this.confirmDialog=n,this.I18n=t,this.confirmed=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text")}}return e.prototype.ngOnInit=function(){var e=this;this.$element=jQuery(this.element.nativeElement),this.$element.is("form")?this.$form=this.$element:this.$form=this.$element.closest("form"),this.$form.on("submit",function(n){return!!e.confirmed||(n.preventDefault(),e.openConfirmationDialog(),!1)})},e.prototype.openConfirmationDialog=function(){var e=this;this.confirmDialog.confirm({text:this.text,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(function(){e.confirmed=!0,e.$form.trigger("submit")}).catch(function(){return e.confirmed=!1})},e}();Tt.DynamicBootstrapper.register({selector:"confirm-form-submit",cls:_E});var xE=l["ɵcrt"]({encapsulation:2,styles:[],data:{}});function TE(e){return l["ɵvid"](0,[],null,null)}var OE=l["ɵccf"]("confirm-form-submit",_E,function(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,0,null,null,1,"confirm-form-submit",[],null,null,null,TE,xE)),l["ɵdid"](1,114688,null,0,_E,[l.ElementRef,pm,A.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),EE=t("qAlS"),DE=function(){function e(e){this.sanitizer=e}return e.prototype.sanitize=function(e){return this.sanitizer.sanitize(l.SecurityContext.HTML,e)||""},e}(),FE=t("yLKq"),NE=function(){function e(){}return e.prototype.intercept=function(e,n){var t=jQuery("meta[name=csrf-token]").attr("content");if(!1!==e.withCredentials){var l=e.headers.set("X-Authentication-Scheme","Session").set("X-Requested-With","XMLHttpRequest");t&&(l=l.set("X-CSRF-TOKEN",t));var i=e.clone({withCredentials:!0,headers:l});return n.handle(i)}return n.handle(e)},e}(),AE=function(){function e(e,n,t){this.halResourceService=e,this.states=n,this.pathHelper=t}return e.prototype.loadAll=function(e){var n=this,t=this.pathHelper.api.v3.withOptionalProject(e).types.toString();return this.halResourceService.get(t).toPromise().then(function(e){return _.each(e.elements,function(e){return n.states.types.get(e.href).putValue(e)}),e.elements})},e.prototype.load=function(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()},e}(),VE=function(){function e(e,n){this.halResourceService=e,this.pathHelper=n}return e.prototype.one=function(e){return this.halResourceService.get(this.pathHelper.api.v3.statuses.id(e).toString()).toPromise()},e.prototype.list=function(){return this.halResourceService.get(this.pathHelper.api.v3.statuses.toString()).toPromise()},e}(),ME=function(){function e(e,n,t){this.componentFactoryResolver=e,this.appRef=n,this.injector=t}return e.prototype.render=function(e,n){var t=this;e.innerHTML=n;var l=[];return Tt.DynamicBootstrapper.getEmbeddable().forEach(function(n){for(var i=e.querySelectorAll(n.selector),r=0,o=i.length;r<o;r++){var u=t.componentFactoryResolver.resolveComponentFactory(n.cls).create(t.injector,[],i[r]);l.push(u),t.appRef.attachView(u.hostView),u.changeDetectorRef.detectChanges()}}),function(){l.forEach(function(e){t.appRef.detachView(e.hostView),e.destroy()}),l.length=0,e.innerHTML=""}},e}(),qE=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.statusDm=t,l}return a.d(n,e),n.prototype.load=function(e){return this.statusDm.one(e)},n.prototype.loadAll=function(e){return this.statusDm.list()},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.statuses},enumerable:!0,configurable:!0}),n}(mn),LE=function(){function e(e,n,t,l){this.boardListsService=e,this.I18n=n,this.statusCache=t,this.statusDm=l}return Object.defineProperty(e.prototype,"localizedName",{get:function(){return this.I18n.t("js.work_packages.properties.status")},enumerable:!0,configurable:!0}),e.prototype.getFilterHref=function(e){var n=_.find(e.filters,function(e){return"status"===e.id});if(n){var t=n.values[0];return t instanceof L?t.href:t}},e.prototype.getLoadedFilterValue=function(e){var n=this.getFilterHref(e);if(n){var t=L.idFromLink(n);return this.statusCache.require(t)}return Promise.resolve(void 0)},e.prototype.canAddToQuery=function(e){return Promise.resolve(!0)},e.prototype.addActionQueries=function(e){var n=this;return this.getStatuses().then(function(t){return Promise.all(t.map(function(t){return t.isDefault?n.addActionQuery(e,t):Promise.resolve(e)})).then(function(){return e})})},e.prototype.addActionQuery=function(e,n){var t={name:n.name},l={status:{operator:"=",values:[n.id]}};return this.boardListsService.addQuery(e,t,[l])},e.prototype.getAvailableValues=function(e,n){var t=this,l=new Set(n.map(function(e){return t.getFilterHref(e)}));return this.getStatuses().then(function(e){return e.filter(function(e){return!l.has(e.href)})})},e.prototype.getAdditionalListMenuItems=function(e){return Promise.resolve([])},e.prototype.dragIntoAllowed=function(e,n){return!0},e.prototype.autocompleterComponent=function(){return zt},e.prototype.headerComponent=function(){},e.prototype.disabledAddButtonPlaceholder=function(e){},e.prototype.getStatuses=function(){return this.statusDm.list().then(function(e){return e.elements})},e}(),$E=function(e){function n(n,t){var l=e.call(this)||this;return l.states=n,l.versionDm=t,l}return a.d(n,e),n.prototype.load=function(e){return this.versionDm.one(e)},n.prototype.loadAll=function(e){return this.versionDm.list()},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.states.versions},enumerable:!0,configurable:!0}),n}(mn),HE=function(e){function n(n){var t=e.call(this)||this;return t.halResourceService=n,t.$formCache=Object(s.g)(),t}return a.d(n,e),n.prototype.load=function(e){return this.halResourceService.post(e,{}).toPromise()},n.prototype.loadAll=function(e){var n=this;return Promise.all(e.map(function(e){return n.load(e)})).then(function(e){})},Object.defineProperty(n.prototype,"multiState",{get:function(){return this.$formCache},enumerable:!0,configurable:!0}),n}(mn),BE=function(){function e(e,n,t,l,i,r,o,u,a){this.boardListsService=e,this.I18n=n,this.versionDm=t,this.versionCache=l,this.currentProject=i,this.halNotification=r,this.state=o,this.formCache=u,this.pathHelper=a}return Object.defineProperty(e.prototype,"localizedName",{get:function(){return this.I18n.t("js.work_packages.properties.version")},enumerable:!0,configurable:!0}),e.prototype.getFilterHref=function(e){var n=_.find(e.filters,function(e){return"version"===e.id});if(n){var t=n.values[0];return t instanceof L?t.href:t}},e.prototype.getLoadedFilterValue=function(e){var n=this.getFilterHref(e);if(n){var t=L.idFromLink(n);return this.versionCache.require(t)}return Promise.resolve(void 0)},e.prototype.canAddToQuery=function(e){var n=_.get(e,"results.createWorkPackage.href",null);return n?this.formCache.require(n).then(function(e){return e.schema.version.writable}):Promise.resolve(!1)},e.prototype.addActionQueries=function(e){var n=this;return this.getVersions().then(function(t){return Promise.all(t.map(function(t){var l=_.get(t,"definingProject.name",null);return t.isOpen()&&l&&l===n.currentProject.name?n.addActionQuery(e,t):Promise.resolve(e)})).then(function(){return e})})},e.prototype.addActionQuery=function(e,n){var t={name:n.name},l={version:{operator:"=",values:[n.id]}};return this.boardListsService.addQuery(e,t,[l])},e.prototype.getAvailableValues=function(e,n){var t=this,l=new Set(n.map(function(e){return t.getFilterHref(e)}));return this.getVersions().then(function(e){return e.filter(function(e){return!l.has(e.href)})})},e.prototype.getAdditionalListMenuItems=function(e){var n=this;return this.getLoadedFilterValue(e).then(function(e){return e?n.buildItemsForVersion(e):[]})},e.prototype.autocompleterComponent=function(){return Wt},e.prototype.headerComponent=function(){return qI},e.prototype.disabledAddButtonPlaceholder=function(e){return e.isLocked()?{icon:"locked",text:this.I18n.t("js.boards.version.locked")}:e.isClosed()?{icon:"not-supported",text:this.I18n.t("js.boards.version.closed")}:void 0},e.prototype.dragIntoAllowed=function(e,n){return n instanceof MI&&n.isOpen()},e.prototype.getVersions=function(){return null===this.currentProject.id?Promise.resolve([]):this.versionDm.listForProject(this.currentProject.id).then(function(e){return e.elements})},e.prototype.patchVersionStatus=function(e,n){var t=this;this.versionDm.patch(e,{status:n}).then(function(e){t.versionCache.updateValue(e.id,e),t.state.go(".",{},{reload:!0})}).catch(function(e){return t.halNotification.handleRawError(e)})},e.prototype.buildItemsForVersion=function(e){var n=this,t=e.id;return[{hidden:!e.isOpen()||e.isLocked()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.lock_version"),onClick:function(){return n.patchVersionStatus(e,"locked"),!0}},{hidden:!e.isLocked()||e.isOpen()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.unlock_version"),onClick:function(){return n.patchVersionStatus(e,"open"),!0}},{hidden:e.isClosed()||!e.isClosed()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.close_version"),onClick:function(){return n.patchVersionStatus(e,"closed"),!0}},{hidden:!e.isClosed()||e.isClosed()&&!e.$links.update,linkText:this.I18n.t("js.boards.version.open_version"),onClick:function(){return n.patchVersionStatus(e,"open"),!0}},{linkText:this.I18n.t("js.boards.version.show_version"),href:this.pathHelper.versionShowPath(t),onClick:function(e){return!kc.isClickedWithModifier(e)&&(window.open(n.pathHelper.versionShowPath(t),"_blank"),!0)}},{hidden:!e.$links.update,linkText:this.I18n.t("js.boards.version.edit_version"),href:this.pathHelper.versionEditPath(t),onClick:function(e){return!kc.isClickedWithModifier(e)&&(window.open(n.pathHelper.versionEditPath(t),"_blank"),!0)}}]},e}(),zE=function(){function e(e,n){this.halNotification=e,this.http=n}return e.prototype.listen=function(){var e=this;jQuery("costs-budget-subform").each(function(n,t){var l=jQuery(t),i=l.find(".budget-item-container"),r=l.find(".budget-row-template");r.detach();var o=r[0].outerHTML,u=parseInt(l.attr("item-count"));l.on("change",".budget-item-value",function(n){var t=jQuery(n.target).closest(".cost_entry");e.refreshRow(l,t.attr("id"))}),l.on("click",".delete-budget-item",function(e){return e.preventDefault(),jQuery(e.target).closest(".cost_entry").remove(),!1}),l.find(".budget-add-row").click(function(e){e.preventDefault();var n=jQuery(o.replace(/INDEX/g,u.toString()));return n.show(),n.removeClass("budget-row-template"),i.append(n),u+=1,!1})})},e.prototype.refreshRow=function(e,n){var t=this,l=e.find("#"+n),i=this.buildRefreshRequest(l,n);this.http.post(e.attr("update-url"),i,{headers:{Accept:"application/json"},withCredentials:!0}).subscribe(function(e){_.each(e,function(e,n){jQuery("#"+n).html(e)})},function(e){return t.halNotification.handleRawError(e)})},e.prototype.buildRefreshRequest=function(e,n){var t={element_id:n,fixed_date:jQuery("#cost_object_fixed_date").val()};return e.find(".budget-item-value").each(function(e,n){var l=jQuery(n);t[l.data("requestKey")]=l.val()||"0"}),t},e}(),WE=function(e){function n(n){var t=e.call(this)||this;return t.I18n=n,t.text={internal_error:t.I18n.t("js.error.internal")},t}return a.d(n,e),n.prototype.handleError=function(n){var t=this.text.internal_error;n instanceof En?(console.error("Returned error resource %O",n),t+=" "+n.errorMessages.join("\n")):n instanceof L?(console.error("Returned hal resource %O",n),t+="Resource returned "+n.name):n instanceof Error?window.ErrorReporter.captureException(n):"string"==typeof n&&(window.ErrorReporter.captureMessage(n),t=n),e.prototype.handleError.call(this,t)},n}(l.ErrorHandler),QE={preview:1,newWorkPackage:2,edit:3,quickSearch:4,projectSearch:5,help:6,moreMenu:7,details:8},UE=function(){function e(e,n,t){var l=this;this.PathHelper=e,this.FocusHelper=n,this.currentProject=t,this.shortcuts={"?":function(){return l.showHelpModal()},"g m":this.globalAction("myPagePath"),"g o":this.projectScoped("projectPath"),"g w p":this.projectScoped("projectWorkPackagesPath"),"g w i":this.projectScoped("projectWikiPath"),"g a":this.projectScoped("projectActivityPath"),"g c":this.projectScoped("projectCalendarPath"),"g n":this.projectScoped("projectNewsPath"),"g t":this.projectScoped("projectTimelinesPath"),"n w p":this.projectScoped("projectWorkPackageNewPath"),"g e":this.accessKey("edit"),"g p":this.accessKey("preview"),"d w p":this.accessKey("details"),m:this.accessKey("moreMenu"),p:this.accessKey("projectSearch"),s:this.accessKey("quickSearch"),k:function(){return l.focusPrevItem()},j:function(){return l.focusNextItem()}}}return e.prototype.register=function(){var e=this;_.each(this.shortcuts,function(e,n){return Mousetrap.bind(n,e)}),jQuery(".help-link-shortcuts-link").click(function(){return e.showHelpModal(),!1})},e.prototype.accessKey=function(e){var n=this,t=QE[e];return function(){var e=jQuery("[accesskey="+t+"]:first");e.is("input")||"global-search-input"===e.attr("id")?setTimeout(function(){return n.FocusHelper.focus(e)},0):e.is("[href]")?n.clickLink(e[0]):e[0].click()}},e.prototype.globalAction=function(e){var n=this;return function(){var t=n.PathHelper[e]();window.location.href=t}},e.prototype.projectScoped=function(e){var n=this;return function(){var t=n.currentProject.identifier;if(t){var l=n.PathHelper[e](t);window.location.href=l}}},e.prototype.clickLink=function(e){var n=!1;if(document.createEvent){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n=!e.dispatchEvent(t)}else e.fireEvent&&(n=!e.fireEvent("onclick"));n||(window.location.href=e.href)},e.prototype.showHelpModal=function(){window.open(this.PathHelper.keyboardShortcutsHelpPath())},e.prototype.findListInPage=function(){var e=jQuery("table.keyboard-accessible-list"),n=[];return e.find("tbody tr").each(function(e,t){var l=jQuery(t).find(":visible:tabbable")[0];void 0!==l&&n.push(l)}),n},e.prototype.focusItemOffset=function(e){var n,t=this.findListInPage();null!==t&&(n=t.indexOf(jQuery(document.activeElement).closest("table.keyboard-accessible-list tbody tr").find(":visible:tabbable")[0]),jQuery(t[(n+e+t.length)%t.length]).focus())},e.prototype.focusNextItem=function(){this.focusItemOffset(1)},e.prototype.focusPrevItem=function(){this.focusItemOffset(-1)},e.ngInjectableDef=l["ɵɵdefineInjectable"]({factory:function(){return new e(l["ɵɵinject"](ge),l["ɵɵinject"](m.a),l["ɵɵinject"](Qn))},token:e,providedIn:"root"}),e}();var GE=t("KuCF");function KE(e,n){void 0===n&&(n="add"),e&&(Array.isArray(e)?e.forEach(function(e){document.body.classList[n](e)}):document.body.classList[n](e))}function YE(e,n){if(void 0===n&&(n="add"),e){var t=jQuery("#main-menu ."+e)[0];if(t){t.classList[n]("selected");var l=(t.getAttribute("title")||"").split(":").slice(-1)[0];"add"===n&&(l=I18n.t("js.description_current_position")+l),t.setAttribute("title",l)}}}function ZE(e,n,t){e.urlService.config.strictMode(!1),e.urlService.config.type("opQueryString",{encode:encodeURIComponent,decode:decodeURIComponent,raw:!0,dynamic:!0,is:function(e){return"string"==typeof e},equals:function(e,n){return _.isEqual(e,n)}})}var JE=t("Iia5"),XE={bodyClasses:"router--boards-view-base",menuItem:"board-view-menu-item"},eD={parent:"boards",bodyClasses:"router--boards-list-view",menuItem:"board-view-menu-item"},nD={parent:"boards",bodyClasses:"router--boards-full-view",menuItem:"board-view-menu-item"};function tD(e){e.urlService.rules.when(new RegExp("^/projects/(.*)/boards$"),function(e){return"/projects/"+e[1]+"/boards/"})}function lD(e){return function(){var n=e.get(nj),t=e.get(LE),l=e.get(BE);n.add("status",t),n.add("version",l)}}var iD=function(){};t("T61X");var rD={bodyClasses:"router--work-packages-calendar",menuItem:"calendar-menu-item",parent:"work-packages"},oD=function(){},uD={bodyClasses:"router--work-packages-base",menuItem:"work-packages-menu-item"},aD={allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"},sD={allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"},cD={bodyClasses:"router--work-packages-full-view",menuItem:"work-packages-menu-item"},dD={parent:"work-packages.show",menuItem:"work-packages-menu-item"},pD={parent:"work-packages.show",menuItem:"work-packages-menu-item"},hD={parent:"work-packages.show",menuItem:"work-packages-menu-item"},fD={parent:"work-packages.show",menuItem:"work-packages-menu-item"},gD={bodyClasses:"router--work-packages-list-view",menuItem:"work-packages-menu-item"},mD={allowMovingInEditMode:!0,bodyClasses:"router--work-packages-split-view-new",menuItem:"work-packages-menu-item",parent:"work-packages.list"},vD={allowMovingInEditMode:!0,bodyClasses:"router--work-packages-split-view",menuItem:"work-packages-menu-item",parent:"work-packages.list"},bD={bodyClasses:"router--work-packages-split-view",menuItem:"work-packages-menu-item"},yD={parent:"work-packages.list.details",menuItem:"work-packages-menu-item"},wD={parent:"work-packages.list.details",menuItem:"work-packages-menu-item"},CD={parent:"work-packages.list.details",menuItem:"work-packages-menu-item"},kD={parent:"work-packages.list.details",menuItem:"work-packages-menu-item"},ID={parent:"work-packages.list.details",menuItem:"work-packages-menu-item"},jD={bodyClasses:["router--dashboards-view-base","widget-grid-layout"],menuItem:"dashboards-menu-item"};function RD(e){e.urlService.rules.when(new RegExp("^/projects/(.*)/dashboards$"),function(e){return"/projects/"+e[1]+"/dashboards/"})}var PD=function(){},SD={menuItem:"overview-menu-item"};function _D(e){e.urlService.rules.when(new RegExp("^/projects(?!/new$)/([^/]+)$"),function(e){return"/projects/"+e[1]+"/"})}var xD=function(){},TD={bodyClasses:["router--work-packages-my-page","widget-grid-layout"],parent:"work-packages"},OD=function(){},ED=function(e){return function(){return e.register()}},DD=function(){};var FD=function(){},ND=function(e){return function(){var n=e.get(g.O),t=e.get(g.G),l=e.get(Vn),i=e.get(Qn),r=e.get(Qc),o=e.get(Pc),u=document.querySelector(uo);n.onEnter({},function(e,n){KE(_.get(n,"data.bodyClasses"),"add"),e.from().data&&_.get(n,"data.menuItem")!==e.from().data.menuItem&&YE(_.get(n,"data.menuItem"),"add")}),n.onExit({},function(e,n){KE(_.get(n,"data.bodyClasses"),"remove"),e.to().data&&_.get(n,"data.menuItem")!==e.to().data.menuItem&&YE(_.get(n,"data.menuItem"),"remove")}),n.onStart({},function(e){var n=e.router.stateService,a=e.params("to"),s=(e.from(),e.to());if(a.start_onboarding_tour&&"work-packages.list"!==s.name){var c=Object.assign({},e.params());return c.start_onboarding_tour=void 0,n.target(e.to(),c)}o.sync(e);var d=window.MiniProfiler;d&&d.pageTransition();var p=a.projectPath||i.identifier;if(!a.projects&&p){var h=_.clone(a);return _.assign(h,{projectPath:p,projects:"projects"}),n.target(s,h,{location:"replace"})}if(null===u){e.options().source;var f=window.location.pathname,g=t.href(s,a);if(f!==g)return window.location.href=g,!1}return KE(_.get(s,"data.bodyClasses"),"add"),r.setIfFirst(s.name,a),e.to().name!==e.from().name&&l.clear(),a.flash_message&&l.add(a.flash_message),!0})}},AD=function(){},VD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.schemas.get(this.href)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableAttributes",{get:function(){return _.keys(this.$source).filter(function(e){return 0!==e.indexOf("_")})},enumerable:!0,configurable:!0}),n}(L),MD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.types.get(this.href)},enumerable:!0,configurable:!0}),n}(L),qD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.forValue=function(e){return this.dependencies[e]},n}(L),LD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(Os),$D=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.getErrors=function(){var e,n=_.values(this.validationErrors),t=n.length;return 0===t?null:(1===t?e=new En(this.injector,n[0],!0,this.halInitializer,"Error"):((e=new En(this.injector,{},!0,this.halInitializer,"Error")).errorIdentifier="urn:openproject-org:api:v3:errors:MultipleErrors",e.errors=n),e.isValidationError=!0,e)},n}(L),HD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"_type",{get:function(){return"QueryFilterInstanceSchema"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"availableOperators",{get:function(){return this.operator.allowedValues},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allowedFilterValue",{get:function(){return this.filter.allowedValues instanceof Os?this.filter.allowedValues.elements[0]:this.filter.allowedValues[0]},enumerable:!0,configurable:!0}),n.prototype.$initialize=function(n){e.prototype.$initialize.call(this,n),n._dependencies&&(this.dependency=new qD(this.injector,n._dependencies[0],!0,this.halInitializer,"SchemaDependency"))},n.prototype.getFilter=function(){var e=this.operator.allowedValues[0],n=this.filter.allowedValues[0],t={name:n.name,_links:{filter:n.$source._links.self,schema:this.$source._links.self,operator:e.$source._links.self}};this.definesAllowedValues()?t._links.values=[]:t.values=[];var l=new Je(this.injector,t,!0,this.halInitializer,"QueryFilterInstance");return l.schema=this,l},n.prototype.isValueRequired=function(){return!!this.values},n.prototype.isResourceValue=function(){return!(!this.values||!this.values.allowedValues)},n.prototype.resultingSchema=function(e){var t=this.$source,l=this.dependency.forValue(e.href.toString()),i={};return _.merge(i,t,l),new n(this.injector,i,!0,this.halInitializer,"QueryFilterInstanceSchema")},n.prototype.definesAllowedValues=function(){return _.some(this._dependencies[0].dependencies,function(e){return e.values&&e.values._links&&e.values._links.allowedValues})},n}(VD),BD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),zD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"id",{get:function(){return this.$source.id||this.idFromLink},set:function(e){this.$source.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"idFromLink",{get:function(){if(this.$href){var e=L.idFromLink(this.$href);return decodeURIComponent(e)}return""},enumerable:!0,configurable:!0}),n}(L),WD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),QD=Fs(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return a.d(n,e),n}(L)),UD=Fs(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return a.d(n,e),n}(L)),GD=Fs(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return a.d(n,e),n}(L)),KD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.statuses.get(this.href)},enumerable:!0,configurable:!0}),n}(L),YD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),ZD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),JD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),XD=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L),eF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.schemaCacheService=n.injector.get(vn),n}return a.d(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.states.projects.get(this.id)},enumerable:!0,configurable:!0}),n.prototype.getEditorTypeFor=function(e){return-1!==["statusExplanation","description"].indexOf(e)?"full":"constrained"},Object.defineProperty(n.prototype,"schema",{get:function(){var e=this.schemaCacheService.state(this);if(!e.hasValue())throw"Accessing schema of "+this.id+" without it being loaded.";return e.value},enumerable:!0,configurable:!0}),n.prototype.$linkableKeys=function(){return _.without(e.prototype.$linkableKeys.call(this),"schema")},n}(L),nF={WorkPackage:{cls:Ms,attrTypes:{parent:"WorkPackage",ancestors:"WorkPackage",children:"WorkPackage",relations:"Relation",schema:"Schema",status:"Status",type:"Type"}},Activity:{cls:L,attrTypes:{user:"User"}},"Activity::Comment":{cls:L,attrTypes:{user:"User"}},"Activity::Revision":{cls:L,attrTypes:{user:"User"}},Relation:{cls:_p,attrTypes:{from:"WorkPackage",to:"WorkPackage"}},Schema:{cls:VD},Type:{cls:MD},Status:{cls:KD},SchemaDependency:{cls:qD},Error:{cls:En},User:{cls:$i},Collection:{cls:Os},WorkPackageCollection:{cls:LD},AttachmentCollection:{cls:Es},Query:{cls:Hp,attrTypes:{filters:"QueryFilterInstance"}},Form:{cls:$D,attrTypes:{payload:"FormPayload"}},FormPayload:{cls:L,attrTypes:{attachments:"AttachmentsCollection"}},QueryFilterInstance:{cls:Je,attrTypes:{schema:"QueryFilterInstanceSchema",filter:"QueryFilter",operator:"QueryOperator"}},QueryFilterInstanceSchema:{cls:HD},QueryFilter:{cls:Xe},Root:{cls:BD},QueryOperator:{cls:zD},HelpText:{cls:WD},CustomAction:{cls:Fp},WikiPage:{cls:QD},MeetingContent:{cls:UD},Post:{cls:GD},Project:{cls:eF},Role:{cls:XD},Grid:{cls:tT},GridWidget:{cls:XI},TimeEntry:{cls:YD},Membership:{cls:JD},News:{cls:ZD},Version:{cls:MI}};var tF=function(e){return function(){_.each(nF,function(n,t){return e.registerResource(t,n)})}},lF=function(){};var iF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(Ha),rF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return null==this.value?"":this.value.toLocaleString(this.I18n.locale,{useGrouping:!0,maximumFractionDigits:20})},enumerable:!0,configurable:!0}),n}(Ha),oF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return parseInt(this.resource[this.name])},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return isNaN(this.value)},n}(Ha),uF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n}(Ha),aF=function(){function e(){}return Object.defineProperty(e,"UNESCAPED_EXPRESSION",{get:function(){return"{{"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ESCAPED_EXPRESSION",{get:function(){return"{{ \\$root\\.DOUBLE_LEFT_CURLY_BRACE }}"},enumerable:!0,configurable:!0}),e.escape=function(e){return e.replace(new RegExp(this.UNESCAPED_EXPRESSION,"g"),this.ESCAPED_EXPRESSION)},e.unescape=function(e){return e.replace(new RegExp(this.ESCAPED_EXPRESSION,"g"),this.UNESCAPED_EXPRESSION)},e}(),sF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.appRef=n.$injector.get(l.ApplicationRef),n}return a.d(n,e),n.prototype.render=function(e,n,t){void 0===t&&(t={});var l=document.createElement("div");l.classList.add("read-value--html","wiki","highlight","-multiline"),t.rtl&&l.classList.add("-rtl"),l.innerHTML=n,e.innerHTML="",e.appendChild(l),Tt.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.appRef,l)},Object.defineProperty(n.prototype,"isFormattable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(!this.schema)return null;var e=this.resource[this.name];return e&&e.html?this.unescape(e.html):""},enumerable:!0,configurable:!0}),n.prototype.unescape=function(e){return e?aF.unescape(e):""},n}(Ha),cF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(nl),n.derivedText=n.I18n.t("js.label_value_derived_from_children"),n}return a.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.timezoneService.formattedDuration(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"derivedPropertyName",{get:function(){return"derived"+this.name.charAt(0).toUpperCase()+this.name.slice(1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"derivedValue",{get:function(){return this.resource[this.derivedPropertyName]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"derivedValueString",{get:function(){var e=this.derivedValue;return e?this.timezoneService.formattedDuration(e):this.placeholder},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){if(this.isEmpty())e.textContent=this.placeholder;else{e.classList.add("split-time-field");var t=this.value,l=t&&this.timezoneService.toHours(t)||0;0!==l&&this.renderActual(e,n);var i=this.derivedValue;i&&0!==this.timezoneService.toHours(i)&&this.renderDerived(e,this.derivedValueString,0!==l)}},n.prototype.renderActual=function(e,n){var t=document.createElement("span");t.textContent=n,t.title=this.valueString,t.classList.add("-actual-value"),e.appendChild(t)},n.prototype.renderDerived=function(e,n,t){var l=document.createElement("span");l.setAttribute("title",this.texts.empty),l.textContent="("+(t?"+":"")+n+")",l.title=this.derivedValueString+" "+this.derivedText,l.classList.add("-derived-value"),t&&l.classList.add("-with-actual-value"),e.appendChild(l)},Object.defineProperty(n.prototype,"title",{get:function(){return null},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){var e=this.value,n=this.derivedValue,t=!e||0===this.timezoneService.toHours(e),l=!n||0===this.timezoneService.toHours(n);return t&&l},n}(Ha),dF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.viewHighlighting=n.$injector.get(sn,null),n}return a.d(n,e),Object.defineProperty(n.prototype,"shouldHighlight",{get:function(){if(!1===this.context.options.colorize)return!1;var e=!!this.viewHighlighting&&this.viewHighlighting.shouldHighlightInline(this.name);return"table"!==this.context.container||e},enumerable:!0,configurable:!0}),n}(Ha),pF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(nl),n}return a.d(n,e),n.prototype.render=function(n,t){if(e.prototype.render.call(this,n,t),this.shouldHighlight&&this.canOverdue){var l=this.timezoneService.daysFromToday(this.value);n.classList.add(Ul.overdueDate(l))}},Object.defineProperty(n.prototype,"canOverdue",{get:function(){return-1!==["dueDate","date"].indexOf(this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value?this.timezoneService.formattedDate(this.value):""},enumerable:!0,configurable:!0}),n}(dF),hF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timezoneService=n.$injector.get(nl),n}return a.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.value?this.timezoneService.formattedDatetime(this.value):""},enumerable:!0,configurable:!0}),n}(Ha),fF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"valueString",{get:function(){return this.translatedValue()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"placeholder",{get:function(){return this.translatedValue()},enumerable:!0,configurable:!0}),n.prototype.translatedValue=function(){return this.value?this.I18n.t("js.general_text_yes"):this.I18n.t("js.general_text_no")},n.prototype.isEmpty=function(){return!1},n}(Ha),gF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_successful_show_in_fullscreen"),none:n.I18n.t("js.filter.noneElement")},n.$state=n.$injector.get(g.G),n.keepTab=n.$injector.get(_e),n.uiStateBuilder=new Te(n.$state,n.keepTab),n}return a.d(n,e),n.prototype.render=function(e,n){if(this.isEmpty())e.innerText=this.placeholder;else{var t=this.uiStateBuilder.linkToShow(this.wpId,this.text.linkTitle,this.valueString);e.innerHTML="",e.appendChild(t)}},Object.defineProperty(n.prototype,"value",{get:function(){return this.resource[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.isEmpty()?this.text.none:this.value.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"wpId",{get:function(){return this.isEmpty()?null:this.value.$loaded?this.value.id:this.value.href.match(/(\d+)$/)[0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"writable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueString",{get:function(){return"#"+this.wpId},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return!this.value},Object.defineProperty(n.prototype,"unknownAttribute",{get:function(){return!1},enumerable:!0,configurable:!0}),n}(Ha),mF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_view_spent_time")},n.PathHelper=n.$injector.get(ge),n.projectCacheService=n.$injector.get(Gc),n}return a.d(n,e),n.prototype.render=function(e,n){var t=this;if(this.value){var l=document.createElement("a");if(l.textContent=n,l.setAttribute("title",this.text.linkTitle),this.resource.project){var i=this.resource.id.toString();this.projectCacheService.require(this.resource.project.idFromLink).then(function(e){var n=URI(t.PathHelper.projectTimeEntriesPath(e.identifier)).search({work_package_id:i}).toString();l.href=n})}e.innerHTML="",e.appendChild(l)}},n}(cF),vF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.text={linkTitle:n.I18n.t("js.work_packages.message_successful_show_in_fullscreen")},n}return a.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.resource.isNew?null:this.resource[this.name]},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){this.value&&(e.textContent=n)},n.prototype.isEmpty=function(){return!1},n}(Ha),bF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.render=function(n,t){e.prototype.render.call(this,n,t),this.shouldHighlight&&this.addHighlight(n)},Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n.prototype.addHighlight=function(e){if(this.attribute instanceof L){var n=Ul.inlineClass(this.name,this.attribute.id);e.classList.add(n)}},n}(dF),yF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),Object.defineProperty(n.prototype,"shouldHighlight",{get:function(){return!0},enumerable:!0,configurable:!0}),n}(bF),wF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userDisplayPortal=n.$injector.get(Ga),n.portalCleanup=n.$injector.get(Ua),n}return a.d(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.schema?this.attribute&&this.attribute.name:null},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this;this.placeholder===n?this.renderEmpty(e):(this.outlet=this.userDisplayPortal.create(e,[this.attribute]),this.portalCleanup.add(function(){return t.outlet.dispose()}))},n}(Ha),CF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userDisplayPortal=n.$injector.get(Ga),n.portalCleanup=n.$injector.get(Ua),n}return a.d(n,e),n.prototype.render=function(e,n){var t=this.value;e.innerHTML="",e.setAttribute("title",t.join(", ")),0===t.length?this.renderEmpty(e):this.renderValues(this.attribute,e)},n.prototype.renderValues=function(e,n){var t=document.createDocumentFragment();if(this.renderAbridgedValues(n,e),e.length>2){var l=document.createElement("span");l.innerHTML="... ",t.appendChild(l);var i=this.optionDiv(e.length.toString(),"badge","-secondary");t.appendChild(i)}n.appendChild(t)},n.prototype.renderAbridgedValues=function(e,n){var t=this,l=_.take(n,2);this.outlet=this.userDisplayPortal.create(e,l),this.portalCleanup.add(function(){return t.outlet.dispose()})},n}(Ba),kF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.$state=n.$injector.get(g.G),n.keepTab=n.$injector.get(_e),n.uiStateBuilder=new Te(n.$state,n.keepTab),n}return a.d(n,e),n.prototype.render=function(e,n){if(this.value){var t=this.uiStateBuilder.linkToShow(this.value,n,this.value);e.appendChild(t)}},n}(vF),IF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.render=function(e,n){var t=this.value;e.innerHTML='\n      <span class="project-status--bulb '+fs(t)+'"></span>\n      <span class="project-status--name '+fs(t)+'">'+gs(t,this.I18n)+'</span>\n      <span class="project-status--pulldown-icon icon icon-pulldown"></span>\n    '},n}(Ha);var jF=function(e,n){return function(){e.defaultFieldType="text",e.addFieldType(Ea,"text",["String"]).addFieldType(ua,"integer",["Integer"]).addFieldType(Xu,"duration",["Duration"]).addFieldType(_a,"select",["Priority","Status","Type","User","Version","Category","CustomOption","Project"]).addFieldType(wa,"multi-select",["[]CustomOption","[]User"]).addFieldType(la,"float",["Float"]).addFieldType(Aa,"workPackage",["WorkPackage"]).addFieldType($u,"boolean",["Boolean"]).addFieldType(Ku,"date",["Date"]).addFieldType(ga,"wiki-textarea",["Formattable"]).addFieldType(vs,"project_status",["ProjectStatus"]).addFieldType(dy,"_comment",["comment"]),n.register(Wt,"Version")}},RF=function(e){return function(){e.defaultFieldType="text",e.addFieldType(iF,"text",["String"]).addFieldType(rF,"float",["Float"]).addFieldType(oF,"integer",["Integer"]).addFieldType(bF,"highlight",["Status","Priority"]).addFieldType(yF,"type",["Type"]).addFieldType(uF,"resource",["Project","Version","Category","CustomOption"]).addFieldType(Ba,"resources",["[]CustomOption"]).addFieldType(CF,"users",["[]User"]).addFieldType(sF,"formattable",["Formattable"]).addFieldType(cF,"duration",["Duration"]).addFieldType(pF,"date",["Date"]).addFieldType(hF,"datetime",["DateTime"]).addFieldType(fF,"boolean",["Boolean"]).addFieldType(Wa,"progress",["percentageDone"]).addFieldType(gF,"work_package",["WorkPackage"]).addFieldType(vF,"id",["id"]).addFieldType(IF,"project_status",["ProjectStatus"]).addFieldType(wF,"user",["User"]),e.addSpecificFieldType("WorkPackage",kF,"id",["id"]).addSpecificFieldType("WorkPackage",mF,"spentTime",["spentTime"])}},PF=function(){},SF=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.pathHelper=n.$injector.get(ge),n}return a.d(n,e),n.prototype.render=function(e,n){if(_.get(this,"resource.bcf.viewpoints[0]")){var t=this.resource.bcf.viewpoints[0];e.innerHTML='\n        <img src="'+this.pathHelper.attachmentDownloadPath(t.id,t.file_name)+'" class="thumbnail">\n      '}else e.innerHTML=""},n}(Ha);var _F=function(e){return function(){e.addFieldType(SF,"bcfThumbnail",["BCF Thumbnail"])}},xF=function(){},TF=function(){function e(){}return e.bootstrapAttributeGroups=function(e){return this.bootstrapAttributeGroupsCalled?function(){}:(this.bootstrapAttributeGroupsCalled=!0,function(){var n=e.get(It);n.register("attributeGroupComponent",function(e,n){return"WorkPackageFormAttributeGroup"===e.type?LC:n.isNew||"WorkPackageFormChildrenQueryGroup"!==e.type?n.isNew||"WorkPackageFormRelationQueryGroup"!==e.type?null:XC:Ib}),n.register("workPackageAttachmentUploadComponent",function(e){return Do}),n.register("workPackageAttachmentListComponent",function(e){return So}),n.register("halResourceChangesetClass",function(e){return"WorkPackage"===e._type?Sh:null})})},e.bootstrapAttributeGroupsCalled=!1,e}(),OF=(t("qb46"),function(){});var EF=function(){};function DF(e){return function(){var n=e.get(It),t=e.get(A.a);n.register("gridWidgets",function(){var e=["id","project","type","subject"],n=new re;n.add("assignee","=",["me"]),n.add("status","o",[]);var l={"columns[]":e,filters:n.toJson()},i=new re;i.add("responsible","=",["me"]),i.add("status","o",[]);var r={"columns[]":e,filters:i.toJson()},o=new re;o.add("author","=",["me"]),o.add("status","o",[]);var u={"columns[]":e,filters:o.toJson()},a=new re;a.add("watcher","=",["me"]),a.add("status","o",[]);var s={"columns[]":e,filters:a.toJson()};return[{identifier:"work_packages_assigned",component:y_,title:t.t("js.grid.widgets.work_packages_assigned.title"),properties:{queryProps:l,name:t.t("js.grid.widgets.work_packages_assigned.title")}},{identifier:"work_packages_accountable",component:y_,title:t.t("js.grid.widgets.work_packages_accountable.title"),properties:{queryProps:r,name:t.t("js.grid.widgets.work_packages_accountable.title")}},{identifier:"work_packages_created",component:y_,title:t.t("js.grid.widgets.work_packages_created.title"),properties:{queryProps:u,name:t.t("js.grid.widgets.work_packages_created.title")}},{identifier:"work_packages_watched",component:y_,title:t.t("js.grid.widgets.work_packages_watched.title"),properties:{queryProps:s,name:t.t("js.grid.widgets.work_packages_watched.title")}},{identifier:"work_packages_table",component:y_,title:t.t("js.grid.widgets.work_packages_table.title"),properties:{name:t.t("js.grid.widgets.work_packages_table.title")}},{identifier:"work_packages_graph",component:__,title:t.t("js.grid.widgets.work_packages_graph.title"),properties:{name:t.t("js.grid.widgets.work_packages_graph.title")}},{identifier:"work_packages_calendar",component:D_,title:t.t("js.grid.widgets.work_packages_calendar.title"),properties:{name:t.t("js.grid.widgets.work_packages_calendar.title")}},{identifier:"work_packages_overview",component:V_,title:t.t("js.grid.widgets.work_packages_overview.title"),properties:{name:t.t("js.grid.widgets.work_packages_overview.title")}},{identifier:"time_entries_current_user",component:dx,title:t.t("js.grid.widgets.time_entries_list.title"),properties:{name:t.t("js.grid.widgets.time_entries_list.title")}},{identifier:"time_entries_project",component:_x,title:t.t("js.grid.widgets.time_entries_list.title"),properties:{name:t.t("js.grid.widgets.time_entries_list.title")}},{identifier:"documents",component:OS,title:t.t("js.grid.widgets.documents.title"),properties:{name:t.t("js.grid.widgets.documents.title")}},{identifier:"members",component:MS,title:t.t("js.grid.widgets.members.title"),properties:{name:t.t("js.grid.widgets.members.title")}},{identifier:"news",component:XS,title:t.t("js.grid.widgets.news.title"),properties:{name:t.t("js.grid.widgets.news.title")}},{identifier:"project_description",component:$_,title:t.t("js.grid.widgets.project_description.title"),properties:{name:t.t("js.grid.widgets.project_description.title")}},{identifier:"custom_text",component:vS,title:t.t("js.grid.widgets.custom_text.title"),properties:{name:t.t("js.grid.widgets.custom_text.title"),text:{raw:""}}},{identifier:"project_details",component:Q_,title:t.t("js.grid.widgets.project_details.title"),properties:{name:t.t("js.grid.widgets.project_details.title")}},{identifier:"project_status",component:J_,title:t.t("js.grid.widgets.project_status.title"),properties:{name:t.t("js.grid.widgets.project_status.title")}},{identifier:"subprojects",component:lx,title:t.t("js.grid.widgets.subprojects.title"),properties:{name:t.t("js.grid.widgets.subprojects.title")}}]})}}var FF=function(){function e(e){var n=this;this.injector=e,this._knownHookNames=["workPackageTableContextMenu","workPackageSingleContextMenu","workPackageNewInitialization"],this.services={confirmDialog:this.injector.get(pm),externalQueryConfiguration:this.injector.get(bt),externalRelationQueryConfiguration:this.injector.get(kt),halResource:this.injector.get(Q),hooks:this.injector.get(It),i18n:this.injector.get(A.a),notifications:this.injector.get(Vn),opModalService:this.injector.get(Wn.b),opFileUpload:this.injector.get(Ds),helpTextDm:this.injector.get(qr),attributeHelpTexts:this.injector.get(Lr),displayField:this.injector.get($a),editField:this.injector.get(Ru),wpCache:this.injector.get(Cn),macros:this.injector.get(xt),htmlSanitizeService:this.injector.get(DE),ckEditorPreview:this.injector.get(ME),pathHelperService:this.injector.get(ge),states:this.injector.get(d)},this.classes={modals:{passwordConfirmation:oE,attributeHelpTexts:$r,dynamicContent:JO.a},HalResource:L,DisplayField:Ha},this.hooks={},this.zone=this.injector.get(l.NgZone),this._knownHookNames.forEach(function(e){n.hooks[e]=function(t){return n.services.hooks.register(e,t)}})}return e.prototype.runInZone=function(e){this.zone.run(e)},e.prototype.bootstrap=function(e){Tt.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.injector.get(l.ApplicationRef),e)},e}();function NF(e){return function(){Object(bn.a)("Registering OpenProject plugin context");var n=new FF(e);window.OpenProject.pluginContext.putValue(n)}}var AF=function(){};function VF(e){return function(){e.get(It).register("openProjectAngularBootstrap",function(){return[{selector:"avatar-upload-form",cls:qO}]})}}var MF=function(){},qF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.apply=function(n,t){e.prototype.apply.call(this,n,t),this.wpCacheService=this.$injector.get(Cn),this.loadIfNecessary()},n.prototype.loadIfNecessary=function(){var e=this;this.value&&!1===this.value.$loaded&&this.value.$load().then(function(){"WorkPackage"===e.resource.$source._type&&e.wpCacheService.touch(e.resource.id)})},Object.defineProperty(n.prototype,"title",{get:function(){return""},enumerable:!0,configurable:!0}),n.prototype.render=function(e,n){var t=this;this.isEmpty()?e.textContent=this.placeholder:this.value.elements.forEach(function(n,l){t.resource.showCosts?t.renderCostAsLink(n,e,l):t.renderCostAsText(n,e,l)})},n.prototype.isEmpty=function(){return!this.value||!this.value.elements||0===this.value.elements.length},n.prototype.renderCostAsLink=function(e,n,t){var l=this.resource.showCosts,i=document.createElement("a");i.href=l.href+"?cost_type_id="+e.costObjectId,i.setAttribute("target","_blank"),i.textContent=e.spentUnits+" "+e.costType.name,n.appendChild(i),this.addSeparator(n,t)},n.prototype.renderCostAsText=function(e,n,t){document.createElement("span").textContent=e.spentUnits+" "+e.costType.name,this.addSeparator(n,t)},n.prototype.addSeparator=function(e,n){if(n<this.value.elements.length-1){var t=document.createElement("span");t.textContent=", ",e.appendChild(t)}},n}(Ha),LF=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n.prototype.isEmpty=function(){return!this.value||!parseFloat(this.value.match(/\d+/g)[0])},n}(Ha),$F=Fs(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.d(n,e),n}(L)),HF=function(){jQuery("costs-subform").each(function(e,n){var t=jQuery(n),l=t.find(".subform-container"),i=t.find(".subform-row-template");i.detach();var r=i[0].outerHTML,o=parseInt(t.attr("item-count"));t.on("click",".delete-row-button,.delete-budget-item",function(e){return jQuery(e.target).closest(".subform-row").remove(),!1}),t.find(".add-row-button,.wp-inline-create--add-link").click(function(e){e.preventDefault();var n=jQuery(r.replace(/INDEX/g,o.toString()));return n.show(),n.removeClass("subform-row-template"),l.append(n),o+=1,l.find(".costs-date-picker").datepicker(),l.find(".subform-row:last-child input:first").focus(),!1})})},BF=function(){function e(e){this.$element=e,this.objId=this.$element.attr("obj-id"),this.objName=this.$element.attr("obj-name"),this.obj=jQuery("#"+this.objId),this.makeEditable("#"+this.objId,this.objName)}return e.listen=function(){jQuery(document).on("click",".costs--edit-planned-costs-btn",function(n){new e(jQuery(n.target).closest("cost-unit-subform"))})},e.prototype.getCurrencyValue=function(e){var n=e.match(/^\s*(([0-9]+[.,])+[0-9]+) (.+)\s*/);return n?new Array(n[1],n[3]):new Array(e,"")},e.prototype.makeEditable=function(e,n){this.edit_and_focus()},e.prototype.edit_and_focus=function(){this.edit(),jQuery("#"+this.objId+"_edit").trigger("focus"),jQuery("#"+this.objId+"_edit").trigger("select")},e.prototype.edit=function(){this.obj.hide();var e=this.obj[0].innerHTML,n=this.obj[0].id,t=this.getCurrencyValue(e),l=t[0],i=t[1],r=this.objName;jQuery('\n      <section class="form--section" id="'+n+'_section">\n        <div class="form--field">\n          <div class="form--field-container">\n            <div id="'+n+'_cancel" class="form--field-affix -transparent icon icon-close"></div>\n            <div id="'+n+'_editor" class="form--text-field-container">\n                <input id="'+n+'_edit" class="form--text-field" name="'+r+'" value="'+l+'" class="currency" type="text" />\n            </div>\n            <div class="form--field-affix" id="'+n+'_affix">'+i+"</div>\n          </div>\n        </div>\n      </section>\n    ").insertAfter(this.obj);var o=this;jQuery("#"+n+"_cancel").on("click",function(){return jQuery("#"+n+"_section").remove(),o.obj.show(),!1})},e}();function zF(e){return function(){window.OpenProject.getPluginContext().then(function(n){n.services.editField.extendFieldType("select",["Budget"]);var t=n.services.displayField;t.extendFieldType("resource",["Budget"]),t.addFieldType(qF,"costs",["costsByType"]),t.addFieldType(LF,"currency",["laborCosts","materialCosts","overallCosts"]),n.services.halResource.registerResource("Budget",{cls:$F}),n.hooks.workPackageSingleContextMenu(function(e){return{key:"log_costs",icon:"icon-projects",indexBy:function(e){var n=_.findIndex(e,{key:"log_time"});return-1!==n?n+1:e.length},resource:"workPackage",link:"logCosts"}}),n.hooks.workPackageTableContextMenu(function(e){return{key:"log_costs",icon:"icon-projects",link:"logCosts",indexBy:function(e){var n=_.findIndex(e,{link:"logTime"});return-1!==n?n+1:e.length},text:I18n.t("js.button_log_costs")}}),n.services.states.add("budgets",Object(s.g)()),new HF,BF.listen(),e.get(zE).listen()})}}var WF=function(){},QF=Fs(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.attachmentsBackend=!1,n}return a.d(n,e),n}(L));var UF=function(){},GF=function(){},KF=function(){},YF=function(){},ZF=function(){},JF=function(){},XF=function(){},eN=function(){},nN=t("ZYCi"),tN=l["ɵcmf"](At,[],function(e){return l["ɵmod"]([l["ɵmpd"](512,l.ComponentFactoryResolver,l["ɵCodegenComponentFactoryResolver"],[[8,[Mt.b,Kt,Xt,rl,sl,Hl,Gl,ei,wi,Ti,Ai,Li,lr,Ui,sr,hr,vr,kr,xr,Fr,Mr,Qr,Yr,ro,po,zo,Vo,Eo,nu,ru,su,hu,Ou,Lu,zu,Ju,ta,oa,ca,ya,ja,Oa,Na,La,hs,Is,id,ph,df,zb,Xb,cy,gy,by,Iy,Jw,Fw,pC,vC,IC,_C,wb,EC,AC,qC,JC,_b,ik,Kv,dk,gk,yk,jk,_k,Ak,Bk,Uk,Jk,iI,uI,vI,kI,Eb,PI,OI,Tw,hw,VI,zI,JI,vj,mR,kR,_R,DR,AR,$R,WR,iP,pP,wP,AP,KP,XP,WP,TS,AS,ZS,o_,I_,E_,A_,L_,W_,Z_,tx,sx,Sx,Bx,Yx,RT,ET,qT,YT,iO,sO,hO,MO,WO,ZO,nE,rE,sE,hE,bE,kE,SE,OE]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["ɵmpd"](5120,l.LOCALE_ID,l["ɵangular_packages_core_core_p"],[[3,l.LOCALE_ID]]),l["ɵmpd"](4608,$t.NgLocalization,$t.NgLocaleLocalization,[l.LOCALE_ID,[2,$t["ɵangular_packages_common_common_a"]]]),l["ɵmpd"](5120,l["ɵangular_packages_core_core_ba"],l["ɵangular_packages_core_core_r"],[l.NgZone]),l["ɵmpd"](4608,l.Compiler,l.Compiler,[]),l["ɵmpd"](5120,l.APP_ID,l["ɵangular_packages_core_core_f"],[]),l["ɵmpd"](5120,l.IterableDiffers,l["ɵangular_packages_core_core_n"],[]),l["ɵmpd"](5120,l.KeyValueDiffers,l["ɵangular_packages_core_core_o"],[]),l["ɵmpd"](4608,rr.DomSanitizer,rr["ɵDomSanitizerImpl"],[$t.DOCUMENT]),l["ɵmpd"](6144,l.Sanitizer,null,[rr.DomSanitizer]),l["ɵmpd"](4608,rr.HAMMER_GESTURE_CONFIG,Sd.CustomHammerConfig,[]),l["ɵmpd"](5120,rr.EVENT_MANAGER_PLUGINS,function(e,n,t,l,i,r,o,u){return[new rr["ɵDomEventsPlugin"](e,n,t),new rr["ɵKeyEventsPlugin"](l),new rr["ɵHammerGesturesPlugin"](i,r,o,u)]},[$t.DOCUMENT,l.NgZone,l.PLATFORM_ID,$t.DOCUMENT,$t.DOCUMENT,rr.HAMMER_GESTURE_CONFIG,l["ɵConsole"],[2,rr.HAMMER_LOADER]]),l["ɵmpd"](4608,rr.EventManager,rr.EventManager,[rr.EVENT_MANAGER_PLUGINS,l.NgZone]),l["ɵmpd"](135680,rr["ɵDomSharedStylesHost"],rr["ɵDomSharedStylesHost"],[$t.DOCUMENT]),l["ɵmpd"](4608,rr["ɵDomRendererFactory2"],rr["ɵDomRendererFactory2"],[rr.EventManager,rr["ɵDomSharedStylesHost"],l.APP_ID]),l["ɵmpd"](6144,l.RendererFactory2,null,[rr["ɵDomRendererFactory2"]]),l["ɵmpd"](6144,rr["ɵSharedStylesHost"],null,[rr["ɵDomSharedStylesHost"]]),l["ɵmpd"](4608,l.Testability,l.Testability,[l.NgZone]),l["ɵmpd"](4608,Ht.s,Ht.s,[]),l["ɵmpd"](4608,kj.g,kj.g,[$t.DOCUMENT,l.NgZone,EE.a,kj.i]),l["ɵmpd"](4608,fu.h,fu.h,[l.KeyValueDiffers,l.ComponentFactoryResolver]),l["ɵmpd"](5120,fu.i,fu.d,[]),l["ɵmpd"](4608,fu.j,fu.j,[l.Injector]),l["ɵmpd"](4608,Ge,Ge,[$t.DOCUMENT]),l["ɵmpd"](4608,ve,ve,[Q,ge]),l["ɵmpd"](4608,be,be,[A.a,ve]),l["ɵmpd"](4608,Vn,Vn,[be]),l["ɵmpd"](4608,Nn,Nn,[]),l["ɵmpd"](4608,In,In,[]),l["ɵmpd"](4608,qr,qr,[Q,ge]),l["ɵmpd"](4608,Lr,Lr,[qr]),l["ɵmpd"](4608,DE,DE,[rr.DomSanitizer]),l["ɵmpd"](4608,nl,nl,[be,A.a]),l["ɵmpd"](4608,Hc,Hc,[$t.DOCUMENT]),l["ɵmpd"](4608,Ir,Ir,[]),l["ɵmpd"](4608,Pc,Pc,[l.Injector]),l["ɵmpd"](4608,jr,jr,[Ir]),l["ɵmpd"](5120,g.F,FE.f,[g.P]),l["ɵmpd"](5120,"UIView.PARENT_INJECT",FE.m,[g.F]),l["ɵmpd"](5120,g.G,FE.g,[g.P]),l["ɵmpd"](5120,g.U,FE.i,[g.P]),l["ɵmpd"](5120,g.V,FE.j,[g.P]),l["ɵmpd"](5120,g.Y,FE.k,[g.P]),l["ɵmpd"](5120,g.Z,FE.l,[g.P]),l["ɵmpd"](5120,g.Q,FE.e,[g.P]),l["ɵmpd"](4608,Qc,Qc,[]),l["ɵmpd"](4608,V.k,V.q,[$t.DOCUMENT,l.PLATFORM_ID,V.o]),l["ɵmpd"](4608,V.r,V.r,[V.k,V.p]),l["ɵmpd"](5120,V.a,function(e){return[e,new NE]},[V.r]),l["ɵmpd"](4608,Pa,Pa,[]),l["ɵmpd"](4608,Fe,Fe,[]),l["ɵmpd"](4608,WI,WI,[Q,ge,Fe]),l["ɵmpd"](4608,VS,VS,[Q,ge]),l["ɵmpd"](4608,JS,JS,[Q,ge]),l["ɵmpd"](4608,Uc,Uc,[Q,ge]),l["ɵmpd"](4608,Ce,Ce,[be]),l["ɵmpd"](4608,Ne,Ne,[Ce]),l["ɵmpd"](4608,Ae,Ae,[]),l["ɵmpd"](4608,Me,Me,[Q,V.c,ge,Ne,Ae,Fe]),l["ɵmpd"](4608,Rn,Rn,[V.c,ge]),l["ɵmpd"](4608,hn,hn,[Q,ge]),l["ɵmpd"](4608,xn,xn,[Q,ge]),l["ɵmpd"](4608,hg,hg,[Q,ge]),l["ɵmpd"](4608,px,px,[Q,ge]),l["ɵmpd"](4608,AE,AE,[Q,d,ge]),l["ɵmpd"](4608,mh,mh,[Q,ge]),l["ɵmpd"](4608,VE,VE,[Q,ge]),l["ɵmpd"](4608,Bt,Bt,[Q,ge]),l["ɵmpd"](4608,Mn,Mn,[l.Injector]),l["ɵmpd"](4608,ct,ct,[]),l["ɵmpd"](4608,Wn.b,Wn.b,[l.ComponentFactoryResolver,m.a,l.ApplicationRef,g.O,l.Injector]),l["ɵmpd"](4608,xt,xt,[Wn.b,l.Injector]),l["ɵmpd"](4608,Wo,Wo,[ge]),l["ɵmpd"](4608,ME,ME,[l.ComponentFactoryResolver,l.ApplicationRef,l.Injector]),l["ɵmpd"](4608,us,us,[l.ApplicationRef,l.ComponentFactoryResolver,ge]),l["ɵmpd"](4608,Ga,Ga,[l.ApplicationRef,l.ComponentFactoryResolver,l.Injector]),l["ɵmpd"](4608,Ua,Ua,[]),l["ɵmpd"](4608,Jn,Jn,[$t.DOCUMENT]),l["ɵmpd"](4608,jy,jy,[ge]),l["ɵmpd"](4608,vn,vn,[d,Q]),l["ɵmpd"](4608,yn,yn,[Q,ge,d]),l["ɵmpd"](4608,Cn,Cn,[d,vn,yn]),l["ɵmpd"](4608,qn,qn,[l.Injector,g.G,Cn]),l["ɵmpd"](4608,bt,bt,[l.ComponentFactoryResolver,m.a,l.ApplicationRef,g.O,l.Injector]),l["ɵmpd"](4608,kt,kt,[l.ComponentFactoryResolver,m.a,l.ApplicationRef,g.O,l.Injector]),l["ɵmpd"](4608,Zn,Zn,[]),l["ɵmpd"](4608,Xn,Xn,[A.a,g.G,Qn,ge,Zn,Jn]),l["ɵmpd"](4608,et,et,[Q,hn]),l["ɵmpd"](4608,On,On,[xn,ge,Q]),l["ɵmpd"](4608,_e,_e,[g.G,g.O]),l["ɵmpd"](4608,Vs,Vs,[be,nl]),l["ɵmpd"](4608,mc,mc,[]),l["ɵmpd"](4608,UI,UI,[WI,ge,In,Qn,Q]),l["ɵmpd"](4608,GI,GI,[UI]),l["ɵmpd"](4608,nj,nj,[]),l["ɵmpd"](4608,ej,ej,[Qn,ge,Me,Q,hn,Vn,A.a]),l["ɵmpd"](4608,tj,tj,[UI,ge,Ir,Qn,Q,GI,nj,A.a,ej]),l["ɵmpd"](4608,yj,yj,[A.a]),l["ɵmpd"](4608,qE,qE,[d,VE]),l["ɵmpd"](4608,LE,LE,[ej,A.a,qE,VE]),l["ɵmpd"](4608,$E,$E,[d,Bt]),l["ɵmpd"](4608,HE,HE,[Q]),l["ɵmpd"](4608,BE,BE,[ej,A.a,Bt,$E,Qn,Mn,g.G,HE,ge]),l["ɵmpd"](4608,lR,lR,[Me]),l["ɵmpd"](4608,It,It,[]),l["ɵmpd"](4608,zx,zx,[It]),l["ɵmpd"](4608,yT,yT,[WI,Q]),l["ɵmpd"](4608,$T,$T,[A.a,l.Injector,ge,Qn]),l["ɵmpd"](4608,wO.c,wO.c,[[2,wO.d]]),l["ɵmpd"](4608,zE,zE,[Mn,V.c]),l["ɵmpd"](4608,l.NgModuleFactoryLoader,l.SystemJsNgModuleLoader,[l.Compiler,[2,l.SystemJsNgModuleLoaderConfig]]),l["ɵmpd"](4608,Kc,Kc,[rr.Title]),l["ɵmpd"](4608,Gc,Gc,[d,vn,Uc]),l["ɵmpd"](4608,vh,vh,[d,mh]),l["ɵmpd"](4608,Ds,Ds,[V.c,Q]),l["ɵmpd"](4608,dt,dt,[]),l["ɵmpd"](4608,Ph,Ph,[A.a,qn,Vn]),l["ɵmpd"](4608,is,is,[l.ComponentFactoryResolver,m.a,l.ApplicationRef,g.O,l.Injector]),l["ɵmpd"](4608,pm,pm,[Wn.b,l.Injector]),l["ɵmpd"](4608,$c,$c,[A.a,l.Injector,dt]),l["ɵmpd"](4608,Et,Et,[]),l["ɵmpd"](4608,jt.ModalWrapperAugmentService,jt.ModalWrapperAugmentService,[$t.DOCUMENT,l.Injector,Wn.b]),l["ɵmpd"](4608,Ft,Ft,[Wn.b,l.Injector]),l["ɵmpd"](1073742336,$t.CommonModule,$t.CommonModule,[]),l["ɵmpd"](512,A.a,A.a,[]),l["ɵmpd"](512,l.ErrorHandler,WE,[A.a]),l["ɵmpd"](512,ge,ge,[]),l["ɵmpd"](512,m.a,m.a,[]),l["ɵmpd"](512,Qn,Qn,[ge]),l["ɵmpd"](512,UE,UE,[ge,m.a,Qn]),l["ɵmpd"](512,$t.LocationStrategy,$t.PathLocationStrategy,[$t.PlatformLocation,[2,$t.APP_BASE_HREF]]),l["ɵmpd"](1024,GE.b,function(){return[{states:[{name:"root",url:"/{projects}/{projectPath}",component:ao,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}}],useHash:!1,config:ZE}]},[]),l["ɵmpd"](1024,GE.a,function(){return[{states:[{name:"root",url:"/{projects}/{projectPath}",component:ao,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}}],useHash:!1,config:ZE},{states:[{name:"boards",parent:"root",url:"/boards/?query_props",data:XE,params:{query_props:{type:"opQueryString",dynamic:!0}},redirectTo:"boards.list",component:KI},{name:"boards.list",component:ij,data:eD},{name:"boards.show",url:"{board_id}",params:{board_id:{type:"int"},isNew:{type:"bool",inherit:!1,dynamic:!0}},reloadOnSearch:!1,component:iR,data:nD}],config:tD},{states:[{name:"work-packages.calendar",url:"/calendar",component:QP,reloadOnSearch:!1,data:rD}]},{states:[{name:"work-packages",parent:"root",component:wy,url:"/work_packages?query_id&query_props&start_onboarding_tour",redirectTo:"work-packages.list",data:uD,params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"},start_onboarding_tour:{type:"query",squash:!0,value:void 0}}},{name:"work-packages.new",url:"/new?type&parent_id",component:aC,reloadOnSearch:!1,data:aD},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:yC,reloadOnSearch:!1,data:sD},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:oh,data:cD},{name:"work-packages.show.activity",url:"/activity",component:lf,data:dD},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:lf,data:pD},{name:"work-packages.show.relations",url:"/relations",component:Lb,data:hD},{name:"work-packages.show.watchers",url:"/watchers",component:Wb,data:fD},{name:"work-packages.list",url:"",component:$w,reloadOnSearch:!1,data:gD},{name:"work-packages.list.new",url:"/create_new?type&parent_id",component:hC,reloadOnSearch:!1,data:mD},{name:"work-packages.list.copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",component:jC,reloadOnSearch:!1,data:vD},{name:"work-packages.list.details",redirectTo:"work-packages.list.details.overview",url:"/details/{workPackageId:[0-9]+}",component:Zc,reloadOnSearch:!1,params:{focus:{dynamic:!0,value:!0}},data:bD},{name:"work-packages.list.details.overview",url:"/overview",component:ry,data:yD},{name:"work-packages.list.details.activity",url:"/activity",component:lf,data:wD},{name:"work-packages.list.details.activity.details",url:"/activity/details/#{activity_no:d+}",component:lf,data:CD},{name:"work-packages.list.details.relations",url:"/relations",component:Lb,data:kD},{name:"work-packages.list.details.watchers",url:"/watchers",component:Wb,data:ID}]},{states:[{name:"dashboards",parent:"root",url:"/dashboards/",data:jD,component:bT}],config:RD},{states:[{name:"overview",parent:"root",url:"/",data:SD,component:PT}],config:_D},{states:[{name:"my_page",url:"/my/page",component:DT,data:TD}]}]},[]),l["ɵmpd"](1024,g.P,FE.n,[$t.LocationStrategy,GE.b,GE.a,l.Injector]),l["ɵmpd"](1024,g.O,FE.h,[g.P]),l["ɵmpd"](512,V.n,V.n,[]),l["ɵmpd"](2048,V.l,null,[V.n]),l["ɵmpd"](512,V.j,V.j,[V.l]),l["ɵmpd"](2048,V.b,null,[V.j]),l["ɵmpd"](512,V.h,V.m,[V.b,l.Injector]),l["ɵmpd"](512,V.c,V.c,[V.h]),l["ɵmpd"](512,Q,Q,[l.Injector,V.c]),l["ɵmpd"](512,Ru,Ru,[]),l["ɵmpd"](512,Sa,Sa,[]),l["ɵmpd"](512,$a,$a,[]),l["ɵmpd"](1024,l.APP_INITIALIZER,function(e,n,t,l,i,r,o,u,a,c,d,p,h,f,g,m,v,b,y,w,C,k,I,j,R){return[rr["ɵangular_packages_platform_browser_platform_browser_j"](e),ED(n),(P=t,function(){var e=P.get(Qn),n=P.get(Zn),t=P.get(JE.StateService);window.ErrorReporter.addContext(function(l){n.isLoggedIn&&l.setUser({name:n.name,id:n.userId,email:n.mail}),e.inProjectContext&&l.setTag("project",e.identifier),l.setExtra("router state",t.current.name)}),P.get(It).register("openProjectAngularBootstrap",function(){return[zl]})}),FE.d(l),GE.h(i,r),ND(o),tF(u),jF(a,c),RF(d),_F(p),tF(h),jF(f,g),RF(m),TF.bootstrapAttributeGroups(v),lD(b),function(){},DF(w),NF(C),VF(k),zF(I),function(){window.OpenProject.getPluginContext().then(function(e){e.services.halResource.registerResource("Document",{cls:QF}),e.services.states.add("documents",Object(s.g)())})},Vt(R)];var P},[[2,l.NgProbeToken],UE,l.Injector,g.P,g.O,GE.b,l.Injector,Q,Ru,Sa,$a,$a,Q,Ru,Sa,$a,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector,l.Injector]),l["ɵmpd"](512,l.ApplicationInitStatus,l.ApplicationInitStatus,[[2,l.APP_INITIALIZER]]),l["ɵmpd"](131584,l.ApplicationRef,l.ApplicationRef,[l.NgZone,l["ɵConsole"],l.Injector,l.ErrorHandler,l.ComponentFactoryResolver,l.ApplicationInitStatus]),l["ɵmpd"](1073742336,l.ApplicationModule,l.ApplicationModule,[l.ApplicationRef]),l["ɵmpd"](1073742336,rr.BrowserModule,rr.BrowserModule,[[3,rr.BrowserModule]]),l["ɵmpd"](1073742336,GE.d,GE.d,[]),l["ɵmpd"](1073742336,Ht.r,Ht.r,[]),l["ɵmpd"](1073742336,Ht.e,Ht.e,[]),l["ɵmpd"](1073742336,f.d,f.d,[]),l["ɵmpd"](1073742336,kj.h,kj.h,[]),l["ɵmpd"](1073742336,DD,DD,[]),l["ɵmpd"](1073742336,Lt.c,Lt.c,[]),l["ɵmpd"](1073742336,LT.b,LT.b,[]),l["ɵmpd"](1073742336,fu.c,fu.c,[]),l["ɵmpd"](1073742336,FD,FD,[]),l["ɵmpd"](1073742336,AD,AD,[]),l["ɵmpd"](1073742336,V.e,V.e,[]),l["ɵmpd"](1073742336,V.d,V.d,[]),l["ɵmpd"](1073742336,lF,lF,[]),l["ɵmpd"](1073742336,GF,GF,[]),l["ɵmpd"](1073742336,KF,KF,[]),l["ɵmpd"](1073742336,PF,PF,[]),l["ɵmpd"](1073742336,Sd.NgxGalleryModule,Sd.NgxGalleryModule,[]),l["ɵmpd"](1073742336,xF,xF,[]),l["ɵmpd"](1073742336,YF,YF,[]),l["ɵmpd"](1073742336,TF,TF,[]),l["ɵmpd"](1073742336,jj.c,jj.c,[]),l["ɵmpd"](1073742336,iD,iD,[]),l["ɵmpd"](1073742336,CP.b,CP.b,[]),l["ɵmpd"](1073742336,OF,OF,[]),l["ɵmpd"](1073742336,MP.b,MP.b,[]),l["ɵmpd"](1073742336,oD,oD,[]),l["ɵmpd"](1073742336,EF,EF,[]),l["ɵmpd"](1073742336,ZF,ZF,[]),l["ɵmpd"](1073742336,PD,PD,[]),l["ɵmpd"](1073742336,xD,xD,[]),l["ɵmpd"](1073742336,OD,OD,[]),l["ɵmpd"](1073742336,JF,JF,[]),l["ɵmpd"](1073742336,wO.b,wO.b,[]),l["ɵmpd"](1073742336,XF,XF,[]),l["ɵmpd"](1073742336,AF,AF,[]),l["ɵmpd"](1073742336,MF,MF,[]),l["ɵmpd"](1073742336,WF,WF,[]),l["ɵmpd"](1073742336,UF,UF,[]),l["ɵmpd"](1073742336,eN,eN,[]),l["ɵmpd"](1073742336,At,At,[]),l["ɵmpd"](256,l["ɵAPP_ROOT"],!0,[]),l["ɵmpd"](256,Lt.d,Lt.e,[]),l["ɵmpd"](256,fu.e,fu.a,[]),l["ɵmpd"](1024,nN.a,function(){return[[{name:"root",url:"/{projects}/{projectPath}",component:ao,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}}],[{name:"boards",parent:"root",url:"/boards/?query_props",data:XE,params:{query_props:{type:"opQueryString",dynamic:!0}},redirectTo:"boards.list",component:KI},{name:"boards.list",component:ij,data:eD},{name:"boards.show",url:"{board_id}",params:{board_id:{type:"int"},isNew:{type:"bool",inherit:!1,dynamic:!0}},reloadOnSearch:!1,component:iR,data:nD}],[{name:"work-packages.calendar",url:"/calendar",component:QP,reloadOnSearch:!1,data:rD}],[{name:"work-packages",parent:"root",component:wy,url:"/work_packages?query_id&query_props&start_onboarding_tour",redirectTo:"work-packages.list",data:uD,params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"},start_onboarding_tour:{type:"query",squash:!0,value:void 0}}},{name:"work-packages.new",url:"/new?type&parent_id",component:aC,reloadOnSearch:!1,data:aD},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:yC,reloadOnSearch:!1,data:sD},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:oh,data:cD},{name:"work-packages.show.activity",url:"/activity",component:lf,data:dD},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:lf,data:pD},{name:"work-packages.show.relations",url:"/relations",component:Lb,data:hD},{name:"work-packages.show.watchers",url:"/watchers",component:Wb,data:fD},{name:"work-packages.list",url:"",component:$w,reloadOnSearch:!1,data:gD},{name:"work-packages.list.new",url:"/create_new?type&parent_id",component:hC,reloadOnSearch:!1,data:mD},{name:"work-packages.list.copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",component:jC,reloadOnSearch:!1,data:vD},{name:"work-packages.list.details",redirectTo:"work-packages.list.details.overview",url:"/details/{workPackageId:[0-9]+}",component:Zc,reloadOnSearch:!1,params:{focus:{dynamic:!0,value:!0}},data:bD},{name:"work-packages.list.details.overview",url:"/overview",component:ry,data:yD},{name:"work-packages.list.details.activity",url:"/activity",component:lf,data:wD},{name:"work-packages.list.details.activity.details",url:"/activity/details/#{activity_no:d+}",component:lf,data:CD},{name:"work-packages.list.details.relations",url:"/relations",component:Lb,data:kD},{name:"work-packages.list.details.watchers",url:"/watchers",component:Wb,data:ID}],[{name:"dashboards",parent:"root",url:"/dashboards/",data:jD,component:bT}],[{name:"overview",parent:"root",url:"/",data:SD,component:PT}],[{name:"my_page",url:"/my/page",component:DT,data:TD}]]},[]),l["ɵmpd"](256,V.o,"XSRF-TOKEN",[]),l["ɵmpd"](256,V.p,"X-XSRF-TOKEN",[]),l["ɵmpd"](256,d,Nt,[])])});window.global=window,window.ErrorReporter=new u,t("FUyZ"),t("buKu"),r.a.production&&Object(l.enableProdMode)(),i(function(){rr.platformBrowser().bootstrapModuleFactory(tN).then(function(e){i("body").addClass("__ng2-bootstrap-has-run")})})}},[[0,4,13]]]);
//# sourceMappingURL=main.ba1a3e126f609c5276ce.js.map